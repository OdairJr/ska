"use strict";(self.webpackChunkska=self.webpackChunkska||[]).push([[179],{8697:(Lt,We,O)=>{O.d(We,{nm:()=>Un});var y=O(8186);O(5879),O(3182);var Ue,Vt,En,cr,rr,ke=O(5861),Le=O(534),Te=O(4537),Be=O(9058),Ke=O(7879);const we=new Map,Fe={activated:!1,tokenObservers:[]},He={initialized:!1,enabled:!1};function xe(be){return we.get(be)||Object.assign({},Fe)}function pt(){return He}const bt="https://content-firebaseappcheck.googleapis.com/v1",Xt="exchangeDebugToken",yn={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class wn{constructor(Ce,Ye,ct,et,kt){if(this.operation=Ce,this.retryPolicy=Ye,this.getWaitDuration=ct,this.lowerBound=et,this.upperBound=kt,this.pending=null,this.nextErrorWaitInterval=et,et>kt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ce){var Ye=this;return(0,ke.Z)(function*(){Ye.stop();try{Ye.pending=new Be.BH,yield function qn(be){return new Promise(Ce=>{setTimeout(Ce,be)})}(Ye.getNextRun(Ce)),Ye.pending.resolve(),yield Ye.pending.promise,Ye.pending=new Be.BH,yield Ye.operation(),Ye.pending.resolve(),yield Ye.pending.promise,Ye.process(!0).catch(()=>{})}catch(ct){Ye.retryPolicy(ct)?Ye.process(!1).catch(()=>{}):Ye.stop()}})()}getNextRun(Ce){if(Ce)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ye=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ye}}}const rn=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Sr(be){if(!xe(be).activated)throw rn.create("use-before-activation",{appName:be.name})}function xr(be,Ce){return(Ue=Ue||(0,ke.Z)(function*({url:Ye,body:ct},et){const kt={"Content-Type":"application/json"},cn=et.getImmediate({optional:!0});if(cn){const fr=yield cn.getHeartbeatsHeader();fr&&(kt["X-Firebase-Client"]=fr)}const Rr={method:"POST",body:JSON.stringify(ct),headers:kt};let er,$n;try{er=yield fetch(Ye,Rr)}catch(fr){throw rn.create("fetch-network-error",{originalErrorMessage:fr?.message})}if(200!==er.status)throw rn.create("fetch-status-error",{httpStatus:er.status});try{$n=yield er.json()}catch(fr){throw rn.create("fetch-parse-error",{originalErrorMessage:fr?.message})}const yi=$n.ttl.match(/^([\d.]+)(s)$/);if(!yi||!yi[2]||isNaN(Number(yi[1])))throw rn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${$n.ttl}`});const Ci=1e3*Number(yi[1]),yo=Date.now();return{token:$n.token,expireTimeMillis:yo+Ci,issuedAtTimeMillis:yo}})).apply(this,arguments)}function Jt(be,Ce){const{projectId:Ye,appId:ct,apiKey:et}=be.options;return{url:`${bt}/projects/${Ye}/apps/${ct}:${Xt}?key=${et}`,body:{debug_token:Ce}}}const Qt="firebase-app-check-database",sn=1,Gn="firebase-app-check-store";let Ir=null;function xn(be,Ce){return(Vt=Vt||(0,ke.Z)(function*(Ye,ct){const kt=(yield function Mn(){return Ir||(Ir=new Promise((be,Ce)=>{try{const Ye=indexedDB.open(Qt,sn);Ye.onsuccess=ct=>{be(ct.target.result)},Ye.onerror=ct=>{var et;Ce(rn.create("storage-open",{originalErrorMessage:null===(et=ct.target.error)||void 0===et?void 0:et.message}))},Ye.onupgradeneeded=ct=>{0===ct.oldVersion&&ct.target.result.createObjectStore(Gn,{keyPath:"compositeKey"})}}catch(Ye){Ce(rn.create("storage-open",{originalErrorMessage:Ye?.message}))}}),Ir)}()).transaction(Gn,"readwrite"),Rr=kt.objectStore(Gn).put({compositeKey:Ye,value:ct});return new Promise((er,$n)=>{Rr.onsuccess=yi=>{er()},kt.onerror=yi=>{var Ci;$n(rn.create("storage-set",{originalErrorMessage:null===(Ci=yi.target.error)||void 0===Ci?void 0:Ci.message}))}})})).apply(this,arguments)}const Ln=new Ke.Yd("@firebase/app-check");function Ar(be,Ce){return(0,Be.hl)()?function Hi(be,Ce){return xn(function On(be){return`${be.options.appId}-${be.name}`}(be),Ce)}(be,Ce).catch(Ye=>{Ln.warn(`Failed to write token to IndexedDB. Error: ${Ye}`)}):Promise.resolve()}function Hr(){return pt().enabled}function Zr(){return(En=En||(0,ke.Z)(function*(){const be=pt();if(be.enabled&&be.token)return be.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const di={error:"UNKNOWN_ERROR"};function gi(be){return Be.US.encodeString(JSON.stringify(be),!1)}function Li(be){return(cr=cr||(0,ke.Z)(function*(Ce,Ye=!1){const ct=Ce.app;Sr(ct);const et=xe(ct);let cn,kt=et.token;if(kt&&!Ve(kt)&&(et.token=void 0,kt=void 0),!kt){const $n=yield et.cachedTokenPromise;$n&&(Ve($n)?kt=$n:yield Ar(ct,void 0))}if(!Ye&&kt&&Ve(kt))return{token:kt.token};let er,Rr=!1;if(Hr()){et.exchangeTokenPromise||(et.exchangeTokenPromise=xr(Jt(ct,yield Zr()),Ce.heartbeatServiceProvider).finally(()=>{et.exchangeTokenPromise=void 0}),Rr=!0);const $n=yield et.exchangeTokenPromise;return yield Ar(ct,$n),et.token=$n,{token:$n.token}}try{et.exchangeTokenPromise||(et.exchangeTokenPromise=et.provider.getToken().finally(()=>{et.exchangeTokenPromise=void 0}),Rr=!0),kt=yield xe(ct).exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?Ln.warn($n.message):Ln.error($n),cn=$n}return kt?cn?er=Ve(kt)?{token:kt.token,internalError:cn}:ht(cn):(er={token:kt.token},et.token=kt,yield Ar(ct,kt)):er=ht(cn),Rr&&function Ee(be,Ce){const Ye=xe(be).tokenObservers;for(const ct of Ye)try{"EXTERNAL"===ct.type&&null!=Ce.error?ct.error(Ce.error):ct.next(Ce)}catch{}}(ct,er),er})).apply(this,arguments)}function $(be,Ce){const Ye=xe(be),ct=Ye.tokenObservers.filter(et=>et.next!==Ce);0===ct.length&&Ye.tokenRefresher&&Ye.tokenRefresher.isRunning()&&Ye.tokenRefresher.stop(),Ye.tokenObservers=ct}function oe(be){const{app:Ce}=be,Ye=xe(Ce);let ct=Ye.tokenRefresher;ct||(ct=function K(be){const{app:Ce}=be;return new wn((0,ke.Z)(function*(){let ct;if(ct=xe(Ce).token?yield Li(be,!0):yield Li(be),ct.error)throw ct.error;if(ct.internalError)throw ct.internalError}),()=>!0,()=>{const Ye=xe(Ce);if(Ye.token){let ct=Ye.token.issuedAtTimeMillis+.5*(Ye.token.expireTimeMillis-Ye.token.issuedAtTimeMillis)+3e5;return ct=Math.min(ct,Ye.token.expireTimeMillis-3e5),Math.max(0,ct-Date.now())}return 0},yn.RETRIAL_MIN_WAIT,yn.RETRIAL_MAX_WAIT)}(be),Ye.tokenRefresher=ct),!ct.isRunning()&&Ye.isTokenAutoRefreshEnabled&&ct.start()}function Ve(be){return be.expireTimeMillis-Date.now()>0}function ht(be){return{token:gi(di),error:be}}class Gt{constructor(Ce,Ye){this.app=Ce,this.heartbeatServiceProvider=Ye}_delete(){const{tokenObservers:Ce}=xe(this.app);for(const Ye of Ce)$(this.app,Ye.next);return Promise.resolve()}}const zi="app-check-internal";!function Ds(){(0,Le._registerComponent)(new Te.wA("app-check",be=>function _t(be,Ce){return new Gt(be,Ce)}(be.getProvider("app").getImmediate(),be.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((be,Ce,Ye)=>{be.getProvider(zi).initialize()})),(0,Le._registerComponent)(new Te.wA(zi,be=>function nn(be){return{getToken:Ce=>Li(be,Ce),getLimitedUseToken:()=>function ye(be){return(rr=rr||(0,ke.Z)(function*(Ce){const Ye=Ce.app;Sr(Ye);const{provider:ct}=xe(Ye);if(Hr()){const et=yield Zr(),{token:kt}=yield xr(Jt(Ye,et),Ce.heartbeatServiceProvider);return{token:kt}}{const{token:et}=yield ct.getToken();return{token:et}}})).apply(this,arguments)}(be),addTokenListener:Ce=>function G(be,Ce,Ye,ct){const{app:et}=be,kt=xe(et);if(kt.tokenObservers=[...kt.tokenObservers,{next:Ye,error:ct,type:Ce}],kt.token&&Ve(kt.token)){const Rr=kt.token;Promise.resolve().then(()=>{Ye({token:Rr.token}),oe(be)}).catch(()=>{})}kt.cachedTokenPromise.then(()=>oe(be))}(be,"INTERNAL",Ce),removeTokenListener:Ce=>$(be.app,Ce)}}(be.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)("@firebase/app-check","0.8.0")}();class Un{constructor(){return(0,y.vb)("app-check")}}typeof window<"u"&&window},6796:(Lt,We,O)=>{O.d(We,{zQ:()=>cr,ww:()=>rr,rT:()=>It,f7:()=>Nn,L6:()=>Ue,_Q:()=>Vt,lh:()=>un,Qv:()=>Ke,nw:()=>En});var y=O(5879),ue=O(8645),z=O(2096),ve=O(5592),me=O(2459),ge=O(3019),Se=O(3093),Ge=O(4664),Me=O(7398),te=O(4552);class Q extends ue.x{constructor(mn=1/0,we=1/0,Fe=te.l){super(),this._bufferSize=mn,this._windowTime=we,this._timestampProvider=Fe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=we===1/0,this._bufferSize=Math.max(1,mn),this._windowTime=Math.max(1,we)}next(mn){const{isStopped:we,_buffer:Fe,_infiniteTimeWindow:He,_timestampProvider:xe,_windowTime:it}=this;we||(Fe.push(mn),!He&&Fe.push(xe.now()+it)),this._trimBuffer(),super.next(mn)}_subscribe(mn){this._throwIfClosed(),this._trimBuffer();const we=this._innerSubscribe(mn),{_infiniteTimeWindow:Fe,_buffer:He}=this,xe=He.slice();for(let it=0;it<xe.length&&!mn.closed;it+=Fe?1:2)mn.next(xe[it]);return this._checkFinalizedStatuses(mn),we}_trimBuffer(){const{_bufferSize:mn,_timestampProvider:we,_buffer:Fe,_infiniteTimeWindow:He}=this,xe=(He?1:2)*mn;if(mn<1/0&&xe<Fe.length&&Fe.splice(0,Fe.length-xe),!He){const it=we.now();let pt=0;for(let bt=1;bt<Fe.length&&Fe[bt]<=it;bt+=2)pt=bt;pt&&Fe.splice(0,pt+1)}}}var De=O(3020);function nt(In,mn,we){let Fe,He=!1;return In&&"object"==typeof In?({bufferSize:Fe=1/0,windowTime:mn=1/0,refCount:He=!1,scheduler:we}=In):Fe=In??1/0,(0,De.B)({connector:()=>new Q(Fe,mn,we),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:He})}var ut=O(1374),Et=O(4674);function st(In,mn){return(0,Et.m)(mn)?(0,Ge.w)(()=>In,mn):(0,Ge.w)(()=>In)}var Tt=O(5137),gt=O(2181),Oe=O(8186),Ot=O(6304),ke=O(6814),Le=O(8697),Te=O(7142);const Ke=new y.OlP("angularfire2.auth.use-emulator"),Ue=new y.OlP("angularfire2.auth.settings"),Vt=new y.OlP("angularfire2.auth.tenant-id"),It=new y.OlP("angularfire2.auth.langugage-code"),un=new y.OlP("angularfire2.auth.use-device-language"),Nn=new y.OlP("angularfire.auth.persistence"),En=(In,mn,we,Fe,He,xe,it,pt)=>(0,Ot.cc)(`${In.name}.auth`,"AngularFireAuth",In.name,()=>{const bt=mn.runOutsideAngular(()=>In.auth());if(we&&bt.useEmulator(...we),Fe&&(bt.tenantId=Fe),bt.languageCode=He,xe&&bt.useDeviceLanguage(),it)for(const[Ct,Cn]of Object.entries(it))bt.settings[Ct]=Cn;return pt&&bt.setPersistence(pt),bt},[we,Fe,He,xe,it,pt]);let cr=(()=>{class In{constructor(we,Fe,He,xe,it,pt,bt,Ct,Cn,Xt,yn,$t){const wn=new ue.x,qn=(0,z.of)(void 0).pipe((0,Se.Q)(it.outsideAngular),(0,Ge.w)(()=>xe.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5967)))),(0,Me.U)(()=>(0,Ot.on)(we,xe,Fe)),(0,Me.U)(lr=>En(lr,xe,pt,Ct,Cn,Xt,bt,yn)),nt({bufferSize:1,refCount:!1}));if((0,ke.PM)(He))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,z.of)(null);else{qn.pipe((0,ut.P)()).subscribe();const rn=qn.pipe((0,Ge.w)(Vn=>Vn.getRedirectResult().then(Qn=>Qn,()=>null)),Oe.iC,nt({bufferSize:1,refCount:!1})),Ft=qn.pipe((0,Ge.w)(Vn=>new ve.y(Qn=>({unsubscribe:xe.runOutsideAngular(()=>Vn.onAuthStateChanged(xr=>Qn.next(xr),xr=>Qn.error(xr),()=>Qn.complete()))})))),Sr=qn.pipe((0,Ge.w)(Vn=>new ve.y(Qn=>({unsubscribe:xe.runOutsideAngular(()=>Vn.onIdTokenChanged(xr=>Qn.next(xr),xr=>Qn.error(xr),()=>Qn.complete()))}))));this.authState=rn.pipe(st(Ft),(0,Tt.R)(it.outsideAngular),(0,Se.Q)(it.insideAngular)),this.user=rn.pipe(st(Sr),(0,Tt.R)(it.outsideAngular),(0,Se.Q)(it.insideAngular)),this.idToken=this.user.pipe((0,Ge.w)(Vn=>Vn?(0,me.D)(Vn.getIdToken()):(0,z.of)(null))),this.idTokenResult=this.user.pipe((0,Ge.w)(Vn=>Vn?(0,me.D)(Vn.getIdTokenResult()):(0,z.of)(null))),this.credential=(0,ge.T)(rn,wn,this.authState.pipe((0,gt.h)(Vn=>!Vn))).pipe((0,Me.U)(Vn=>Vn?.user?Vn:null),(0,Tt.R)(it.outsideAngular),(0,Se.Q)(it.insideAngular))}return(0,Ot.pX)(this,qn,xe,{spy:{apply:(lr,rn,Ft)=>{(lr.startsWith("signIn")||lr.startsWith("createUser"))&&Ft.then(Sr=>wn.next(Sr))}}})}}return In.\u0275fac=function(we){return new(we||In)(y.LFG(Ot.Dh),y.LFG(Ot.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Oe.HU),y.LFG(Ke,8),y.LFG(Ue,8),y.LFG(Vt,8),y.LFG(It,8),y.LFG(un,8),y.LFG(Nn,8),y.LFG(Le.nm,8))},In.\u0275prov=y.Yz7({token:In,factory:In.\u0275fac,providedIn:"any"}),In})(),rr=(()=>{class In{constructor(){Te.Z.registerVersion("angularfire",Oe.q4.full,"auth-compat")}}return In.\u0275fac=function(we){return new(we||In)},In.\u0275mod=y.oAB({type:In}),In.\u0275inj=y.cJS({providers:[cr]}),In})()},8330:(Lt,We,O)=>{O.d(We,{ST:()=>zm,yb:()=>e_});var y=O(5879),ue=O(6321),z=O(5592),ve=O(2459),me=O(2096),ge=O(8186),Se=O(7921),Ge=O(9360),Me=O(8251);function te(){return(0,Ge.e)((i,e)=>{let n,s=!1;i.subscribe((0,Me.x)(e,u=>{const l=n;n=u,s&&e.next([l,u]),s=!0}))})}var Ue,Q=O(7398),De=O(6699),nt=O(3997),ut=O(2181),Et=O(6304),st=O(6814),gt=(O(5967),O(3106)),Oe=O(5861),Ot=O(534),ke=O(4537),Le=O(7879),Te=O(9058),Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ke={},Vt=Vt||{},It=Be||self;function un(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Nn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var cr="closure_uid_"+(1e9*Math.random()>>>0),rr=0;function In(i,e,n){return i.call.apply(i.bind,arguments)}function mn(i,e,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function we(i,e,n){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?In:mn).apply(null,arguments)}function Fe(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function He(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(s,u,l){for(var p=Array(arguments.length-2),w=2;w<arguments.length;w++)p[w-2]=arguments[w];return e.prototype[u].apply(s,p)}}function xe(){this.s=this.s,this.o=this.o}xe.prototype.s=!1,xe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function En(i){Object.prototype.hasOwnProperty.call(i,cr)&&i[cr]||(i[cr]=++rr)}(this)},xe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function bt(i){const e=i.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=i[s];return n}return[]}function Ct(i,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(un(s)){const u=i.length||0,l=s.length||0;i.length=u+l;for(let p=0;p<l;p++)i[u+p]=s[p]}else i.push(s)}}function Cn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Cn.prototype.h=function(){this.defaultPrevented=!0};var Xt=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return i}();function yn(i){return/^[\s\xa0]*$/.test(i)}function $t(){var i=It.navigator;return i&&(i=i.userAgent)?i:""}function wn(i){return-1!=$t().indexOf(i)}function qn(i){return qn[" "](i),i}qn[" "]=function(){};var zn,i,rn=wn("Opera"),Ft=wn("Trident")||wn("MSIE"),Sr=wn("Edge"),Vn=Sr||Ft,Qn=wn("Gecko")&&!(-1!=$t().toLowerCase().indexOf("webkit")&&!wn("Edge"))&&!(wn("Trident")||wn("MSIE"))&&!wn("Edge"),xr=-1!=$t().toLowerCase().indexOf("webkit")&&!wn("Edge");function pi(){var i=It.document;return i?i.documentMode:void 0}e:{var Jt="",Qt=(i=$t(),Qn?/rv:([^\);]+)(\)|;)/.exec(i):Sr?/Edge\/([\d\.]+)/.exec(i):Ft?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):xr?/WebKit\/(\S+)/.exec(i):rn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Qt&&(Jt=Qt?Qt[1]:""),Ft){var sn=pi();if(null!=sn&&sn>parseFloat(Jt)){zn=String(sn);break e}}zn=Jt}var Ir=It.document&&Ft&&(pi()||parseInt(zn,10))||void 0;function Mn(i,e){if(Cn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Qn){e:{try{qn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Nr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Mn.$.h.call(this)}}He(Mn,Cn);var Nr={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Hi="closure_listenable_"+(1e6*Math.random()|0),jn=0;function Xi(i,e,n,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=u,this.key=++jn,this.fa=this.ia=!1}function xn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function si(i,e,n){for(const s in i)e.call(n,i[s],s,i)}function Ln(i){const e={};for(const n in i)e[n]=i[n];return e}const ki="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ar(i,e){let n,s;for(let u=1;u<arguments.length;u++){for(n in s=arguments[u],s)i[n]=s[n];for(let l=0;l<ki.length;l++)n=ki[l],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function qr(i){this.src=i,this.g={},this.h=0}function Hr(i,e){var n=e.type;if(n in i.g){var l,s=i.g[n],u=pt(s,e);(l=0<=u)&&Array.prototype.splice.call(s,u,1),l&&(xn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Zr(i,e,n,s){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==s)return u}return-1}qr.prototype.add=function(i,e,n,s,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var p=Zr(i,e,s,u);return-1<p?(e=i[p],n||(e.ia=!1)):((e=new Xi(e,this.src,l,!!s,u)).ia=n,i.push(e)),e};var oi="closure_lm_"+(1e6*Math.random()|0),di={};function gi(i,e,n,s,u){if(s&&s.once)return G(i,e,n,s,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)gi(i,e[l],n,s,u);return null}return n=Gt(n),i&&i[Hi]?i.O(e,n,Nn(s)?!!s.capture:!!s,u):Li(i,e,n,!1,s,u)}function Li(i,e,n,s,u,l){if(!e)throw Error("Invalid event type");var p=Nn(u)?!!u.capture:!!u,w=Ve(i);if(w||(i[oi]=w=new qr(i)),(n=w.add(e,n,s,p,l)).proxy)return n;if(s=function ye(){const e=Ee;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)Xt||(u=p),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(K(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return n}function G(i,e,n,s,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)G(i,e[l],n,s,u);return null}return n=Gt(n),i&&i[Hi]?i.P(e,n,Nn(s)?!!s.capture:!!s,u):Li(i,e,n,!0,s,u)}function $(i,e,n,s,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)$(i,e[l],n,s,u);else s=Nn(s)?!!s.capture:!!s,n=Gt(n),i&&i[Hi]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Zr(l=i.g[e],n,s,u))&&(xn(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=Ve(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Zr(e,n,s,u)),(n=-1<i?e[i]:null)&&oe(n))}function oe(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Hi])Hr(e.i,i);else{var n=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(n,s,i.capture):e.detachEvent?e.detachEvent(K(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Ve(e))?(Hr(n,i),0==n.h&&(n.src=null,e[oi]=null)):xn(i)}}}function K(i){return i in di?di[i]:di[i]="on"+i}function Ee(i,e){if(i.fa)i=!0;else{e=new Mn(e,this);var n=i.listener,s=i.la||i.src;i.ia&&oe(i),i=n.call(s,e)}return i}function Ve(i){return(i=i[oi])instanceof qr?i:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gt(i){return"function"==typeof i?i:(i[ht]||(i[ht]=function(e){return i.handleEvent(e)}),i[ht])}function _t(){xe.call(this),this.i=new qr(this),this.S=this,this.J=null}function nn(i,e){var n,s=i.J;if(s)for(n=[];s;s=s.J)n.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new Cn(e,i);else if(e instanceof Cn)e.target=e.target||i;else{var u=e;Ar(e=new Cn(s,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var p=e.g=n[l];u=Yt(p,s,!0,e)&&u}if(u=Yt(p=e.g=i,s,!0,e)&&u,u=Yt(p,s,!1,e)&&u,n)for(l=0;l<n.length;l++)u=Yt(p=e.g=n[l],s,!1,e)&&u}function Yt(i,e,n,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==n){var w=p.listener,A=p.la||p.src;p.ia&&Hr(i.i,p),u=!1!==w.call(A,s)&&u}}return u&&!s.defaultPrevented}He(_t,xe),_t.prototype[Hi]=!0,_t.prototype.removeEventListener=function(i,e,n,s){$(this,i,e,n,s)},_t.prototype.N=function(){if(_t.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],s=0;s<n.length;s++)xn(n[s]);delete i.g[e],i.h--}}this.J=null},_t.prototype.O=function(i,e,n,s){return this.i.add(String(i),e,!1,n,s)},_t.prototype.P=function(i,e,n,s){return this.i.add(String(i),e,!0,n,s)};var Xn=It.JSON.stringify;function le(){var i=St;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var re=new class Ne{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new fe,i=>i.reset());class fe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Re(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function tt(i){It.setTimeout(()=>{throw i},0)}let qe,Dt=!1,St=new class Xe{constructor(){this.h=this.g=null}add(e,n){const s=re.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}},Jn=()=>{const i=It.Promise.resolve(void 0);qe=()=>{i.then(Pn)}};var Pn=()=>{for(var i;i=le();){try{i.h.call(i.g)}catch(n){tt(n)}var e=re;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Dt=!1};function bn(i,e){_t.call(this),this.h=i||1,this.g=e||It,this.j=we(this.qb,this),this.l=Date.now()}function dt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ur(i,e,n){if("function"==typeof i)n&&(i=we(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=we(i.handleEvent,i)}return 2147483647<Number(e)?-1:It.setTimeout(i,e||0)}function Lr(i){i.g=Ur(()=>{i.g=null,i.i&&(i.i=!1,Lr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}He(bn,_t),(Ue=bn.prototype).ga=!1,Ue.T=null,Ue.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nn(this,"tick"),this.ga&&(dt(this),this.start()))}},Ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ue.N=function(){bn.$.N.call(this),dt(this),delete this.g};class dr extends xe{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lr(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(i){xe.call(this),this.h=i,this.g={}}He(ir,xe);var Ji=[];function ws(i,e,n,s){Array.isArray(n)||(n&&(Ji[0]=n.toString()),n=Ji);for(var u=0;u<n.length;u++){var l=gi(e,n[u],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function ai(i){si(i.g,function(e,n){this.g.hasOwnProperty(n)&&oe(e)},i),i.g={}}function mi(){this.g=!0}function Ts(i,e,n,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Un(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<u.length;p++)u[p]=""}}}return Xn(n)}catch{return e}}(i,n)+(s?" "+s:"")})}ir.prototype.N=function(){ir.$.N.call(this),ai(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mi.prototype.Ea=function(){this.g=!1},mi.prototype.info=function(){};var sr={},as=null;function Zn(){return as=as||new _t}function Xs(i){Cn.call(this,sr.Ta,i)}function es(i){const e=Zn();nn(e,new Xs(e))}function Fi(i,e){Cn.call(this,sr.STAT_EVENT,i),this.stat=e}function Yr(i){const e=Zn();nn(e,new Fi(e,i))}function Oo(i,e){Cn.call(this,sr.Ua,i),this.size=e}function go(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){i()},e)}sr.Ta="serverreachability",He(Xs,Cn),sr.STAT_EVENT="statevent",He(Fi,Cn),sr.Ua="timingevent",He(Oo,Cn);var yr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ko={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qo(){}function mo(){}qo.prototype.h=null;var Ye,Ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function be(){Cn.call(this,"d")}function Ce(){Cn.call(this,"c")}function ct(){}function et(i,e,n,s){this.l=i,this.j=e,this.m=n,this.W=s||1,this.U=new ir(this),this.P=cn,this.V=new bn(i=Vn?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kt}function kt(){this.i=null,this.g="",this.h=!1}He(be,Cn),He(Ce,Cn),He(ct,qo),ct.prototype.g=function(){return new XMLHttpRequest},ct.prototype.i=function(){return{}},Ye=new ct;var cn=45e3,Rr={},er={};function $n(i,e,n){i.L=1,i.v=ao(_i(e)),i.s=n,i.S=!0,yi(i,null)}function yi(i,e){i.G=Date.now(),wr(i),i.A=_i(i.v);var n=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),Io(n.i,"t",s),i.C=0,n=i.l.J,i.h=new kt,i.g=Vo(i.l,n?e:null,!i.s),0<i.O&&(i.M=new dr(we(i.Pa,i,i.g),i.O)),ws(i.U,i.g,"readystatechange",i.nb),e=i.I?Ln(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),es(),function zi(i,e,n,s,u,l){i.info(function(){if(i.g)if(l)for(var p="",w=l.split("&"),A=0;A<w.length;A++){var U=w[A].split("=");if(1<U.length){var W=U[0];U=U[1];var ne=W.split("_");p=2<=ne.length&&"type"==ne[1]?p+(W+"=")+U+"&":p+(W+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+n+"\n"+p})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Ci(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function yo(i,e,n){let u,s=!0;for(;!i.J&&i.C<n.length;){if(u=fr(i,n),u==er){4==e&&(i.o=4,Yr(14),s=!1),Ts(i.j,i.m,null,"[Incomplete Response]");break}if(u==Rr){i.o=4,Yr(15),Ts(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}Ts(i.j,i.m,u,null),Cs(i,u)}Ci(i)&&u!=er&&u!=Rr&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Yr(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bo(e),e.M=!0,Yr(11))):(Ts(i.j,i.m,n,"[Invalid Chunked Response]"),Fr(i),hr(i))}function fr(i,e){var n=i.C,s=e.indexOf("\n",n);return-1==s?er:(n=Number(e.substring(n,s)),isNaN(n)?Rr:(s+=1)+n>e.length?er:(e=e.slice(s,s+n),i.C=s+n,e))}function wr(i){i.Y=Date.now()+i.P,Nt(i,i.P)}function Nt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=go(we(i.lb,i),e)}function ln(i){i.B&&(It.clearTimeout(i.B),i.B=null)}function hr(i){0==i.l.H||i.J||To(i.l,i)}function Fr(i){ln(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,dt(i.V),ai(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Cs(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||ks(n.i,i)))if(!i.K&&ks(n.i,i)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Do(n),Gr(n)}Oa(n),Yr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=go(we(n.ib,n),6e3));if(1>=ts(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Qo(n,11)}else if((i.K||n.g==i)&&Do(n),!yn(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let U=u[e];if(n.V=U[0],U=U[1],2==n.H)if("c"==U[0]){n.K=U[1],n.pa=U[2];const W=U[3];null!=W&&(n.ra=W,n.l.info("VER="+n.ra));const ne=U[4];null!=ne&&(n.Ga=ne,n.l.info("SVER="+n.Ga));const Pe=U[5];null!=Pe&&"number"==typeof Pe&&0<Pe&&(n.L=s=1.5*Pe,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const ze=i.g;if(ze){const vt=ze.g?ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vt){var l=s.i;l.g||-1==vt.indexOf("spdy")&&-1==vt.indexOf("quic")&&-1==vt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Si(l,l.h),l.h=null))}if(s.F){const xt=ze.g?ze.g.getResponseHeader("X-HTTP-Session-Id"):null;xt&&(s.Da=xt,Dr(s.I,s.F,xt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var p=i;if((s=n).wa=Co(s,s.J?s.pa:null,s.Y),p.K){gs(s.i,p);var w=p,A=s.L;A&&w.setTimeout(A),w.B&&(ln(w),wr(w)),s.g=p}else Ss(s);0<n.j.length&&bs(n)}else"stop"!=U[0]&&"close"!=U[0]||Qo(n,7);else 3==n.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?Qo(n,7):Or(n):"noop"!=U[0]&&n.h&&n.h.Aa(U),n.A=0)}es()}catch{}}function zr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(un(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function xs(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(un(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const s in i)e[n++]=s;return e}}}(i),s=function vi(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(un(i)){for(var e=[],n=i.length,s=0;s<n;s++)e.push(i[s]);return e}for(s in e=[],n=0,i)e[n++]=i[s];return e}(i),u=s.length,l=0;l<u;l++)e.call(void 0,s[l],n&&n[l],i)}(Ue=et.prototype).setTimeout=function(i){this.P=i},Ue.nb=function(i){i=i.target;const e=this.M;e&&3==Sn(i)?e.l():this.Pa(i)},Ue.Pa=function(i){try{if(i==this.g)e:{const W=Sn(this.g);var e=this.g.Ia();if(this.g.da(),!(3>W)&&(3!=W||Vn||this.g&&(this.h.h||this.g.ja()||gr(this.g)))){this.J||4!=W||7==e||es(),ln(this);var n=this.g.da();this.ca=n;t:if(Ci(this)){var s=gr(this.g);i="";var u=s.length,l=4==Sn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),hr(this);var p="";break t}this.h.i=new It.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:l&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==n,function Ds(i,e,n,s,u,l,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.W,W,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var w,A=this.g;if((w=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yn(w)){var U=w;break t}}U=null}if(!(n=U)){this.i=!1,this.o=3,Yr(12),Fr(this),hr(this);break e}Ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cs(this,n)}this.S?(yo(this,W,p),Vn&&this.i&&3==W&&(ws(this.U,this.V,"tick",this.mb),this.V.start())):(Ts(this.j,this.m,p,null),Cs(this,p)),4==W&&Fr(this),this.i&&!this.J&&(4==W?To(this.l,this):(this.i=!1,wr(this)))}else(function Xr(i){const e={};i=(i.g&&2<=Sn(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(yn(i[s]))continue;var n=Re(i[s]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function On(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(s){return s.join(", ")})})(this.g),400==n&&0<p.indexOf("Unknown SID")?(this.o=3,Yr(12)):(this.o=0,Yr(13)),Fr(this),hr(this)}}}catch{}},Ue.mb=function(){if(this.g){var i=Sn(this.g),e=this.g.ja();this.C<e.length&&(ln(this),yo(this,i,e),this.i&&4!=i&&wr(this))}},Ue.cancel=function(){this.J=!0,Fr(this)},Ue.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Po(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(es(),Yr(17)),Fr(this),this.o=2,hr(this)):Nt(this,this.Y-i)};var Mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof dn){this.h=i.h,Js(this,i.j),this.s=i.s,this.g=i.g,Gi(this,i.m),this.l=i.l;var e=i.i,n=new ko;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Qr(this,n),this.o=i.o}else i&&(e=String(i).match(Mi))?(this.h=!1,Js(this,e[1]||"",!0),this.s=Ei(e[2]||""),this.g=Ei(e[3]||"",!0),Gi(this,e[4]),this.l=Ei(e[5]||"",!0),Qr(this,e[6]||"",!0),this.o=Ei(e[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}function _i(i){return new dn(i)}function Js(i,e,n){i.j=n?Ei(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Gi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Qr(i,e,n){e instanceof ko?(i.i=e,function uo(i,e){e&&!i.j&&(Os(i),i.i=null,i.g.forEach(function(n,s){var u=s.toLowerCase();s!=u&&(Lo(this,s),Io(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=eo(e,Eo)),i.i=new ko(e,i.h))}function Dr(i,e,n){i.i.set(e,n)}function ao(i){return Dr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ei(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function eo(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,ia),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ia(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}dn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(eo(e,Ns,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(eo(e,Ns,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(eo(n,"/"==n.charAt(0)?_o:Ps,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",eo(n,Hn)),i.join("")};var Ns=/[#\/\?@]/g,Ps=/[#\?:]/g,_o=/[#\?]/g,Eo=/[#\?@]/g,Hn=/#/g;function ko(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Os(i){i.g||(i.g=new Map,i.h=0,i.i&&function vo(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),u=null;if(0<=s){var l=i[n].substring(0,s);u=i[n].substring(s+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Lo(i,e){Os(i),e=Br(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ui(i,e){return Os(i),e=Br(i,e),i.g.has(e)}function Io(i,e,n){Lo(i,e),0<n.length&&(i.i=null,i.g.set(Br(i,e),bt(n)),i.h+=n.length)}function Br(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ui(i){this.l=i||Bi,i=It.PerformanceNavigationTiming?0<(i=It.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ue=ko.prototype).add=function(i,e){Os(this),this.i=null,i=Br(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Ue.forEach=function(i,e){Os(this),this.g.forEach(function(n,s){n.forEach(function(u){i.call(e,u,s,this)},this)},this)},Ue.ta=function(){Os(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const u=i[s];for(let l=0;l<u.length;l++)n.push(e[s])}return n},Ue.Z=function(i){Os(this);let e=[];if("string"==typeof i)Ui(this,i)&&(e=e.concat(this.g.get(Br(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Ue.set=function(i,e){return Os(this),this.i=null,Ui(this,i=Br(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ue.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var u=l;""!==p[s]&&(u+="="+encodeURIComponent(String(p[s]))),i.push(u)}}return this.i=i.join("&")};var Bi=10;function bi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ts(i){return i.h?1:i.g?i.g.size:0}function ks(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Si(i,e){i.g?i.g.add(e):i.h=e}function gs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Fo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return bt(i.i)}ui.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var sa=class{stringify(i){return It.JSON.stringify(i,void 0)}parse(i){return It.JSON.parse(i,void 0)}};function Ls(){this.g=new sa}function ya(i,e,n){const s=n||"";try{zr(i,function(u,l){let p=u;Nn(u)&&(p=Xn(u)),e.push(s+l+"="+encodeURIComponent(p))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function Yo(i,e,n,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function ms(i){this.l=i.fc||null,this.j=i.ob||!1}function ys(i,e){_t.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=tu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(ms,qo),ms.prototype.g=function(){return new ys(this.l,this.j)},ms.prototype.i=function(i){return function(){return i}}({}),He(ys,_t);var tu=0;function _a(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function pr(i){i.readyState=4,i.l=null,i.j=null,i.A=null,F(i)}function F(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ue=ys.prototype).open=function(i,e){if(this.readyState!=tu)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,F(this)},Ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pr(this)),this.readyState=tu},Ue.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,F(this)),this.g&&(this.readyState=3,F(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_a(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Ue.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?pr(this):F(this),3==this.readyState&&_a(this)}},Ue.Za=function(i){this.g&&(this.response=this.responseText=i,pr(this))},Ue.Ya=function(i){this.g&&(this.response=i,pr(this))},Ue.ka=function(){this.g&&pr(this)},Ue.setRequestHeader=function(i,e){this.v.append(i,e)},Ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var L=It.JSON.parse;function q(i){_t.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ae,this.L=this.M=!1}He(q,_t);var ae="",Ie=/^https?$/i,Je=["POST","PUT"];function Ht(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,zt(i),kn(i)}function zt(i){i.F||(i.F=!0,nn(i,"complete"),nn(i,"error"))}function hn(i){if(i.h&&typeof Vt<"u"&&(!i.C[1]||4!=Sn(i)||2!=i.da()))if(i.v&&4==Sn(i))Ur(i.La,0,i);else if(nn(i,"readystatechange"),4==Sn(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=0===p){var u=String(i.I).match(Mi)[1]||null;!u&&It.self&&It.self.location&&(u=It.self.location.protocol.slice(0,-1)),s=!Ie.test(u?u.toLowerCase():"")}n=s}if(n)nn(i,"complete"),nn(i,"success");else{i.m=6;try{var l=2<Sn(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",zt(i)}}finally{kn(i)}}}function kn(i,e){if(i.g){Pr(i);const n=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||nn(i,"ready");try{n.onreadystatechange=s}catch{}}}function Pr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(It.clearTimeout(i.A),i.A=null)}function Sn(i){return i.g?i.g.readyState:0}function gr(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case ae:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Jr(i){let e="";return si(i,function(n,s){e+=s,e+=":",e+=n,e+="\r\n"}),e}function Wn(i,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Jr(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Dr(i,e,n))}function Ni(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Tr(i){this.Ga=0,this.j=[],this.l=new mi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ni("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ni("baseRetryDelayMs",5e3,i),this.hb=Ni("retryDelaySeedMs",1e4,i),this.eb=Ni("forwardChannelMaxRetries",2,i),this.xa=Ni("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new ui(i&&i.concurrentRequestLimit),this.Ja=new Ls,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Or(i){if(Fs(i),3==i.H){var e=i.W++,n=_i(i.I);if(Dr(n,"SID",i.K),Dr(n,"RID",e),Dr(n,"TYPE","terminate"),Ii(i,n),(e=new et(i,i.l,e)).L=2,e.v=ao(_i(n)),n=!1,It.navigator&&It.navigator.sendBeacon)try{n=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&It.Image&&((new Image).src=e.v,n=!0),n||(e.g=Vo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),wr(e)}Ea(i)}function Gr(i){i.g&&(Bo(i),i.g.cancel(),i.g=null)}function Fs(i){Gr(i),i.u&&(It.clearTimeout(i.u),i.u=null),Do(i),i.i.cancel(),i.m&&("number"==typeof i.m&&It.clearTimeout(i.m),i.m=null)}function bs(i){if(!bi(i.i)&&!i.m){i.m=!0;var e=i.Na;qe||Jn(),Dt||(qe(),Dt=!0),St.add(e,i),i.C=0}}function wo(i,e){var n;n=e?e.m:i.W++;const s=_i(i.I);Dr(s,"SID",i.K),Dr(s,"RID",n),Dr(s,"AID",i.V),Ii(i,s),i.o&&i.s&&Wn(s,i.o,i.s),n=new et(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Uo(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Si(i.i,n),$n(n,s,e)}function Ii(i,e){i.na&&si(i.na,function(n,s){Dr(e,s,n)}),i.h&&zr({},function(n,s){Dr(e,s,n)})}function Uo(i,e,n){n=Math.min(i.j.length,n);var s=i.h?we(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const p=["count="+n];-1==l?0<n?(l=u[0].g,p.push("ofs="+l)):l=0:p.push("ofs="+l);let w=!0;for(let A=0;A<n;A++){let U=u[A].g;const W=u[A].map;if(U-=l,0>U)l=Math.max(0,u[A].g-100),w=!1;else try{ya(W,p,"req"+U+"_")}catch{s&&s(W)}}if(w){s=p.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,s}function Ss(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;qe||Jn(),Dt||(qe(),Dt=!0),St.add(e,i),i.A=0}}function Oa(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=go(we(i.Ma,i),oa(i,i.A)),i.A++,0))}function Bo(i){null!=i.B&&(It.clearTimeout(i.B),i.B=null)}function Wi(i){i.g=new et(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=_i(i.wa);Dr(e,"RID","rpc"),Dr(e,"SID",i.K),Dr(e,"AID",i.V),Dr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Dr(e,"TO",i.qa),Dr(e,"TYPE","xmlhttp"),Ii(i,e),i.o&&i.s&&Wn(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=ao(_i(e)),n.s=null,n.S=!0,yi(n,i)}function Do(i){null!=i.v&&(It.clearTimeout(i.v),i.v=null)}function To(i,e){var n=null;if(i.g==e){Do(i),Bo(i),i.g=null;var s=2}else{if(!ks(i.i,e))return;n=e.F,gs(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;nn(s=Zn(),new Oo(s,n)),bs(i)}else Ss(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==s&&function Us(i,e){return!(ts(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=go(we(i.Na,i,e),oa(i,i.C)),i.C++,0)))}(i,e)||2==s&&Oa(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Qo(i,5);break;case 4:Qo(i,10);break;case 3:Qo(i,6);break;default:Qo(i,2)}}function oa(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Qo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var s=we(i.pb,i);n||(n=new dn("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Js(n,"https"),ao(n)),function va(i,e){const n=new mi;if(It.Image){const s=new Image;s.onload=Fe(Yo,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Fe(Yo,n,s,"TestLoadImage: error",!1,e),s.onabort=Fe(Yo,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Fe(Yo,n,s,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(n.toString(),s)}else Yr(2);i.H=0,i.h&&i.h.za(e),Ea(i),Fs(i)}function Ea(i){if(i.H=0,i.ma=[],i.h){const e=Fo(i.i);(0!=e.length||0!=i.j.length)&&(Ct(i.ma,e),Ct(i.ma,i.j),i.i.i.length=0,bt(i.j),i.j.length=0),i.h.ya()}}function Co(i,e,n){var s=n instanceof dn?_i(n):new dn(n);if(""!=s.g)e&&(s.g=e+"."+s.g),Gi(s,s.m);else{var u=It.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new dn(null);s&&Js(l,s),e&&(l.g=e),u&&Gi(l,u),n&&(l.l=n),s=l}return e=i.Da,(n=i.F)&&e&&Dr(s,n,e),Dr(s,"VER",i.ra),Ii(i,s),s}function Vo(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new q(n&&i.Ha&&!i.va?new ms({ob:!0}):i.va)).Oa(i.J),e}function bo(){}function ka(){if(Ft&&!(10<=Number(Ir)))throw Error("Environmental error: no available transport.")}function ns(i,e){_t.call(this),this.g=new Tr(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!yn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new jo(this)}function aa(i){be.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function La(){Ce.call(this),this.status=1}function jo(i){this.g=i}function co(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function So(i,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)s[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)s[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],p=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+s[0]+3614090360&4294967295;p=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(p<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(u^l&(n^u))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(n^u^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(u^(n|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=n+((p=e+(u^(n|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((u=l+((p=u+(e^(l|~n))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function vr(i,e){this.h=e;for(var n=[],s=!0,u=i.length-1;0<=u;u--){var l=0|i[u];s&&l==e||(n[u]=l,s=!1)}this.g=n}(Ue=q.prototype).Oa=function(i){this.M=i},Ue.ha=function(i,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ye.g(),this.C=function Zo(i){return i.h||(i.h=i.i())}(this.u?this.u:Ye),this.g.onreadystatechange=we(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void Ht(this,l)}if(i=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)n.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())n.set(l,s.get(l))}s=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=It.FormData&&i instanceof It.FormData,!(0<=pt(Je,e))||s||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of n)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pr(this),0<this.B&&((this.L=function ft(i){return Ft&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=we(this.ua,this)):this.A=Ur(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Ht(this,l)}},Ue.ua=function(){typeof Vt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nn(this,"timeout"),this.abort(8))},Ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,nn(this,"complete"),nn(this,"abort"),kn(this))},Ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kn(this,!0)),q.$.N.call(this)},Ue.La=function(){this.s||(this.G||this.v||this.l?hn(this):this.kb())},Ue.kb=function(){hn(this)},Ue.isActive=function(){return!!this.g},Ue.da=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},Ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ue.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),L(e)}},Ue.Ia=function(){return this.m},Ue.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ue=Tr.prototype).ra=8,Ue.H=1,Ue.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new et(this,this.l,i);let l=this.s;if(this.U&&(l?(l=Ln(l),Ar(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Uo(this,u,e),Dr(n=_i(this.I),"RID",i),Dr(n,"CVER",22),this.F&&Dr(n,"X-HTTP-Session-Id",this.F),Ii(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(Jr(l)))+"&"+e:this.o&&Wn(n,this.o,l)),Si(this.i,u),this.bb&&Dr(n,"TYPE","init"),this.P?(Dr(n,"$req",e),Dr(n,"SID","null"),u.aa=!0,$n(u,n,null)):$n(u,n,e),this.H=2}}else 3==this.H&&(i?wo(this,i):0==this.j.length||bi(this.i)||wo(this))},Ue.Ma=function(){if(this.u=null,Wi(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=go(we(this.jb,this),i)}},Ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yr(10),Gr(this),Wi(this))},Ue.ib=function(){null!=this.v&&(this.v=null,Gr(this),Oa(this),Yr(19))},Ue.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Yr(2)):(this.l.info("Failed to ping google.com"),Yr(1))},Ue.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ue=bo.prototype).Ba=function(){},Ue.Aa=function(){},Ue.za=function(){},Ue.ya=function(){},Ue.isActive=function(){return!0},Ue.Va=function(){},ka.prototype.g=function(i,e){return new ns(i,e)},He(ns,_t),ns.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Yr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Co(i,null,i.Y),bs(i)},ns.prototype.close=function(){Or(this.g)},ns.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Xn(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&bs(e)},ns.prototype.N=function(){this.g.h=null,delete this.j,Or(this.g),delete this.g,ns.$.N.call(this)},He(aa,be),He(La,Ce),He(jo,bo),jo.prototype.Ba=function(){nn(this.g,"a")},jo.prototype.Aa=function(i){nn(this.g,new aa(i))},jo.prototype.za=function(i){nn(this.g,new La)},jo.prototype.ya=function(){nn(this.g,"b")},He(co,function us(){this.blockSize=-1}),co.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},co.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,s=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)So(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(s[u++]=i.charCodeAt(l++),u==this.blockSize){So(this,s),u=0;break}}else for(;l<e;)if(s[u++]=i[l++],u==this.blockSize){So(this,s),u=0;break}}this.h=u,this.i+=e},co.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)i[n++]=this.g[e]>>>s&255;return i};var E={};function P(i){return-128<=i&&128>i?function lr(i,e){var n=E;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new vr([0|e],0>e?-1:0)}):new vr([0|i],0>i?-1:0)}function J(i){if(isNaN(i)||!isFinite(i))return _e;if(0>i)return vn(J(-i));for(var e=[],n=1,s=0;i>=n;s++)e[s]=i/n|0,n*=Z;return new vr(e,0)}var Z=4294967296,_e=P(0),ot=P(1),Rt=P(16777216);function An(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Rn(i){return-1==i.h}function vn(i){for(var e=i.g.length,n=[],s=0;s<e;s++)n[s]=~i.g[s];return new vr(n,~i.h).add(ot)}function Bn(i,e){return i.add(vn(e))}function ei(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function _r(i,e){this.g=i,this.h=e}function ci(i,e){if(An(e))throw Error("division by zero");if(An(i))return new _r(_e,_e);if(Rn(i))return e=ci(vn(i),e),new _r(vn(e.g),vn(e.h));if(Rn(e))return e=ci(i,vn(e)),new _r(vn(e.g),e.h);if(30<i.g.length){if(Rn(i)||Rn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ot,s=e;0>=s.X(i);)n=Bs(n),s=Bs(s);var u=vs(n,1),l=vs(s,1);for(s=vs(s,2),n=vs(n,2);!An(s);){var p=l.add(s);0>=p.X(i)&&(u=u.add(n),l=p),s=vs(s,1),n=vs(n,1)}return e=Bn(i,u.R(e)),new _r(u,e)}for(u=_e;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),p=(l=J(n)).R(e);Rn(p)||0<p.X(i);)p=(l=J(n-=s)).R(e);An(l)&&(l=ot),u=u.add(l),i=Bn(i,p)}return new _r(u,i)}function Bs(i){for(var e=i.g.length+1,n=[],s=0;s<e;s++)n[s]=i.D(s)<<1|i.D(s-1)>>>31;return new vr(n,i.h)}function vs(i,e){var n=e>>5;e%=32;for(var s=i.g.length-n,u=[],l=0;l<s;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new vr(u,i.h)}(Ue=vr.prototype).ea=function(){if(Rn(this))return-vn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);i+=(0<=s?s:Z+s)*e,e*=Z}return i},Ue.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(An(this))return"0";if(Rn(this))return"-"+vn(this).toString(i);for(var e=J(Math.pow(i,6)),n=this,s="";;){var u=ci(n,e).g,l=((0<(n=Bn(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(An(n=u))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},Ue.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Ue.X=function(i){return Rn(i=Bn(this,i))?-1:An(i)?0:1},Ue.abs=function(){return Rn(this)?vn(this):this},Ue.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0,u=0;u<=e;u++){var l=s+(65535&this.D(u))+(65535&i.D(u)),p=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);s=p>>>16,n[u]=(p&=65535)<<16|(l&=65535)}return new vr(n,-2147483648&n[n.length-1]?-1:0)},Ue.R=function(i){if(An(this)||An(i))return _e;if(Rn(this))return Rn(i)?vn(this).R(vn(i)):vn(vn(this).R(i));if(Rn(i))return vn(this.R(vn(i)));if(0>this.X(Rt)&&0>i.X(Rt))return J(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var u=0;u<i.g.length;u++){var l=this.D(s)>>>16,p=65535&this.D(s),w=i.D(u)>>>16,A=65535&i.D(u);n[2*s+2*u]+=p*A,ei(n,2*s+2*u),n[2*s+2*u+1]+=l*A,ei(n,2*s+2*u+1),n[2*s+2*u+1]+=p*w,ei(n,2*s+2*u+1),n[2*s+2*u+2]+=l*w,ei(n,2*s+2*u+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new vr(n,0)},Ue.gb=function(i){return ci(this,i).h},Ue.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&i.D(s);return new vr(n,this.h&i.h)},Ue.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|i.D(s);return new vr(n,this.h|i.h)},Ue.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^i.D(s);return new vr(n,this.h^i.h)},ka.prototype.createWebChannel=ka.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,Ko.COMPLETE="complete",mo.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",_t.prototype.listen=_t.prototype.O,q.prototype.listenOnce=q.prototype.P,q.prototype.getLastError=q.prototype.Sa,q.prototype.getLastErrorCode=q.prototype.Ia,q.prototype.getStatus=q.prototype.da,q.prototype.getResponseJson=q.prototype.Wa,q.prototype.getResponseText=q.prototype.ja,q.prototype.send=q.prototype.ha,q.prototype.setWithCredentials=q.prototype.Oa,co.prototype.digest=co.prototype.l,co.prototype.reset=co.prototype.reset,co.prototype.update=co.prototype.j,vr.prototype.add=vr.prototype.add,vr.prototype.multiply=vr.prototype.R,vr.prototype.modulo=vr.prototype.gb,vr.prototype.compare=vr.prototype.X,vr.prototype.toNumber=vr.prototype.ea,vr.prototype.toString=vr.prototype.toString,vr.prototype.getBits=vr.prototype.D,vr.fromNumber=J,vr.fromString=function M(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return vn(M(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=J(Math.pow(e,8)),s=_e,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),p=parseInt(i.substring(u,u+l),e);8>l?(l=J(Math.pow(e,l)),s=s.R(l).add(J(p))):s=(s=s.R(n)).add(J(p))}return s};var Ia,li,_l,bu,nu,El,Il,pd,gd,$o,wa,Dn,ec,tc,Ho,nc,Oc,ru,Jo,Su,Da,Fa,rc,ic,mt,Er,Ua,wl,hi,Au,wi,$s,Ki,Di,sc,oc,ac,_s,zo,Ru,Ta,Hs,uc,lo=Ke.createWebChannelTransport=function(){return new ka},to=Ke.getStatEventTarget=function(){return Zn()},Pi=Ke.ErrorCode=yr,Vs=Ke.EventType=Ko,Xo=Ke.Event=sr,Mr=Ke.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ua=Ke.FetchXmlHttpFactory=ms,ca=Ke.WebChannel=mo,js=Ke.XhrIo=q,Pc=Ke.Md5=co,la=Ke.Integer=vr;const Ba="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let iu="9.23.0";const ho=new Le.Yd("@firebase/firestore");function su(){return ho.logLevel}function m(i,...e){if(ho.logLevel<=Le.in.DEBUG){const n=e.map(D);ho.debug(`Firestore (${iu}): ${i}`,...n)}}function I(i,...e){if(ho.logLevel<=Le.in.ERROR){const n=e.map(D);ho.error(`Firestore (${iu}): ${i}`,...n)}}function b(i,...e){if(ho.logLevel<=Le.in.WARN){const n=e.map(D);ho.warn(`Firestore (${iu}): ${i}`,...n)}}function D(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function S(i="Unexpected state"){const e=`FIRESTORE (${iu}) INTERNAL ASSERTION FAILED: `+i;throw I(e),new Error(e)}function V(i,e){i||S()}function ce(i,e){return i}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Te.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ut{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class gn{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ti{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vi.UNAUTHENTICATED))}shutdown(){}}class _n{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zs{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var s=this;let u=this.i;const l=U=>this.i!==u?(u=this.i,n(U)):Promise.resolve();let p=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ut,e.enqueueRetryable(()=>l(this.currentUser))};const w=()=>{const U=p;e.enqueueRetryable((0,Oe.Z)(function*(){yield U.promise,yield l(s.currentUser)}))},A=U=>{m("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(U=>A(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?A(U):(m("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ut)}},0),w()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(m("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(V("string"==typeof s.accessToken),new gn(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return V(null===e||"string"==typeof e),new Vi(e)}}class ou{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cc{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new ou(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ao{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const s=l=>{null!=l.error&&m("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.T;return this.T=l.token,m("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const u=l=>{m("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?u(l):m("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(V("string"==typeof n.token),this.T=n.token,new Ca(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Mu(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Go{static A(){const n=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=Mu(40);for(let l=0;l<u.length;++l)s.length<20&&u[l]<n&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return s}}function Fn(i,e){return i<e?-1:i>e?1:0}function ha(i,e,n){return i.length===e.length&&i.every((s,u)=>n(s,e[u]))}function Gs(i){return i+"\0"}class ni{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ni(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class an{constructor(e){this.timestamp=e}static fromTimestamp(e){return new an(e)}static min(){return new an(new ni(0,0))}static max(){return new an(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xu{constructor(e,n,s){void 0===n?n=0:n>e.length&&S(),void 0===s?s=e.length-n:s>e.length-n&&S(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return 0===xu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xu?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let u=0;u<s;u++){const l=e.get(u),p=n.get(u);if(l<p)return-1;if(l>p)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mr extends xu{construct(e,n,s){return new mr(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(u=>u.length>0))}return new mr(n)}static emptyPath(){return new mr([])}}const Cf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends xu{construct(e,n,s){return new Wr(e,n,s)}static isValidIdentifier(e){return Cf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const n=[];let s="",u=0;const l=()=>{if(0===s.length)throw new de(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let p=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new de(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[u+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new de(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=A,u+=2}else"`"===w?(p=!p,u++):"."!==w||p?(s+=w,u++):(l(),u++)}if(l(),p)throw new de(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(n)}static emptyPath(){return new Wr([])}}class Pt{constructor(e){this.path=e}static fromPath(e){return new Pt(mr.fromString(e))}static fromName(e){return new Pt(mr.fromString(e).popFirst(5))}static empty(){return new Pt(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pt(new mr(e.slice()))}}class lc{constructor(e,n,s,u){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=u}}function vh(i){return i.fields.find(e=>2===e.kind)}function Va(i){return i.fields.filter(e=>2!==e.kind)}lc.UNKNOWN_ID=-1;class Lc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Fc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Fc(0,rs.min())}}function Sf(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=an.fromTimestamp(1e9===s?new ni(n+1,0):new ni(n,s));return new rs(u,Pt.empty(),e)}function dc(i){return new rs(i.readTime,i.key,-1)}class rs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new rs(an.min(),Pt.empty(),-1)}static max(){return new rs(an.max(),Pt.empty(),-1)}}function Tl(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Pt.comparator(i.documentKey,e.documentKey),0!==n?n:Fn(i.largestBatchId,e.largestBatchId))}const fa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ea(i){return(Ia=Ia||(0,Oe.Z)(function*(e){if(e.code!==he.FAILED_PRECONDITION||e.message!==fa)throw e;m("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Qe((s,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Qe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Qe.reject(n)}static resolve(e){return new Qe((n,s)=>{n(e)})}static reject(e){return new Qe((n,s)=>{s(e)})}static waitFor(e){return new Qe((n,s)=>{let u=0,l=0,p=!1;e.forEach(w=>{++u,w.next(()=>{++l,p&&l===u&&n()},A=>s(A))}),p=!0,l===u&&n()})}static or(e){let n=Qe.resolve(!1);for(const s of e)n=n.next(u=>u?Qe.resolve(u):s());return n}static forEach(e,n){const s=[];return e.forEach((u,l)=>{s.push(n.call(this,u,l))}),this.waitFor(s)}static mapArray(e,n){return new Qe((s,u)=>{const l=e.length,p=new Array(l);let w=0;for(let A=0;A<l;A++){const U=A;n(e[U]).next(W=>{p[U]=W,++w,w===l&&s(p)},W=>u(W))}})}static doWhile(e,n){return new Qe((s,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):s()};l()})}}class hc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Ut,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new no(e,n.error)):this.v.resolve()},this.transaction.onerror=s=>{const u=ja(s.target.error);this.v.reject(new no(e,u))}}static open(e,n,s,u){try{return new hc(n,e.transaction(u,s))}catch(l){throw new no(n,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(m("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Bc(n)}}class Ro{constructor(e,n,s){this.name=e,this.version=n,this.V=s,12.2===Ro.S((0,Te.z$)())&&I("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return m("SimpleDb","Removing database:",e),Sa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Te.hl)())return!1;if(Ro.C())return!0;const e=(0,Te.z$)(),n=Ro.S(e),s=0<n&&n<10,u=Ro.N(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var n=this;return(0,Oe.Z)(function*(){return n.db||(m("SimpleDb","Opening database:",n.name),n.db=yield new Promise((s,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{u(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const w=p.target.error;u("VersionError"===w.name?new de(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new de(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new no(e,w))},l.onupgradeneeded=p=>{m("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',p.oldVersion),n.V.O(p.target.result,l.transaction,p.oldVersion,n.version).next(()=>{m("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=s=>n.F(s)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,s,u){var l=this;return(0,Oe.Z)(function*(){const p="readonly"===n;let w=0;for(;;){++w;try{l.db=yield l.$(e);const A=hc.open(l.db,e,p?"readonly":"readwrite",s),U=u(A).next(W=>(A.P(),W)).catch(W=>(A.abort(W),Qe.reject(W))).toPromise();return U.catch(()=>{}),yield A.R,U}catch(A){const U=A,W="FirebaseError"!==U.name&&w<3;if(m("SimpleDb","Transaction failed with error:",U.message,"Retrying:",W),l.close(),!W)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class md{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sa(this.L.delete())}}class no extends de{constructor(e,n){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ba(i){return"IndexedDbTransactionError"===i.name}class Bc{constructor(e){this.store=e}put(e,n){let s;return void 0!==n?(m("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(m("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Sa(s)}add(e){return m("SimpleDb","ADD",this.store.name,e,e),Sa(this.store.add(e))}get(e){return Sa(this.store.get(e)).next(n=>(void 0===n&&(n=null),m("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return m("SimpleDb","DELETE",this.store.name,e),Sa(this.store.delete(e))}count(){return m("SimpleDb","COUNT",this.store.name),Sa(this.store.count())}j(e,n){const s=this.options(e,n);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),l=[];return this.W(u,(p,w)=>{l.push(w)}).next(()=>l)}{const u=this.store.getAll(s.range);return new Qe((l,p)=>{u.onerror=w=>{p(w.target.error)},u.onsuccess=w=>{l(w.target.result)}})}}H(e,n){const s=this.store.getAll(e,null===n?void 0:n);return new Qe((u,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}J(e,n){m("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.Y=!1;const u=this.cursor(s);return this.W(u,(l,p,w)=>w.delete())}X(e,n){let s;n?s=e:(s={},n=e);const u=this.cursor(s);return this.W(u,n)}Z(e){const n=this.cursor({});return new Qe((s,u)=>{n.onerror=l=>{const p=ja(l.target.error);u(p)},n.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(w=>{w?p.continue():s()}):s()}})}W(e,n){const s=[];return new Qe((u,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const w=p.target.result;if(!w)return void u();const A=new md(w),U=n(w.primaryKey,w.value,A);if(U instanceof Qe){const W=U.catch(ne=>(A.done(),Qe.reject(ne)));s.push(W)}A.isDone?u():null===A.K?w.continue():w.continue(A.K)}}).next(()=>Qe.waitFor(s))}options(e,n){let s;return void 0!==e&&("string"==typeof e?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Sa(i){return new Qe((e,n)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=ja(s.target.error);n(u)}})}let fc=!1;function ja(i){const e=Ro.S((0,Te.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const s=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fc||(fc=!0,setTimeout(()=>{throw s},0)),s}}return i}class pc{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;m("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Oe.Z)(function*(){n.task=null;try{m("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(s){ba(s)?m("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ea(s)}yield n.et(6e4)}))}}class Cl{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,Oe.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>n.st(s,e))})()}st(e,n){const s=new Set;let u=n,l=!0;return Qe.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return m("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,u).next(w=>{u-=w,s.add(p)});l=!1})).next(()=>n-u)}it(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(u,l)).next(w=>(m("IndexBackiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,n,w))).next(()=>p.size)}))}rt(e,n){let s=e;return n.changes.forEach((u,l)=>{const p=dc(l);Tl(p,s)>0&&(s=p)}),new rs(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}let cs=(()=>{class i{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=u=>this.ot(u),this.ut=u=>s.writeSequenceNumber(u))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return i.ct=-1,i})();function Aa(i){return null==i}function $a(i){return 0===i&&1/i==-1/0}function bl(i){return"number"==typeof i&&Number.isInteger(i)&&!$a(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Ws(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ha(e)),e=Vc(i.get(n),e);return Ha(e)}function Vc(i,e){let n=e;const s=i.length;for(let u=0;u<s;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function Ha(i){return i+"\x01\x01"}function ta(i){const e=i.length;if(V(e>=2),2===e)return V("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),mr.emptyPath();const n=e-2,s=[];let u="";for(let l=0;l<e;){const p=i.indexOf("\x01",l);switch((p<0||p>n)&&S(),i.charAt(p+1)){case"\x01":const w=i.substring(l,p);let A;0===u.length?A=w:(u+=w,A=u,u=""),s.push(A);break;case"\x10":u+=i.substring(l,p),u+="\0";break;case"\x11":u+=i.substring(l,p+1);break;default:S()}l=p+2}return new mr(s)}const za=["userId","batchId"];function Nu(i,e){return[i,Ws(e)]}function Pu(i,e,n){return[i,Ws(e),n]}const _h={},qi=["prefixPath","collectionGroup","readTime","documentId"],yd=["prefixPath","collectionGroup","documentId"],Ga=["collectionGroup","readTime","prefixPath","documentId"],Ou=["canonicalId","targetId"],Af=["targetId","path"],Sl=["path","targetId"],Al=["collectionId","parent"],ku=["indexId","uid"],gc=["uid","sequenceNumber"],R=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x=["indexId","uid","orderedDocumentKey"],B=["userId","collectionPath","documentId"],Y=["userId","collectionPath","largestBatchId"],pe=["userId","collectionGroup","largestBatchId"],je=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rt=[...je,"documentOverlays"],yt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],At=yt,Kt=[...At,"indexConfiguration","indexState","indexEntries"];class en extends Uc{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function Wt(i,e){const n=ce(i);return Ro.M(n.ht,e)}function or(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ri(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Ai(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class fn{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return n+s.left.size;u<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}}class ls{constructor(e,n,s,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,s,u,l){this.key=e,this.value=n,this.color=s??tn.RED,this.left=u??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,u,l){return new tn(e??this.key,n??this.value,s??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let u=this;const l=s(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,s),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return tn.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1,tn.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(i,e,n,s,u){return this}insert(i,e,n){return new tn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ds(this.data.getIterator())}getIteratorFrom(e){return new ds(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Cr(this.comparator);return n.data=e,n}}class ds{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function is(i){return i.hasNext()?i.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new Mo([])}unionWith(e){let n=new Cr(Wr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Mo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class vd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Es{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vd("Invalid base64 string: "+u):u}}(e);return new Es(n)}static fromUint8Array(e){const n=function(s){let u="";for(let l=0;l<s.length;++l)u+=String.fromCharCode(s[l]);return u}(e);return new Es(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Es.EMPTY_BYTE_STRING=new Es("");const Eh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function au(i){if(V(!!i),"string"==typeof i){let e=0;const n=Eh.exec(i);if(V(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ss(i.seconds),nanos:ss(i.nanos)}}function ss(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function hs(i){return"string"==typeof i?Es.fromBase64String(i):Es.fromUint8Array(i)}function jc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uu(i){const e=i.mapValue.fields.__previous_value__;return jc(e)?uu(e):e}function _d(i){const e=au(i.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}class Rf{constructor(e,n,s,u,l,p,w,A,U){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=u,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=w,this.longPollingOptions=A,this.useFetchStreams=U}}class cu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}const Lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ih={nullValue:"NULL_VALUE"};function lu(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?jc(i)?4:Mf(i)?9007199254740991:10:S()}function Ra(i,e){if(i===e)return!0;const n=lu(i);if(n!==lu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _d(i).isEqual(_d(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const l=au(s.timestampValue),p=au(u.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,hs(i.bytesValue).isEqual(hs(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return ss(s.geoPointValue.latitude)===ss(u.geoPointValue.latitude)&&ss(s.geoPointValue.longitude)===ss(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return ss(s.integerValue)===ss(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const l=ss(s.doubleValue),p=ss(u.doubleValue);return l===p?$a(l)===$a(p):isNaN(l)&&isNaN(p)}return!1}(i,e);case 9:return ha(i.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:return function(s,u){const l=s.mapValue.fields||{},p=u.mapValue.fields||{};if(or(l)!==or(p))return!1;for(const w in l)if(l.hasOwnProperty(w)&&(void 0===p[w]||!Ra(l[w],p[w])))return!1;return!0}(i,e);default:return S()}var u}function $c(i,e){return void 0!==(i.values||[]).find(n=>Ra(n,e))}function Ma(i,e){if(i===e)return 0;const n=lu(i),s=lu(e);if(n!==s)return Fn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fn(i.booleanValue,e.booleanValue);case 2:return function(u,l){const p=ss(u.integerValue||u.doubleValue),w=ss(l.integerValue||l.doubleValue);return p<w?-1:p>w?1:p===w?0:isNaN(p)?isNaN(w)?0:-1:1}(i,e);case 3:return Hc(i.timestampValue,e.timestampValue);case 4:return Hc(_d(i),_d(e));case 5:return Fn(i.stringValue,e.stringValue);case 6:return function(u,l){const p=hs(u),w=hs(l);return p.compareTo(w)}(i.bytesValue,e.bytesValue);case 7:return function(u,l){const p=u.split("/"),w=l.split("/");for(let A=0;A<p.length&&A<w.length;A++){const U=Fn(p[A],w[A]);if(0!==U)return U}return Fn(p.length,w.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,l){const p=Fn(ss(u.latitude),ss(l.latitude));return 0!==p?p:Fn(ss(u.longitude),ss(l.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,l){const p=u.values||[],w=l.values||[];for(let A=0;A<p.length&&A<w.length;++A){const U=Ma(p[A],w[A]);if(U)return U}return Fn(p.length,w.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,l){if(u===Lu.mapValue&&l===Lu.mapValue)return 0;if(u===Lu.mapValue)return 1;if(l===Lu.mapValue)return-1;const p=u.fields||{},w=Object.keys(p),A=l.fields||{},U=Object.keys(A);w.sort(),U.sort();for(let W=0;W<w.length&&W<U.length;++W){const ne=Fn(w[W],U[W]);if(0!==ne)return ne;const Pe=Ma(p[w[W]],A[U[W]]);if(0!==Pe)return Pe}return Fn(w.length,U.length)}(i.mapValue,e.mapValue);default:throw S()}}function Hc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Fn(i,e);const n=au(i),s=au(e),u=Fn(n.seconds,s.seconds);return 0!==u?u:Fn(n.nanos,s.nanos)}function pa(i){return zc(i)}function zc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=au(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?hs(i.bytesValue).toBase64():"referenceValue"in i?Pt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",l=!0;for(const p of s.values||[])l?l=!1:u+=",",u+=zc(p);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const w of u)p?p=!1:l+=",",l+=`${w}:${zc(s.fields[w])}`;return l+"}"}(i.mapValue):S();var e}function Wa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function wh(i){return!!i&&"integerValue"in i}function Gc(i){return!!i&&"arrayValue"in i}function Id(i){return!!i&&"nullValue"in i}function Rl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ml(i){return!!i&&"mapValue"in i}function xl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ri(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=xl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Mf(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Wc(i){return"nullValue"in i?Ih:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Wa(cu.empty(),Pt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:S()}function Nl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Wa(cu.empty(),Pt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Lu:S()}function Dh(i,e){const n=Ma(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function lg(i,e){const n=Ma(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ks{constructor(e){this.value=e}static empty(){return new Ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=Wr.emptyPath(),s={},u=[];e.forEach((p,w)=>{if(!n.isImmediateParentOf(w)){const A=this.getFieldsMap(n);this.applyChanges(A,s,u),s={},u=[],n=w.popLast()}p?s[w.lastSegment()]=xl(p):u.push(w.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,s,u)}delete(e){const n=this.field(e.popLast());Ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=n.mapValue.fields[e.get(s)];Ml(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,s){ri(n,(u,l)=>e[u]=l);for(const u of s)delete e[u]}clone(){return new Ks(xl(this.value))}}function wd(i){const e=[];return ri(i.fields,(n,s)=>{const u=new Wr([n]);if(Ml(s)){const l=wd(s.mapValue).fields;if(0===l.length)e.push(u);else for(const p of l)e.push(u.child(p))}else e.push(u)}),new Mo(e)}class Ri{constructor(e,n,s,u,l,p,w){this.key=e,this.documentType=n,this.version=s,this.readTime=u,this.createTime=l,this.data=p,this.documentState=w}static newInvalidDocument(e){return new Ri(e,0,an.min(),an.min(),an.min(),Ks.empty(),0)}static newFoundDocument(e,n,s,u){return new Ri(e,1,n,an.min(),s,u,0)}static newNoDocument(e,n){return new Ri(e,2,n,an.min(),an.min(),Ks.empty(),0)}static newUnknownDocument(e,n){return new Ri(e,3,n,an.min(),an.min(),Ks.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(an.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=an.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fu{constructor(e,n){this.position=e,this.inclusive=n}}function xf(i,e,n){let s=0;for(let u=0;u<i.position.length;u++){const l=e[u],p=i.position[u];if(s=l.field.isKeyField()?Pt.comparator(Pt.fromName(p.referenceValue),n.key):Ma(p,n.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Pl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ra(i.position[n],e.position[n]))return!1;return!0}class du{constructor(e,n="asc"){this.field=e,this.dir=n}}function Nf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Pf{}class br extends Pf{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,s):new hg(e,n,s):"array-contains"===n?new ry(e,s):"in"===n?new Ch(e,s):"not-in"===n?new Kc(e,s):"array-contains-any"===n?new qc(e,s):new br(e,n,s)}static createKeyFieldInFilter(e,n,s){return"in"===n?new ty(e,s):new ny(e,s)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ma(n,this.value)):null!==n&&lu(this.value)===lu(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fi extends Pf{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new fi(e,n)}matches(e){return Uu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Uu(i){return"and"===i.op}function Th(i){return"or"===i.op}function Dd(i){return Of(i)&&Uu(i)}function Of(i){for(const e of i.filters)if(e instanceof fi)return!1;return!0}function Ol(i){if(i instanceof br)return i.field.canonicalString()+i.op.toString()+pa(i.value);if(Dd(i))return i.filters.map(e=>Ol(e)).join(",");{const e=i.filters.map(n=>Ol(n)).join(",");return`${i.op}(${e})`}}function dg(i,e){return i instanceof br?(n=i,(s=e)instanceof br&&n.op===s.op&&n.field.isEqual(s.field)&&Ra(n.value,s.value)):i instanceof fi?function(n,s){return s instanceof fi&&n.op===s.op&&n.filters.length===s.filters.length&&n.filters.reduce((u,l,p)=>u&&dg(l,s.filters[p]),!0)}(i,e):void S();var n,s}function kl(i,e){const n=i.filters.concat(e);return fi.create(n,i.op)}function Td(i){return i instanceof br?`${(e=i).field.canonicalString()} ${e.op} ${pa(e.value)}`:i instanceof fi?function(e){return e.op.toString()+" {"+e.getFilters().map(Td).join(" ,")+"}"}(i):"Filter";var e}class hg extends br{constructor(e,n,s){super(e,n,s),this.key=Pt.fromName(s.referenceValue)}matches(e){const n=Pt.comparator(e.key,this.key);return this.matchesComparison(n)}}class ty extends br{constructor(e,n){super(e,"in",n),this.keys=fg(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ny extends br{constructor(e,n){super(e,"not-in",n),this.keys=fg(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fg(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(s=>Pt.fromName(s.referenceValue))}class ry extends br{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gc(n)&&$c(n.arrayValue,this.value)}}class Ch extends br{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&$c(this.value.arrayValue,n)}}class Kc extends br{constructor(e,n){super(e,"not-in",n)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!$c(this.value.arrayValue,n)}}class qc extends br{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>$c(this.value.arrayValue,s))}}class bh{constructor(e,n=null,s=[],u=[],l=null,p=null,w=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=u,this.limit=l,this.startAt=p,this.endAt=w,this.dt=null}}function Cd(i,e=null,n=[],s=[],u=null,l=null,p=null){return new bh(i,e,n,s,u,l,p)}function Bu(i){const e=ce(i);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Ol(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),Aa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>pa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>pa(s)).join(",")),e.dt=n}return e.dt}function os(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Nf(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!dg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Pl(i.startAt,e.startAt)&&Pl(i.endAt,e.endAt)}function hu(i){return Pt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Zc(i,e){return i.filters.filter(n=>n instanceof br&&n.field.isEqual(e))}function Ll(i,e,n){let s=Ih,u=!0;for(const l of Zc(i,e)){let p=Ih,w=!0;switch(l.op){case"<":case"<=":p=Wc(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,w=!1;break;case"!=":case"not-in":p=Ih}Dh({value:s,inclusive:u},{value:p,inclusive:w})<0&&(s=p,u=w)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];Dh({value:s,inclusive:u},{value:p,inclusive:n.inclusive})<0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}function yc(i,e,n){let s=Lu,u=!0;for(const l of Zc(i,e)){let p=Lu,w=!0;switch(l.op){case">=":case">":p=Nl(l.value),w=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,w=!1;break;case"!=":case"not-in":p=Lu}lg({value:s,inclusive:u},{value:p,inclusive:w})>0&&(s=p,u=w)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];lg({value:s,inclusive:u},{value:p,inclusive:n.inclusive})>0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}class ga{constructor(e,n=null,s=[],u=[],l=null,p="F",w=null,A=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=u,this.limit=l,this.limitType=p,this.startAt=w,this.endAt=A,this.wt=null,this._t=null}}function Sh(i,e,n,s,u,l,p,w){return new ga(i,e,n,s,u,l,p,w)}function Yc(i){return new ga(i)}function fu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Fl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Qc(i){for(const e of i.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function Ah(i){return null!==i.collectionGroup}function vc(i){const e=ce(i);if(null===e.wt){e.wt=[];const n=Qc(e),s=Fl(e);if(null!==n&&null===s)n.isKeyField()||e.wt.push(new du(n)),e.wt.push(new du(Wr.keyField(),"asc"));else{let u=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(u=!0);if(!u){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new du(Wr.keyField(),l))}}}return e.wt}function fo(i){const e=ce(i);if(!e._t)if("F"===e.limitType)e._t=Cd(e.path,e.collectionGroup,vc(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const l of vc(e))n.push(new du(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Fu(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Fu(e.startAt.position,e.startAt.inclusive):null;e._t=Cd(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e._t}function ro(i,e){e.getFirstInequalityField(),Qc(i);const n=i.filters.concat([e]);return new ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Xc(i,e,n){return new ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ul(i,e){return os(fo(i),fo(e))&&i.limitType===e.limitType}function Zi(i){return`${Bu(fo(i))}|lt:${i.limitType}`}function pu(i){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>Td(s)).join(", ")}]`),Aa(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>pa(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>pa(s)).join(",")),`Target(${n})`}(fo(i))}; limitType=${i.limitType})`}function _c(i,e){return e.isFoundDocument()&&function(n,s){const u=s.key.path;return null!==n.collectionGroup?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):Pt.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)}(i,e)&&function(n,s){for(const u of vc(n))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(n,s){for(const u of n.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((n=i).startAt&&!function(u,l,p){const w=xf(u,l,p);return u.inclusive?w<=0:w<0}(n.startAt,vc(n),s)||n.endAt&&!function(u,l,p){const w=xf(u,l,p);return u.inclusive?w>=0:w>0}(n.endAt,vc(n),s)));var n,s}function Bl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function io(i){return(e,n)=>{let s=!1;for(const u of vc(i)){const l=Ec(u,e,n);if(0!==l)return l;s=s||u.field.isKeyField()}return 0}}function Ec(i,e,n){const s=i.field.isKeyField()?Pt.comparator(e.key,n.key):function(u,l,p){const w=l.data.field(u),A=p.data.field(u);return null!==w&&null!==A?Ma(w,A):S()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return S()}}class Ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0!==s)for(const[u,l]of s)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[n]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(n,s)=>{for(const[u,l]of s)e(u,l)})}isEmpty(){return Ai(this.inner)}size(){return this.innerSize}}const kf=new fn(Pt.comparator);function Wo(){return kf}const Rh=new fn(Pt.comparator);function C(...i){let e=Rh;for(const n of i)e=e.insert(n.key,n);return e}function h(i){let e=Rh;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function f(){return N()}function v(){return N()}function N(){return new Ka(i=>i.toString(),(i,e)=>i.isEqual(e))}const j=new fn(Pt.comparator),ee=new Cr(Pt.comparator);function ie(...i){let e=ee;for(const n of i)e=e.add(n);return e}const Ze=new Cr(Fn);function at(){return Ze}function Zt(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function jt(i){return{integerValue:""+i}}function on(i,e){return bl(e)?jt(e):Zt(i,e)}class Yn{constructor(){this._=void 0}}function Ti(i,e,n){return i instanceof ma?function(s,u){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&jc(u)&&(u=uu(u)),u&&(l.fields.__previous_value__=u),{mapValue:l}}(n,e):i instanceof qa?Ic(i,e):i instanceof Vu?Mh(i,e):function(s,u){const l=qs(s,u),p=xh(l)+xh(s.gt);return wh(l)&&wh(s.gt)?jt(p):Zt(s.serializer,p)}(i,e)}function fs(i,e,n){return i instanceof qa?Ic(i,e):i instanceof Vu?Mh(i,e):n}function qs(i,e){return i instanceof ju?wh(n=e)||(s=n)&&"doubleValue"in s?e:{integerValue:0}:null;var s,n}class ma extends Yn{}class qa extends Yn{constructor(e){super(),this.elements=e}}function Ic(i,e){const n=Lf(e);for(const s of i.elements)n.some(u=>Ra(u,s))||n.push(s);return{arrayValue:{values:n}}}class Vu extends Yn{constructor(e){super(),this.elements=e}}function Mh(i,e){let n=Lf(e);for(const s of i.elements)n=n.filter(u=>!Ra(u,s));return{arrayValue:{values:n}}}class ju extends Yn{constructor(e,n){super(),this.serializer=e,this.gt=n}}function xh(i){return ss(i.integerValue||i.doubleValue)}function Lf(i){return Gc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class wc{constructor(e,n){this.field=e,this.transform=n}}class Uf{constructor(e,n){this.version=e,this.transformResults=n}}class ji{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Bf{}function iy(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new $l(i.key,ji.none()):new jl(i.key,i.data,ji.none());{const n=i.data,s=Ks.empty();let u=new Cr(Wr.comparator);for(let l of e.fields)if(!u.has(l)){let p=n.field(l);null===p&&l.length>1&&(l=l.popLast(),p=n.field(l)),null===p?s.delete(l):s.set(l,p),u=u.add(l)}return new Dc(i.key,s,new Mo(u.toArray()),ji.none())}}function pg(i,e,n){i instanceof jl?function(s,u,l){const p=s.value.clone(),w=Nh(s.fieldTransforms,u,l.transformResults);p.setAll(w),u.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(i,e,n):i instanceof Dc?function(s,u,l){if(!bd(s.precondition,u))return void u.convertToUnknownDocument(l.version);const p=Nh(s.fieldTransforms,u,l.transformResults),w=u.data;w.setAll(v_(s)),w.setAll(p),u.convertToFoundDocument(l.version,w).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Sd(i,e,n,s){return i instanceof jl?function(u,l,p,w){if(!bd(u.precondition,l))return p;const A=u.value.clone(),U=sy(u.fieldTransforms,w,l);return A.setAll(U),l.convertToFoundDocument(l.version,A).setHasLocalMutations(),null}(i,e,n,s):i instanceof Dc?function(u,l,p,w){if(!bd(u.precondition,l))return p;const A=sy(u.fieldTransforms,w,l),U=l.data;return U.setAll(v_(u)),U.setAll(A),l.convertToFoundDocument(l.version,U).setHasLocalMutations(),null===p?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(W=>W.field))}(i,e,n,s):(p=n,bd(i.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function Vl(i,e){let n=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),l=qs(s.transform,u||null);null!=l&&(null===n&&(n=Ks.empty()),n.set(s.field,l))}return n||null}function gg(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===s||n&&s&&ha(n,s,(u,l)=>function Ff(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(n=i.transform)instanceof qa&&s instanceof qa||n instanceof Vu&&s instanceof Vu?ha(n.elements,s.elements,Ra):n instanceof ju&&s instanceof ju?Ra(n.gt,s.gt):n instanceof ma&&s instanceof ma);var n,s}(u,l))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,s}class jl extends Bf{constructor(e,n,s,u=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Dc extends Bf{constructor(e,n,s,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function v_(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Nh(i,e,n){const s=new Map;V(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],p=l.transform,w=e.data.field(l.field);s.set(l.field,fs(p,w,n[u]))}return s}function sy(i,e,n){const s=new Map;for(const u of i){const l=u.transform,p=n.data.field(u.field);s.set(u.field,Ti(l,p,e))}return s}class $l extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vf extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jf{constructor(e,n,s,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&pg(l,e,s[u])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Sd(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Sd(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=v();return this.mutations.forEach(u=>{const l=e.get(u.key),p=l.overlayedDocument;let w=this.applyToLocalView(p,l.mutatedFields);w=n.has(u.key)?null:w;const A=iy(p,w);null!==A&&s.set(u.key,A),p.isValidDocument()||p.convertToNoDocument(an.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(n,s)=>gg(n,s))&&ha(this.baseMutations,e.baseMutations,(n,s)=>gg(n,s))}}class Ph{constructor(e,n,s,u){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=u}static from(e,n,s){V(e.mutations.length===s.length);let u=j;const l=e.mutations;for(let p=0;p<l.length;p++)u=u.insert(l[p].key,s[p].version);return new Ph(e,n,s,u)}}class $f{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oh{constructor(e,n){this.count=e,this.unchangedNames=n}}var As,Vr;function kh(i){switch(i){default:return S();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function mg(i){if(void 0===i)return I("GRPC error has no .code"),he.UNKNOWN;switch(i){case As.OK:return he.OK;case As.CANCELLED:return he.CANCELLED;case As.UNKNOWN:return he.UNKNOWN;case As.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case As.INTERNAL:return he.INTERNAL;case As.UNAVAILABLE:return he.UNAVAILABLE;case As.UNAUTHENTICATED:return he.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case As.NOT_FOUND:return he.NOT_FOUND;case As.ALREADY_EXISTS:return he.ALREADY_EXISTS;case As.PERMISSION_DENIED:return he.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case As.ABORTED:return he.ABORTED;case As.OUT_OF_RANGE:return he.OUT_OF_RANGE;case As.UNIMPLEMENTED:return he.UNIMPLEMENTED;case As.DATA_LOSS:return he.DATA_LOSS;default:return S()}}(Vr=As||(As={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class Lh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Jc}static getOrCreateInstance(){return null===Jc&&(Jc=new Lh),Jc}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Jc=null;function oy(){return new TextEncoder}const ay=new la([4294967295,4294967295],0);function uy(i){const e=oy().encode(i),n=new Pc;return n.update(e),new Uint8Array(n.digest())}function cy(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new la([n,s],0),new la([u,l],0)]}class yg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ad(`Invalid padding: ${n}`);if(s<0)throw new Ad(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Ad(`Invalid hash count: ${s}`);if(0===e.length&&0!==n)throw new Ad(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=la.fromNumber(this.It)}Et(e,n,s){let u=e.add(n.multiply(la.fromNumber(s)));return 1===u.compare(ay)&&(u=new la([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=uy(e),[s,u]=cy(n);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,u,l);if(!this.At(p))return!1}return!0}static create(e,n,s){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new yg(l,u,n);return s.forEach(w=>p.insert(w)),p}insert(e){if(0===this.It)return;const n=uy(e),[s,u]=cy(n);for(let l=0;l<this.hashCount;l++){const p=this.Et(s,u,l);this.Rt(p)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rd{constructor(e,n,s,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const u=new Map;return u.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Rd(an.min(),u,new fn(Fn),Wo(),ie())}}class el{constructor(e,n,s,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new el(s,n,ie(),ie(),ie())}}class Md{constructor(e,n,s,u){this.Pt=e,this.removedTargetIds=n,this.key=s,this.bt=u}}class Hl{constructor(e,n){this.targetId=e,this.Vt=n}}class ly{constructor(e,n,s=Es.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=u}}class dy{constructor(){this.St=0,this.Dt=zf(),this.Ct=Es.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ie(),n=ie(),s=ie();return this.Dt.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:s=s.add(u);break;default:S()}}),new el(this.Ct,this.xt,e,n,s)}Ft(){this.Nt=!1,this.Dt=zf()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class SE{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Wo(),this.zt=hy(),this.Wt=new fn(Fn)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const s=this.Zt(n);switch(e.state){case 0:this.te(n)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(n);break;case 3:this.te(n)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),s.$t(e.resumeToken));break;default:S()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((s,u)=>{this.te(u)&&n(u)})}ne(e){var n;const s=e.targetId,u=e.Vt.count,l=this.se(s);if(l){const p=l.target;if(hu(p))if(0===u){const w=new Pt(p.path);this.Yt(s,w,Ri.newNoDocument(w,an.min()))}else V(1===u);else{const w=this.ie(s);if(w!==u){const A=this.re(e,w);0!==A&&(this.ee(s),this.Wt=this.Wt.insert(s,2===A?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=Lh.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(U,W,ne){var Pe,ze,vt,xt,Bt,Kn;const ar={localCacheCount:W,existenceFilterCount:ne.count},pn=ne.unchangedNames;return pn&&(ar.bloomFilter={applied:0===U,hashCount:null!==(Pe=pn?.hashCount)&&void 0!==Pe?Pe:0,bitmapLength:null!==(xt=null===(vt=null===(ze=pn?.bits)||void 0===ze?void 0:ze.bitmap)||void 0===vt?void 0:vt.length)&&void 0!==xt?xt:0,padding:null!==(Kn=null===(Bt=pn?.bits)||void 0===Bt?void 0:Bt.padding)&&void 0!==Kn?Kn:0}),ar}(A,w,e.Vt))}}}}re(e,n){const{unchangedNames:s,count:u}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:l="",padding:p=0},hashCount:w=0}=s;let A,U;try{A=hs(l).toUint8Array()}catch(W){if(W instanceof vd)return b("Decoding the base64 bloom filter in existence filter failed ("+W.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw W}try{U=new yg(A,p,w)}catch(W){return b(W instanceof Ad?"BloomFilter error: ":"Applying bloom filter failed: ",W),1}return 0===U.It?1:u!==n-this.oe(e.targetId,U)?2:0}oe(e,n){const s=this.Gt.getRemoteKeysForTarget(e);let u=0;return s.forEach(l=>{const p=this.Gt.ue(),w=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;n.vt(w)||(this.Yt(e,l,null),u++)}),u}ce(e){const n=new Map;this.Qt.forEach((l,p)=>{const w=this.se(p);if(w){if(l.current&&hu(w.target)){const A=new Pt(w.target.path);null!==this.jt.get(A)||this.ae(p,A)||this.Yt(p,A,Ri.newNoDocument(A,e))}l.Mt&&(n.set(p,l.Ot()),l.Ft())}});let s=ie();this.zt.forEach((l,p)=>{let w=!0;p.forEachWhile(A=>{const U=this.se(A);return!U||"TargetPurposeLimboResolution"===U.purpose||(w=!1,!1)}),w&&(s=s.add(l))}),this.jt.forEach((l,p)=>p.setReadTime(e));const u=new Rd(e,n,this.Wt,this.jt,s);return this.jt=Wo(),this.zt=hy(),this.Wt=new fn(Fn),u}Jt(e,n){if(!this.te(e))return;const s=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,s),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,s){if(!this.te(e))return;const u=this.Zt(e);this.ae(e,n)?u.Bt(n,1):u.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),s&&(this.jt=this.jt.insert(n,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new dy,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Cr(Fn),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||m("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dy),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function hy(){return new fn(Pt.comparator)}function zf(){return new fn(Pt.comparator)}const __={asc:"ASCENDING",desc:"DESCENDING"},xd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gf={and:"AND",or:"OR"};class vg{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wf(i,e){return i.useProto3Json||Aa(e)?e:{value:e}}function zl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _g(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function fy(i,e){return zl(i,e.toTimestamp())}function Rs(i){return V(!!i),an.fromTimestamp(function(e){const n=au(e);return new ni(n.seconds,n.nanos)}(i))}function Eg(i,e){return(n=i,new mr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function py(i){const e=mr.fromString(i);return V(qf(e)),e}function Fh(i,e){return Eg(i.databaseId,e.path)}function $u(i,e){const n=py(e);if(n.get(1)!==i.databaseId.projectId)throw new de(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Pt(E_(n))}function Hu(i,e){return Eg(i.databaseId,e)}function Nd(i){const e=py(i);return 4===e.length?mr.emptyPath():E_(e)}function Uh(i){return new mr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function E_(i){return V(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function I_(i,e,n){return{name:Fh(i,e),fields:n.value.mapValue.fields}}function w_(i,e,n){const s=$u(i,e.name),u=Rs(e.updateTime),l=e.createTime?Rs(e.createTime):an.min(),p=new Ks({mapValue:{fields:e.fields}}),w=Ri.newFoundDocument(s,u,l,p);return n&&w.setHasCommittedMutations(),n?w.setHasCommittedMutations():w}function Pd(i,e){let n;if(e instanceof jl)n={update:I_(i,e.key,e.value)};else if(e instanceof $l)n={delete:Fh(i,e.key)};else if(e instanceof Dc)n={update:I_(i,e.key,e.data),updateMask:Dg(e.fieldMask)};else{if(!(e instanceof Vf))return S();n={verify:Fh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,l){const p=l.transform;if(p instanceof ma)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof qa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Vu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ju)return{fieldPath:l.field.canonicalString(),increment:p.gt};throw S()}(0,s))),e.precondition.isNone||(n.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:fy(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:S()),n;var u}function Ig(i,e){const n=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?ji.updateTime(Rs(u.updateTime)):void 0!==u.exists?ji.exists(u.exists):ji.none():ji.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(l,p){let w=null;"setToServerValue"in p?(V("REQUEST_TIME"===p.setToServerValue),w=new ma):"appendMissingElements"in p?w=new qa(p.appendMissingElements.values||[]):"removeAllFromArray"in p?w=new Vu(p.removeAllFromArray.values||[]):"increment"in p?w=new ju(l,p.increment):S();const A=Wr.fromServerFormat(p.fieldPath);return new wc(A,w)}(i,u)):[];var u;if(e.update){const u=$u(i,e.update.name),l=new Ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Mo((e.updateMask.fieldPaths||[]).map(U=>Wr.fromServerFormat(U)));return new Dc(u,l,p,n,s)}return new jl(u,l,n,s)}if(e.delete){const u=$u(i,e.delete);return new $l(u,n)}if(e.verify){const u=$u(i,e.verify);return new Vf(u,n)}return S()}function gy(i,e){return{documents:[Hu(i,e.path)]}}function wg(i,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=Hu(i,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hu(i,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(A){if(0!==A.length)return T_(fi.create(A,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(A){if(0!==A.length)return A.map(U=>{return{field:Gl((W=U).field),direction:my(W.dir)};var W})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const p=Wf(i,e.limit);var w,A;return null!==p&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt={before:(w=e.startAt).inclusive,values:w.position}),e.endAt&&(n.structuredQuery.endAt={before:!(A=e.endAt).inclusive,values:A.position}),n}function Kf(i){let e=Nd(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let u=null;if(s>0){V(1===s);const W=n.from[0];W.allDescendants?u=W.collectionId:e=e.child(W.collectionId)}let l=[];n.where&&(l=function(W){const ne=Od(W);return ne instanceof fi&&Dd(ne)?ne.getFilters():[ne]}(n.where));let p=[];n.orderBy&&(p=n.orderBy.map(W=>{return new du(Bh((ne=W).field),function(Pe){switch(Pe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ne.direction));var ne}));let w=null;n.limit&&(w=function(W){let ne;return ne="object"==typeof W?W.value:W,Aa(ne)?null:ne}(n.limit));let A=null;var W;n.startAt&&(A=new Fu((W=n.startAt).values||[],!!W.before));let U=null;return n.endAt&&(U=function(W){return new Fu(W.values||[],!W.before)}(n.endAt)),Sh(e,u,p,l,w,"F",A,U)}function Od(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Bh(e.unaryFilter.field);return br.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Bh(e.unaryFilter.field);return br.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Bh(e.unaryFilter.field);return br.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Bh(e.unaryFilter.field);return br.create(l,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(i):void 0!==i.fieldFilter?br.create(Bh((e=i).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return fi.create(e.compositeFilter.filters.map(n=>Od(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return S()}}(e.compositeFilter.op))}(i):S();var e}function my(i){return __[i]}function yy(i){return xd[i]}function vy(i){return Gf[i]}function Gl(i){return{fieldPath:i.canonicalString()}}function Bh(i){return Wr.fromServerFormat(i.fieldPath)}function T_(i){return i instanceof br?function(e){if("=="===e.op){if(Rl(e.value))return{unaryFilter:{field:Gl(e.field),op:"IS_NAN"}};if(Id(e.value))return{unaryFilter:{field:Gl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rl(e.value))return{unaryFilter:{field:Gl(e.field),op:"IS_NOT_NAN"}};if(Id(e.value))return{unaryFilter:{field:Gl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(e.field),op:yy(e.op),value:e.value}}}(i):i instanceof fi?function(e){const n=e.getFilters().map(s=>T_(s));return 1===n.length?n[0]:{compositeFilter:{op:vy(e.op),filters:n}}}(i):S()}function Dg(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class tl{constructor(e,n,s,u,l=an.min(),p=an.min(),w=Es.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=w,this.expectedCount=A}withSequenceNumber(e){return new tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class C_{constructor(e){this.fe=e}}function Ey(i,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Fh(u=i.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:zl(u,l.version.toTimestamp()),createTime:zl(u,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Wl(e.version)};else{if(!e.isUnknownDocument())return S();s.unknownDocument={path:n.path.toArray(),version:Wl(e.version)}}var u,l;return s}function Zf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Wl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kl(i){const e=new ni(i.seconds,i.nanoseconds);return an.fromTimestamp(e)}function nl(i,e){const n=(e.baseMutations||[]).map(l=>Ig(i.fe,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const s=e.mutations.map(l=>Ig(i.fe,l)),u=ni.fromMillis(e.localWriteTimeMs);return new jf(e.batchId,u,n,s)}function rl(i){const e=Kl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Kl(i.lastLimboFreeSnapshotVersion):an.min();let s;var u;return void 0!==i.query.documents?(V(1===(u=i.query).documents.length),s=fo(Yc(Nd(u.documents[0])))):s=fo(Kf(i.query)),new tl(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Es.fromBase64String(i.resumeToken))}function Iy(i,e){const n=Wl(e.snapshotVersion),s=Wl(e.lastLimboFreeSnapshotVersion);let u;u=hu(e.target)?gy(i.fe,e.target):wg(i.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bu(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Vh(i){const e=Kf({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Xc(e,e.limit,"L"):e}function Tg(i,e){return new $f(e.largestBatchId,Ig(i.fe,e.overlayMutation))}function ql(i,e){const n=e.path.lastSegment();return[i,Ws(e.path.popLast()),n]}function wy(i,e,n,s){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Wl(s.readTime),documentKey:Ws(s.documentKey.path),largestBatchId:s.largestBatchId}}class b_{getBundleMetadata(e,n){return Yf(e).get(n).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Kl(u.createTime),version:u.version};var u})}saveBundleMetadata(e,n){return Yf(e).put({bundleId:(s=n).id,createTime:Wl(Rs(s.createTime)),version:s.version});var s}getNamedQuery(e,n){return Cg(e).get(n).next(s=>{if(s)return{name:(u=s).name,query:Vh(u.bundledQuery),readTime:Kl(u.readTime)};var u})}saveNamedQuery(e,n){return Cg(e).put({name:(s=n).name,readTime:Wl(Rs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Yf(i){return Wt(i,"bundles")}function Cg(i){return Wt(i,"namedQueries")}class Qf{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new Qf(e,n.uid||"")}getOverlay(e,n){return jh(e).get(ql(this.userId,n)).next(s=>s?Tg(this.serializer,s):null)}getOverlays(e,n){const s=f();return Qe.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){const u=[];return s.forEach((l,p)=>{const w=new $f(n,p);u.push(this.we(e,w))}),Qe.waitFor(u)}removeOverlaysForBatchId(e,n,s){const u=new Set;n.forEach(p=>u.add(Ws(p.getCollectionPath())));const l=[];return u.forEach(p=>{const w=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(jh(e).J("collectionPathOverlayIndex",w))}),Qe.waitFor(l)}getOverlaysForCollection(e,n,s){const u=f(),l=Ws(n),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return jh(e).j("collectionPathOverlayIndex",p).next(w=>{for(const A of w){const U=Tg(this.serializer,A);u.set(U.getKey(),U)}return u})}getOverlaysForCollectionGroup(e,n,s,u){const l=f();let p;const w=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return jh(e).X({index:"collectionGroupOverlayIndex",range:w},(A,U,W)=>{const ne=Tg(this.serializer,U);l.size()<u||ne.largestBatchId===p?(l.set(ne.getKey(),ne),p=ne.largestBatchId):W.done()}).next(()=>l)}we(e,n){return jh(e).put(function(s,u,l){const[p,w,A]=ql(u,l.mutation.key);return{userId:u,collectionPath:w,documentId:A,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Pd(s.fe,l.mutation)}}(this.serializer,this.userId,n))}}function jh(i){return Wt(i,"documentOverlays")}class Zl{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(ss(e.integerValue));else if("doubleValue"in e){const s=ss(e.doubleValue);isNaN(s)?this.ye(n,13):(this.ye(n,15),$a(s)?n.pe(0):n.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(n,20),"string"==typeof s?n.Ie(s):(n.Ie(`${s.seconds||""}`),n.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(hs(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(n,45),n.pe(s.latitude||0),n.pe(s.longitude||0)}else"mapValue"in e?Mf(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):S()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const s=e.fields||{};this.ye(n,55);for(const u of Object.keys(s))this.Te(u,n),this.me(s[u],n)}Pe(e,n){const s=e.values||[];this.ye(n,50);for(const u of s)this.me(u,n)}ve(e,n){this.ye(n,37),Pt.fromName(e).path.forEach(s=>{this.ye(n,60),this.be(s,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function S_(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function bg(i){const e=64-function(n){let s=0;for(let u=0;u<8;++u){const l=S_(255&n[u]);if(s+=l,8!==l)break}return s}(i);return Math.ceil(e/8)}Zl.Ve=new Zl;class ME{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.De(s.value),s=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Ne(s.value),s=n.next();this.ke()}Me(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const u=n.codePointAt(0);this.De(240|u>>>18),this.De(128|63&u>>>12),this.De(128|63&u>>>6),this.De(128|63&u)}}this.Ce()}$e(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const u=n.codePointAt(0);this.Ne(240|u>>>18),this.Ne(128|63&u>>>12),this.Ne(128|63&u>>>6),this.Ne(128|63&u)}}this.ke()}Oe(e){const n=this.Fe(e),s=bg(n);this.Be(1+s),this.buffer[this.position++]=255&s;for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=255&n[u]}Le(e){const n=this.Fe(e),s=bg(n);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(u){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,u,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&n[0]);n[0]^=s?255:128;for(let u=1;u<n.length;++u)n[u]^=s?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class xE{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $h{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Kr{constructor(){this.je=new ME,this.ze=new xE(this.je),this.We=new $h(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class gu{constructor(e,n,s,u){this.indexId=e,this.documentKey=n,this.arrayValue=s,this.directionalValue=u}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(n);return s.set(this.directionalValue,0),n!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new gu(this.indexId,this.documentKey,this.arrayValue,s)}}function Cc(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Sg(i.arrayValue,e.arrayValue),0!==n?n:(n=Sg(i.directionalValue,e.directionalValue),0!==n?n:Pt.comparator(i.documentKey,e.documentKey)))}function Sg(i,e){for(let n=0;n<i.length&&n<e.length;++n){const s=i[n]-e[n];if(0!==s)return s}return i.length-e.length}class Ag{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const s=n;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){V(e.collectionGroup===this.collectionId);const n=vh(e);if(void 0!==n&&!this.en(n))return!1;const s=Va(e);let u=new Set,l=0,p=0;for(;l<s.length&&this.en(s[l]);++l)u=u.add(s[l].fieldPath.canonicalString());if(l===s.length)return!0;if(void 0!==this.Ze){if(!u.has(this.Ze.field.canonicalString())){const w=s[l];if(!this.nn(this.Ze,w)||!this.sn(this.Ye[p++],w))return!1}++l}for(;l<s.length;++l)if(p>=this.Ye.length||!this.sn(this.Ye[p++],s[l]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Xf(i){var e,n;if(V(i instanceof br||i instanceof fi),i instanceof br){if(i instanceof Ch){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>br.create(i.field,"==",l)))||[];return fi.create(u,"or")}return i}const s=i.filters.map(u=>Xf(u));return fi.create(s,i.op)}function A_(i){if(0===i.getFilters().length)return[];const e=Dy(Xf(i));return V(Hh(e)),Jf(e)||ep(e)?[e]:e.getFilters()}function Jf(i){return i instanceof br}function ep(i){return i instanceof fi&&Dd(i)}function Hh(i){return Jf(i)||ep(i)||function(e){if(e instanceof fi&&Th(e)){for(const n of e.getFilters())if(!Jf(n)&&!ep(n))return!1;return!0}return!1}(i)}function Dy(i){if(V(i instanceof br||i instanceof fi),i instanceof br)return i;if(1===i.filters.length)return Dy(i.filters[0]);const e=i.filters.map(s=>Dy(s));let n=fi.create(e,i.op);return n=kd(n),Hh(n)?n:(V(n instanceof fi),V(Uu(n)),V(n.filters.length>1),n.filters.reduce((s,u)=>zh(s,u)))}function zh(i,e){let n;return V(i instanceof br||i instanceof fi),V(e instanceof br||e instanceof fi),n=i instanceof br?e instanceof br?fi.create([i,e],"and"):Ty(i,e):e instanceof br?Ty(e,i):function(s,u){if(V(s.filters.length>0&&u.filters.length>0),Uu(s)&&Uu(u))return kl(s,u.getFilters());const l=Th(s)?s:u,p=Th(s)?u:s,w=l.filters.map(A=>zh(A,p));return fi.create(w,"or")}(i,e),kd(n)}function Ty(i,e){if(Uu(e))return kl(e,i.getFilters());{const n=e.filters.map(s=>zh(i,s));return fi.create(n,"or")}}function kd(i){if(V(i instanceof br||i instanceof fi),i instanceof br)return i;const e=i.getFilters();if(1===e.length)return kd(e[0]);if(Of(i))return i;const n=e.map(u=>kd(u)),s=[];return n.forEach(u=>{u instanceof br?s.push(u):u instanceof fi&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:fi.create(s,i.op)}class Cy{constructor(){this.rn=new tp}addToCollectionParentIndex(e,n){return this.rn.add(n),Qe.resolve()}getCollectionParents(e,n){return Qe.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return Qe.resolve()}deleteFieldIndex(e,n){return Qe.resolve()}getDocumentsMatchingTarget(e,n){return Qe.resolve(null)}getIndexType(e,n){return Qe.resolve(0)}getFieldIndexes(e,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,n){return Qe.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return Qe.resolve(rs.min())}updateCollectionGroup(e,n,s){return Qe.resolve()}updateIndexEntries(e,n){return Qe.resolve()}}class tp{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n]||new Cr(mr.comparator),l=!u.has(s);return this.index[n]=u.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Cr(mr.comparator)).toArray()}}const zu=new Uint8Array(0);class R_{constructor(e,n){this.user=e,this.databaseId=n,this.on=new tp,this.un=new Ka(s=>Bu(s),(s,u)=>os(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const s=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const l={collectionId:s,parent:Ws(u)};return np(e).put(l)}return Qe.resolve()}getCollectionParents(e,n){const s=[],u=IDBKeyRange.bound([n,""],[Gs(n),""],!1,!0);return np(e).j(u).next(l=>{for(const p of l){if(p.collectionId!==n)break;s.push(ta(p.parent))}return s})}addFieldIndex(e,n){const s=rp(e),u={indexId:(p=n).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var p;delete u.indexId;const l=s.add(u);if(n.indexState){const p=Yl(e);return l.next(w=>{p.put(wy(w,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const s=rp(e),u=Yl(e),l=il(e);return s.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const s=il(e);let u=!0;const l=new Map;return Qe.forEach(this.cn(n),p=>this.an(e,p).next(w=>{u&&(u=!!w),l.set(p,w)})).next(()=>{if(u){let p=ie();const w=[];return Qe.forEach(l,(A,U)=>{var W;m("IndexedDbIndexManager",`Using index ${W=A,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(pn=>`${pn.fieldPath}:${pn.kind}`).join(",")}`} to execute ${Bu(n)}`);const ne=function(pn,ur){const $r=vh(ur);if(void 0===$r)return null;for(const $i of Zc(pn,$r.fieldPath))switch($i.op){case"array-contains-any":return $i.value.arrayValue.values||[];case"array-contains":return[$i.value]}return null}(U,A),Pe=function(pn,ur){const $r=new Map;for(const $i of Va(ur))for(const No of Zc(pn,$i.fieldPath))switch(No.op){case"==":case"in":$r.set($i.fieldPath.canonicalString(),No.value);break;case"not-in":case"!=":return $r.set($i.fieldPath.canonicalString(),No.value),Array.from($r.values())}return null}(U,A),ze=function(pn,ur){const $r=[];let $i=!0;for(const No of Va(ur)){const Cu=0===No.kind?Ll(pn,No.fieldPath,pn.startAt):yc(pn,No.fieldPath,pn.startAt);$r.push(Cu.value),$i&&($i=Cu.inclusive)}return new Fu($r,$i)}(U,A),vt=function(pn,ur){const $r=[];let $i=!0;for(const No of Va(ur)){const Cu=0===No.kind?yc(pn,No.fieldPath,pn.endAt):Ll(pn,No.fieldPath,pn.endAt);$r.push(Cu.value),$i&&($i=Cu.inclusive)}return new Fu($r,$i)}(U,A),xt=this.hn(A,U,ze),Bt=this.hn(A,U,vt),Kn=this.ln(A,U,Pe),ar=this.fn(A.indexId,ne,xt,ze.inclusive,Bt,vt.inclusive,Kn);return Qe.forEach(ar,pn=>s.H(pn,n.limit).next(ur=>{ur.forEach($r=>{const $i=Pt.fromSegments($r.documentKey);p.has($i)||(p=p.add($i),w.push($i))})}))}).next(()=>w)}return Qe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:A_(fi.create(e.filters,"and")).map(s=>Cd(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,s,u,l,p,w){const A=(null!=n?n.length:1)*Math.max(s.length,l.length),U=A/(null!=n?n.length:1),W=[];for(let ne=0;ne<A;++ne){const Pe=n?this.dn(n[ne/U]):zu,ze=this.wn(e,Pe,s[ne%U],u),vt=this._n(e,Pe,l[ne%U],p),xt=w.map(Bt=>this.wn(e,Pe,Bt,!0));W.push(...this.createRange(ze,vt,xt))}return W}wn(e,n,s,u){const l=new gu(e,Pt.empty(),n,s);return u?l:l.Je()}_n(e,n,s,u){const l=new gu(e,Pt.empty(),n,s);return u?l.Je():l}an(e,n){const s=new Ag(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let p=null;for(const w of l)s.tn(w)&&(!p||w.fields.length>p.fields.length)&&(p=w);return p})}getIndexType(e,n){let s=2;const u=this.cn(n);return Qe.forEach(u,l=>this.an(e,l).next(p=>{p?0!==s&&p.fields.length<function(w){let A=new Cr(Wr.comparator),U=!1;for(const W of w.filters)for(const ne of W.getFlattenedFilters())ne.field.isKeyField()||("array-contains"===ne.op||"array-contains-any"===ne.op?U=!0:A=A.add(ne.field));for(const W of w.orderBy)W.field.isKeyField()||(A=A.add(W.field));return A.size+(U?1:0)}(l)&&(s=1):s=0})).next(()=>null!==n.limit&&u.length>1&&2===s?1:s)}mn(e,n){const s=new Kr;for(const u of Va(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const p=s.He(u.kind);Zl.Ve._e(l,p)}return s.Qe()}dn(e){const n=new Kr;return Zl.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const s=new Kr;return Zl.Ve._e(Wa(this.databaseId,n),s.He(function(u){const l=Va(u);return 0===l.length?0:l[l.length-1].kind}(e))),s.Qe()}ln(e,n,s){if(null===s)return[];let u=[];u.push(new Kr);let l=0;for(const p of Va(e)){const w=s[l++];for(const A of u)if(this.yn(n,p.fieldPath)&&Gc(w))u=this.pn(u,p,w);else{const U=A.He(p.kind);Zl.Ve._e(w,U)}}return this.In(u)}hn(e,n,s){return this.ln(e,n,s.position)}In(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].Qe();return n}pn(e,n,s){const u=[...e],l=[];for(const p of s.arrayValue.values||[])for(const w of u){const A=new Kr;A.seed(w.Qe()),Zl.Ve._e(p,A.He(n.kind)),l.push(A)}return l}yn(e,n){return!!e.filters.find(s=>s instanceof br&&s.field.isEqual(n)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,n){const s=rp(e),u=Yl(e);return(n?s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):s.j()).next(l=>{const p=[];return Qe.forEach(l,w=>u.get([w.indexId,this.uid]).next(A=>{p.push(function(U,W){const ne=W?new Fc(W.sequenceNumber,new rs(Kl(W.readTime),new Pt(ta(W.documentKey)),W.largestBatchId)):Fc.empty(),Pe=U.fields.map(([ze,vt])=>new Lc(Wr.fromServerFormat(ze),vt));return new lc(U.indexId,U.collectionGroup,Pe,ne)}(w,A))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((s,u)=>{const l=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:Fn(s.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const u=rp(e),l=Yl(e);return this.Tn(e).next(p=>u.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(w=>Qe.forEach(w,A=>l.put(wy(A.indexId,this.user,p,s)))))}updateIndexEntries(e,n){const s=new Map;return Qe.forEach(n,(u,l)=>{const p=s.get(u.collectionGroup);return(p?Qe.resolve(p):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(s.set(u.collectionGroup,w),Qe.forEach(w,A=>this.En(e,u,A).next(U=>{const W=this.An(l,A);return U.isEqual(W)?Qe.resolve():this.vn(e,l,A,U,W)}))))})}Rn(e,n,s,u){return il(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.gn(s,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,s,u){return il(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.gn(s,n.key),n.key.path.toArray()])}En(e,n,s){const u=il(e);let l=new Cr(Cc);return u.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,n)])},(p,w)=>{l=l.add(new gu(s.indexId,n,w.arrayValue,w.directionalValue))}).next(()=>l)}An(e,n){let s=new Cr(Cc);const u=this.mn(n,e);if(null==u)return s;const l=vh(n);if(null!=l){const p=e.data.field(l.fieldPath);if(Gc(p))for(const w of p.arrayValue.values||[])s=s.add(new gu(n.indexId,e.key,this.dn(w),u))}else s=s.add(new gu(n.indexId,e.key,zu,u));return s}vn(e,n,s,u,l){m("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const p=[];return function(w,A,U,W,ne){const Pe=w.getIterator(),ze=A.getIterator();let vt=is(Pe),xt=is(ze);for(;vt||xt;){let Bt=!1,Kn=!1;if(vt&&xt){const ar=U(vt,xt);ar<0?Kn=!0:ar>0&&(Bt=!0)}else null!=vt?Kn=!0:Bt=!0;Bt?(W(xt),xt=is(ze)):Kn?(ne(vt),vt=is(Pe)):(vt=is(Pe),xt=is(ze))}}(u,l,Cc,w=>{p.push(this.Rn(e,n,s,w))},w=>{p.push(this.Pn(e,n,s,w))}),Qe.waitFor(p)}Tn(e){let n=1;return Yl(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((p,w)=>Cc(p,w)).filter((p,w,A)=>!w||0!==Cc(p,A[w-1]));const u=[];u.push(e);for(const p of s){const w=Cc(p,e),A=Cc(p,n);if(0===w)u[0]=e.Je();else if(w>0&&A<0)u.push(p),u.push(p.Je());else if(A>0)break}u.push(n);const l=[];for(let p=0;p<u.length;p+=2){if(this.bn(u[p],u[p+1]))return[];l.push(IDBKeyRange.bound([u[p].indexId,this.uid,u[p].arrayValue,u[p].directionalValue,zu,[]],[u[p+1].indexId,this.uid,u[p+1].arrayValue,u[p+1].directionalValue,zu,[]]))}return l}bn(e,n){return Cc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Gh)}getMinOffset(e,n){return Qe.mapArray(this.cn(n),s=>this.an(e,s).next(u=>u||S())).next(Gh)}}function np(i){return Wt(i,"collectionParents")}function il(i){return Wt(i,"indexEntries")}function rp(i){return Wt(i,"indexConfiguration")}function Yl(i){return Wt(i,"indexState")}function Gh(i){V(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Tl(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new rs(e.readTime,e.documentKey,n)}const mu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class so{constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new so(e,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ip(i,e,n){const s=i.store("mutations"),u=i.store("documentMutations"),l=[],p=IDBKeyRange.only(n.batchId);let w=0;const A=s.X({range:p},(W,ne,Pe)=>(w++,Pe.delete()));l.push(A.next(()=>{V(1===w)}));const U=[];for(const W of n.mutations){const ne=Pu(e,W.key.path,n.batchId);l.push(u.delete(ne)),U.push(W.key)}return Qe.waitFor(l).next(()=>U)}function sp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw S();e=i.noDocument}return JSON.stringify(e).length}so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(41943040,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);class op{constructor(e,n,s,u){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=u,this.Vn={}}static de(e,n,s,u){V(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new op(l,n,s,u)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xa(e).X({index:"userMutationsIndex",range:s},(u,l,p)=>{n=!1,p.done()}).next(()=>n)}addMutationBatch(e,n,s,u){const l=Ld(e),p=xa(e);return p.add({}).next(w=>{V("number"==typeof w);const A=new jf(w,n,s,u),U=function(Pe,ze,vt){const xt=vt.baseMutations.map(Kn=>Pd(Pe.fe,Kn)),Bt=vt.mutations.map(Kn=>Pd(Pe.fe,Kn));return{userId:ze,batchId:vt.batchId,localWriteTimeMs:vt.localWriteTime.toMillis(),baseMutations:xt,mutations:Bt}}(this.serializer,this.userId,A),W=[];let ne=new Cr((Pe,ze)=>Fn(Pe.canonicalString(),ze.canonicalString()));for(const Pe of u){const ze=Pu(this.userId,Pe.key.path,w);ne=ne.add(Pe.key.path.popLast()),W.push(p.put(U)),W.push(l.put(ze,_h))}return ne.forEach(Pe=>{W.push(this.indexManager.addToCollectionParentIndex(e,Pe))}),e.addOnCommittedListener(()=>{this.Vn[w]=A.keys()}),Qe.waitFor(W).next(()=>A)})}lookupMutationBatch(e,n){return xa(e).get(n).next(s=>s?(V(s.userId===this.userId),nl(this.serializer,s)):null)}Sn(e,n){return this.Vn[n]?Qe.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const u=s.keys();return this.Vn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,u=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return xa(e).X({index:"userMutationsIndex",range:u},(p,w,A)=>{w.userId===this.userId&&(V(w.batchId>=s),l=nl(this.serializer,w)),A.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return xa(e).X({index:"userMutationsIndex",range:n,reverse:!0},(u,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xa(e).j("userMutationsIndex",n).next(s=>s.map(u=>nl(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Nu(this.userId,n.path),u=IDBKeyRange.lowerBound(s),l=[];return Ld(e).X({range:u},(p,w,A)=>{const[U,W,ne]=p,Pe=ta(W);if(U===this.userId&&n.path.isEqual(Pe))return xa(e).get(ne).next(ze=>{if(!ze)throw S();V(ze.userId===this.userId),l.push(nl(this.serializer,ze))});A.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Cr(Fn);const u=[];return n.forEach(l=>{const p=Nu(this.userId,l.path),w=IDBKeyRange.lowerBound(p),A=Ld(e).X({range:w},(U,W,ne)=>{const[Pe,ze,vt]=U,xt=ta(ze);Pe===this.userId&&l.path.isEqual(xt)?s=s.add(vt):ne.done()});u.push(A)}),Qe.waitFor(u).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1,l=Nu(this.userId,s),p=IDBKeyRange.lowerBound(l);let w=new Cr(Fn);return Ld(e).X({range:p},(A,U,W)=>{const[ne,Pe,ze]=A,vt=ta(Pe);ne===this.userId&&s.isPrefixOf(vt)?vt.length===u&&(w=w.add(ze)):W.done()}).next(()=>this.Dn(e,w))}Dn(e,n){const s=[],u=[];return n.forEach(l=>{u.push(xa(e).get(l).next(p=>{if(null===p)throw S();V(p.userId===this.userId),s.push(nl(this.serializer,p))}))}),Qe.waitFor(u).next(()=>s)}removeMutationBatch(e,n){return ip(e.ht,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),Qe.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Qe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Ld(e).X({range:s},(l,p,w)=>{if(l[0]===this.userId){const A=ta(l[1]);u.push(A)}else w.done()}).next(()=>{V(0===u.length)})})}containsKey(e,n){return Rg(e,this.userId,n)}xn(e){return by(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,n){const s=Nu(e,n.path),u=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Ld(i).X({range:l,Y:!0},(w,A,U)=>{const[W,ne,Pe]=w;W===e&&ne===u&&(p=!0),U.done()}).next(()=>p)}function xa(i){return Wt(i,"mutations")}function Ld(i){return Wt(i,"documentMutations")}function by(i){return Wt(i,"mutationQueues")}class Ql{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ql(0)}static Mn(){return new Ql(-1)}}class Mg{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const s=new Ql(n.highestTargetId);return n.highestTargetId=s.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>an.fromTimestamp(new ni(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.$n(e).next(u=>(u.highestListenSequenceNumber=n,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.On(e,u)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(n,s),this.On(e,s))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Xl(e).delete(n.targetId)).next(()=>this.$n(e)).next(s=>(V(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,n,s){let u=0;const l=[];return Xl(e).X((p,w)=>{const A=rl(w);A.sequenceNumber<=n&&null===s.get(A.targetId)&&(u++,l.push(this.removeTargetData(e,A)))}).next(()=>Qe.waitFor(l)).next(()=>u)}forEachTarget(e,n){return Xl(e).X((s,u)=>{const l=rl(u);n(l)})}$n(e){return Sy(e).get("targetGlobalKey").next(n=>(V(null!==n),n))}On(e,n){return Sy(e).put("targetGlobalKey",n)}Fn(e,n){return Xl(e).put(Iy(this.serializer,n))}Bn(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Bu(n),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Xl(e).X({range:u,index:"queryTargetsIndex"},(p,w,A)=>{const U=rl(w);os(n,U.target)&&(l=U,A.done())}).next(()=>l)}addMatchingKeys(e,n,s){const u=[],l=bc(e);return n.forEach(p=>{const w=Ws(p.path);u.push(l.put({targetId:s,path:w})),u.push(this.referenceDelegate.addReference(e,s,p))}),Qe.waitFor(u)}removeMatchingKeys(e,n,s){const u=bc(e);return Qe.forEach(n,l=>{const p=Ws(l.path);return Qe.waitFor([u.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,n){const s=bc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),u=bc(e);let l=ie();return u.X({range:s,Y:!0},(p,w,A)=>{const U=ta(p[1]),W=new Pt(U);l=l.add(W)}).next(()=>l)}containsKey(e,n){const s=Ws(n.path),u=IDBKeyRange.bound([s],[Gs(s)],!1,!0);let l=0;return bc(e).X({index:"documentTargetsIndex",Y:!0,range:u},([p,w],A,U)=>{0!==p&&(l++,U.done())}).next(()=>l>0)}le(e,n){return Xl(e).get(n).next(s=>s?rl(s):null)}}function Xl(i){return Wt(i,"targets")}function Sy(i){return Wt(i,"targetGlobal")}function bc(i){return Wt(i,"targetDocuments")}function ap([i,e],[n,s]){const u=Fn(i,n);return 0===u?Fn(e,s):u}class NE{constructor(e){this.Ln=e,this.buffer=new Cr(ap),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ap(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class M_{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;m("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Oe.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(s){ba(s)?m("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ea(s)}yield n.Qn(3e5)}))}}class x_{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(0===n)return Qe.resolve(cs.ct);const s=new NE(n);return this.jn.forEachTarget(e,u=>s.Kn(u.sequenceNumber)).next(()=>this.jn.Wn(e,u=>s.Kn(u))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.jn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(mu)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mu):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let s,u,l,p,w,A,U;const W=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ne=>(ne>this.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ne}`),u=this.params.maximumSequenceNumbersToCollect):u=ne,p=Date.now(),this.nthSequenceNumber(e,u))).next(ne=>(s=ne,w=Date.now(),this.removeTargets(e,s,n))).next(ne=>(l=ne,A=Date.now(),this.removeOrphanedDocuments(e,s))).next(ne=>(U=Date.now(),su()<=Le.in.DEBUG&&m("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-W}ms\n\tDetermined least recently used ${u} in `+(w-p)+`ms\n\tRemoved ${l} targets in `+(A-w)+`ms\n\tRemoved ${ne} documents in `+(U-A)+`ms\nTotal Duration: ${U-W}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:ne})))}}class PE{constructor(e,n){this.db=e,this.garbageCollector=function Ay(i,e){return new x_(i,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(u=>s+u))}Jn(e){let n=0;return this.Wn(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(s,u)=>n(u))}addReference(e,n,s){return xg(e,s)}removeReference(e,n,s){return xg(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return xg(e,n)}Xn(e,n){return function(s,u){let l=!1;return by(s).Z(p=>Rg(s,p,u).next(w=>(w&&(l=!0),Qe.resolve(!w)))).next(()=>l)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Yn(e,(p,w)=>{if(w<=n){const A=this.Xn(e,p).next(U=>{if(!U)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,an.min()),bc(e).delete([0,Ws(p.path)])))});u.push(A)}}).next(()=>Qe.waitFor(u)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return xg(e,n)}Yn(e,n){const s=bc(e);let u,l=cs.ct;return s.X({index:"documentTargetsIndex"},([p,w],{path:A,sequenceNumber:U})=>{0===p?(l!==cs.ct&&n(new Pt(ta(u)),l),l=U,u=A):l=cs.ct}).next(()=>{l!==cs.ct&&n(new Pt(ta(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xg(i,e){return bc(i).put((s=i.currentSequenceNumber,{targetId:0,path:Ws(e.path),sequenceNumber:s}));var s}class Wh{constructor(){this.changes=new Ka(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ri.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return void 0!==s?Qe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Sc(e).put(s)}removeEntry(e,n,s){return Sc(e).delete(function(u,l){const p=u.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Zf(l),p[p.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.Zn(e,s)))}getEntry(e,n){let s=Ri.newInvalidDocument(n);return Sc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ed(n))},(u,l)=>{s=this.ts(n,l)}).next(()=>s)}es(e,n){let s={size:0,document:Ri.newInvalidDocument(n)};return Sc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ed(n))},(u,l)=>{s={document:this.ts(n,l),size:sp(l)}}).next(()=>s)}getEntries(e,n){let s=Wo();return this.ns(e,n,(u,l)=>{const p=this.ts(u,l);s=s.insert(u,p)}).next(()=>s)}ss(e,n){let s=Wo(),u=new fn(Pt.comparator);return this.ns(e,n,(l,p)=>{const w=this.ts(l,p);s=s.insert(l,w),u=u.insert(l,sp(p))}).next(()=>({documents:s,rs:u}))}ns(e,n,s){if(n.isEmpty())return Qe.resolve();let u=new Cr(Kh);n.forEach(A=>u=u.add(A));const l=IDBKeyRange.bound(ed(u.first()),ed(u.last())),p=u.getIterator();let w=p.getNext();return Sc(e).X({index:"documentKeyIndex",range:l},(A,U,W)=>{const ne=Pt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;w&&Kh(w,ne)<0;)s(w,null),w=p.getNext();w&&w.isEqual(ne)&&(s(w,U),w=p.hasNext()?p.getNext():null),w?W.G(ed(w)):W.done()}).next(()=>{for(;w;)s(w,null),w=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,n,s,u){const l=n.path,p=[l.popLast().toArray(),l.lastSegment(),Zf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],w=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sc(e).j(IDBKeyRange.bound(p,w,!0)).next(A=>{let U=Wo();for(const W of A){const ne=this.ts(Pt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);ne.isFoundDocument()&&(_c(n,ne)||u.has(ne.key))&&(U=U.insert(ne.key,ne))}return U})}getAllFromCollectionGroup(e,n,s,u){let l=Wo();const p=Fd(n,s),w=Fd(n,rs.max());return Sc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,w,!0)},(A,U,W)=>{const ne=this.ts(Pt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);l=l.insert(ne.key,ne),l.size===u&&W.done()}).next(()=>l)}newChangeBuffer(e){return new Ng(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Jl(e).get("remoteDocumentGlobalKey").next(n=>(V(!!n),n))}Zn(e,n){return Jl(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const s=function _y(i,e){let n;if(e.document)n=w_(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Pt.fromSegments(e.noDocument.path),u=Kl(e.noDocument.readTime);n=Ri.newNoDocument(s,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return S();{const s=Pt.fromSegments(e.unknownDocument.path),u=Kl(e.unknownDocument.version);n=Ri.newUnknownDocument(s,u)}}return e.readTime&&n.setReadTime(function(s){const u=new ni(s[0],s[1]);return an.fromTimestamp(u)}(e.readTime)),n}(this.serializer,n);if(!s.isNoDocument()||!s.version.isEqual(an.min()))return s}return Ri.newInvalidDocument(e)}}function up(i){return new N_(i)}class Ng extends Wh{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Ka(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const n=[];let s=0,u=new Cr((l,p)=>Fn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const w=this.us.get(l);if(n.push(this.os.removeEntry(e,l,w.readTime)),p.isValidDocument()){const A=Ey(this.os.serializer,p);u=u.add(l.path.popLast());const U=sp(A);s+=U-w.size,n.push(this.os.addEntry(e,l,A))}else if(s-=w.size,this.trackRemovals){const A=Ey(this.os.serializer,p.convertToNoDocument(an.min()));n.push(this.os.addEntry(e,l,A))}}),u.forEach(l=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),n.push(this.os.updateMetadata(e,s)),Qe.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(s=>(this.us.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:s,rs:u})=>(u.forEach((l,p)=>{this.us.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function Jl(i){return Wt(i,"remoteDocumentGlobal")}function Sc(i){return Wt(i,"remoteDocumentsV14")}function ed(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fd(i,e){const n=e.documentKey.path.toArray();return[i,Zf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Kh(i,e){const n=i.path.toArray(),s=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<s.length-2;++l)if(u=Fn(n[l],s[l]),u)return u;return u=Fn(n.length,s.length),u||(u=Fn(n[n.length-2],s[s.length-2]),u||Fn(n[n.length-1],s[s.length-1]))}class Ud{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cp{constructor(e,n,s,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==s&&Sd(s.mutation,u,Mo.empty(),ni.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ie()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ie()){const u=f();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,s).next(l=>{let p=C();return l.forEach((w,A)=>{p=p.insert(w,A.overlayedDocument)}),p}))}getOverlayedDocuments(e,n){const s=f();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ie()))}populateOverlays(e,n,s){const u=[];return s.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((p,w)=>{n.set(p,w)})})}computeViews(e,n,s,u){let l=Wo();const p=N(),w=N();return n.forEach((A,U)=>{const W=s.get(U.key);u.has(U.key)&&(void 0===W||W.mutation instanceof Dc)?l=l.insert(U.key,U):void 0!==W?(p.set(U.key,W.mutation.getFieldMask()),Sd(W.mutation,U,W.mutation.getFieldMask(),ni.now())):p.set(U.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,l).next(A=>(A.forEach((U,W)=>p.set(U,W)),n.forEach((U,W)=>{var ne;return w.set(U,new Ud(W,null!==(ne=p.get(U))&&void 0!==ne?ne:null))}),w))}recalculateAndSaveOverlays(e,n){const s=N();let u=new fn((p,w)=>p-w),l=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(p=>{for(const w of p)w.keys().forEach(A=>{const U=n.get(A);if(null===U)return;let W=s.get(A)||Mo.empty();W=w.applyToLocalView(U,W),s.set(A,W);const ne=(u.get(w.batchId)||ie()).add(A);u=u.insert(w.batchId,ne)})}).next(()=>{const p=[],w=u.getReverseIterator();for(;w.hasNext();){const A=w.getNext(),U=A.key,W=A.value,ne=v();W.forEach(Pe=>{if(!l.has(Pe)){const ze=iy(n.get(Pe),s.get(Pe));null!==ze&&ne.set(Pe,ze),l=l.add(Pe)}}),p.push(this.documentOverlayCache.saveOverlays(e,U,ne))}return Qe.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return Pt.isDocumentKey((u=n).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Ah(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s);var u}getNextDocuments(e,n,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,u).next(l=>{const p=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,u-l.size):Qe.resolve(f());let w=-1,A=l;return p.next(U=>Qe.forEach(U,(W,ne)=>(w<ne.largestBatchId&&(w=ne.largestBatchId),l.get(W)?Qe.resolve():this.remoteDocumentCache.getEntry(e,W).next(Pe=>{A=A.insert(W,Pe)}))).next(()=>this.populateOverlays(e,U,l)).next(()=>this.computeViews(e,A,U,ie())).next(W=>({batchId:w,changes:h(W)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pt(n)).next(s=>{let u=C();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const u=n.collectionGroup;let l=C();return this.indexManager.getCollectionParents(e,u).next(p=>Qe.forEach(p,w=>{const A=(U=n,W=w.child(u),new ga(W,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,W;return this.getDocumentsMatchingCollectionQuery(e,A,s).next(U=>{U.forEach((W,ne)=>{l=l.insert(W,ne)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(l=>(u=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u))).next(l=>{u.forEach((w,A)=>{const U=A.getKey();null===l.get(U)&&(l=l.insert(U,Ri.newInvalidDocument(U)))});let p=C();return l.forEach((w,A)=>{const U=u.get(w);void 0!==U&&Sd(U.mutation,A,Mo.empty(),ni.now()),_c(n,A)&&(p=p.insert(w,A))}),p})}}class Pg{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return Qe.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var s;return this.cs.set(n.id,{id:(s=n).id,version:s.version,createTime:Rs(s.createTime)}),Qe.resolve()}getNamedQuery(e,n){return Qe.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(s=n).name,query:Vh(s.bundledQuery),readTime:Rs(s.readTime)}),Qe.resolve();var s}}class lp{constructor(){this.overlays=new fn(Pt.comparator),this.ls=new Map}getOverlay(e,n){return Qe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=f();return Qe.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((u,l)=>{this.we(e,n,l)}),Qe.resolve()}removeOverlaysForBatchId(e,n,s){const u=this.ls.get(s);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(s)),Qe.resolve()}getOverlaysForCollection(e,n,s){const u=f(),l=n.length+1,p=new Pt(n.child("")),w=this.overlays.getIteratorFrom(p);for(;w.hasNext();){const A=w.getNext().value,U=A.getKey();if(!n.isPrefixOf(U.path))break;U.path.length===l&&A.largestBatchId>s&&u.set(A.getKey(),A)}return Qe.resolve(u)}getOverlaysForCollectionGroup(e,n,s,u){let l=new fn((U,W)=>U-W);const p=this.overlays.getIterator();for(;p.hasNext();){const U=p.getNext().value;if(U.getKey().getCollectionGroup()===n&&U.largestBatchId>s){let W=l.get(U.largestBatchId);null===W&&(W=f(),l=l.insert(U.largestBatchId,W)),W.set(U.getKey(),U)}}const w=f(),A=l.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((U,W)=>w.set(U,W)),!(w.size()>=u)););return Qe.resolve(w)}we(e,n,s){const u=this.overlays.get(s.key);if(null!==u){const p=this.ls.get(u.largestBatchId).delete(s.key);this.ls.set(u.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new $f(n,s));let l=this.ls.get(n);void 0===l&&(l=ie(),this.ls.set(n,l)),this.ls.set(n,l.add(s.key))}}class Ry{constructor(){this.fs=new Cr(Zs.ds),this.ws=new Cr(Zs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const s=new Zs(e,n);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.ys(new Zs(e,n))}ps(e,n){e.forEach(s=>this.removeReference(s,n))}Is(e){const n=new Pt(new mr([])),s=new Zs(n,e),u=new Zs(n,e+1),l=[];return this.ws.forEachInRange([s,u],p=>{this.ys(p),l.push(p.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Pt(new mr([])),s=new Zs(n,e),u=new Zs(n,e+1);let l=ie();return this.ws.forEachInRange([s,u],p=>{l=l.add(p.key)}),l}containsKey(e){const n=new Zs(e,0),s=this.fs.firstAfterOrEqual(n);return null!==s&&e.isEqual(s.key)}}class Zs{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Pt.comparator(e.key,n.key)||Fn(e.As,n.As)}static _s(e,n){return Fn(e.As,n.As)||Pt.comparator(e.key,n.key)}}class qh{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Cr(Zs.ds)}checkEmpty(e){return Qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,s,u){const l=this.vs;this.vs++;const p=new jf(l,n,s,u);this.mutationQueue.push(p);for(const w of u)this.Rs=this.Rs.add(new Zs(w.key,l)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return Qe.resolve(p)}lookupMutationBatch(e,n){return Qe.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.bs(n+1),l=u<0?0:u;return Qe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Zs(n,0),u=new Zs(n,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([s,u],p=>{const w=this.Ps(p.As);l.push(w)}),Qe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Cr(Fn);return n.forEach(u=>{const l=new Zs(u,0),p=new Zs(u,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,p],w=>{s=s.add(w.As)})}),Qe.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1;let l=s;Pt.isDocumentKey(l)||(l=l.child(""));const p=new Zs(new Pt(l),0);let w=new Cr(Fn);return this.Rs.forEachWhile(A=>{const U=A.key.path;return!!s.isPrefixOf(U)&&(U.length===u&&(w=w.add(A.As)),!0)},p),Qe.resolve(this.Vs(w))}Vs(e){const n=[];return e.forEach(s=>{const u=this.Ps(s);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){V(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Qe.forEach(n.mutations,u=>{const l=new Zs(u.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,n){const s=new Zs(n,0),u=this.Rs.firstAfterOrEqual(s);return Qe.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Qe.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class P_{constructor(e){this.Ds=e,this.docs=new fn(Pt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,u=this.docs.get(s),l=u?u.size:0,p=this.Ds(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Qe.resolve(s?s.document.mutableCopy():Ri.newInvalidDocument(n))}getEntries(e,n){let s=Wo();return n.forEach(u=>{const l=this.docs.get(u);s=s.insert(u,l?l.document.mutableCopy():Ri.newInvalidDocument(u))}),Qe.resolve(s)}getDocumentsMatchingQuery(e,n,s,u){let l=Wo();const p=n.path,w=new Pt(p.child("")),A=this.docs.getIteratorFrom(w);for(;A.hasNext();){const{key:U,value:{document:W}}=A.getNext();if(!p.isPrefixOf(U.path))break;U.path.length>p.length+1||Tl(dc(W),s)<=0||(u.has(W.key)||_c(n,W))&&(l=l.insert(W.key,W.mutableCopy()))}return Qe.resolve(l)}getAllFromCollectionGroup(e,n,s,u){S()}Cs(e,n){return Qe.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new My(this)}getSize(e){return Qe.resolve(this.size)}}class My extends Wh{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?n.push(this.os.addEntry(e,u)):this.os.removeEntry(s)}),Qe.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class O_{constructor(e){this.persistence=e,this.xs=new Ka(n=>Bu(n),os),this.lastRemoteSnapshotVersion=an.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ry,this.targetCount=0,this.Ms=Ql.kn()}forEachTarget(e,n){return this.xs.forEach((s,u)=>n(u)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Ns&&(this.Ns=n),Qe.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ql(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(e,n){return this.Fn(n),Qe.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,n,s){let u=0;const l=[];return this.xs.forEach((p,w)=>{w.sequenceNumber<=n&&null===s.get(w.targetId)&&(this.xs.delete(p),l.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),Qe.waitFor(l).next(()=>u)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,n){const s=this.xs.get(n)||null;return Qe.resolve(s)}addMatchingKeys(e,n,s){return this.ks.gs(n,s),Qe.resolve()}removeMatchingKeys(e,n,s){this.ks.ps(n,s);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(p=>{l.push(u.markPotentiallyOrphaned(e,p))}),Qe.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),Qe.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ks.Es(n);return Qe.resolve(s)}containsKey(e,n){return Qe.resolve(this.ks.containsKey(n))}}class Og{constructor(e,n){this.$s={},this.overlays={},this.Os=new cs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new O_(this),this.indexManager=new Cy,this.remoteDocumentCache=new P_(s=>this.referenceDelegate.Ls(s)),this.serializer=new C_(n),this.qs=new Pg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.$s[e.toKey()];return s||(s=new qh(n,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,s){m("MemoryPersistence","Starting transaction:",e);const u=new kg(this.Os.next());return this.referenceDelegate.Us(),s(u).next(l=>this.referenceDelegate.Ks(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Gs(e,n){return Qe.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,n)))}}class kg extends Uc{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Qs=new Ry,this.js=null}static zs(e){return new Zh(e)}get Ws(){if(this.js)return this.js;throw S()}addReference(e,n,s){return this.Qs.addReference(s,n),this.Ws.delete(s.toString()),Qe.resolve()}removeReference(e,n,s){return this.Qs.removeReference(s,n),this.Ws.add(s.toString()),Qe.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),Qe.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(u=>this.Ws.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Ws.add(l.toString()))}).next(()=>s.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Ws,s=>{const u=Pt.fromPath(s);return this.Hs(e,u).next(l=>{l||n.removeEntry(u,an.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(s=>{s?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return Qe.or([()=>Qe.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class k_{constructor(e){this.serializer=e}O(e,n,s,u){const l=new hc("createOrUpgrade",n);var w;s<1&&u>=1&&(e.createObjectStore("owner"),(w=e).createObjectStore("mutationQueues",{keyPath:"userId"}),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0}),w.createObjectStore("documentMutations"),L_(e),function(w){w.createObjectStore("remoteDocuments")}(e));let p=Qe.resolve();return s<3&&u>=3&&(0!==s&&(function(w){w.deleteObjectStore("targetDocuments"),w.deleteObjectStore("targets"),w.deleteObjectStore("targetGlobal")}(e),L_(e)),p=p.next(()=>function(w){const A=w.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:an.min().toTimestamp(),targetCount:0};return A.put("targetGlobalKey",U)}(l))),s<4&&u>=4&&(0!==s&&(p=p.next(()=>function(w,A){return A.store("mutations").j().next(U=>{w.deleteObjectStore("mutations"),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0});const W=A.store("mutations"),ne=U.map(Pe=>W.put(Pe));return Qe.waitFor(ne)})}(e,l))),p=p.next(()=>{!function(w){w.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(p=p.next(()=>this.Ys(l))),s<6&&u>=6&&(p=p.next(()=>(function(w){w.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),s<7&&u>=7&&(p=p.next(()=>this.Zs(l))),s<8&&u>=8&&(p=p.next(()=>this.ti(e,l))),s<9&&u>=9&&(p=p.next(()=>{!function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(p=p.next(()=>this.ei(l))),s<11&&u>=11&&(p=p.next(()=>{(function(w){w.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(w){w.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(p=p.next(()=>{!function(w){const A=w.createObjectStore("documentOverlays",{keyPath:B});A.createIndex("collectionPathOverlayIndex",Y,{unique:!1}),A.createIndex("collectionGroupOverlayIndex",pe,{unique:!1})}(e)})),s<13&&u>=13&&(p=p.next(()=>function(w){const A=w.createObjectStore("remoteDocumentsV14",{keyPath:qi});A.createIndex("documentKeyIndex",yd),A.createIndex("collectionGroupIndex",Ga)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(p=p.next(()=>this.si(e,l))),s<15&&u>=15&&(p=p.next(()=>function(w){w.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),w.createObjectStore("indexState",{keyPath:ku}).createIndex("sequenceNumberIndex",gc,{unique:!1}),w.createObjectStore("indexEntries",{keyPath:R}).createIndex("documentKeyIndex",x,{unique:!1})}(e))),p}Xs(e){let n=0;return e.store("remoteDocuments").X((s,u)=>{n+=sp(u)}).next(()=>{const s={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const n=e.store("mutationQueues"),s=e.store("mutations");return n.j().next(u=>Qe.forEach(u,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(w=>Qe.forEach(w,A=>{V(A.userId===l.userId);const U=nl(this.serializer,A);return ip(e,l.userId,U).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return s.X((p,w)=>{const A=new mr(p),U=[0,Ws(A)];l.push(n.get(U).next(W=>W?Qe.resolve():n.put({targetId:0,path:Ws(A),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Qe.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Al});const s=n.store("collectionParents"),u=new tp,l=p=>{if(u.add(p)){const w=p.lastSegment(),A=p.popLast();return s.put({collectionId:w,parent:Ws(A)})}};return n.store("remoteDocuments").X({Y:!0},(p,w)=>{const A=new mr(p);return l(A.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([p,w,A],U)=>{const W=ta(w);return l(W.popLast())}))}ei(e){const n=e.store("targets");return n.X((s,u)=>{const l=rl(u),p=Iy(this.serializer,l);return n.put(p)})}ni(e,n){const s=n.store("remoteDocuments"),u=[];return s.X((l,p)=>{const w=n.store("remoteDocumentsV14"),A=(U=p,U.document?new Pt(mr.fromString(U.document.name).popFirst(5)):U.noDocument?Pt.fromSegments(U.noDocument.path):U.unknownDocument?Pt.fromSegments(U.unknownDocument.path):S()).path.toArray();var U;const W={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};u.push(w.put(W))}).next(()=>Qe.waitFor(u))}si(e,n){const s=n.store("mutations"),u=up(this.serializer),l=new Og(Zh.zs,this.serializer.fe);return s.j().next(p=>{const w=new Map;return p.forEach(A=>{var U;let W=null!==(U=w.get(A.userId))&&void 0!==U?U:ie();nl(this.serializer,A).keys().forEach(ne=>W=W.add(ne)),w.set(A.userId,W)}),Qe.forEach(w,(A,U)=>{const W=new Vi(U),ne=Qf.de(this.serializer,W),Pe=l.getIndexManager(W),ze=op.de(W,this.serializer,Pe,l.referenceDelegate);return new cp(u,ze,ne,Pe).recalculateAndSaveOverlaysForDocumentKeys(new en(n,cs.ct),A).next()})})}}function L_(i){i.createObjectStore("targetDocuments",{keyPath:Af}).createIndex("documentTargetsIndex",Sl,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ou,{unique:!0}),i.createObjectStore("targetGlobal")}const Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bd{constructor(e,n,s,u,l,p,w,A,U,W,ne=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.ii=l,this.window=p,this.document=w,this.ri=U,this.oi=W,this.ui=ne,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Pe=>Promise.resolve(),!Bd.D())throw new de(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PE(this,u),this.di=n+"main",this.serializer=new C_(A),this.wi=new Ro(this.di,this.ui,new k_(this.serializer)),this.Bs=new Mg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=up(this.serializer),this.qs=new b_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===W&&I("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(he.FAILED_PRECONDITION,Lg);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new cs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var s,n=this;return this.fi=function(u){return(s=s||(0,Oe.Z)(function*(l){if(n.started)return e(l)})).apply(this,arguments)},e(this.isPrimary)}setDatabaseDeletedListener(e){var n;this.wi.B(function(s){return(n=n||(0,Oe.Z)(function*(u){null===u.newVersion&&(yield e())})).apply(this,arguments)})}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Oe.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(ba(e))return m("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return m("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return td(e).get("owner").next(n=>Qe.resolve(this.Ri(n)))}Pi(e){return hp(e).delete(this.clientId)}bi(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Wt(s,"clientMetadata");return u.j().next(l=>{const p=e.Si(l,18e5),w=l.filter(A=>-1===p.indexOf(A));return Qe.forEach(w,A=>u.delete(A.clientId)).next(()=>w)})}).catch(()=>[]);if(e._i)for(const s of n)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Qe.resolve(!0):td(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new de(he.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||hp(e).j().next(s=>void 0===this.Si(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&m("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const s=new en(n,cs.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(s=>this.Vi(s.updateTimeMs,n)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>hp(e).j().next(n=>this.Si(n,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return op.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Qf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,s){m("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(p=this.ui)?Kt:14===p?At:13===p?yt:12===p?rt:11===p?je:void S();var p;let w;return this.wi.runTransaction(e,u,l,A=>(w=new en(A,this.Os?this.Os.next():cs.ct),"readwrite-primary"===n?this.Ti(w).next(U=>!!U||this.Ei(w)).next(U=>{if(!U)throw I(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new de(he.FAILED_PRECONDITION,fa);return s(w)}).next(U=>this.vi(w).next(()=>U)):this.Oi(w).next(()=>s(w)))).then(A=>(w.raiseOnCommittedEvent(),A))}Oi(e){return td(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new de(he.FAILED_PRECONDITION,Lg)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return td(e).put("owner",n)}static D(){return Ro.D()}Ai(e){const n=td(e);return n.get("owner").next(s=>this.Ri(s)?(m("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Qe.resolve())}Vi(e,n){const s=Date.now();return!(e<s-n||e>s&&(I(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,Te.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const s=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return m("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return I("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){I("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function td(i){return Wt(i,"owner")}function hp(i){return Wt(i,"clientMetadata")}function fp(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Yh{constructor(e,n,s,u){this.targetId=e,this.fromCache=n,this.Fi=s,this.Bi=u}static Li(e,n){let s=ie(),u=ie();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Yh(e,n.fromCache,s,u)}}class Qh{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,s,u){return this.Ki(e,n).next(l=>l||this.Gi(e,n,u,s)).next(l=>l||this.Qi(e,n))}Ki(e,n){if(fu(n))return Qe.resolve(null);let s=fo(n);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Xc(n,null,"F"),s=fo(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=ie(...l);return this.Ui.getDocuments(e,p).next(w=>this.indexManager.getMinOffset(e,s).next(A=>{const U=this.ji(n,w);return this.zi(n,U,p,A.readTime)?this.Ki(e,Xc(n,null,"F")):this.Wi(e,U,n,A)}))})))}Gi(e,n,s,u){return fu(n)||u.isEqual(an.min())?this.Qi(e,n):this.Ui.getDocuments(e,s).next(l=>{const p=this.ji(n,l);return this.zi(n,p,s,u)?this.Qi(e,n):(su()<=Le.in.DEBUG&&m("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),pu(n)),this.Wi(e,p,n,Sf(u,-1)))})}ji(e,n){let s=new Cr(io(e));return n.forEach((u,l)=>{_c(e,l)&&(s=s.add(l))}),s}zi(e,n,s,u){if(null===e.limit)return!1;if(s.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Qi(e,n){return su()<=Le.in.DEBUG&&m("QueryEngine","Using full collection scan to execute query:",pu(n)),this.Ui.getDocumentsMatchingQuery(e,n,rs.min())}Wi(e,n,s,u){return this.Ui.getDocumentsMatchingQuery(e,s,u).next(l=>(n.forEach(p=>{l=l.insert(p.key,p)}),l))}}class F_{constructor(e,n,s,u){this.persistence=e,this.Hi=n,this.serializer=u,this.Ji=new fn(Fn),this.Yi=new Ka(l=>Bu(l),os),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Fg(i,e,n,s){return new F_(i,e,n,s)}function xy(i,e){return(li=li||(0,Oe.Z)(function*(n,s){const u=ce(n);return yield u.persistence.runTransaction("Handle user change","readonly",l=>{let p;return u.mutationQueue.getAllMutationBatches(l).next(w=>(p=w,u.tr(s),u.mutationQueue.getAllMutationBatches(l))).next(w=>{const A=[],U=[];let W=ie();for(const ne of p){A.push(ne.batchId);for(const Pe of ne.mutations)W=W.add(Pe.key)}for(const ne of w){U.push(ne.batchId);for(const Pe of ne.mutations)W=W.add(Pe.key)}return u.localDocuments.getDocuments(l,W).next(ne=>({er:ne,removedBatchIds:A,addedBatchIds:U}))})})})).apply(this,arguments)}function U_(i){const e=ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function Xh(i,e,n){let s=ie(),u=ie();return n.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let p=Wo();return n.forEach((w,A)=>{const U=l.get(w);A.isFoundDocument()!==U.isFoundDocument()&&(u=u.add(w)),A.isNoDocument()&&A.version.isEqual(an.min())?(e.removeEntry(w,A.readTime),p=p.insert(w,A)):!U.isValidDocument()||A.version.compareTo(U.version)>0||0===A.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(A),p=p.insert(w,A)):m("LocalStore","Ignoring outdated watch update for ",w,". Current version:",U.version," Watch version:",A.version)}),{nr:p,sr:u}})}function V_(i,e){const n=ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function yu(i,e){const n=ce(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return n.Bs.getTargetData(s,e).next(l=>l?(u=l,Qe.resolve(u)):n.Bs.allocateTargetId(s).next(p=>(u=new tl(e,p,"TargetPurposeListen",s.currentSequenceNumber),n.Bs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=n.Ji.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(s.targetId,s),n.Yi.set(e,s.targetId)),s})}function Gu(i,e,n){return(_l=_l||(0,Oe.Z)(function*(s,u,l){const p=ce(s),w=p.Ji.get(u),A=l?"readwrite":"readwrite-primary";try{l||(yield p.persistence.runTransaction("Release target",A,U=>p.persistence.referenceDelegate.removeTarget(U,w)))}catch(U){if(!ba(U))throw U;m("LocalStore",`Failed to update sequence numbers for target ${u}: ${U}`)}p.Ji=p.Ji.remove(u),p.Yi.delete(w.target)})).apply(this,arguments)}function pp(i,e,n){const s=ce(i);let u=an.min(),l=ie();return s.persistence.runTransaction("Execute query","readonly",p=>function(w,A,U){const W=ce(w),ne=W.Yi.get(U);return void 0!==ne?Qe.resolve(W.Ji.get(ne)):W.Bs.getTargetData(A,U)}(s,p,fo(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,w.targetId).next(A=>{l=A})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,n?u:an.min(),n?l:ie())).next(w=>(Oy(s,Bl(e),w),{documents:w,ir:l})))}function Ug(i,e){const n=ce(i),s=ce(n.Bs),u=n.Ji.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>s.le(l,e).next(p=>p?p.target:null))}function Py(i,e){const n=ce(i),s=n.Xi.get(e)||an.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.Zi.getAllFromCollectionGroup(u,e,Sf(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Oy(n,e,u),u))}function Oy(i,e,n){let s=i.Xi.get(e)||an.min();n.forEach((u,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.Xi.set(e,s)}function ky(i,e){return(nu=nu||(0,Oe.Z)(function*(n,s,u=ie()){const l=yield yu(n,fo(Vh(s.bundledQuery))),p=ce(n);return p.persistence.runTransaction("Save named query","readwrite",w=>{const A=Rs(s.readTime);if(l.snapshotVersion.compareTo(A)>=0)return p.qs.saveNamedQuery(w,s);const U=l.withResumeToken(Es.EMPTY_BYTE_STRING,A);return p.Ji=p.Ji.insert(U.targetId,U),p.Bs.updateTargetData(w,U).next(()=>p.Bs.removeMatchingKeysForTargetId(w,l.targetId)).next(()=>p.Bs.addMatchingKeys(w,u,l.targetId)).next(()=>p.qs.saveNamedQuery(w,s))})})).apply(this,arguments)}function Bg(i,e){return`firestore_clients_${i}_${e}`}function gp(i,e,n){let s=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ly(i,e){return`firestore_targets_${i}_${e}`}class Vd{constructor(e,n,s,u){this.user=e,this.batchId=n,this.state=s,this.error=u}static ar(e,n,s){const u=JSON.parse(s);let l,p="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return p&&u.error&&(p="string"==typeof u.error.message&&"string"==typeof u.error.code,p&&(l=new de(u.error.code,u.error.message))),p?new Vd(e,n,u.state,l):(I("SharedClientState",`Failed to parse mutation state for ID '${n}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jd{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static ar(e,n){const s=JSON.parse(n);let u,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new de(s.error.code,s.error.message))),l?new jd(e,s.state,u):(I("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const s=JSON.parse(n);let u="object"==typeof s&&s.activeTargetIds instanceof Array,l=at();for(let p=0;u&&p<s.activeTargetIds.length;++p)u=bl(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return u?new mp(e,l):(I("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Vg{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Vg(n.clientId,n.onlineState):(I("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yp{constructor(){this.activeTargetIds=at()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jg{constructor(e,n,s,u,l){this.window=e,this.ii=n,this.persistenceKey=s,this.wr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new fn(Fn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=Bg(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new yp),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(w){return`firestore_bundle_loaded_v2_${w}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const n=yield e.syncEngine.$i();for(const u of n){if(u===e.wr)continue;const l=e.getItem(Bg(e.persistenceKey,u));if(l){const p=mp.ar(u,l);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const u=e.br(s);u&&e.Vr(u)}for(const u of e.yr)e.mr(u);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((s,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,s){this.Dr(e,n,s),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ly(this.persistenceKey,e));if(s){const u=jd.ar(e,s);u&&(n=u.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ly(this.persistenceKey,e))}updateQueryState(e,n,s){this.kr(e,n,s)}handleUserChange(e,n,s){n.forEach(u=>{this.Cr(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return m("SharedClientState","READ",e,n),n}setItem(e,n){m("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){m("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const s=e;if(s.storageArea===this.storage){if(m("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void I("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Oe.Z)(function*(){if(n.started){if(null!==s.key)if(n.Tr.test(s.key)){if(null==s.newValue){const u=n.Or(s.key);return n.Fr(u,null)}{const u=n.Br(s.key,s.newValue);if(u)return n.Fr(u.clientId,u)}}else if(n.Er.test(s.key)){if(null!==s.newValue){const u=n.Lr(s.key,s.newValue);if(u)return n.qr(u)}}else if(n.Ar.test(s.key)){if(null!==s.newValue){const u=n.Ur(s.key,s.newValue);if(u)return n.Kr(u)}}else if(s.key===n.vr){if(null!==s.newValue){const u=n.br(s.newValue);if(u)return n.Vr(u)}}else if(s.key===n.Ir){const u=function(l){let p=cs.ct;if(null!=l)try{const w=JSON.parse(l);V("number"==typeof w),p=w}catch(w){I("SharedClientState","Failed to read sequence number from WebStorage",w)}return p}(s.newValue);u!==cs.ct&&n.sequenceNumberHandler(u)}else if(s.key===n.Rr){const u=n.Gr(s.newValue);yield Promise.all(u.map(l=>n.syncEngine.Qr(l)))}}else n.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,s){const u=new Vd(this.currentUser,e,n,s),l=gp(this.persistenceKey,this.currentUser,e);this.setItem(l,u.hr())}Cr(e){const n=gp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,s){const u=Ly(this.persistenceKey,e),l=new jd(e,n,s);this.setItem(u,l.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const s=this.Or(e);return mp.ar(s,n)}Lr(e,n){const s=this.Er.exec(e),u=Number(s[1]);return Vd.ar(new Vi(void 0!==s[2]?s[2]:null),u,n)}Ur(e,n){const s=this.Ar.exec(e),u=Number(s[1]);return jd.ar(u,n)}br(e){return Vg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,Oe.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);m("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const s=n?this.gr.insert(e,n):this.gr.remove(e),u=this.Sr(this.gr),l=this.Sr(s),p=[],w=[];return l.forEach(A=>{u.has(A)||p.push(A)}),u.forEach(A=>{l.has(A)||w.push(A)}),this.syncEngine.Wr(p,w).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=at();return e.forEach((s,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class $g{constructor(){this.Hr=new yp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,s){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new yp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $_{Yr(e){}shutdown(){}}class Fy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hg=null;function vp(){return null===Hg?Hg=268435456+Math.round(2147483648*Math.random()):Hg++,"0x"+Hg.toString(16)}const Uy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const xo="WebChannelConnection";class OE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,s,u,l){const p=vp(),w=this.To(e,n);m("RestConnection",`Sending RPC '${e}' ${p}:`,w,s);const A={};return this.Eo(A,u,l),this.Ao(e,w,A,s).then(U=>(m("RestConnection",`Received RPC '${e}' ${p}: `,U),U),U=>{throw b("RestConnection",`RPC '${e}' ${p} failed with error: `,U,"url: ",w,"request:",s),U})}vo(e,n,s,u,l,p){return this.Io(e,n,s,u,l)}Eo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,l)=>e[l]=u),s&&s.headers.forEach((u,l)=>e[l]=u)}To(e,n){return`${this.mo}/v1/${n}:${Uy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,s,u){const l=vp();return new Promise((p,w)=>{const A=new js;A.setWithCredentials(!0),A.listenOnce(Vs.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Pi.NO_ERROR:const W=A.getResponseJson();m(xo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(W)),p(W);break;case Pi.TIMEOUT:m(xo,`RPC '${e}' ${l} timed out`),w(new de(he.DEADLINE_EXCEEDED,"Request time out"));break;case Pi.HTTP_ERROR:const ne=A.getStatus();if(m(xo,`RPC '${e}' ${l} failed with status:`,ne,"response text:",A.getResponseText()),ne>0){let Pe=A.getResponseJson();Array.isArray(Pe)&&(Pe=Pe[0]);const ze=Pe?.error;if(ze&&ze.status&&ze.message){const vt=function(xt){const Bt=xt.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Bt)>=0?Bt:he.UNKNOWN}(ze.status);w(new de(vt,ze.message))}else w(new de(he.UNKNOWN,"Server responded with status "+A.getStatus()))}else w(new de(he.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{m(xo,`RPC '${e}' ${l} completed.`)}});const U=JSON.stringify(u);m(xo,`RPC '${e}' ${l} sending request:`,u),A.send(n,"POST",U,s,15)})}Ro(e,n,s){const u=vp(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=lo(),w=to(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(A.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(A.xmlHttpFactory=new ua({})),this.Eo(A.initMessageHeaders,n,s),A.encodeInitMessageHeaders=!0;const W=l.join("");m(xo,`Creating RPC '${e}' stream ${u}: ${W}`,A);const ne=p.createWebChannel(W,A);let Pe=!1,ze=!1;const vt=new vu({ro:Bt=>{ze?m(xo,`Not sending because RPC '${e}' stream ${u} is closed:`,Bt):(Pe||(m(xo,`Opening RPC '${e}' stream ${u} transport.`),ne.open(),Pe=!0),m(xo,`RPC '${e}' stream ${u} sending:`,Bt),ne.send(Bt))},oo:()=>ne.close()}),xt=(Bt,Kn,ar)=>{Bt.listen(Kn,pn=>{try{ar(pn)}catch(ur){setTimeout(()=>{throw ur},0)}})};return xt(ne,ca.EventType.OPEN,()=>{ze||m(xo,`RPC '${e}' stream ${u} transport opened.`)}),xt(ne,ca.EventType.CLOSE,()=>{ze||(ze=!0,m(xo,`RPC '${e}' stream ${u} transport closed`),vt.wo())}),xt(ne,ca.EventType.ERROR,Bt=>{ze||(ze=!0,b(xo,`RPC '${e}' stream ${u} transport errored:`,Bt),vt.wo(new de(he.UNAVAILABLE,"The operation could not be completed")))}),xt(ne,ca.EventType.MESSAGE,Bt=>{var Kn;if(!ze){const ar=Bt.data[0];V(!!ar);const ur=ar.error||(null===(Kn=ar[0])||void 0===Kn?void 0:Kn.error);if(ur){m(xo,`RPC '${e}' stream ${u} received error:`,ur);const $r=ur.status;let $i=function(Cu){const Nc=As[Cu];if(void 0!==Nc)return mg(Nc)}($r),No=ur.message;void 0===$i&&($i=he.INTERNAL,No="Unknown error status: "+$r+" with message "+ur.message),ze=!0,vt.wo(new de($i,No)),ne.close()}else m(xo,`RPC '${e}' stream ${u} received:`,ar),vt._o(ar)}}),xt(w,Xo.STAT_EVENT,Bt=>{Bt.stat===Mr.PROXY?m(xo,`RPC '${e}' stream ${u} detected buffering proxy`):Bt.stat===Mr.NOPROXY&&m(xo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{vt.fo()},0),vt}}function _p(){return typeof window<"u"?window:null}function _u(){return typeof document<"u"?document:null}function nd(i){return new vg(i,!0)}class zg{constructor(e,n,s=1e3,u=1.5,l=6e4){this.ii=e,this.timerId=n,this.Po=s,this.bo=u,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),u=Math.max(0,n-s);u>0&&m("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,u,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class H_{constructor(e,n,s,u,l,p,w,A){this.ii=e,this.$o=s,this.Oo=u,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=w,this.listener=A,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zg(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Oe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Oe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var s=this;return(0,Oe.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(I(n.toString()),I("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):n&&n.code===he.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Fo===n&&this.Zo(s,u)},s=>{e(()=>{const u=new de(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(u)})})}Zo(e,n){const s=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(u=>{s(()=>this.tu(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Go(){var e=this;this.state=5,this.qo.No((0,Oe.Z)(function*(){e.state=0,e.start()}))}tu(e){return m("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z_ extends H_{constructor(e,n,s,u,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function RE(i,e){let n;if("targetChange"in e){const s="NO_CHANGE"===(A=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===A?1:"REMOVE"===A?2:"CURRENT"===A?3:"RESET"===A?4:S(),u=e.targetChange.targetIds||[],l=function(A,U){return A.useProto3Json?(V(void 0===U||"string"==typeof U),Es.fromBase64String(U||"")):(V(void 0===U||U instanceof Uint8Array),Es.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,w=p&&function(A){const U=void 0===A.code?he.UNKNOWN:mg(A.code);return new de(U,A.message||"")}(p);n=new ly(s,u,l,w||null)}else if("documentChange"in e){const s=e.documentChange,u=$u(i,s.document.name),l=Rs(s.document.updateTime),p=s.document.createTime?Rs(s.document.createTime):an.min(),w=new Ks({mapValue:{fields:s.document.fields}}),A=Ri.newFoundDocument(u,l,p,w);n=new Md(s.targetIds||[],s.removedTargetIds||[],A.key,A)}else if("documentDelete"in e){const s=e.documentDelete,u=$u(i,s.document),l=s.readTime?Rs(s.readTime):an.min(),p=Ri.newNoDocument(u,l);n=new Md([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,u=$u(i,s.document);n=new Md([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return S();{const s=e.filter,{count:u=0,unchangedNames:l}=s,p=new Oh(u,l);n=new Hl(s.targetId,p)}}var A;return n}(this.serializer,e),s=function(u){if(!("targetChange"in u))return an.min();const l=u.targetChange;return l.targetIds&&l.targetIds.length?an.min():l.readTime?Rs(l.readTime):an.min()}(e);return this.listener.nu(n,s)}su(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(u,l){let p;const w=l.target;if(p=hu(w)?{documents:gy(u,w)}:{query:wg(u,w)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=_g(u,l.resumeToken);const A=Wf(u,l.expectedCount);null!==A&&(p.expectedCount=A)}else if(l.snapshotVersion.compareTo(an.min())>0){p.readTime=zl(u,l.snapshotVersion.toTimestamp());const A=Wf(u,l.expectedCount);null!==A&&(p.expectedCount=A)}return p}(this.serializer,e);const s=function Tc(i,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);s&&(n.labels=s),this.Wo(n)}iu(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.Wo(n)}}class Gg extends H_{constructor(e,n,s,u,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(V(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function D_(i,e){return i&&i.length>0?(V(void 0!==e),i.map(n=>function(s,u){let l=Rs(s.updateTime?s.updateTime:u);return l.isEqual(an.min())&&(l=Rs(u)),new Uf(l,s.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),s=Rs(e.commitTime);return this.listener.cu(s,n)}return V(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Uh(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Pd(this.serializer,s))};this.Wo(n)}}class Wu extends class{}{constructor(e,n,s,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=u,this.lu=!1}fu(){if(this.lu)throw new de(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Io(e,n,s,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(he.UNKNOWN,u.toString())})}vo(e,n,s,u){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.vo(e,n,s,l,p,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(he.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class G_{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(I(n),this.mu=!1):m("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class kE{constructor(e,n,s,u,l){var p=this;this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(w=>{s.enqueueAndForget((0,Oe.Z)(function*(){var A;sl(p)&&(m("RemoteStore","Restarting streams for network reachability change."),yield function(U){return(A=A||(0,Oe.Z)(function*(W){const ne=ce(W);ne.vu.add(4),yield $d(ne),ne.bu.set("Unknown"),ne.vu.delete(4),yield Is(ne)})).apply(this,arguments)}(p))}))}),this.bu=new G_(s,u)}}function Is(i){return(El=El||(0,Oe.Z)(function*(e){if(sl(e))for(const n of e.Ru)yield n(!0)})).apply(this,arguments)}function $d(i){return(Il=Il||(0,Oe.Z)(function*(e){for(const n of e.Ru)yield n(!1)})).apply(this,arguments)}function Hd(i,e){const n=ce(i);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),wp(n)?Ip(n):rd(n).Ko()&&Wg(n,e))}function Jh(i,e){const n=ce(i),s=rd(n);n.Au.delete(e),s.Ko()&&Ep(n,e),0===n.Au.size&&(s.Ko()?s.jo():sl(n)&&n.bu.set("Unknown"))}function Wg(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(an.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rd(i).su(e)}function Ep(i,e){i.Vu.qt(e),rd(i).iu(e)}function Ip(i){i.Vu=new SE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),rd(i).start(),i.bu.gu()}function wp(i){return sl(i)&&!rd(i).Uo()&&i.Au.size>0}function sl(i){return 0===ce(i).vu.size}function Kg(i){i.Vu=void 0}function Vy(i){return(pd=pd||(0,Oe.Z)(function*(e){e.Au.forEach((n,s)=>{Wg(e,n)})})).apply(this,arguments)}function W_(i,e){return(gd=gd||(0,Oe.Z)(function*(n,s){Kg(n),wp(n)?(n.bu.Iu(s),Ip(n)):n.bu.set("Unknown")})).apply(this,arguments)}function K_(i,e,n){return($o=$o||(0,Oe.Z)(function*(s,u,l){if(s.bu.set("Online"),u instanceof ly&&2===u.state&&u.cause)try{var p;yield function(w,A){return(p=p||(0,Oe.Z)(function*(U,W){const ne=W.cause;for(const Pe of W.targetIds)U.Au.has(Pe)&&(yield U.remoteSyncer.rejectListen(Pe,ne),U.Au.delete(Pe),U.Vu.removeTarget(Pe))})).apply(this,arguments)}(s,u)}catch(w){m("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),w),yield Dp(s,w)}else if(u instanceof Md?s.Vu.Ht(u):u instanceof Hl?s.Vu.ne(u):s.Vu.Xt(u),!l.isEqual(an.min()))try{const w=yield U_(s.localStore);l.compareTo(w)>=0&&(yield function(A,U){const W=A.Vu.ce(U);return W.targetChanges.forEach((ne,Pe)=>{if(ne.resumeToken.approximateByteSize()>0){const ze=A.Au.get(Pe);ze&&A.Au.set(Pe,ze.withResumeToken(ne.resumeToken,U))}}),W.targetMismatches.forEach((ne,Pe)=>{const ze=A.Au.get(ne);if(!ze)return;A.Au.set(ne,ze.withResumeToken(Es.EMPTY_BYTE_STRING,ze.snapshotVersion)),Ep(A,ne);const vt=new tl(ze.target,ne,Pe,ze.sequenceNumber);Wg(A,vt)}),A.remoteSyncer.applyRemoteEvent(W)}(s,l))}catch(w){m("RemoteStore","Failed to raise snapshot:",w),yield Dp(s,w)}})).apply(this,arguments)}function Dp(i,e,n){return(wa=wa||(0,Oe.Z)(function*(s,u,l){if(!ba(u))throw u;s.vu.add(1),yield $d(s),s.bu.set("Offline"),l||(l=()=>U_(s.localStore)),s.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){m("RemoteStore","Retrying IndexedDB access"),yield l(),s.vu.delete(1),yield Is(s)}))})).apply(this,arguments)}function qg(i,e){return e().catch(n=>Dp(i,n,e))}function Eu(i){return(Dn=Dn||(0,Oe.Z)(function*(e){const n=ce(e),s=ol(n);let u=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;for(;Ac(n);)try{const l=yield V_(n.localStore,u);if(null===l){0===n.Eu.length&&s.jo();break}u=l.batchId,zd(n,l)}catch(l){yield Dp(n,l)}jy(n)&&$y(n)})).apply(this,arguments)}function Ac(i){return sl(i)&&i.Eu.length<10}function zd(i,e){i.Eu.push(e);const n=ol(i);n.Ko()&&n.ou&&n.uu(e.mutations)}function jy(i){return sl(i)&&!ol(i).Uo()&&i.Eu.length>0}function $y(i){ol(i).start()}function Hy(i){return(ec=ec||(0,Oe.Z)(function*(e){ol(e).hu()})).apply(this,arguments)}function zy(i){return(tc=tc||(0,Oe.Z)(function*(e){const n=ol(e);for(const s of e.Eu)n.uu(s.mutations)})).apply(this,arguments)}function Zg(i,e,n){return(Ho=Ho||(0,Oe.Z)(function*(s,u,l){const p=s.Eu.shift(),w=Ph.from(p,u,l);yield qg(s,()=>s.remoteSyncer.applySuccessfulWrite(w)),yield Eu(s)})).apply(this,arguments)}function ef(i,e){return(nc=nc||(0,Oe.Z)(function*(n,s){var u;s&&ol(n).ou&&(yield function(l,p){return(u=u||(0,Oe.Z)(function*(w,A){if(kh(U=A.code)&&U!==he.ABORTED){const W=w.Eu.shift();ol(w).Qo(),yield qg(w,()=>w.remoteSyncer.rejectFailedWrite(W.batchId,A)),yield Eu(w)}var U})).apply(this,arguments)}(n,s)),jy(n)&&$y(n)})).apply(this,arguments)}function tf(i,e){return(Oc=Oc||(0,Oe.Z)(function*(n,s){const u=ce(n);u.asyncQueue.verifyOperationInProgress(),m("RemoteStore","RemoteStore received new credentials");const l=sl(u);u.vu.add(3),yield $d(u),l&&u.bu.set("Unknown"),yield u.remoteSyncer.handleCredentialChange(s),u.vu.delete(3),yield Is(u)})).apply(this,arguments)}function Tp(i,e){return(ru=ru||(0,Oe.Z)(function*(n,s){const u=ce(n);s?(u.vu.delete(2),yield Is(u)):s||(u.vu.add(2),yield $d(u),u.bu.set("Unknown"))})).apply(this,arguments)}function rd(i){var e;return i.Su||(i.Su=function(n,s,u){const l=ce(n);return l.fu(),new z_(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{uo:Vy.bind(null,i),ao:W_.bind(null,i),nu:K_.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,Oe.Z)(function*(s){s?(i.Su.Qo(),wp(i)?Ip(i):i.bu.set("Unknown")):(yield i.Su.stop(),Kg(i))})).apply(this,arguments)})),i.Su}function ol(i){var e;return i.Du||(i.Du=function(n,s,u){const l=ce(n);return l.fu(),new Gg(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{uo:Hy.bind(null,i),ao:ef.bind(null,i),au:zy.bind(null,i),cu:Zg.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,Oe.Z)(function*(s){s?(i.Du.Qo(),yield Eu(i)):(yield i.Du.stop(),i.Eu.length>0&&(m("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))})).apply(this,arguments)})),i.Du}class Yg{constructor(e,n,s,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=u,this.removalCallback=l,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,n,s,u,l){const p=Date.now()+s,w=new Yg(e,n,p,u,l);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new de(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(i,e){if(I("AsyncQueue",`${e}: ${i}`),ba(i))return new de(he.UNAVAILABLE,`${e}: ${i}`);throw i}class Wd{constructor(e){this.comparator=e?(n,s)=>e(n,s)||Pt.comparator(n.key,s.key):(n,s)=>Pt.comparator(n.key,s.key),this.keyedMap=C(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new Wd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const s=new Wd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Qg{constructor(){this.Cu=new fn(Pt.comparator)}track(e){const n=e.doc.key,s=this.Cu.get(n);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(n,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(n):1===e.type&&2===s.type?this.Cu=this.Cu.insert(n,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):S():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,s)=>{e.push(s)}),e}}class nf{constructor(e,n,s,u,l,p,w,A,U){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=w,this.excludesMetadataChanges=A,this.hasCachedResults=U}static fromInitialDocuments(e,n,s,u,l){const p=[];return n.forEach(w=>{p.push({type:0,doc:w})}),new nf(e,n,Wd.emptySet(n),p,s,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==s[u].type||!n[u].doc.isEqual(s[u].doc))return!1;return!0}}class q_{constructor(){this.Nu=void 0,this.listeners=[]}}class LE{constructor(){this.queries=new Ka(e=>Zi(e),Ul),this.onlineState="Unknown",this.ku=new Set}}function Gy(i,e){return(Jo=Jo||(0,Oe.Z)(function*(n,s){const u=ce(n),l=s.query;let p=!1,w=u.queries.get(l);if(w||(p=!0,w=new q_),p)try{w.Nu=yield u.onListen(l)}catch(A){const U=Gd(A,`Initialization of query '${pu(s.query)}' failed`);return void s.onError(U)}u.queries.set(l,w),w.listeners.push(s),s.Mu(u.onlineState),w.Nu&&s.$u(w.Nu)&&Kd(u)})).apply(this,arguments)}function Cp(i,e){return(Su=Su||(0,Oe.Z)(function*(n,s){const u=ce(n),l=s.query;let p=!1;const w=u.queries.get(l);if(w){const A=w.listeners.indexOf(s);A>=0&&(w.listeners.splice(A,1),p=0===w.listeners.length)}if(p)return u.queries.delete(l),u.onUnlisten(l)})).apply(this,arguments)}function Wy(i,e){const n=ce(i);let s=!1;for(const u of e){const p=n.queries.get(u.query);if(p){for(const w of p.listeners)w.$u(u)&&(s=!0);p.Nu=u}}s&&Kd(n)}function FE(i,e,n){const s=ce(i),u=s.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);s.queries.delete(e)}function Kd(i){i.ku.forEach(e=>{e.next()})}class Ky{constructor(e,n,s){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new nf(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=nf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class qy{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class Xg{constructor(e){this.serializer=e}rr(e){return $u(this.serializer,e)}ur(e){return e.metadata.exists?w_(this.serializer,e.document,!1):Ri.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Rs(e)}}class Z_{constructor(e,n,s){this.ju=e,this.localStore=n,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jg(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const s=mr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,s=new Xg(this.serializer);for(const u of e)if(u.metadata.queries){const l=s.rr(u.metadata.name);for(const p of u.metadata.queries){const w=(n.get(p)||ie()).add(l);n.set(p,w)}}return n}complete(){var e=this;return(0,Oe.Z)(function*(){const n=yield function j_(i,e,n,s){return(bu=bu||(0,Oe.Z)(function*(u,l,p,w){const A=ce(u);let U=ie(),W=Wo();for(const ze of p){const vt=l.rr(ze.metadata.name);ze.document&&(U=U.add(vt));const xt=l.ur(ze);xt.setReadTime(l.cr(ze.metadata.readTime)),W=W.insert(vt,xt)}const ne=A.Zi.newChangeBuffer({trackRemovals:!0}),Pe=yield yu(A,(ze=w,fo(Yc(mr.fromString(`__bundle__/docs/${ze}`)))));var ze;return A.persistence.runTransaction("Apply bundle documents","readwrite",ze=>Xh(ze,ne,W).next(vt=>(ne.apply(ze),vt)).next(vt=>A.Bs.removeMatchingKeysForTargetId(ze,Pe.targetId).next(()=>A.Bs.addMatchingKeys(ze,U,Pe.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(ze,vt.nr,vt.sr)).next(()=>vt.nr)))})).apply(this,arguments)}(e.localStore,new Xg(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const u of e.queries)yield ky(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function Jg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class em{constructor(e){this.key=e}}class tr{constructor(e){this.key=e}}class tm{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ie(),this.mutatedKeys=ie(),this.tc=io(e),this.ec=new Wd(this.tc)}get nc(){return this.Yu}sc(e,n){const s=n?n.ic:new Qg,u=n?n.ec:this.ec;let l=n?n.mutatedKeys:this.mutatedKeys,p=u,w=!1;const A="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,U="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((W,ne)=>{const Pe=u.get(W),ze=_c(this.query,ne)?ne:null,vt=!!Pe&&this.mutatedKeys.has(Pe.key),xt=!!ze&&(ze.hasLocalMutations||this.mutatedKeys.has(ze.key)&&ze.hasCommittedMutations);let Bt=!1;Pe&&ze?Pe.data.isEqual(ze.data)?vt!==xt&&(s.track({type:3,doc:ze}),Bt=!0):this.rc(Pe,ze)||(s.track({type:2,doc:ze}),Bt=!0,(A&&this.tc(ze,A)>0||U&&this.tc(ze,U)<0)&&(w=!0)):!Pe&&ze?(s.track({type:0,doc:ze}),Bt=!0):Pe&&!ze&&(s.track({type:1,doc:Pe}),Bt=!0,(A||U)&&(w=!0)),Bt&&(ze?(p=p.add(ze),l=xt?l.add(W):l.delete(W)):(p=p.delete(W),l=l.delete(W)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const W="F"===this.query.limitType?p.last():p.first();p=p.delete(W.key),l=l.delete(W.key),s.track({type:1,doc:W})}return{ec:p,ic:s,zi:w,mutatedKeys:l}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const u=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((U,W)=>function(ne,Pe){const ze=vt=>{switch(vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return ze(ne)-ze(Pe)}(U.type,W.type)||this.tc(U.doc,W.doc)),this.oc(s);const p=n?this.uc():[],w=0===this.Zu.size&&this.current?1:0,A=w!==this.Xu;return this.Xu=w,0!==l.length||A?{snapshot:new nf(this.query,e.ec,u,l,e.mutatedKeys,0===w,A,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Qg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ie(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const n=[];return e.forEach(s=>{this.Zu.has(s)||n.push(new tr(s))}),this.Zu.forEach(s=>{e.has(s)||n.push(new em(s))}),n}hc(e){this.Yu=e.ir,this.Zu=ie();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return nf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Zy{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class qd{constructor(e){this.key=e,this.fc=!1}}class Yy{constructor(e,n,s,u,l,p){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new Ka(w=>Zi(w),Ul),this._c=new Map,this.mc=new Set,this.gc=new fn(Pt.comparator),this.yc=new Map,this.Ic=new Ry,this.Tc={},this.Ec=new Map,this.Ac=Ql.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Y_(i,e){return(Da=Da||(0,Oe.Z)(function*(n,s){const u=lm(n);let l,p;const w=u.wc.get(s);if(w)l=w.targetId,u.sharedClientState.addLocalQueryTarget(l),p=w.view.lc();else{const A=yield yu(u.localStore,fo(s)),U=u.sharedClientState.addLocalQueryTarget(A.targetId);l=A.targetId,p=yield Zd(u,s,l,"current"===U,A.resumeToken),u.isPrimaryClient&&Hd(u.remoteStore,A)}return p})).apply(this,arguments)}function Zd(i,e,n,s,u){return(Fa=Fa||(0,Oe.Z)(function*(l,p,w,A,U){l.Rc=(Bt,Kn,ar)=>{var pn;return function(ur,$r,$i,No){return(pn=pn||(0,Oe.Z)(function*(Cu,Nc,$0,t_){let tg=Nc.view.sc($0);tg.zi&&(tg=yield pp(Cu.localStore,Nc.query,!1).then(({documents:r_})=>Nc.view.sc(r_,tg)));const H0=t_&&t_.targetChanges.get(Nc.targetId),n_=Nc.view.applyChanges(tg,Cu.isPrimaryClient,H0);return bp(Cu,Nc.targetId,n_.cc),n_.snapshot})).apply(this,arguments)}(l,Bt,Kn,ar)};const W=yield pp(l.localStore,p,!0),ne=new tm(p,W.ir),Pe=ne.sc(W.documents),ze=el.createSynthesizedTargetChangeForCurrentChange(w,A&&"Offline"!==l.onlineState,U),vt=ne.applyChanges(Pe,l.isPrimaryClient,ze);bp(l,w,vt.cc);const xt=new Zy(p,w,ne);return l.wc.set(p,xt),l._c.has(w)?l._c.get(w).push(p):l._c.set(w,[p]),vt.snapshot})).apply(this,arguments)}function Yd(i,e){return(rc=rc||(0,Oe.Z)(function*(n,s){const u=ce(n),l=u.wc.get(s),p=u._c.get(l.targetId);if(p.length>1)return u._c.set(l.targetId,p.filter(w=>!Ul(w,s))),void u.wc.delete(s);u.isPrimaryClient?(u.sharedClientState.removeLocalQueryTarget(l.targetId),u.sharedClientState.isActiveQueryTarget(l.targetId)||(yield Gu(u.localStore,l.targetId,!1).then(()=>{u.sharedClientState.clearQueryState(l.targetId),Jh(u.remoteStore,l.targetId),Xd(u,l.targetId)}).catch(ea))):(Xd(u,l.targetId),yield Gu(u.localStore,l.targetId,!0))})).apply(this,arguments)}function Qd(i,e){return(mt=mt||(0,Oe.Z)(function*(n,s){const u=ce(n);try{const l=yield function B_(i,e){const n=ce(i),s=e.snapshotVersion;let u=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=n.Zi.newChangeBuffer({trackRemovals:!0});u=n.Ji;const w=[];e.targetChanges.forEach((W,ne)=>{const Pe=u.get(ne);if(!Pe)return;w.push(n.Bs.removeMatchingKeys(l,W.removedDocuments,ne).next(()=>n.Bs.addMatchingKeys(l,W.addedDocuments,ne)));let ze=Pe.withSequenceNumber(l.currentSequenceNumber);var vt,xt,Bt;null!==e.targetMismatches.get(ne)?ze=ze.withResumeToken(Es.EMPTY_BYTE_STRING,an.min()).withLastLimboFreeSnapshotVersion(an.min()):W.resumeToken.approximateByteSize()>0&&(ze=ze.withResumeToken(W.resumeToken,s)),u=u.insert(ne,ze),xt=ze,Bt=W,(0===(vt=Pe).resumeToken.approximateByteSize()||xt.snapshotVersion.toMicroseconds()-vt.snapshotVersion.toMicroseconds()>=3e8||Bt.addedDocuments.size+Bt.modifiedDocuments.size+Bt.removedDocuments.size>0)&&w.push(n.Bs.updateTargetData(l,ze))});let A=Wo(),U=ie();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&w.push(n.persistence.referenceDelegate.updateLimboDocument(l,W))}),w.push(Xh(l,p,e.documentUpdates).next(W=>{A=W.nr,U=W.sr})),!s.isEqual(an.min())){const W=n.Bs.getLastRemoteSnapshotVersion(l).next(ne=>n.Bs.setTargetsMetadata(l,l.currentSequenceNumber,s));w.push(W)}return Qe.waitFor(w).next(()=>p.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,A,U)).next(()=>A)}).then(l=>(n.Ji=u,l))}(u.localStore,s);s.targetChanges.forEach((p,w)=>{const A=u.yc.get(w);A&&(V(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?A.fc=!0:p.modifiedDocuments.size>0?V(A.fc):p.removedDocuments.size>0&&(V(A.fc),A.fc=!1))}),yield Rc(u,l,s)}catch(l){yield ea(l)}})).apply(this,arguments)}function rm(i,e,n){const s=ce(i);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const u=[];s.wc.forEach((l,p)=>{const w=p.view.Mu(e);w.snapshot&&u.push(w.snapshot)}),function(l,p){const w=ce(l);w.onlineState=p;let A=!1;w.queries.forEach((U,W)=>{for(const ne of W.listeners)ne.Mu(p)&&(A=!0)}),A&&Kd(w)}(s.eventManager,e),u.length&&s.dc.nu(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function im(i,e,n){return(Er=Er||(0,Oe.Z)(function*(s,u,l){const p=ce(s);p.sharedClientState.updateQueryState(u,"rejected",l);const w=p.yc.get(u),A=w&&w.key;if(A){let U=new fn(Pt.comparator);U=U.insert(A,Ri.newNoDocument(A,an.min()));const W=ie().add(A),ne=new Rd(an.min(),new Map,new fn(Fn),U,W);yield Qd(p,ne),p.gc=p.gc.remove(A),p.yc.delete(u),um(p)}else yield Gu(p.localStore,u,!1).then(()=>Xd(p,u,l)).catch(ea)})).apply(this,arguments)}function sm(i,e){return(Ua=Ua||(0,Oe.Z)(function*(n,s){const u=ce(n),l=s.batch.batchId;try{const p=yield function Ny(i,e){const n=ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),l=n.Zi.newChangeBuffer({trackRemovals:!0});return function(p,w,A,U){const W=A.batch,ne=W.keys();let Pe=Qe.resolve();return ne.forEach(ze=>{Pe=Pe.next(()=>U.getEntry(w,ze)).next(vt=>{const xt=A.docVersions.get(ze);V(null!==xt),vt.version.compareTo(xt)<0&&(W.applyToRemoteDocument(vt,A),vt.isValidDocument()&&(vt.setReadTime(A.commitVersion),U.addEntry(vt)))})}),Pe.next(()=>p.mutationQueue.removeMutationBatch(w,W))}(n,s,e,l).next(()=>l.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let w=ie();for(let A=0;A<p.mutationResults.length;++A)p.mutationResults[A].transformResults.length>0&&(w=w.add(p.batch.mutations[A].key));return w}(e))).next(()=>n.localDocuments.getDocuments(s,u))})}(u.localStore,s);am(u,l,null),rf(u,l),u.sharedClientState.updateMutationState(l,"acknowledged"),yield Rc(u,p)}catch(p){yield ea(p)}})).apply(this,arguments)}function om(i,e,n){return(wl=wl||(0,Oe.Z)(function*(s,u,l){const p=ce(s);try{const w=yield function(A,U){const W=ce(A);return W.persistence.runTransaction("Reject batch","readwrite-primary",ne=>{let Pe;return W.mutationQueue.lookupMutationBatch(ne,U).next(ze=>(V(null!==ze),Pe=ze.keys(),W.mutationQueue.removeMutationBatch(ne,ze))).next(()=>W.mutationQueue.performConsistencyCheck(ne)).next(()=>W.documentOverlayCache.removeOverlaysForBatchId(ne,Pe,U)).next(()=>W.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ne,Pe)).next(()=>W.localDocuments.getDocuments(ne,Pe))})}(p.localStore,u);am(p,u,l),rf(p,u),p.sharedClientState.updateMutationState(u,"rejected",l),yield Rc(p,w)}catch(w){yield ea(w)}})).apply(this,arguments)}function rf(i,e){(i.Ec.get(e)||[]).forEach(n=>{n.resolve()}),i.Ec.delete(e)}function am(i,e,n){const s=ce(i);let u=s.Tc[s.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),s.Tc[s.currentUser.toKey()]=u}}function Xd(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),n&&i.dc.Pc(s,n);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||Xy(i,s)})}function Xy(i,e){i.mc.delete(e.path.canonicalString());const n=i.gc.get(e);null!==n&&(Jh(i.remoteStore,n),i.gc=i.gc.remove(e),i.yc.delete(n),um(i))}function bp(i,e,n){for(const s of n)s instanceof em?(i.Ic.addReference(s.key,e),Q_(i,s)):s instanceof tr?(m("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||Xy(i,s.key)):S()}function Q_(i,e){const n=e.key,s=n.path.canonicalString();i.gc.get(n)||i.mc.has(s)||(m("SyncEngine","New document in limbo: "+n),i.mc.add(s),um(i))}function um(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const n=new Pt(mr.fromString(e)),s=i.Ac.next();i.yc.set(s,new qd(n)),i.gc=i.gc.insert(n,s),Hd(i.remoteStore,new tl(fo(Yc(n.path)),s,"TargetPurposeLimboResolution",cs.ct))}}function Rc(i,e,n){return(Au=Au||(0,Oe.Z)(function*(s,u,l){var p;const w=ce(s),A=[],U=[],W=[];w.wc.isEmpty()||(w.wc.forEach((ne,Pe)=>{W.push(w.Rc(Pe,u,l).then(ze=>{if((ze||l)&&w.isPrimaryClient&&w.sharedClientState.updateQueryState(Pe.targetId,ze?.fromCache?"not-current":"current"),ze){A.push(ze);const vt=Yh.Li(Pe.targetId,ze);U.push(vt)}}))}),yield Promise.all(W),w.dc.nu(A),yield function(ne,Pe){return(p=p||(0,Oe.Z)(function*(ze,vt){const xt=ce(ze);try{yield xt.persistence.runTransaction("notifyLocalViewChanges","readwrite",Bt=>Qe.forEach(vt,Kn=>Qe.forEach(Kn.Fi,ar=>xt.persistence.referenceDelegate.addReference(Bt,Kn.targetId,ar)).next(()=>Qe.forEach(Kn.Bi,ar=>xt.persistence.referenceDelegate.removeReference(Bt,Kn.targetId,ar)))))}catch(Bt){if(!ba(Bt))throw Bt;m("LocalStore","Failed to update sequence numbers: "+Bt)}for(const Bt of vt){const Kn=Bt.targetId;if(!Bt.fromCache){const ar=xt.Ji.get(Kn),ur=ar.withLastLimboFreeSnapshotVersion(ar.snapshotVersion);xt.Ji=xt.Ji.insert(Kn,ur)}}})).apply(this,arguments)}(w.localStore,U))})).apply(this,arguments)}function X_(i,e){return(wi=wi||(0,Oe.Z)(function*(n,s){const u=ce(n);if(!u.currentUser.isEqual(s)){m("SyncEngine","User change. New user:",s.toKey());const l=yield xy(u.localStore,s);u.currentUser=s,(p=u).Ec.forEach(A=>{A.forEach(U=>{U.reject(new de(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.Ec.clear(),u.sharedClientState.handleUserChange(s,l.removedBatchIds,l.addedBatchIds),yield Rc(u,l.er)}var p})).apply(this,arguments)}function Jy(i,e){const n=ce(i),s=n.yc.get(e);if(s&&s.fc)return ie().add(s.key);{let u=ie();const l=n._c.get(e);if(!l)return u;for(const p of l){const w=n.wc.get(p);u=u.unionWith(w.view.nc)}return u}}function ev(i,e){return($s=$s||(0,Oe.Z)(function*(n,s){const u=ce(n),l=yield pp(u.localStore,s.query,!0),p=s.view.hc(l);return u.isPrimaryClient&&bp(u,s.targetId,p.cc),p})).apply(this,arguments)}function J_(i,e){return(Ki=Ki||(0,Oe.Z)(function*(n,s){const u=ce(n);return Py(u.localStore,s).then(l=>Rc(u,l))})).apply(this,arguments)}function e0(i,e,n,s){return(Di=Di||(0,Oe.Z)(function*(u,l,p,w){const A=ce(u),U=yield function(W,ne){const Pe=ce(W),ze=ce(Pe.mutationQueue);return Pe.persistence.runTransaction("Lookup mutation documents","readonly",vt=>ze.Sn(vt,ne).next(xt=>xt?Pe.localDocuments.getDocuments(vt,xt):Qe.resolve(null)))}(A.localStore,l);var ne;null!==U?("pending"===p?yield Eu(A.remoteStore):"acknowledged"===p||"rejected"===p?(am(A,l,w||null),rf(A,l),ne=l,ce(ce(A.localStore).mutationQueue).Cn(ne)):S(),yield Rc(A,U)):m("SyncEngine","Cannot apply mutation batch with id: "+l)})).apply(this,arguments)}function tv(i,e,n){return(oc=oc||(0,Oe.Z)(function*(s,u,l){const p=ce(s),w=[],A=[];for(const U of u){let W;const ne=p._c.get(U);if(ne&&0!==ne.length){W=yield yu(p.localStore,fo(ne[0]));for(const Pe of ne){const ze=p.wc.get(Pe),vt=yield ev(p,ze);vt.snapshot&&A.push(vt.snapshot)}}else{const Pe=yield Ug(p.localStore,U);W=yield yu(p.localStore,Pe),yield Zd(p,nv(Pe),U,!1,W.resumeToken)}w.push(W)}return p.dc.nu(A),w})).apply(this,arguments)}function nv(i){return Sh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function UE(i){const e=ce(i);return ce(ce(e.localStore).persistence).$i()}function cm(i,e,n,s){return(ac=ac||(0,Oe.Z)(function*(u,l,p,w){const A=ce(u);if(A.vc)return void m("SyncEngine","Ignoring unexpected query state notification.");const U=A._c.get(l);if(U&&U.length>0)switch(p){case"current":case"not-current":{const W=yield Py(A.localStore,Bl(U[0])),ne=Rd.createSynthesizedRemoteEventForCurrentChange(l,"current"===p,Es.EMPTY_BYTE_STRING);yield Rc(A,W,ne);break}case"rejected":yield Gu(A.localStore,l,!0),Xd(A,l,w);break;default:S()}})).apply(this,arguments)}function rv(i,e,n){return(_s=_s||(0,Oe.Z)(function*(s,u,l){const p=lm(s);if(p.vc){for(const w of u){if(p._c.has(w)){m("SyncEngine","Adding an already active target "+w);continue}const A=yield Ug(p.localStore,w),U=yield yu(p.localStore,A);yield Zd(p,nv(A),U.targetId,!1,U.resumeToken),Hd(p.remoteStore,U)}for(const w of l)p._c.has(w)&&(yield Gu(p.localStore,w,!1).then(()=>{Jh(p.remoteStore,w),Xd(p,w)}).catch(ea))}})).apply(this,arguments)}function lm(i){const e=ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=im.bind(null,e),e.dc.nu=Wy.bind(null,e.eventManager),e.dc.Pc=FE.bind(null,e.eventManager),e}function dm(i){const e=ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=om.bind(null,e),e}class Jd{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Oe.Z)(function*(){n.serializer=nd(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Fg(this.persistence,new Qh,e.initialUser,this.serializer)}createPersistence(e){return new Og(Zh.zs,this.serializer)}createSharedClientState(e){return new $g}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hm extends Jd{constructor(e,n,s){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,s=this;return(0,Oe.Z)(function*(){yield n().call(s,e),yield s.Vc.initialize(s,e),yield dm(s.Vc.syncEngine),yield Eu(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Fg(this.persistence,new Qh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new M_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const s=new Cl(n,this.persistence);return new pc(e.asyncQueue,s)}createPersistence(e){const n=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new Bd(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,_p(),_u(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $g}}class Sp extends hm{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,s=this;return(0,Oe.Z)(function*(){var u;yield n().call(s,e);const l=s.Vc.syncEngine;s.sharedClientState instanceof jg&&(s.sharedClientState.syncEngine={jr:e0.bind(null,l),zr:cm.bind(null,l),Wr:rv.bind(null,l),$i:UE.bind(null,l),Qr:J_.bind(null,l)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(p){return(u=u||(0,Oe.Z)(function*(w){yield function Na(i,e){return(sc=sc||(0,Oe.Z)(function*(n,s){const u=ce(n);if(lm(u),dm(u),!0===s&&!0!==u.vc){const l=u.sharedClientState.getAllActiveQueryTargets(),p=yield tv(u,l.toArray());u.vc=!0,yield Tp(u.remoteStore,!0);for(const w of p)Hd(u.remoteStore,w)}else if(!1===s&&!1!==u.vc){const l=[];let p=Promise.resolve();u._c.forEach((w,A)=>{u.sharedClientState.isLocalQueryTarget(A)?l.push(A):p=p.then(()=>(Xd(u,A),Gu(u.localStore,A,!0))),Jh(u.remoteStore,A)}),yield p,yield tv(u,l),function(w){const A=ce(w);A.yc.forEach((U,W)=>{Jh(A.remoteStore,W)}),A.Ic.Ts(),A.yc=new Map,A.gc=new fn(Pt.comparator)}(u),u.vc=!1,yield Tp(u.remoteStore,!1)}})).apply(this,arguments)}(s.Vc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())})).apply(this,arguments)})})()}createSharedClientState(e){const n=_p();if(!jg.D(n))throw new de(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jg(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class eh{initialize(e,n){var s=this;return(0,Oe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(n),s.remoteStore=s.createRemoteStore(n),s.eventManager=s.createEventManager(n),s.syncEngine=s.createSyncEngine(n,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>rm(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=X_.bind(null,s.syncEngine),yield Tp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LE}createDatastore(e){const n=nd(e.databaseInfo.databaseId),s=new OE(e.databaseInfo);return new Wu(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,u=e.asyncQueue,l=w=>rm(this.syncEngine,w,0),p=Fy.D()?new Fy:new $_,new kE(n,s,u,l,p);var n,s,u,l,p}createSyncEngine(e,n){return function(s,u,l,p,w,A,U){const W=new Yy(s,u,l,p,w,A);return U&&(W.vc=!0),W}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e;return function(n){return(e=e||(0,Oe.Z)(function*(s){const u=ce(s);m("RemoteStore","RemoteStore shutting down."),u.vu.add(5),yield $d(u),u.Pu.shutdown(),u.bu.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}function iv(i,e=10240){let n=0;return{read:()=>(0,Oe.Z)(function*(){if(n<i.byteLength){const s={value:i.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ap{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class r0{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Ut,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Oe.Z)(function*(){const n=yield e.kc();if(null===n)return null;const s=e.xc.decode(n),u=Number(s);isNaN(u)&&e.Mc(`length string (${s}) is not valid number`);const l=yield e.$c(u);return new qy(JSON.parse(l),n.length+u)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Oe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),s})()}$c(e){var n=this;return(0,Oe.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const s=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Oe.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const s=new Uint8Array(e.buffer.length+n.value.length);s.set(e.buffer),s.set(n.value,e.buffer.length),e.buffer=s}return n.done})()}}class s0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Oe.Z)(function*(){var s;if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new de(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield function(l,p){return(s=s||(0,Oe.Z)(function*(w,A){const U=ce(w),W=Uh(U.serializer)+"/documents",ne={documents:A.map(xt=>Fh(U.serializer,xt))},Pe=yield U.vo("BatchGetDocuments",W,ne,A.length),ze=new Map;Pe.forEach(xt=>{const Bt=function AE(i,e){return"found"in e?function(n,s){V(!!s.found);const u=$u(n,s.found.name),l=Rs(s.found.updateTime),p=s.found.createTime?Rs(s.found.createTime):an.min(),w=new Ks({mapValue:{fields:s.found.fields}});return Ri.newFoundDocument(u,l,p,w)}(i,e):"missing"in e?function(n,s){V(!!s.missing),V(!!s.readTime);const u=$u(n,s.missing),l=Rs(s.readTime);return Ri.newNoDocument(u,l)}(i,e):S()}(U.serializer,xt);ze.set(Bt.key.toString(),Bt)});const vt=[];return A.forEach(xt=>{const Bt=ze.get(xt.toString());V(!!Bt),vt.push(Bt)}),vt})).apply(this,arguments)}(n.datastore,e);return u.forEach(l=>n.recordVersion(l)),u})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new $l(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){var n;if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const s=e.readVersions;e.mutations.forEach(u=>{s.delete(u.key.toString())}),s.forEach((u,l)=>{const p=Pt.fromPath(l);e.mutations.push(new Vf(p,e.precondition(p)))}),yield function(u,l){return(n=n||(0,Oe.Z)(function*(p,w){const A=ce(p),U=Uh(A.serializer)+"/documents",W={writes:w.map(ne=>Pd(A.serializer,ne))};yield A.Io("Commit",U,W)})).apply(this,arguments)}(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw S();n=an.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new de(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(an.min())?ji.exists(!1):ji.updateTime(n):ji.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(an.min()))throw new de(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ji.updateTime(n)}return ji.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ku{constructor(e,n,s,u,l){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=u,this.deferred=l,this.Bc=s.maxAttempts,this.qo=new zg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Oe.Z)(function*(){const n=new s0(e.datastore),s=e.qc(n);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.Uc(l)}))}).catch(u=>{e.Uc(u)})}))}qc(e){try{const n=this.updateFunction(e);return!Aa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!kh(n)}return!1}}class fm{constructor(e,n,s,u){var p,l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=u,this.user=Vi.UNAUTHENTICATED,this.clientId=Go.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(w){return(p=p||(0,Oe.Z)(function*(A){m("FirestoreClient","Received user=",A.uid),yield l.authCredentialListener(A),l.user=A})).apply(this,arguments)}),this.appCheckCredentials.start(s,w=>(m("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(s){const u=Gd(s,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Rp(i,e){return(zo=zo||(0,Oe.Z)(function*(n,s){var u;n.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Initializing OfflineComponentProvider");const l=yield n.getConfiguration();yield s.initialize(l);let p=l.initialUser;n.setCredentialChangeListener(function(w){return(u=u||(0,Oe.Z)(function*(A){p.isEqual(A)||(yield xy(s.localStore,A),p=A)})).apply(this,arguments)}),s.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=s})).apply(this,arguments)}function Mp(i,e){return(Ru=Ru||(0,Oe.Z)(function*(n,s){n.asyncQueue.verifyOperationInProgress();const u=yield xp(n);m("FirestoreClient","Initializing OnlineComponentProvider");const l=yield n.getConfiguration();yield s.initialize(u,l),n.setCredentialChangeListener(p=>tf(s.remoteStore,p)),n.setAppCheckTokenChangeListener((p,w)=>tf(s.remoteStore,w)),n._onlineComponents=s})).apply(this,arguments)}function sv(i){return"FirebaseError"===i.name?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function xp(i){return(Ta=Ta||(0,Oe.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){m("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rp(e,e._uninitializedComponentsProvider._offline)}catch(n){const s=n;if(!sv(s))throw s;b("Error using user provided cache. Falling back to memory cache: "+s),yield Rp(e,new Jd)}}else m("FirestoreClient","Using default OfflineComponentProvider"),yield Rp(e,new Jd);return e._offlineComponents})).apply(this,arguments)}function sf(i){return(Hs=Hs||(0,Oe.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(m("FirestoreClient","Using user provided OnlineComponentProvider"),yield Mp(e,e._uninitializedComponentsProvider._online)):(m("FirestoreClient","Using default OnlineComponentProvider"),yield Mp(e,new eh))),e._onlineComponents})).apply(this,arguments)}function af(i){return xp(i).then(e=>e.persistence)}function th(i){return xp(i).then(e=>e.localStore)}function o0(i){return sf(i).then(e=>e.remoteStore)}function Np(i){return sf(i).then(e=>e.syncEngine)}function id(i){return(uc=uc||(0,Oe.Z)(function*(e){const n=yield sf(e),s=n.eventManager;return s.onListen=Y_.bind(null,n.syncEngine),s.onUnlisten=Yd.bind(null,n.syncEngine),s})).apply(this,arguments)}function av(i,e,n={}){const s=new Ut;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(u,l,p,w,A){const U=new Ap({next:ne=>{l.enqueueAndForget(()=>Cp(u,W));const Pe=ne.docs.has(p);!Pe&&ne.fromCache?A.reject(new de(he.UNAVAILABLE,"Failed to get document because the client is offline.")):Pe&&ne.fromCache&&w&&"server"===w.source?A.reject(new de(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(ne)},error:ne=>A.reject(ne)}),W=new Ky(Yc(p.path),U,{includeMetadataChanges:!0,Ku:!0});return Gy(u,W)}(yield id(i),i.asyncQueue,e,n,s)})),s.promise}function Pp(i,e,n={}){const s=new Ut;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(u,l,p,w,A){const U=new Ap({next:ne=>{l.enqueueAndForget(()=>Cp(u,W)),ne.fromCache&&"server"===w.source?A.reject(new de(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(ne)},error:ne=>A.reject(ne)}),W=new Ky(p,U,{includeMetadataChanges:!0,Ku:!0});return Gy(u,W)}(yield id(i),i.asyncQueue,e,n,s)})),s.promise}function nh(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const mm=new Map;function rh(i,e,n){if(!n)throw new de(he.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function l0(i,e,n,s){if(!0===e&&!0===s)throw new de(he.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function cv(i){if(!Pt.isDocumentKey(i))throw new de(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ym(i){if(Pt.isDocumentKey(i))throw new de(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function uf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":S()}function jr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uf(i);throw new de(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function lv(i,e){if(e<=0)throw new de(he.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class vm{constructor(e){var n,s;if(void 0===e.host){if(void 0!==e.ssl)throw new de(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new de(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=nh(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new de(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new de(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new de(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ih{constructor(e,n,s,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new de(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vm(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new ti;switch(n.type){case"firstParty":return new cc(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new de(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=mm.get(e);n&&(m("ComponentProvider","Removing Datastore"),mm.delete(e),n.terminate())}(this),Promise.resolve()}}class Yi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yi(this.firestore,e,this._key)}}class po{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new po(this.firestore,e,this._query)}}class Iu extends po{constructor(e,n,s){super(e,n,Yc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yi(this.firestore,null,new Pt(e))}withConverter(e){return new Iu(this.firestore,e,this._path)}}function dv(i,e,...n){if(i=(0,Te.m9)(i),rh("collection","path",e),i instanceof ih){const s=mr.fromString(e,...n);return ym(s),new Iu(i,null,s)}{if(!(i instanceof Yi||i instanceof Iu))throw new de(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(mr.fromString(e,...n));return ym(s),new Iu(i.firestore,null,s)}}function al(i,e,...n){if(i=(0,Te.m9)(i),1===arguments.length&&(e=Go.A()),rh("doc","path",e),i instanceof ih){const s=mr.fromString(e,...n);return cv(s),new Yi(i,null,new Pt(s))}{if(!(i instanceof Yi||i instanceof Iu))throw new de(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(mr.fromString(e,...n));return cv(s),new Yi(i.firestore,i instanceof Iu?i.converter:null,new Pt(s))}}function hv(i,e){return i=(0,Te.m9)(i),e=(0,Te.m9)(e),(i instanceof Yi||i instanceof Iu)&&(e instanceof Yi||e instanceof Iu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function _m(i,e){return i=(0,Te.m9)(i),e=(0,Te.m9)(e),i instanceof po&&e instanceof po&&i.firestore===e.firestore&&Ul(i._query,e._query)&&i.converter===e.converter}class h0{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zg(this,"async_queue_retry"),this.Xc=()=>{const n=_u();n&&m("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=_u();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=_u();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Ut;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!ba(n))throw n;m("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,I("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=n,n}enqueueAfterDelay(e,n,s){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const u=Yg.createAndSchedule(this,e,n,s,l=>this.na(l));return this.zc.push(u),u}Zc(){this.Wc&&S()}verifyOperationInProgress(){}sa(){var e=this;return(0,Oe.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Em(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class f0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ut,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qi extends ih{constructor(e,n,s,u){super(e,n,s,u),this.type="firestore",this._queue=new h0,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fv(this),this._firestoreClient.terminate()}}function ps(i){return i._firestoreClient||fv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function fv(i){var e,n,s;const u=i._freezeSettings(),l=(w=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Rf(i._databaseId,w,i._persistenceKey,(U=u).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,nh(U.experimentalLongPollingOptions),U.useFetchStreams));var w,U;i._firestoreClient=new fm(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(s=u.cache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.cache.kind,_offline:u.cache._offlineComponentProvider,_online:u.cache._onlineComponentProvider})}function pv(i,e,n){const s=new Ut;return i.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield Rp(i,n),yield Mp(i,e),s.resolve()}catch(u){const l=u;if(!sv(l))throw l;b("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function yv(i){if(i._initialized||i._terminated)throw new de(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wu(Es.fromBase64String(e))}catch(n){throw new de(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wu(Es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ul{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new de(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sd{constructor(e){this._methodName=e}}class Fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}const wm=/^__.*__$/;class I0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return null!==this.fieldMask?new Dc(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class Du{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Dc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oh(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class oo{constructor(e,n,s,u,l,p){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new oo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.aa({path:s,la:!1});return u.fa(e),u}da(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.aa({path:s,la:!1});return u.ua(),u}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return lf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(oh(this.ca)&&wm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class od{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||nd(e)}ya(e,n,s,u=!1){return new oo({ca:e,methodName:n,ga:s,path:Wr.emptyPath(),la:!1,ma:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qu(i){const e=i._freezeSettings(),n=nd(i._databaseId);return new od(i._databaseId,!!e.ignoreUndefinedProperties,n)}function na(i,e,n,s,u,l={}){const p=i.ya(l.merge||l.mergeFields?2:0,e,n,u);Up("Data must be an object, but it was:",p,s);const w=Dm(s,p);let A,U;if(l.merge)A=new Mo(p.fieldMask),U=p.fieldTransforms;else if(l.mergeFields){const W=[];for(const ne of l.mergeFields){const Pe=lh(e,ne,n);if(!p.contains(Pe))throw new de(he.INVALID_ARGUMENT,`Field '${Pe}' is specified in your field mask but missing from your input data.`);Cm(W,Pe)||W.push(Pe)}A=new Mo(W),U=p.fieldTransforms.filter(ne=>A.covers(ne.field))}else A=null,U=p.fieldTransforms;return new I0(new Ks(w),A,U)}class ad extends sd{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}function ud(i,e,n){return new oo({ca:3,ga:e.settings.ga,methodName:i._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cl extends sd{_toFieldTransform(e){return new wc(e.path,new ma)}isEqual(e){return e instanceof cl}}class ah extends sd{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=ud(this,e,!0),s=this.pa.map(l=>Za(l,n)),u=new qa(s);return new wc(e.path,u)}isEqual(e){return this===e}}class uh extends sd{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=ud(this,e,!0),s=this.pa.map(l=>Za(l,n)),u=new Vu(s);return new wc(e.path,u)}isEqual(e){return this===e}}class ch extends sd{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new ju(e.serializer,on(e.serializer,this.Ia));return new wc(e.path,n)}isEqual(e){return this===e}}function ll(i,e,n,s){const u=i.ya(1,e,n);Up("Data must be an object, but it was:",u,s);const l=[],p=Ks.empty();ri(s,(A,U)=>{const W=cf(e,A,n);U=(0,Te.m9)(U);const ne=u.da(W);if(U instanceof ad)l.push(W);else{const Pe=Za(U,ne);null!=Pe&&(l.push(W),p.set(W,Pe))}});const w=new Mo(l);return new Du(p,w,u.fieldTransforms)}function dl(i,e,n,s,u,l){const p=i.ya(1,e,n),w=[lh(e,s,n)],A=[u];if(l.length%2!=0)throw new de(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Pe=0;Pe<l.length;Pe+=2)w.push(lh(e,l[Pe])),A.push(l[Pe+1]);const U=[],W=Ks.empty();for(let Pe=w.length-1;Pe>=0;--Pe)if(!Cm(U,w[Pe])){const ze=w[Pe];let vt=A[Pe];vt=(0,Te.m9)(vt);const xt=p.da(ze);if(vt instanceof ad)U.push(ze);else{const Bt=Za(vt,xt);null!=Bt&&(U.push(ze),W.set(ze,Bt))}}const ne=new Mo(U);return new Du(W,ne,p.fieldTransforms)}function cd(i,e,n,s=!1){return Za(n,i.ya(s?4:3,e))}function Za(i,e){if(Tm(i=(0,Te.m9)(i)))return Up("Unsupported field value:",e,i),Dm(i,e);if(i instanceof sd)return function(n,s){if(!oh(s.ca))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,s){const u=[];let l=0;for(const p of n){let w=Za(p,s.wa(l));null==w&&(w={nullValue:"NULL_VALUE"}),u.push(w),l++}return{arrayValue:{values:u}}}(i,e)}return function(n,s){if(null===(n=(0,Te.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return on(s.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const u=ni.fromDate(n);return{timestampValue:zl(s.serializer,u)}}if(n instanceof ni){const u=new ni(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zl(s.serializer,u)}}if(n instanceof Fp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wu)return{bytesValue:_g(s.serializer,n._byteString)};if(n instanceof Yi){const u=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(u))throw s._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Eg(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${uf(n)}`)}(i,e)}function Dm(i,e){const n={};return Ai(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(i,(s,u)=>{const l=Za(u,e.ha(s));null!=l&&(n[s]=l)}),{mapValue:{fields:n}}}function Tm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ni||i instanceof Fp||i instanceof wu||i instanceof Yi||i instanceof sd)}function Up(i,e,n){if(!Tm(n)||"object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=uf(n);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function lh(i,e,n){if((e=(0,Te.m9)(e))instanceof ul)return e._internalPath;if("string"==typeof e)return cf(i,e);throw lf("Field path arguments must be of type string or ",i,!1,void 0,n)}const _v=new RegExp("[~\\*/\\[\\]]");function cf(i,e,n){if(e.search(_v)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ul(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function lf(i,e,n,s,u){const l=s&&!s.isEmpty(),p=void 0!==u;let w=`Function ${e}() called with invalid data`;n&&(w+=" (via `toFirestore()`)"),w+=". ";let A="";return(l||p)&&(A+=" (found",l&&(A+=` in field ${s}`),p&&(A+=` in document ${u}`),A+=")"),new de(he.INVALID_ARGUMENT,w+i+A)}function Cm(i,e){return i.some(n=>n.isEqual(e))}class dh{constructor(e,n,s,u,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Yi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class bm extends dh{data(){return super.data()}}function Bp(i,e){return"string"==typeof e?cf(i,e):e instanceof ul?e._internalPath:e._delegate._internalPath}function w0(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new de(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ev{}class df extends Ev{}function hl(i,e,...n){let s=[];e instanceof Ev&&s.push(e),s=s.concat(n),function(u){const l=u.filter(w=>w instanceof hf).length,p=u.filter(w=>w instanceof Vp).length;if(l>1||l>0&&p>0)throw new de(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Vp extends df{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Vp(e,n,s)}_apply(e){const n=this._parse(e);return Hp(e._query,n),new po(e.firestore,e.converter,ro(e._query,n))}_parse(e){const n=qu(e.firestore);return function(u,l,p,w,A,U,W){let ne;if(A.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new de(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){Tv(W,U);const Pe=[];for(const ze of W)Pe.push(Dv(w,u,ze));ne={arrayValue:{values:Pe}}}else ne=Dv(w,u,W)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||Tv(W,U),ne=cd(p,"where",W,"in"===U||"not-in"===U);return br.create(A,U,ne)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class hf extends Ev{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hf(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===n.length?n[0]:fi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(s,u){let l=s;const p=u.getFlattenedFilters();for(const w of p)Hp(l,w),l=ro(l,w)}(e._query,n),new po(e.firestore,e.converter,ro(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Sm extends df{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sm(e,n)}_apply(e){const n=function(s,u,l){if(null!==s.startAt)throw new de(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new de(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new du(u,l);return function(w,A){if(null===Fl(w)){const U=Qc(w);null!==U&&mf(0,U,A.field)}}(s,p),p}(e._query,this._field,this._direction);return new po(e.firestore,e.converter,function(s,u){const l=s.explicitOrderBy.concat([u]);return new ga(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}class fl extends df{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new fl(e,n,s)}_apply(e){return new po(e.firestore,e.converter,Xc(e._query,this._limit,this._limitType))}}class ff extends df{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new ff(e,n,s)}_apply(e){const n=wv(e,this.type,this._docOrFields,this._inclusive);return new po(e.firestore,e.converter,(u=n,new ga((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class $p extends df{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new $p(e,n,s)}_apply(e){const n=wv(e,this.type,this._docOrFields,this._inclusive);return new po(e.firestore,e.converter,(u=n,new ga((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function wv(i,e,n,s){if(n[0]=(0,Te.m9)(n[0]),n[0]instanceof dh)return function(u,l,p,w,A){if(!w)throw new de(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const U=[];for(const W of vc(u))if(W.field.isKeyField())U.push(Wa(l,w.key));else{const ne=w.data.field(W.field);if(jc(ne))throw new de(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+W.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ne){const Pe=W.field.canonicalString();throw new de(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Pe}' (used as the orderBy) does not exist.`)}U.push(ne)}return new Fu(U,A)}(i._query,i.firestore._databaseId,e,n[0]._document,s);{const u=qu(i.firestore);return function(l,p,w,A,U,W){const ne=l.explicitOrderBy;if(U.length>ne.length)throw new de(he.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Pe=[];for(let ze=0;ze<U.length;ze++){const vt=U[ze];if(ne[ze].field.isKeyField()){if("string"!=typeof vt)throw new de(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof vt}`);if(!Ah(l)&&-1!==vt.indexOf("/"))throw new de(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${A}() must be a plain document ID, but '${vt}' contains a slash.`);const xt=l.path.child(mr.fromString(vt));if(!Pt.isDocumentKey(xt))throw new de(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${A}() must result in a valid document path, but '${xt}' is not because it contains an odd number of segments.`);const Bt=new Pt(xt);Pe.push(Wa(p,Bt))}else{const xt=cd(w,A,vt);Pe.push(xt)}}return new Fu(Pe,W)}(i._query,i.firestore._databaseId,u,e,n,s)}}function Dv(i,e,n){if("string"==typeof(n=(0,Te.m9)(n))){if(""===n)throw new de(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ah(e)&&-1!==n.indexOf("/"))throw new de(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(mr.fromString(n));if(!Pt.isDocumentKey(s))throw new de(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wa(i,new Pt(s))}if(n instanceof Yi)return Wa(i,n._key);throw new de(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(n)}.`)}function Tv(i,e){if(!Array.isArray(i)||0===i.length)throw new de(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hp(i,e){if(e.isInequality()){const s=Qc(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new de(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const l=Fl(i);null!==l&&mf(0,u,l)}const n=function(s,u){for(const l of s)for(const p of l.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new de(he.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function mf(i,e,n){if(!n.isEqual(e))throw new de(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Cv{convertValue(e,n="none"){switch(lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw S()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ri(e,(u,l)=>{s[u]=this.convertValue(l,n)}),s}convertGeoPoint(e){return new Fp(ss(e.latitude),ss(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=uu(e);return null==s?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const n=au(e);return new ni(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=mr.fromString(e);V(qf(s));const u=new cu(s.get(1),s.get(3)),l=new Pt(s.popFirst(5));return u.isEqual(n)||I(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function zp(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class C0 extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,n)}}class pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zu extends dh{constructor(e,n,s,u,l,p){super(e,n,s,u,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class hh extends Zu{data(e={}){return super.data(e)}}class gl{constructor(e,n,s,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new pl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new hh(this._firestore,this._userDataWriter,s.key,s,new pl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new hh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new pl(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>u||3!==p.type).map(p=>{const w=new hh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new pl(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let A=-1,U=-1;return 0!==p.type&&(A=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),U=l.indexOf(p.doc.key)),{type:b0(p.type),doc:w,oldIndex:A,newIndex:U}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function b0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}function Av(i,e){return i instanceof Zu&&e instanceof Zu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof gl&&e instanceof gl&&i._firestore===e._firestore&&_m(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Yu extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,n)}}function Nm(i,e,n){i=jr(i,Yi);const s=jr(i.firestore,Qi),u=zp(i.converter,e,n);return ld(s,[na(qu(s),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,ji.none())])}function Mv(i,e,n,...s){i=jr(i,Yi);const u=jr(i.firestore,Qi),l=qu(u);let p;return p="string"==typeof(e=(0,Te.m9)(e))||e instanceof ul?dl(l,"updateDoc",i._key,e,n,s):ll(l,"updateDoc",i._key,e),ld(u,[p.toMutation(i._key,ji.exists(!0))])}function vf(i,...e){var n,s,u;i=(0,Te.m9)(i);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Em(e[p])||(l=e[p],p++);const w={includeMetadataChanges:l.includeMetadataChanges};if(Em(e[p])){const ne=e[p];e[p]=null===(n=ne.next)||void 0===n?void 0:n.bind(ne),e[p+1]=null===(s=ne.error)||void 0===s?void 0:s.bind(ne),e[p+2]=null===(u=ne.complete)||void 0===u?void 0:u.bind(ne)}let A,U,W;if(i instanceof Yi)U=jr(i.firestore,Qi),W=Yc(i._key.path),A={next:ne=>{e[p]&&e[p](qp(U,i,ne))},error:e[p+1],complete:e[p+2]};else{const ne=jr(i,po);U=jr(ne.firestore,Qi),W=ne._query;const Pe=new Yu(U);A={next:ze=>{e[p]&&e[p](new gl(U,Pe,ne,ze))},error:e[p+1],complete:e[p+2]},w0(i._query)}return function(ne,Pe,ze,vt){const xt=new Ap(vt),Bt=new Ky(Pe,xt,ze);return ne.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return Gy(yield id(ne),Bt)})),()=>{xt.Dc(),ne.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return Cp(yield id(ne),Bt)}))}}(ps(U),W,w,A)}function ld(i,e){return function(n,s){const u=new Ut;return n.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function nm(i,e,n){return(ic=ic||(0,Oe.Z)(function*(s,u,l){const p=dm(s);try{const w=yield function(A,U){const W=ce(A),ne=ni.now(),Pe=U.reduce((xt,Bt)=>xt.add(Bt.key),ie());let ze,vt;return W.persistence.runTransaction("Locally write mutations","readwrite",xt=>{let Bt=Wo(),Kn=ie();return W.Zi.getEntries(xt,Pe).next(ar=>{Bt=ar,Bt.forEach((pn,ur)=>{ur.isValidDocument()||(Kn=Kn.add(pn))})}).next(()=>W.localDocuments.getOverlayedDocuments(xt,Bt)).next(ar=>{ze=ar;const pn=[];for(const ur of U){const $r=Vl(ur,ze.get(ur.key).overlayedDocument);null!=$r&&pn.push(new Dc(ur.key,$r,wd($r.value.mapValue),ji.exists(!0)))}return W.mutationQueue.addMutationBatch(xt,ne,pn,U)}).next(ar=>{vt=ar;const pn=ar.applyToLocalDocumentSet(ze,Kn);return W.documentOverlayCache.saveOverlays(xt,ar.batchId,pn)})}).then(()=>({batchId:vt.batchId,changes:h(ze)}))}(p.localStore,u);p.sharedClientState.addPendingMutation(w.batchId),function(A,U,W){let ne=A.Tc[A.currentUser.toKey()];ne||(ne=new fn(Fn)),ne=ne.insert(U,W),A.Tc[A.currentUser.toKey()]=ne}(p,w.batchId,l),yield Rc(p,w.changes),yield Eu(p.remoteStore)}catch(w){const A=Gd(w,"Failed to persist write");l.reject(A)}})).apply(this,arguments)}(yield Np(n),s,u)})),u.promise}(ps(i),e)}function qp(i,e,n){const s=n.docs.get(e._key),u=new Yu(i);return new Zu(i,u,e._key,s,new pl(n.hasPendingWrites,n.fromCache),e.converter)}const k0={maxAttempts:5};class km{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qu(e)}set(e,n,s){this._verifyNotCommitted();const u=Qu(e,this._firestore),l=zp(u.converter,n,s),p=na(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,s);return this._mutations.push(p.toMutation(u._key,ji.none())),this}update(e,n,s,...u){this._verifyNotCommitted();const l=Qu(e,this._firestore);let p;return p="string"==typeof(n=(0,Te.m9)(n))||n instanceof ul?dl(this._dataReader,"WriteBatch.update",l._key,n,s,u):ll(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(p.toMutation(l._key,ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qu(e,this._firestore);return this._mutations=this._mutations.concat(new $l(n._key,ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qu(i,e){if((i=(0,Te.m9)(i)).firestore!==e)throw new de(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class kv extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=qu(e)}get(e){const n=Qu(e,this._firestore),s=new C0(this._firestore);return this._transaction.lookup([n._key]).then(u=>{if(!u||1!==u.length)return S();const l=u[0];if(l.isFoundDocument())return new dh(this._firestore,s,l.key,l,n.converter);if(l.isNoDocument())return new dh(this._firestore,s,n._key,null,n.converter);throw S()})}set(e,n,s){const u=Qu(e,this._firestore),l=zp(u.converter,n,s),p=na(this._dataReader,"Transaction.set",u._key,l,null!==u.converter,s);return this._transaction.set(u._key,p),this}update(e,n,s,...u){const l=Qu(e,this._firestore);let p;return p="string"==typeof(n=(0,Te.m9)(n))||n instanceof ul?dl(this._dataReader,"Transaction.update",l._key,n,s,u):ll(this._dataReader,"Transaction.update",l._key,n),this._transaction.update(l._key,p),this}delete(e){const n=Qu(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Qu(e,this._firestore),s=new Yu(this._firestore);return super.get(e).then(u=>new Zu(this._firestore,s,n._key,u._document,new pl(!1,!1),n.converter))}}function _f(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new de("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function ml(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function Zp(){if(!function mc(){return typeof atob<"u"}())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){iu=Ot.SDK_VERSION,(0,Ot._registerComponent)(new ke.wA("firestore",(n,{instanceIdentifier:s,options:u})=>{const l=n.getProvider("app").getImmediate(),p=new Qi(new zs(n.getProvider("auth-internal")),new Ao(n.getProvider("app-check-internal")),function(w,A){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new de(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(w.options.projectId,A)}(l,s),l);return u=Object.assign({useFetchStreams:e},u),p._setSettings(u),p},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)(Ba,"3.13.0",i),(0,Ot.registerVersion)(Ba,"3.13.0","esm2017")}();class Ef{constructor(e){this._delegate=e}static fromBase64String(e){return Zp(),new Ef(wu.fromBase64String(e))}static fromUint8Array(e){return ml(),new Ef(wu.fromUint8Array(e))}toBase64(){return Zp(),this._delegate.toBase64()}toUint8Array(){return ml(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function If(i){return function ZE(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const s of e)if(s in n&&"function"==typeof n[s])return!0;return!1}(i,["next","error","complete"])}class YE{enableIndexedDbPersistence(e,n){return function kp(i,e){yv(i=jr(i,Qi));const n=ps(i);if(n._uninitializedComponentsProvider)throw new de(he.FAILED_PRECONDITION,"SDK cache is already specified.");b("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),u=new eh;return pv(n,u,new hm(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function m0(i){yv(i=jr(i,Qi));const e=ps(i);if(e._uninitializedComponentsProvider)throw new de(he.FAILED_PRECONDITION,"SDK cache is already specified.");b("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),s=new eh;return pv(e,s,new Sp(s,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function y0(i){if(i._initialized&&!i._terminated)throw new de(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ut;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{var n;yield function(s){return(n=n||(0,Oe.Z)(function*(u){if(!Ro.D())return Promise.resolve();const l=u+"main";yield Ro.delete(l)})).apply(this,arguments)}(fp(i._databaseId,i._persistenceKey)),e.resolve()}catch(s){e.reject(s)}})),e.promise}(e._delegate)}}class $v{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof cu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&b("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,s={}){!function sh(i,e,n,s={}){var u;const l=(i=jr(i,ih))._getSettings(),p=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==p&&b("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:p,ssl:!1})),s.mockUserToken){let w,A;if("string"==typeof s.mockUserToken)w=s.mockUserToken,A=Vi.MOCK_USER;else{w=(0,Te.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new de(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Vi(U)}i._authCredentials=new _n(new gn(w,A))}}(this._delegate,e,n,s)}enableNetwork(){return function _0(i){return function ov(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield af(i),n=yield o0(i);return e.setNetworkEnabled(!0),function(s){const u=ce(s);return u.vu.delete(0),Is(u)}(n)}))}(ps(i=jr(i,Qi)))}(this._delegate)}disableNetwork(){return function E0(i){return function gm(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){var e;const n=yield af(i),s=yield o0(i);return n.setNetworkEnabled(!1),function(u){return(e=e||(0,Oe.Z)(function*(l){const p=ce(l);p.vu.add(0),yield $d(p),p.bu.set("Offline")})).apply(this,arguments)}(s)}))}(ps(i=jr(i,Qi)))}(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,l0("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function v0(i){return function(e){const n=new Ut;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function Qy(i,e){return(hi=hi||(0,Oe.Z)(function*(n,s){const u=ce(n);sl(u.remoteStore)||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(w){const A=ce(w);return A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",U=>A.mutationQueue.getHighestUnacknowledgedBatchId(U))}(u.localStore);if(-1===l)return void s.resolve();const p=u.Ec.get(l)||[];p.push(s),u.Ec.set(l,p)}catch(l){const p=Gd(l,"Initialization of waitForPendingWrites() operation failed");s.reject(p)}})).apply(this,arguments)}(yield Np(e),n)})),n.promise}(ps(i=jr(i,Qi)))}(this._delegate)}onSnapshotsInSync(e){return function Kp(i,e){return function u0(i,e){const n=new Ap(e);return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return s=yield id(i),u=n,ce(s).ku.add(u),void u.next();var s,u})),()=>{n.Dc(),i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return s=yield id(i),u=n,void ce(s).ku.delete(u);var s,u}))}}(ps(i=jr(i,Qi)),Em(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dd(this,dv(this._delegate,e))}catch(n){throw ra(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ya(this,al(this._delegate,e))}catch(n){throw ra(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function d0(i,e){if(i=jr(i,ih),rh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new po(i,null,(n=e,new ga(mr.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw ra(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Lv(i,e,n){i=jr(i,Qi);const s=Object.assign(Object.assign({},k0),n);return function(u){if(u.maxAttempts<1)throw new de(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,l,p){const w=new Ut;return u.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const A=yield function pm(i){return sf(i).then(e=>e.datastore)}(u);new Ku(u.asyncQueue,A,p,l,w).run()})),w.promise}(ps(i),u=>e(new kv(i,u)),s)}(this._delegate,n=>e(new zv(this,n)))}batch(){return ps(this._delegate),new Ys(new km(this._delegate,e=>ld(this._delegate,e)))}loadBundle(e){return function gv(i,e){const n=ps(i=jr(i,Qi)),s=new f0;return function uv(i,e,n,s){const u=function(l,p){let w;return w="string"==typeof l?oy().encode(l):l,A=function(A,U){if(A instanceof Uint8Array)return iv(A,U);if(A instanceof ArrayBuffer)return iv(new Uint8Array(A),U);if(A instanceof ReadableStream)return A.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(w),new r0(A,p);var A}(n,nd(e));i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function t0(i,e,n){var s;const u=ce(i);(function(l,p,w){return(s=s||(0,Oe.Z)(function*(A,U,W){try{const ne=yield U.getMetadata();if(yield function(xt,Bt){const Kn=ce(xt),ar=Rs(Bt.createTime);return Kn.persistence.runTransaction("hasNewerBundle","readonly",pn=>Kn.qs.getBundleMetadata(pn,Bt.id)).then(pn=>!!pn&&pn.createTime.compareTo(ar)>=0)}(A.localStore,ne))return yield U.close(),W._completeWith({taskState:"Success",documentsLoaded:(xt=ne).totalDocuments,bytesLoaded:xt.totalBytes,totalDocuments:xt.totalDocuments,totalBytes:xt.totalBytes}),Promise.resolve(new Set);W._updateProgress(Jg(ne));const Pe=new Z_(ne,A.localStore,U.serializer);let ze=yield U.bc();for(;ze;){const xt=yield Pe.zu(ze);xt&&W._updateProgress(xt),ze=yield U.bc()}const vt=yield Pe.complete();return yield Rc(A,vt.Ju,void 0),yield function(xt,Bt){const Kn=ce(xt);return Kn.persistence.runTransaction("Save bundle","readwrite",ar=>Kn.qs.saveBundleMetadata(ar,Bt))}(A.localStore,ne),W._completeWith(vt.progress),Promise.resolve(vt.Hu)}catch(ne){return b("SyncEngine",`Loading bundle failed with ${ne}`),W._failWith(ne),Promise.resolve(new Set)}var xt})).apply(this,arguments)})(u,e,n).then(l=>{u.sharedClientState.notifyBundleLoaded(l)})}(yield Np(i),u,s)}))}(n,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function mv(i,e){return function c0(i,e){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(n,s){const u=ce(n);return u.persistence.runTransaction("Get named query","readonly",l=>u.qs.getNamedQuery(l,s))}(yield th(i),e)}))}(ps(i=jr(i,Qi)),e).then(n=>n?new po(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Qs(this,n):null)}}class Yp extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(new wu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ya.forKey(n,this.firestore,null)}}class zv{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Yp(e)}get(e){const n=hd(e);return this._delegate.get(n).then(s=>new fh(this._firestore,new Zu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const u=hd(e);return s?(_f("Transaction.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=hd(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=hd(e);return this._delegate.delete(n),this}}class Ys{constructor(e){this._delegate=e}set(e,n,s){const u=hd(e);return s?(_f("WriteBatch.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=hd(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=hd(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class yl{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new hh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ph(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=yl.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let l=u.get(n);return l||(l=new yl(e,new Yp(e),n),u.set(n,l)),l}}yl.INSTANCES=new WeakMap;class Ya{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yp(e)}static forPath(e,n,s){if(e.length%2!=0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ya(n,new Yi(n._delegate,s,new Pt(e)))}static forKey(e,n,s){return new Ya(n,new Yi(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new dd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dd(this.firestore,dv(this._delegate,e))}catch(n){throw ra(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Te.m9)(e))instanceof Yi&&hv(this._delegate,e)}set(e,n){n=_f("DocumentReference.set",n);try{return n?Nm(this._delegate,e,n):Nm(this._delegate,e)}catch(s){throw ra(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return 1===arguments.length?Mv(this._delegate,e):Mv(this._delegate,e,n,...s)}catch(u){throw ra(u,"updateDoc()","DocumentReference.update()")}}delete(){return function A0(i){return ld(jr(i.firestore,Qi),[new $l(i._key,ji.none())])}(this._delegate)}onSnapshot(...e){const n=Fm(e),s=Gv(e,u=>new fh(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return vf(this._delegate,n,s)}get(e){let n;return n="cache"===e?.source?function Mm(i){i=jr(i,Yi);const e=jr(i.firestore,Qi),n=ps(e),s=new Yu(e);return function Mc(i,e){const n=new Ut;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){var s;return function(u,l,p){return(s=s||(0,Oe.Z)(function*(w,A,U){try{const W=yield function(ne,Pe){const ze=ce(ne);return ze.persistence.runTransaction("read document","readonly",vt=>ze.localDocuments.getDocument(vt,Pe))}(w,A);W.isFoundDocument()?U.resolve(W):W.isNoDocument()?U.resolve(null):U.reject(new de(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(W){const ne=Gd(W,`Failed to get document '${A} from cache`);U.reject(ne)}})).apply(this,arguments)}(yield th(i),e,n)})),n.promise}(n,i._key).then(u=>new Zu(e,s,i._key,u,new pl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function S0(i){i=jr(i,Yi);const e=jr(i.firestore,Qi);return av(ps(e),i._key,{source:"server"}).then(n=>qp(e,i,n))}(this._delegate):function Rv(i){i=jr(i,Yi);const e=jr(i.firestore,Qi);return av(ps(e),i._key).then(n=>qp(e,i,n))}(this._delegate),n.then(s=>new fh(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Ya(this.firestore,this._delegate.withConverter(e?yl.getInstance(this.firestore,e):null))}}function ra(i,e,n){return i.message=i.message.replace(e,n),i}function Fm(i){for(const e of i)if("object"==typeof e&&!If(e))return e;return{}}function Gv(i,e){var n,s;let u;return u=If(i[0])?i[0]:If(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class fh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Av(this._delegate,e._delegate)}}class ph extends fh{data(e){const n=this._delegate.data(e);return function X(i,e){i||S()}(void 0!==n),n}}class Qs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yp(e)}where(e,n,s){try{return new Qs(this.firestore,hl(this._delegate,function D0(i,e,n){const s=e,u=Bp("where",i);return Vp._create(u,s,n)}(e,n,s)))}catch(u){throw ra(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Qs(this.firestore,hl(this._delegate,function Am(i,e="asc"){const n=e,s=Bp("orderBy",i);return Sm._create(s,n)}(e,n)))}catch(s){throw ra(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,hl(this._delegate,function Rm(i){return lv("limit",i),fl._create("limit",i,"F")}(e)))}catch(n){throw ra(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,hl(this._delegate,function jp(i){return lv("limitToLast",i),fl._create("limitToLast",i,"L")}(e)))}catch(n){throw ra(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,hl(this._delegate,function pf(...i){return ff._create("startAt",i,!0)}(...e)))}catch(n){throw ra(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,hl(this._delegate,function Iv(...i){return ff._create("startAfter",i,!1)}(...e)))}catch(n){throw ra(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,hl(this._delegate,function gf(...i){return $p._create("endBefore",i,!1)}(...e)))}catch(n){throw ra(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,hl(this._delegate,function T0(...i){return $p._create("endAt",i,!0)}(...e)))}catch(n){throw ra(n,"endAt()","Query.endAt()")}}isEqual(e){return _m(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Wp(i){i=jr(i,po);const e=jr(i.firestore,Qi),n=ps(e),s=new Yu(e);return function a0(i,e){const n=new Ut;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){var s;return function(u,l,p){return(s=s||(0,Oe.Z)(function*(w,A,U){try{const W=yield pp(w,A,!0),ne=new tm(A,W.ir),Pe=ne.sc(W.documents),ze=ne.applyChanges(Pe,!1);U.resolve(ze.snapshot)}catch(W){const ne=Gd(W,`Failed to execute query '${A} against cache`);U.reject(ne)}})).apply(this,arguments)}(yield th(i),e,n)})),n.promise}(n,i._query).then(u=>new gl(e,s,i,u))}(this._delegate):"server"===e?.source?function xm(i){i=jr(i,po);const e=jr(i.firestore,Qi),n=ps(e),s=new Yu(e);return Pp(n,i._query,{source:"server"}).then(u=>new gl(e,s,i,u))}(this._delegate):function Gp(i){i=jr(i,po);const e=jr(i.firestore,Qi),n=ps(e),s=new Yu(e);return w0(i._query),Pp(n,i._query).then(u=>new gl(e,s,i,u))}(this._delegate),n.then(s=>new Um(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=Fm(e),s=Gv(e,u=>new Um(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return vf(this._delegate,n,s)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?yl.getInstance(this.firestore,e):null))}}class B0{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ph(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Um{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ph(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new B0(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new ph(this._firestore,s))})}isEqual(e){return Av(this._delegate,e._delegate)}}class dd extends Qs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ya(this.firestore,e):null}doc(e){try{return new Ya(this.firestore,void 0===e?al(this._delegate):al(this._delegate,e))}catch(n){throw ra(n,"doc()","CollectionReference.doc()")}}add(e){return function R0(i,e){const n=jr(i.firestore,Qi),s=al(i),u=zp(i.converter,e);return ld(n,[na(qu(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,ji.exists(!1))]).then(()=>s)}(this._delegate,e).then(n=>new Ya(this.firestore,n))}isEqual(e){return hv(this._delegate,e._delegate)}withConverter(e){return new dd(this.firestore,this._delegate.withConverter(e?yl.getInstance(this.firestore,e):null))}}function hd(i){return jr(i,Yi)}class Qp{constructor(...e){this._delegate=new ul(...e)}static documentId(){return new Qp(Wr.keyField().canonicalString())}isEqual(e){return(e=(0,Te.m9)(e))instanceof ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class gh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Uv(){return new cl("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gh(e)}static delete(){const e=function Fv(){return new ad("deleteField")}();return e._methodName="FieldValue.delete",new gh(e)}static arrayUnion(...e){const n=function Bv(...i){return new ah("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new gh(n)}static arrayRemove(...e){const n=function Vv(...i){return new uh("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new gh(n)}static increment(e){const n=function jv(i){return new ch("increment",i)}(e);return n._methodName="FieldValue.increment",new gh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wv={Firestore:$v,GeoPoint:Fp,Timestamp:ni,Blob:Ef,Transaction:zv,WriteBatch:Ys,DocumentReference:Ya,DocumentSnapshot:fh,Query:Qs,QueryDocumentSnapshot:ph,QuerySnapshot:Um,CollectionReference:dd,FieldPath:Qp,FieldValue:gh,setLogLevel:function Hv(i){!function Dl(i){ho.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Xu(i){(function Bm(i,e){i.INTERNAL.registerComponent(new ke.wA("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Wv)))})(i,(e,n)=>new $v(e,n,new YE)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(gt.Z);var vl=O(6796),Kv=O(8697),Ju=O(7142);function Qa(i,e){return function Tu(i,e=ue.z){return new z.y(n=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},n)}):s=i.onSnapshot({includeMetadataChanges:!0},n),()=>{s?.()}})}(i,e)}function Xp(i,e){return Qa(i,e).pipe((0,Q.U)(n=>({payload:n,type:"query"})))}function Jp(i,e){return Xp(i,e).pipe((0,Se.O)(void 0),te(),(0,Q.U)(([n,s])=>{const u=s.payload.docChanges(),l=u.map(p=>({type:p.type,payload:p}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,w)=>{const A=u.find(W=>W.doc.ref.isEqual(p.ref)),U=n?.payload.docs.find(W=>W.ref.isEqual(p.ref));A&&JSON.stringify(A.doc.metadata)===JSON.stringify(p.metadata)||!A&&U&&JSON.stringify(U.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:w,newIndex:w,type:"modified",doc:p}})}),l}))}function Zv(i,e,n){return Jp(i,n).pipe((0,De.R)((s,u)=>function V0(i,e,n){return e.forEach(s=>{n.indexOf(s.type)>-1&&(i=function jm(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Vm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vm(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(l=>l.payload),e),[]),(0,nt.x)(),(0,Q.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Vm(i,e,n,...s){const u=i.slice();return u.splice(e,n,...s),u}function mh(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yv{constructor(e,n,s){this.ref=e,this.query=n,this.afs=s}stateChanges(e){let n=Jp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Q.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,Se.O)(void 0),te(),(0,ut.h)(([s,u])=>u.length>0||!s),(0,Q.U)(([s,u])=>u),ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=mh(e);return Zv(this.query,n,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return Xp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Q.U)(n=>n.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ge.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(ge.iC)}add(e){return this.ref.add(e)}doc(e){return new $m(this.ref.doc(e),this.afs)}}class $m{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const s=this.ref.collection(e),{ref:u,query:l}=Jv(s,n);return new Yv(u,l,this.afs)}snapshotChanges(){return function qv(i,e){return Qa(i,e).pipe((0,Se.O)(void 0),te(),(0,Q.U)(([n,s])=>s.exists?n?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Q.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(ge.iC)}}class j0{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Jp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Q.U)(n=>n.filter(s=>e.indexOf(s.type)>-1)),(0,ut.h)(n=>n.length>0),ge.iC):Jp(this.query,this.afs.schedulers.outsideAngular).pipe(ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=mh(e);return Zv(this.query,n,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return Xp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Q.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),ge.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(ge.iC)}}const Qv=new y.OlP("angularfire2.enableFirestorePersistence"),Hm=new y.OlP("angularfire2.firestore.persistenceSettings"),Xv=new y.OlP("angularfire2.firestore.settings"),eg=new y.OlP("angularfire2.firestore.use-emulator");function Jv(i,e=(n=>n)){return{query:e(i),ref:i}}let zm=(()=>{class i{constructor(n,s,u,l,p,w,A,U,W,ne,Pe,ze,vt,xt,Bt,Kn,ar){this.schedulers=A;const pn=(0,Et.on)(n,w,s),ur=W;ne&&(0,vl.nw)(pn,w,Pe,vt,xt,Bt,ze,Kn),[this.firestore,this.persistenceEnabled$]=(0,Et.cc)(`${pn.name}.firestore`,"AngularFirestore",pn.name,()=>{const $r=w.runOutsideAngular(()=>pn.firestore());if(l&&$r.settings(l),ur&&$r.useEmulator(...ur),u&&!(0,st.PM)(p)){const $i=()=>{try{return(0,ve.D)($r.enablePersistence(U||void 0).then(()=>!0,()=>!1))}catch(No){return typeof console<"u"&&console.warn(No),(0,me.of)(!1)}};return[$r,w.runOutsideAngular($i)]}return[$r,(0,me.of)(!1)]},[l,ur,u])}collection(n,s){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:p}=Jv(u,s),w=this.schedulers.ngZone.run(()=>l);return new Yv(w,p,this)}collectionGroup(n,s){const u=s||(p=>p),l=this.firestore.collectionGroup(n);return new j0(u(l),this)}doc(n){let s;s="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>s);return new $m(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(n){return new(n||i)(y.LFG(Et.Dh),y.LFG(Et.xv,8),y.LFG(Qv,8),y.LFG(Xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(ge.HU),y.LFG(Hm,8),y.LFG(eg,8),y.LFG(vl.zQ,8),y.LFG(vl.Qv,8),y.LFG(vl.L6,8),y.LFG(vl._Q,8),y.LFG(vl.rT,8),y.LFG(vl.lh,8),y.LFG(vl.f7,8),y.LFG(Kv.nm,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),e_=(()=>{class i{constructor(){Ju.Z.registerVersion("angularfire",ge.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:Qv,useValue:!0},{provide:Hm,useValue:n}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[zm]}),i})()},6240:(Lt,We,O)=>{O.d(We,{Q1:()=>ys,TE:()=>pr});var gt,y=O(5592),ue=O(2096),z=O(2459),ve=O(6321),me=O(9360),ge=O(8251),Ge=O(7398),Me=O(4664),te=O(8186),Q=O(5879),De=O(6304),nt=O(3106),ut=O(5861),Et=O(534),st=O(9058),Tt=O(4537);const Oe="firebasestorage.googleapis.com",Ot="storageBucket";class Be extends st.ZR{constructor(L,q,ae=0){super(Ue(L),`Firebase Storage: ${q} (${Ue(L)})`),this.status_=ae,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(L){this.status_=L}_codeEquals(L){return Ue(L)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(L){this.customData.serverResponse=L,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ke=function(F){return F.UNKNOWN="unknown",F.OBJECT_NOT_FOUND="object-not-found",F.BUCKET_NOT_FOUND="bucket-not-found",F.PROJECT_NOT_FOUND="project-not-found",F.QUOTA_EXCEEDED="quota-exceeded",F.UNAUTHENTICATED="unauthenticated",F.UNAUTHORIZED="unauthorized",F.UNAUTHORIZED_APP="unauthorized-app",F.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",F.INVALID_CHECKSUM="invalid-checksum",F.CANCELED="canceled",F.INVALID_EVENT_NAME="invalid-event-name",F.INVALID_URL="invalid-url",F.INVALID_DEFAULT_BUCKET="invalid-default-bucket",F.NO_DEFAULT_BUCKET="no-default-bucket",F.CANNOT_SLICE_BLOB="cannot-slice-blob",F.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",F.NO_DOWNLOAD_URL="no-download-url",F.INVALID_ARGUMENT="invalid-argument",F.INVALID_ARGUMENT_COUNT="invalid-argument-count",F.APP_DELETED="app-deleted",F.INVALID_ROOT_OPERATION="invalid-root-operation",F.INVALID_FORMAT="invalid-format",F.INTERNAL_ERROR="internal-error",F.UNSUPPORTED_ENVIRONMENT="unsupported-environment",F}(Ke||{});function Ue(F){return"storage/"+F}function Vt(){return new Be(Ke.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rr(){return new Be(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function In(){return new Be(Ke.CANCELED,"User canceled the upload/download.")}function He(){return new Be(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bt(F){return new Be(Ke.INVALID_ARGUMENT,F)}function Ct(){return new Be(Ke.APP_DELETED,"The Firebase app was deleted.")}function Cn(F){return new Be(Ke.INVALID_ROOT_OPERATION,"The operation '"+F+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xt(F,L){return new Be(Ke.INVALID_FORMAT,"String does not match format '"+F+"': "+L)}function yn(F){throw new Be(Ke.INTERNAL_ERROR,"Internal error: "+F)}class $t{constructor(L,q){this.bucket=L,this.path_=q}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const L=encodeURIComponent;return"/b/"+L(this.bucket)+"/o/"+L(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(L,q){let ae;try{ae=$t.makeFromUrl(L,q)}catch{return new $t(L,"")}if(""===ae.path)return ae;throw function we(F){return new Be(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+F+"'.")}(L)}static makeFromUrl(L,q){let ae=null;const Ie="([A-Za-z0-9.\\-_]+)",Ht=new RegExp("^gs://"+Ie+"(/(.*))?$","i");function hn(Gr){Gr.path_=decodeURIComponent(Gr.path)}const Pr=q.replace(/[.]/g,"\\."),Or=[{regex:Ht,indices:{bucket:1,path:3},postModify:function Je(Gr){"/"===Gr.path.charAt(Gr.path.length-1)&&(Gr.path_=Gr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Pr}/v[A-Za-z0-9_]+/b/${Ie}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:hn},{regex:new RegExp(`^https?://${q===Oe?"(?:storage.googleapis.com|storage.cloud.google.com)":q}/${Ie}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:hn}];for(let Gr=0;Gr<Or.length;Gr++){const Fs=Or[Gr],bs=Fs.regex.exec(L);if(bs){let wo=bs[Fs.indices.path];wo||(wo=""),ae=new $t(bs[Fs.indices.bucket],wo),Fs.postModify(ae);break}}if(null==ae)throw function mn(F){return new Be(Ke.INVALID_URL,"Invalid URL '"+F+"'.")}(L);return ae}}class wn{constructor(L){this.promise_=Promise.reject(L)}getPromise(){return this.promise_}cancel(L=!1){}}function Vn(F){return"string"==typeof F||F instanceof String}function Qn(F){return xr()&&F instanceof Blob}function xr(){return typeof Blob<"u"&&!(0,st.UG)()}function pi(F,L,q,ae){if(ae<L)throw bt(`Invalid value for '${F}'. Expected ${L} or greater.`);if(ae>q)throw bt(`Invalid value for '${F}'. Expected ${q} or less.`)}function zn(F,L,q){let ae=L;return null==q&&(ae=`https://${L}`),`${q}://${ae}/v0${F}`}function Jt(F){const L=encodeURIComponent;let q="?";for(const ae in F)F.hasOwnProperty(ae)&&(q=q+(L(ae)+"=")+L(F[ae])+"&");return q=q.slice(0,-1),q}var Qt=function(F){return F[F.NO_ERROR=0]="NO_ERROR",F[F.NETWORK_ERROR=1]="NETWORK_ERROR",F[F.ABORT=2]="ABORT",F}(Qt||{});function sn(F,L){const q=F>=500&&F<600,Ie=-1!==[408,429].indexOf(F),Je=-1!==L.indexOf(F);return q||Ie||Je}class Gn{constructor(L,q,ae,Ie,Je,ft,Ht,zt,hn,kn,Pr,Sn=!0){this.url_=L,this.method_=q,this.headers_=ae,this.body_=Ie,this.successCodes_=Je,this.additionalRetryCodes_=ft,this.callback_=Ht,this.errorCallback_=zt,this.timeout_=hn,this.progressCallback_=kn,this.connectionFactory_=Pr,this.retry=Sn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((gr,Xr)=>{this.resolve_=gr,this.reject_=Xr,this.start_()})}start_(){const q=(ae,Ie)=>{const Je=this.resolve_,ft=this.reject_,Ht=Ie.connection;if(Ie.wasSuccessCode)try{const zt=this.callback_(Ht,Ht.getResponse());!function rn(F){return void 0!==F}(zt)?Je():Je(zt)}catch(zt){ft(zt)}else if(null!==Ht){const zt=Vt();zt.serverResponse=Ht.getErrorText(),ft(this.errorCallback_?this.errorCallback_(Ht,zt):zt)}else ft(Ie.canceled?this.appDelete_?Ct():In():rr())};this.canceled_?q(0,new ii(!1,null,!0)):this.backoffId_=function qn(F,L,q){let ae=1,Ie=null,Je=null,ft=!1,Ht=0;function zt(){return 2===Ht}let hn=!1;function kn(...Wn){hn||(hn=!0,L.apply(null,Wn))}function Pr(Wn){Ie=setTimeout(()=>{Ie=null,F(gr,zt())},Wn)}function Sn(){Je&&clearTimeout(Je)}function gr(Wn,...Ni){if(hn)return void Sn();if(Wn)return Sn(),void kn.call(null,Wn,...Ni);if(zt()||ft)return Sn(),void kn.call(null,Wn,...Ni);let Or;ae<64&&(ae*=2),1===Ht?(Ht=2,Or=0):Or=1e3*(ae+Math.random()),Pr(Or)}let Xr=!1;function Jr(Wn){Xr||(Xr=!0,Sn(),!hn&&(null!==Ie?(Wn||(Ht=2),clearTimeout(Ie),Pr(0)):Wn||(Ht=1)))}return Pr(0),Je=setTimeout(()=>{ft=!0,Jr(!0)},q),Jr}((ae,Ie)=>{if(Ie)return void ae(!1,new ii(!1,null,!0));const Je=this.connectionFactory_();this.pendingConnection_=Je;const ft=Ht=>{null!==this.progressCallback_&&this.progressCallback_(Ht.loaded,Ht.lengthComputable?Ht.total:-1)};null!==this.progressCallback_&&Je.addUploadProgressListener(ft),Je.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Je.removeUploadProgressListener(ft),this.pendingConnection_=null;const Ht=Je.getErrorCode()===Qt.NO_ERROR,zt=Je.getStatus();if(!Ht||sn(zt,this.additionalRetryCodes_)&&this.retry){const kn=Je.getErrorCode()===Qt.ABORT;return void ae(!1,new ii(!1,null,kn))}const hn=-1!==this.successCodes_.indexOf(zt);ae(!0,new ii(hn,Je))})},q,this.timeout_)}getPromise(){return this.promise_}cancel(L){this.canceled_=!0,this.appDelete_=L||!1,null!==this.backoffId_&&function lr(F){F(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ii{constructor(L,q,ae){this.wasSuccessCode=L,this.connection=q,this.canceled=!!ae}}function xn(...F){const L=function Xi(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==L){const q=new L;for(let ae=0;ae<F.length;ae++)q.append(F[ae]);return q.getBlob()}if(xr())return new Blob(F);throw new Be(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ki{constructor(L,q){this.data=L,this.contentType=q||null}}function Ar(F,L){switch(F){case Ln.RAW:return new ki(qr(L));case Ln.BASE64:case Ln.BASE64URL:return new ki(Zr(F,L));case Ln.DATA_URL:return new ki(function di(F){const L=new oi(F);return L.base64?Zr(Ln.BASE64,L.rest):function Hr(F){let L;try{L=decodeURIComponent(F)}catch{throw Xt(Ln.DATA_URL,"Malformed data URL.")}return qr(L)}(L.rest)}(L),function gi(F){return new oi(F).contentType}(L))}throw Vt()}function qr(F){const L=[];for(let q=0;q<F.length;q++){let ae=F.charCodeAt(q);ae<=127?L.push(ae):ae<=2047?L.push(192|ae>>6,128|63&ae):55296==(64512&ae)?q<F.length-1&&56320==(64512&F.charCodeAt(q+1))?(ae=65536|(1023&ae)<<10|1023&F.charCodeAt(++q),L.push(240|ae>>18,128|ae>>12&63,128|ae>>6&63,128|63&ae)):L.push(239,191,189):56320==(64512&ae)?L.push(239,191,189):L.push(224|ae>>12,128|ae>>6&63,128|63&ae)}return new Uint8Array(L)}function Zr(F,L){switch(F){case Ln.BASE64:{const Ie=-1!==L.indexOf("-"),Je=-1!==L.indexOf("_");if(Ie||Je)throw Xt(F,"Invalid character '"+(Ie?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const Ie=-1!==L.indexOf("+"),Je=-1!==L.indexOf("/");if(Ie||Je)throw Xt(F,"Invalid character '"+(Ie?"+":"/")+"' found: is it base64 encoded?");L=L.replace(/-/g,"+").replace(/_/g,"/");break}}let q;try{q=function On(F){if(typeof atob>"u")throw function pt(F){return new Be(Ke.UNSUPPORTED_ENVIRONMENT,`${F} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(F)}(L)}catch(Ie){throw Ie.message.includes("polyfill")?Ie:Xt(F,"Invalid character found")}const ae=new Uint8Array(q.length);for(let Ie=0;Ie<q.length;Ie++)ae[Ie]=q.charCodeAt(Ie);return ae}class oi{constructor(L){this.base64=!1,this.contentType=null;const q=L.match(/^data:([^,]+)?,/);if(null===q)throw Xt(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ae=q[1]||null;null!=ae&&(this.base64=function Li(F,L){return F.length>=L.length&&F.substring(F.length-L.length)===L}(ae,";base64"),this.contentType=this.base64?ae.substring(0,ae.length-7):ae),this.rest=L.substring(L.indexOf(",")+1)}}class ye{constructor(L,q){let ae=0,Ie="";Qn(L)?(this.data_=L,ae=L.size,Ie=L.type):L instanceof ArrayBuffer?(q?this.data_=new Uint8Array(L):(this.data_=new Uint8Array(L.byteLength),this.data_.set(new Uint8Array(L))),ae=this.data_.length):L instanceof Uint8Array&&(q?this.data_=L:(this.data_=new Uint8Array(L.length),this.data_.set(L)),ae=L.length),this.size_=ae,this.type_=Ie}size(){return this.size_}type(){return this.type_}slice(L,q){if(Qn(this.data_)){const Ie=function si(F,L,q){return F.webkitSlice?F.webkitSlice(L,q):F.mozSlice?F.mozSlice(L,q):F.slice?F.slice(L,q):null}(this.data_,L,q);return null===Ie?null:new ye(Ie)}{const ae=new Uint8Array(this.data_.buffer,L,q-L);return new ye(ae,!0)}}static getBlob(...L){if(xr()){const q=L.map(ae=>ae instanceof ye?ae.data_:ae);return new ye(xn.apply(null,q))}{const q=L.map(ft=>Vn(ft)?Ar(Ln.RAW,ft).data:ft.data_);let ae=0;q.forEach(ft=>{ae+=ft.byteLength});const Ie=new Uint8Array(ae);let Je=0;return q.forEach(ft=>{for(let Ht=0;Ht<ft.length;Ht++)Ie[Je++]=ft[Ht]}),new ye(Ie,!0)}}uploadData(){return this.data_}}function G(F){let L;try{L=JSON.parse(F)}catch{return null}return function Sr(F){return"object"==typeof F&&!Array.isArray(F)}(L)?L:null}function K(F){const L=F.lastIndexOf("/",F.length-2);return-1===L?F:F.slice(L+1)}function Ee(F,L){return L}class Ve{constructor(L,q,ae,Ie){this.server=L,this.local=q||L,this.writable=!!ae,this.xform=Ie||Ee}}let ht=null;function _t(){if(ht)return ht;const F=[];F.push(new Ve("bucket")),F.push(new Ve("generation")),F.push(new Ve("metageneration")),F.push(new Ve("name","fullPath",!0));const q=new Ve("name");q.xform=function L(Je,ft){return function Gt(F){return!Vn(F)||F.length<2?F:K(F)}(ft)},F.push(q);const Ie=new Ve("size");return Ie.xform=function ae(Je,ft){return void 0!==ft?Number(ft):ft},F.push(Ie),F.push(new Ve("timeCreated")),F.push(new Ve("updated")),F.push(new Ve("md5Hash",null,!0)),F.push(new Ve("cacheControl",null,!0)),F.push(new Ve("contentDisposition",null,!0)),F.push(new Ve("contentEncoding",null,!0)),F.push(new Ve("contentLanguage",null,!0)),F.push(new Ve("contentType",null,!0)),F.push(new Ve("metadata","customMetadata",!0)),ht=F,ht}function Xn(F,L,q){const ae=G(L);return null===ae?null:function Yt(F,L,q){const ae={type:"file"},Ie=q.length;for(let Je=0;Je<Ie;Je++){const ft=q[Je];ae[ft.local]=ft.xform(ae,L[ft.server])}return function nn(F,L){Object.defineProperty(F,"ref",{get:function q(){const Je=new $t(F.bucket,F.fullPath);return L._makeStorageReference(Je)}})}(ae,F),ae}(F,ae,q)}function le(F,L){const q={},ae=L.length;for(let Ie=0;Ie<ae;Ie++){const Je=L[Ie];Je.writable&&(q[Je.server]=F[Je.local])}return JSON.stringify(q)}const Xe="prefixes",re="items";class tt{constructor(L,q,ae,Ie){this.url=L,this.method=q,this.handler=ae,this.timeout=Ie,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qe(F){if(!F)throw Vt()}function Dt(F,L){return function q(ae,Ie){const Je=Xn(F,Ie,L);return qe(null!==Je),Je}}function Pn(F){return function L(q,ae){let Ie;return Ie=401===q.getStatus()?q.getErrorText().includes("Firebase App Check token is invalid")?function En(){return new Be(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Nn(){return new Be(Ke.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===q.getStatus()?function un(F){return new Be(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+F+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(F.bucket):403===q.getStatus()?function cr(F){return new Be(Ke.UNAUTHORIZED,"User does not have permission to access '"+F+"'.")}(F.path):ae,Ie.status=q.getStatus(),Ie.serverResponse=ae.serverResponse,Ie}}function bn(F){const L=Pn(F);return function q(ae,Ie){let Je=L(ae,Ie);return 404===ae.getStatus()&&(Je=function It(F){return new Be(Ke.OBJECT_NOT_FOUND,"Object '"+F+"' does not exist.")}(F.path)),Je.serverResponse=Ie.serverResponse,Je}}function dt(F,L,q){const Ie=zn(L.fullServerUrl(),F.host,F._protocol),ft=F.maxOperationRetryTime,Ht=new tt(Ie,"GET",Dt(F,q),ft);return Ht.errorHandler=bn(L),Ht}function Ur(F,L,q,ae,Ie){const Je={};Je.prefix=L.isRoot?"":L.path+"/",q&&q.length>0&&(Je.delimiter=q),ae&&(Je.pageToken=ae),Ie&&(Je.maxResults=Ie);const Ht=zn(L.bucketOnlyServerUrl(),F.host,F._protocol),hn=F.maxOperationRetryTime,kn=new tt(Ht,"GET",function St(F,L){return function q(ae,Ie){const Je=function Re(F,L,q){const ae=G(q);return null===ae?null:function fe(F,L,q){const ae={prefixes:[],items:[],nextPageToken:q.nextPageToken};if(q[Xe])for(const Ie of q[Xe]){const Je=Ie.replace(/\/$/,""),ft=F._makeStorageReference(new $t(L,Je));ae.prefixes.push(ft)}if(q[re])for(const Ie of q[re]){const Je=F._makeStorageReference(new $t(L,Ie.name));ae.items.push(Je)}return ae}(F,L,ae)}(F,L,Ie);return qe(null!==Je),Je}}(F,L.bucket),hn);return kn.urlParams=Je,kn.errorHandler=Pn(L),kn}function ai(F,L,q){const ae=Object.assign({},q);return ae.fullPath=F.path,ae.size=L.size(),ae.contentType||(ae.contentType=function ws(F,L){return F&&F.contentType||L&&L.type()||"application/octet-stream"}(null,L)),ae}class zi{constructor(L,q,ae,Ie){this.current=L,this.total=q,this.finalized=!!ae,this.metadata=Ie||null}}function Ds(F,L){let q=null;try{q=F.getResponseHeader("X-Goog-Upload-Status")}catch{qe(!1)}return qe(!!q&&-1!==(L||["active"]).indexOf(q)),q}const as={STATE_CHANGED:"state_changed"},Zn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xs(F){switch(F){case"running":case"pausing":case"canceling":return Zn.RUNNING;case"paused":return Zn.PAUSED;case"success":return Zn.SUCCESS;case"canceled":return Zn.CANCELED;default:return Zn.ERROR}}class es{constructor(L,q,ae){if(function Ft(F){return"function"==typeof F}(L)||null!=q||null!=ae)this.next=L,this.error=q??void 0,this.complete=ae??void 0;else{const Je=L;this.next=Je.next,this.error=Je.error,this.complete=Je.complete}}}function Fi(F){return(...L)=>{Promise.resolve().then(()=>F(...L))}}let Yr=null;class Oo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qt.NO_ERROR,this.sendPromise_=new Promise(L=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qt.ABORT,L()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qt.NETWORK_ERROR,L()}),this.xhr_.addEventListener("load",()=>{L()})})}send(L,q,ae,Ie){if(this.sent_)throw yn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(q,L,!0),void 0!==Ie)for(const Je in Ie)Ie.hasOwnProperty(Je)&&this.xhr_.setRequestHeader(Je,Ie[Je].toString());return void 0!==ae?this.xhr_.send(ae):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(L){return this.xhr_.getResponseHeader(L)}addUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",L)}removeUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",L)}}class go extends Oo{initXhr(){this.xhr_.responseType="text"}}function yr(){return Yr?Yr():new go}class Ms{constructor(L,q,ae=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=L,this._blob=q,this._metadata=ae,this._mappings=_t(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ie=>{if(this._request=void 0,this._chunkMultiplier=1,Ie._codeEquals(Ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Je=this.isExponentialBackoffExpired();if(sn(Ie.status,[])){if(!Je)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Ie=rr()}this._error=Ie,this._transition("error")}},this._metadataErrorHandler=Ie=>{this._request=void 0,Ie._codeEquals(Ke.CANCELED)?this.completeTransitions_():(this._error=Ie,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Ie,Je)=>{this._resolve=Ie,this._reject=Je,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const L=this._transferred;return q=>this._updateProgress(L+q)}_shouldDoResumable(L){return L.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(L){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([q,ae])=>{switch(this._state){case"running":L(q,ae);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((L,q)=>{const ae=function Ts(F,L,q,ae,Ie){const Je=L.bucketOnlyServerUrl(),ft=ai(L,ae,Ie),Ht={name:ft.fullPath},zt=zn(Je,F.host,F._protocol),kn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ae.size()}`,"X-Goog-Upload-Header-Content-Type":ft.contentType,"Content-Type":"application/json; charset=utf-8"},Pr=le(ft,q),Xr=new tt(zt,"POST",function gr(Jr){let Wn;Ds(Jr);try{Wn=Jr.getResponseHeader("X-Goog-Upload-URL")}catch{qe(!1)}return qe(Vn(Wn)),Wn},F.maxUploadRetryTime);return Xr.urlParams=Ht,Xr.headers=kn,Xr.body=Pr,Xr.errorHandler=Pn(L),Xr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ie=this._ref.storage._makeRequest(ae,yr,L,q);this._request=Ie,Ie.getPromise().then(Je=>{this._request=void 0,this._uploadUrl=Je,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const L=this._uploadUrl;this._resolveToken((q,ae)=>{const Ie=function Po(F,L,q,ae){const zt=new tt(q,"POST",function Je(hn){const kn=Ds(hn,["active","final"]);let Pr=null;try{Pr=hn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qe(!1)}Pr||qe(!1);const Sn=Number(Pr);return qe(!isNaN(Sn)),new zi(Sn,ae.size(),"final"===kn)},F.maxUploadRetryTime);return zt.headers={"X-Goog-Upload-Command":"query"},zt.errorHandler=Pn(L),zt}(this._ref.storage,this._ref._location,L,this._blob),Je=this._ref.storage._makeRequest(Ie,yr,q,ae);this._request=Je,Je.getPromise().then(ft=>{this._request=void 0,this._updateProgress(ft.current),this._needToFetchStatus=!1,ft.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const L=262144*this._chunkMultiplier,q=new zi(this._transferred,this._blob.size()),ae=this._uploadUrl;this._resolveToken((Ie,Je)=>{let ft;try{ft=function sr(F,L,q,ae,Ie,Je,ft,Ht){const zt=new zi(0,0);if(ft?(zt.current=ft.current,zt.total=ft.total):(zt.current=0,zt.total=ae.size()),ae.size()!==zt.total)throw function xe(){return new Be(Ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const hn=zt.total-zt.current;let kn=hn;Ie>0&&(kn=Math.min(kn,Ie));const Pr=zt.current;let gr="";gr=0===kn?"finalize":hn===kn?"upload, finalize":"upload";const Xr={"X-Goog-Upload-Command":gr,"X-Goog-Upload-Offset":`${zt.current}`},Jr=ae.slice(Pr,Pr+kn);if(null===Jr)throw He();const Or=new tt(q,"POST",function Wn(Gr,Fs){const bs=Ds(Gr,["active","final"]),Us=zt.current+kn,wo=ae.size();let Ii;return Ii="final"===bs?Dt(L,Je)(Gr,Fs):null,new zi(Us,wo,"final"===bs,Ii)},L.maxUploadRetryTime);return Or.headers=Xr,Or.body=Jr.uploadData(),Or.progressCallback=Ht||null,Or.errorHandler=Pn(F),Or}(this._ref._location,this._ref.storage,ae,this._blob,L,this._mappings,q,this._makeProgressCallback())}catch(zt){return this._error=zt,void this._transition("error")}const Ht=this._ref.storage._makeRequest(ft,yr,Ie,Je,!1);this._request=Ht,Ht.getPromise().then(zt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(zt.current),zt.finalized?(this._metadata=zt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((L,q)=>{const ae=dt(this._ref.storage,this._ref._location,this._mappings),Ie=this._ref.storage._makeRequest(ae,yr,L,q);this._request=Ie,Ie.getPromise().then(Je=>{this._request=void 0,this._metadata=Je,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((L,q)=>{const ae=function mi(F,L,q,ae,Ie){const Je=L.bucketOnlyServerUrl(),ft={"X-Goog-Upload-Protocol":"multipart"},zt=function Ht(){let Or="";for(let Gr=0;Gr<2;Gr++)Or+=Math.random().toString().slice(2);return Or}();ft["Content-Type"]="multipart/related; boundary="+zt;const hn=ai(L,ae,Ie),kn=le(hn,q),gr=ye.getBlob("--"+zt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+kn+"\r\n--"+zt+"\r\nContent-Type: "+hn.contentType+"\r\n\r\n",ae,"\r\n--"+zt+"--");if(null===gr)throw He();const Xr={name:hn.fullPath},Jr=zn(Je,F.host,F._protocol),Ni=F.maxUploadRetryTime,Tr=new tt(Jr,"POST",Dt(F,q),Ni);return Tr.urlParams=Xr,Tr.headers=ft,Tr.body=gr.uploadData(),Tr.errorHandler=Pn(L),Tr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ie=this._ref.storage._makeRequest(ae,yr,L,q);this._request=Ie,Ie.getPromise().then(Je=>{this._request=void 0,this._metadata=Je,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(L){const q=this._transferred;this._transferred=L,this._transferred!==q&&this._notifyObservers()}_transition(L){if(this._state!==L)switch(L){case"canceling":case"pausing":this._state=L,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const q="paused"===this._state;this._state=L,q&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=L,this._notifyObservers();break;case"canceled":this._error=In(),this._state=L,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const L=Xs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:L,metadata:this._metadata,task:this,ref:this._ref}}on(L,q,ae,Ie){const Je=new es(q||void 0,ae||void 0,Ie||void 0);return this._addObserver(Je),()=>{this._removeObserver(Je)}}then(L,q){return this._promise.then(L,q)}catch(L){return this.then(null,L)}_addObserver(L){this._observers.push(L),this._notifyObserver(L)}_removeObserver(L){const q=this._observers.indexOf(L);-1!==q&&this._observers.splice(q,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(q=>{this._notifyObserver(q)})}_finishPromise(){if(void 0!==this._resolve){let L=!0;switch(Xs(this._state)){case Zn.SUCCESS:Fi(this._resolve.bind(null,this.snapshot))();break;case Zn.CANCELED:case Zn.ERROR:Fi(this._reject.bind(null,this._error))();break;default:L=!1}L&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(L){switch(Xs(this._state)){case Zn.RUNNING:case Zn.PAUSED:L.next&&Fi(L.next.bind(L,this.snapshot))();break;case Zn.SUCCESS:L.complete&&Fi(L.complete.bind(L))();break;default:L.error&&Fi(L.error.bind(L,this._error))()}}resume(){const L="paused"===this._state||"pausing"===this._state;return L&&this._transition("running"),L}pause(){const L="running"===this._state;return L&&this._transition("pausing"),L}cancel(){const L="running"===this._state||"pausing"===this._state;return L&&this._transition("canceling"),L}}class be{constructor(L,q){this._service=L,this._location=q instanceof $t?q:$t.makeFromUrl(q,L.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(L,q){return new be(L,q)}get root(){const L=new $t(this._location.bucket,"");return this._newRef(this._service,L)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K(this._location.path)}get storage(){return this._service}get parent(){const L=function $(F){if(0===F.length)return null;const L=F.lastIndexOf("/");return-1===L?"":F.slice(0,L)}(this._location.path);if(null===L)return null;const q=new $t(this._location.bucket,L);return new be(this._service,q)}_throwIfRoot(L){if(""===this._location.path)throw Cn(L)}}function cn(F){const L={prefixes:[],items:[]};return Rr(F,L).then(()=>L)}function Rr(F,L,q){return(gt=gt||(0,ut.Z)(function*(ae,Ie,Je){const Ht=yield er(ae,{pageToken:Je});Ie.prefixes.push(...Ht.prefixes),Ie.items.push(...Ht.items),null!=Ht.nextPageToken&&(yield Rr(ae,Ie,Ht.nextPageToken))})).apply(this,arguments)}function er(F,L){null!=L&&"number"==typeof L.maxResults&&pi("options.maxResults",1,1e3,L.maxResults);const q=L||{},ae=Ur(F.storage,F._location,"/",q.pageToken,q.maxResults);return F.storage.makeRequestWithTokens(ae,yr)}function Ci(F){F._throwIfRoot("getDownloadURL");const L=function dr(F,L,q){const Ie=zn(L.fullServerUrl(),F.host,F._protocol),ft=F.maxOperationRetryTime,Ht=new tt(Ie,"GET",function Jn(F,L){return function q(ae,Ie){const Je=Xn(F,Ie,L);return qe(null!==Je),function Ne(F,L,q,ae){const Ie=G(L);if(null===Ie||!Vn(Ie.downloadTokens))return null;const Je=Ie.downloadTokens;if(0===Je.length)return null;const ft=encodeURIComponent;return Je.split(",").map(hn=>{const Pr=F.fullPath;return zn("/b/"+ft(F.bucket)+"/o/"+ft(Pr),q,ae)+Jt({alt:"media",token:hn})})[0]}(Je,Ie,F.host,F._protocol)}}(F,q),ft);return Ht.errorHandler=bn(L),Ht}(F.storage,F._location,_t());return F.storage.makeRequestWithTokens(L,yr).then(q=>{if(null===q)throw function it(){return new Be(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return q})}function fr(F,L){const q=function oe(F,L){const q=L.split("/").filter(ae=>ae.length>0).join("/");return 0===F.length?q:F+"/"+q}(F._location.path,L),ae=new $t(F._location.bucket,q);return new be(F.storage,ae)}function ln(F,L){if(F instanceof vi){const q=F;if(null==q._bucket)throw function Fe(){return new Be(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ot+"' property when initializing the app?")}();const ae=new be(q,q._bucket);return null!=L?ln(ae,L):ae}return void 0!==L?fr(F,L):F}function hr(F,L){if(L&&function wr(F){return/^[A-Za-z]+:\/\//.test(F)}(L)){if(F instanceof vi)return function Nt(F,L){return new be(F,L)}(F,L);throw bt("To use ref(service, url), the first argument must be a Storage instance.")}return ln(F,L)}function Fr(F,L){const q=L?.[Ot];return null==q?null:$t.makeFromBucketSpec(q,F)}class vi{constructor(L,q,ae,Ie,Je){this.app=L,this._authProvider=q,this._appCheckProvider=ae,this._url=Ie,this._firebaseVersion=Je,this._bucket=null,this._host=Oe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ie?$t.makeFromBucketSpec(Ie,this._host):Fr(this._host,this.app.options)}get host(){return this._host}set host(L){this._host=L,this._bucket=null!=this._url?$t.makeFromBucketSpec(this._url,L):Fr(L,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(L){pi("time",0,Number.POSITIVE_INFINITY,L),this._maxUploadRetryTime=L}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(L){pi("time",0,Number.POSITIVE_INFINITY,L),this._maxOperationRetryTime=L}_getAuthToken(){var L=this;return(0,ut.Z)(function*(){if(L._overrideAuthToken)return L._overrideAuthToken;const q=L._authProvider.getImmediate({optional:!0});if(q){const ae=yield q.getToken();if(null!==ae)return ae.accessToken}return null})()}_getAppCheckToken(){var L=this;return(0,ut.Z)(function*(){const q=L._appCheckProvider.getImmediate({optional:!0});return q?(yield q.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(L=>L.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(L){return new be(this,L)}_makeRequest(L,q,ae,Ie,Je=!0){if(this._deleted)return new wn(Ct());{const ft=function jn(F,L,q,ae,Ie,Je,ft=!0){const Ht=Jt(F.urlParams),zt=F.url+Ht,hn=Object.assign({},F.headers);return function Nr(F,L){L&&(F["X-Firebase-GMPID"]=L)}(hn,L),function Ir(F,L){null!==L&&L.length>0&&(F.Authorization="Firebase "+L)}(hn,q),function Mn(F,L){F["X-Firebase-Storage-Version"]="webjs/"+(L??"AppManager")}(hn,Je),function Hi(F,L){null!==L&&(F["X-Firebase-AppCheck"]=L)}(hn,ae),new Gn(zt,F.method,hn,F.body,F.successCodes,F.additionalRetryCodes,F.handler,F.errorHandler,F.timeout,F.progressCallback,Ie,ft)}(L,this._appId,ae,Ie,q,this._firebaseVersion,Je);return this._requests.add(ft),ft.getPromise().then(()=>this._requests.delete(ft),()=>this._requests.delete(ft)),ft}}makeRequestWithTokens(L,q){var ae=this;return(0,ut.Z)(function*(){const[Ie,Je]=yield Promise.all([ae._getAuthToken(),ae._getAppCheckToken()]);return ae._makeRequest(L,q,Ie,Je).getPromise()})()}}const xs="@firebase/storage";function ia(F,L){return hr(F=(0,st.m9)(F),L)}function ko(F,{instanceIdentifier:L}){const q=F.getProvider("app").getImmediate(),ae=F.getProvider("auth-internal"),Ie=F.getProvider("app-check-internal");return new vi(q,ae,Ie,L,Et.SDK_VERSION)}!function Os(){(0,Et._registerComponent)(new Tt.wA("storage",ko,"PUBLIC").setMultipleInstances(!0)),(0,Et.registerVersion)(xs,"0.11.2",""),(0,Et.registerVersion)(xs,"0.11.2","esm2017")}();class Lo{constructor(L,q,ae){this._delegate=L,this.task=q,this.ref=ae}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ui{constructor(L,q){this._delegate=L,this._ref=q,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Lo(this._delegate.snapshot,this,this._ref)}then(L,q){return this._delegate.then(ae=>{if(L)return L(new Lo(ae,this,this._ref))},q)}on(L,q,ae,Ie){let Je;return q&&(Je="function"==typeof q?ft=>q(new Lo(ft,this,this._ref)):{next:q.next?ft=>q.next(new Lo(ft,this,this._ref)):void 0,complete:q.complete||void 0,error:q.error||void 0}),this._delegate.on(L,Je,ae||void 0,Ie||void 0)}}class Io{constructor(L,q){this._delegate=L,this._service=q}get prefixes(){return this._delegate.prefixes.map(L=>new Br(L,this._service))}get items(){return this._delegate.items.map(L=>new Br(L,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Br{constructor(L,q){this._delegate=L,this.storage=q}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(L){const q=function Ns(F,L){return fr(F,L)}(this._delegate,L);return new Br(q,this.storage)}get root(){return new Br(this._delegate.root,this.storage)}get parent(){const L=this._delegate.parent;return null==L?null:new Br(L,this.storage)}put(L,q){return this._throwIfRoot("put"),new Ui(function Js(F,L,q){return function et(F,L,q){return F._throwIfRoot("uploadBytesResumable"),new Ms(F,new ye(L),q)}(F=(0,st.m9)(F),L,q)}(this._delegate,L,q),this)}putString(L,q=Ln.RAW,ae){this._throwIfRoot("putString");const Ie=Ar(q,L),Je=Object.assign({},ae);return null==Je.contentType&&null!=Ie.contentType&&(Je.contentType=Ie.contentType),new Ui(new Ms(this._delegate,new ye(Ie.data,!0),Je),this)}listAll(){return function ao(F){return cn(F=(0,st.m9)(F))}(this._delegate).then(L=>new Io(L,this.storage))}list(L){return function Dr(F,L){return er(F=(0,st.m9)(F),L)}(this._delegate,L||void 0).then(q=>new Io(q,this.storage))}getMetadata(){return function Gi(F){return function $n(F){F._throwIfRoot("getMetadata");const L=dt(F.storage,F._location,_t());return F.storage.makeRequestWithTokens(L,yr)}(F=(0,st.m9)(F))}(this._delegate)}updateMetadata(L){return function Qr(F,L){return function yi(F,L){F._throwIfRoot("updateMetadata");const q=function ir(F,L,q,ae){const Je=zn(L.fullServerUrl(),F.host,F._protocol),Ht=le(q,ae),hn=F.maxOperationRetryTime,kn=new tt(Je,"PATCH",Dt(F,ae),hn);return kn.headers={"Content-Type":"application/json; charset=utf-8"},kn.body=Ht,kn.errorHandler=bn(L),kn}(F.storage,F._location,L,_t());return F.storage.makeRequestWithTokens(q,yr)}(F=(0,st.m9)(F),L)}(this._delegate,L)}getDownloadURL(){return function Ei(F){return Ci(F=(0,st.m9)(F))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function eo(F){return function yo(F){F._throwIfRoot("deleteObject");const L=function Ji(F,L){const ae=zn(L.fullServerUrl(),F.host,F._protocol),Ht=new tt(ae,"DELETE",function ft(zt,hn){},F.maxOperationRetryTime);return Ht.successCodes=[200,204],Ht.errorHandler=bn(L),Ht}(F.storage,F._location);return F.storage.makeRequestWithTokens(L,yr)}(F=(0,st.m9)(F))}(this._delegate)}_throwIfRoot(L){if(""===this._delegate._location.path)throw Cn(L)}}class uo{constructor(L,q){this.app=L,this._delegate=q}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(L){if(xi(L))throw bt("ref() expected a child path but got a URL, use refFromURL instead.");return new Br(ia(this._delegate,L),this)}refFromURL(L){if(!xi(L))throw bt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$t.makeFromUrl(L,this._delegate.host)}catch{throw bt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Br(ia(this._delegate,L),this)}setMaxUploadRetryTime(L){this._delegate.maxUploadRetryTime=L}setMaxOperationRetryTime(L){this._delegate.maxOperationRetryTime=L}useEmulator(L,q,ae={}){!function _o(F,L,q,ae={}){!function Cs(F,L,q,ae={}){F.host=`${L}:${q}`,F._protocol="http";const{mockUserToken:Ie}=ae;Ie&&(F._overrideAuthToken="string"==typeof Ie?Ie:(0,st.Sg)(Ie,F.app.options.projectId))}(F,L,q,ae)}(this._delegate,L,q,ae)}}function xi(F){return/^[A-Za-z]+:\/\//.test(F)}function ts(F,{instanceIdentifier:L}){const q=F.getProvider("app-compat").getImmediate(),ae=F.getProvider("storage").getImmediate({identifier:L});return new uo(q,ae)}!function ks(F){const L={TaskState:Zn,TaskEvent:as,StringFormat:Ln,Storage:uo,Reference:Br};F.INTERNAL.registerComponent(new Tt.wA("storage-compat",ts,"PUBLIC").setServiceProps(L).setMultipleInstances(!0)),F.registerVersion("@firebase/storage-compat","0.3.2")}(nt.Z);var Si=O(8697),gs=O(7142);function sa(F){const L=function Fo(F){return new y.y(L=>{const q=ft=>L.next(ft);q(F.snapshot);const Je=F.on("state_changed",q);return F.then(ft=>{q(ft),L.complete()},ft=>{q(F.snapshot),(ft=>{L.error(ft)})(ft)}),function(){Je()}}).pipe(function Se(F,L=ve.z){return(0,me.e)((q,ae)=>{let Ie=null,Je=null,ft=null;const Ht=()=>{if(Ie){Ie.unsubscribe(),Ie=null;const hn=Je;Je=null,ae.next(hn)}};function zt(){const hn=ft+F,kn=L.now();if(kn<hn)return Ie=this.schedule(void 0,hn-kn),void ae.add(Ie);Ht()}q.subscribe((0,ge.x)(ae,hn=>{Je=hn,ft=L.now(),Ie||(Ie=L.schedule(zt,F),ae.add(Ie))},()=>{Ht(),ae.complete()},void 0,()=>{Je=Ie=null}))})}(0))}(F);return{task:F,then:F.then.bind(F),catch:F.catch.bind(F),pause:F.pause.bind(F),cancel:F.cancel.bind(F),resume:F.resume.bind(F),snapshotChanges:()=>L,percentageChanges:()=>L.pipe((0,Ge.U)(q=>q.bytesTransferred/q.totalBytes*100))}}function Ls(F){return{getDownloadURL:()=>(0,ue.of)(void 0).pipe(te.fc,(0,Me.w)(()=>F.getDownloadURL()),te.iC),getMetadata:()=>(0,ue.of)(void 0).pipe(te.fc,(0,Me.w)(()=>F.getMetadata()),te.iC),delete:()=>(0,z.D)(F.delete()),child:L=>Ls(F.child(L)),updateMetadata:L=>(0,z.D)(F.updateMetadata(L)),put:(L,q)=>sa(F.put(L,q)),putString:(L,q,ae)=>sa(F.putString(L,q,ae)),list:L=>(0,z.D)(F.list(L)),listAll:()=>(0,z.D)(F.listAll())}}const ya=new Q.OlP("angularfire2.storageBucket"),va=new Q.OlP("angularfire2.storage.maxUploadRetryTime"),Yo=new Q.OlP("angularfire2.storage.maxOperationRetryTime"),ms=new Q.OlP("angularfire2.storage.use-emulator");let ys=(()=>{class F{constructor(q,ae,Ie,Je,ft,Ht,zt,hn,kn,Pr){const Sn=(0,De.on)(q,ft,ae);this.storage=(0,De.cc)(`${Sn.name}.storage.${Ie}`,"AngularFireStorage",Sn.name,()=>{const gr=ft.runOutsideAngular(()=>Sn.storage(Ie||void 0)),Xr=kn;return Xr&&gr.useEmulator(...Xr),zt&&gr.setMaxUploadRetryTime(zt),hn&&gr.setMaxOperationRetryTime(hn),gr},[zt,hn])}ref(q){return Ls(this.storage.ref(q))}refFromURL(q){return Ls(this.storage.refFromURL(q))}upload(q,ae,Ie){return Ls(this.storage.ref(q)).put(ae,Ie)}}return F.\u0275fac=function(q){return new(q||F)(Q.LFG(De.Dh),Q.LFG(De.xv,8),Q.LFG(ya,8),Q.LFG(Q.Lbi),Q.LFG(Q.R0b),Q.LFG(te.HU),Q.LFG(va,8),Q.LFG(Yo,8),Q.LFG(ms,8),Q.LFG(Si.nm,8))},F.\u0275prov=Q.Yz7({token:F,factory:F.\u0275fac,providedIn:"any"}),F})(),_a=(()=>{class F{}return F.\u0275fac=function(q){return new(q||F)},F.\u0275mod=Q.oAB({type:F}),F.\u0275inj=Q.cJS({}),F})(),pr=(()=>{class F{constructor(){gs.Z.registerVersion("angularfire",te.q4.full,"gcs-compat")}}return F.\u0275fac=function(q){return new(q||F)},F.\u0275mod=Q.oAB({type:F}),F.\u0275inj=Q.cJS({providers:[ys],imports:[_a]}),F})()},6304:(Lt,We,O)=>{O.d(We,{Dh:()=>Ge,GT:()=>ge,cc:()=>ut,hO:()=>nt,on:()=>te,pX:()=>me,xv:()=>Me});var y=O(5879),ue=O(7142),z=O(8186);Lt=O.hmd(Lt);const ve=["ngOnDestroy"],me=(gt,Oe,Ot,ke={})=>new Proxy(gt,{get:(Le,Te)=>Ot.runOutsideAngular(()=>{var Be;if(gt[Te])return!(null===(Be=ke?.spy)||void 0===Be)&&Be.get&&ke.spy.get(Te,gt[Te]),gt[Te];if(ve.indexOf(Te)>-1)return()=>{};const Ke=Oe.toPromise().then(Ue=>{const Vt=Ue&&Ue[Te];return"function"==typeof Vt?Vt.bind(Ue):Vt&&Vt.then?Vt.then(It=>Ot.run(()=>It)):Ot.run(()=>Vt)});return new Proxy(()=>{},{get:(Ue,Vt)=>Ke[Vt],apply:(Ue,Vt,It)=>Ke.then(un=>{var Nn;const En=un&&un(...It);return!(null===(Nn=ke?.spy)||void 0===Nn)&&Nn.apply&&ke.spy.apply(Te,It,En),En})})})}),ge=(gt,Oe)=>{Oe.forEach(Ot=>{Object.getOwnPropertyNames(Ot.prototype||Ot).forEach(ke=>{Object.defineProperty(gt.prototype,ke,Object.getOwnPropertyDescriptor(Ot.prototype||Ot,ke))})})};class Se{constructor(Oe){return Oe}}const Ge=new y.OlP("angularfire2.app.options"),Me=new y.OlP("angularfire2.app.name");function te(gt,Oe,Ot){const Le="object"==typeof Ot&&Ot||{};Le.name=Le.name||"string"==typeof Ot&&Ot||"[DEFAULT]";const Be=ue.Z.apps.filter(Ke=>Ke&&Ke.name===Le.name)[0]||Oe.runOutsideAngular(()=>ue.Z.initializeApp(gt,Le));try{JSON.stringify(gt)!==JSON.stringify(Be.options)&&Q("error",`${Be.name} Firebase App already initialized with different options${Lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Se(Be)}const Q=(gt,...Oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[gt](...Oe)},De={provide:Se,useFactory:te,deps:[Ge,y.R0b,[new y.FiY,Me]]};let nt=(()=>{class gt{constructor(Ot){ue.Z.registerVersion("angularfire",z.q4.full,"core"),ue.Z.registerVersion("angularfire",z.q4.full,"app-compat"),ue.Z.registerVersion("angular",y.q4F.full,Ot.toString())}static initializeApp(Ot,ke){return{ngModule:gt,providers:[{provide:Ge,useValue:Ot},{provide:Me,useValue:ke}]}}}return gt.\u0275fac=function(Ot){return new(Ot||gt)(y.LFG(y.Lbi))},gt.\u0275mod=y.oAB({type:gt}),gt.\u0275inj=y.cJS({providers:[De]}),gt})();function ut(gt,Oe,Ot,ke,Le){const[,Te,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===gt)||[];if(Te)return function Et(gt,Oe){try{return gt.toString()===Oe.toString()}catch{return gt===Oe}}(Le,Be)||(Tt("error",`${Oe} was already initialized on the ${Ot} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),Tt("warn",{is:Le,was:Be})),Te;{const Ke=ke();return globalThis.\u0275AngularfireInstanceCache.push([gt,Ke,Le]),Ke}}const st=!!Lt.hot,Tt=(gt,...Oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[gt](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(Lt,We,O)=>{O.d(We,{q4:()=>Sa,iC:()=>Sl,fc:()=>Ou,HU:()=>_h,vb:()=>ta,JM:()=>Ha});var y=O(5879),ue=O(3182),z=O(5861),ve=O(534),me=O(9058),ge=O(4537),Se=O(7879);const Ge=(R,x)=>x.some(B=>R instanceof B);let Me,te;const nt=new WeakMap,ut=new WeakMap,Et=new WeakMap,st=new WeakMap,Tt=new WeakMap;let Ot={get(R,x,B){if(R instanceof IDBTransaction){if("done"===x)return ut.get(R);if("objectStoreNames"===x)return R.objectStoreNames||Et.get(R);if("store"===x)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Be(R[x])},set:(R,x,B)=>(R[x]=B,!0),has:(R,x)=>R instanceof IDBTransaction&&("done"===x||"store"===x)||x in R};function Te(R){return"function"==typeof R?function Le(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...x){return R.apply(Ke(this),x),Be(nt.get(this))}:function(...x){return Be(R.apply(Ke(this),x))}:function(x,...B){const Y=R.call(Ke(this),x,...B);return Et.set(Y,x.sort?x.sort():[x]),Be(Y)}}(R):(R instanceof IDBTransaction&&function Oe(R){if(ut.has(R))return;const x=new Promise((B,Y)=>{const pe=()=>{R.removeEventListener("complete",je),R.removeEventListener("error",rt),R.removeEventListener("abort",rt)},je=()=>{B(),pe()},rt=()=>{Y(R.error||new DOMException("AbortError","AbortError")),pe()};R.addEventListener("complete",je),R.addEventListener("error",rt),R.addEventListener("abort",rt)});ut.set(R,x)}(R),Ge(R,function Q(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,Ot):R)}function Be(R){if(R instanceof IDBRequest)return function gt(R){const x=new Promise((B,Y)=>{const pe=()=>{R.removeEventListener("success",je),R.removeEventListener("error",rt)},je=()=>{B(Be(R.result)),pe()},rt=()=>{Y(R.error),pe()};R.addEventListener("success",je),R.addEventListener("error",rt)});return x.then(B=>{B instanceof IDBCursor&&nt.set(B,R)}).catch(()=>{}),Tt.set(x,R),x}(R);if(st.has(R))return st.get(R);const x=Te(R);return x!==R&&(st.set(R,x),Tt.set(x,R)),x}const Ke=R=>Tt.get(R),It=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],Nn=new Map;function En(R,x){var B;if(!(R instanceof IDBDatabase)||x in R||"string"!=typeof x)return;if(Nn.get(x))return Nn.get(x);const Y=x.replace(/FromIndex$/,""),pe=x!==Y,je=un.includes(Y);if(!(Y in(pe?IDBIndex:IDBObjectStore).prototype)||!je&&!It.includes(Y))return;const rt=function(At){return(B=B||(0,z.Z)(function*(Kt,...en){const Wt=this.transaction(Kt,je?"readwrite":"readonly");let or=Wt.store;return pe&&(or=or.index(en.shift())),(yield Promise.all([or[Y](...en),je&&Wt.done]))[0]})).apply(this,arguments)};return Nn.set(x,rt),rt}var cr,rr,In,mn,we,Fe,He,xe,it,pt,bt,Ct,Cn,Xt,yn,$t;!function ke(R){Ot=R(Ot)}(R=>({...R,get:(x,B,Y)=>En(x,B)||R.get(x,B,Y),has:(x,B)=>!!En(x,B)||R.has(x,B)}));const lr="@firebase/installations",rn="0.6.4",Ft=1e4,Sr=`w:${rn}`,Vn="FIS_v2",Qn="https://firebaseinstallations.googleapis.com/v1",xr=36e5,Qt=new me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function sn(R){return R instanceof me.ZR&&R.code.includes("request-failed")}function Gn({projectId:R}){return`${Qn}/projects/${R}/installations`}function ii(R){return{token:R.token,requestStatus:2,expiresIn:jn(R.expiresIn),creationTime:Date.now()}}function Ir(R,x){return(cr=cr||(0,z.Z)(function*(B,Y){const je=(yield Y.json()).error;return Qt.create("request-failed",{requestName:B,serverCode:je.code,serverMessage:je.message,serverStatus:je.status})})).apply(this,arguments)}function Mn({apiKey:R}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R})}function Hi(R){return(rr=rr||(0,z.Z)(function*(x){const B=yield x();return B.status>=500&&B.status<600?x():B})).apply(this,arguments)}function jn(R){return Number(R.replace("s","000"))}function si(R){return new Promise(x=>{setTimeout(x,R)})}const Ln=/^[cdef][\w-]{21}$/,ki="";function Ar(){try{const R=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(R),R[0]=112+R[0]%16;const B=function qr(R){return function On(R){return btoa(String.fromCharCode(...R)).replace(/\+/g,"-").replace(/\//g,"_")}(R).substr(0,22)}(R);return Ln.test(B)?B:ki}catch{return ki}}function Hr(R){return`${R.appName}!${R.appId}`}const Zr=new Map;function oi(R,x){const B=Hr(R);Li(B,x),function ye(R,x){const B=function $(){return!G&&"BroadcastChannel"in self&&(G=new BroadcastChannel("[Firebase] FID Change"),G.onmessage=R=>{Li(R.data.key,R.data.fid)}),G}();B&&B.postMessage({key:R,fid:x}),function oe(){0===Zr.size&&G&&(G.close(),G=null)}()}(B,x)}function Li(R,x){const B=Zr.get(R);if(B)for(const Y of B)Y(x)}let G=null;const K="firebase-installations-database",Ee=1,Ve="firebase-installations-store";let ht=null;function Gt(){return ht||(ht=function Ue(R,x,{blocked:B,upgrade:Y,blocking:pe,terminated:je}={}){const rt=indexedDB.open(R,x),yt=Be(rt);return Y&&rt.addEventListener("upgradeneeded",At=>{Y(Be(rt.result),At.oldVersion,At.newVersion,Be(rt.transaction))}),B&&rt.addEventListener("blocked",()=>B()),yt.then(At=>{je&&At.addEventListener("close",()=>je()),pe&&At.addEventListener("versionchange",()=>pe())}).catch(()=>{}),yt}(K,Ee,{upgrade:(R,x)=>{0===x&&R.createObjectStore(Ve)}})),ht}function _t(R,x){return(mn=mn||(0,z.Z)(function*(B,Y){const pe=Hr(B),rt=(yield Gt()).transaction(Ve,"readwrite"),yt=rt.objectStore(Ve),At=yield yt.get(pe);return yield yt.put(Y,pe),yield rt.done,(!At||At.fid!==Y.fid)&&oi(B,Y.fid),Y})).apply(this,arguments)}function nn(R){return(we=we||(0,z.Z)(function*(x){const B=Hr(x),pe=(yield Gt()).transaction(Ve,"readwrite");yield pe.objectStore(Ve).delete(B),yield pe.done})).apply(this,arguments)}function Yt(R,x){return(Fe=Fe||(0,z.Z)(function*(B,Y){const pe=Hr(B),rt=(yield Gt()).transaction(Ve,"readwrite"),yt=rt.objectStore(Ve),At=yield yt.get(pe),Kt=Y(At);return void 0===Kt?yield yt.delete(pe):yield yt.put(Kt,pe),yield rt.done,Kt&&(!At||At.fid!==Kt.fid)&&oi(B,Kt.fid),Kt})).apply(this,arguments)}function Xn(R){return(He=He||(0,z.Z)(function*(x){let B;const Y=yield Yt(x.appConfig,pe=>{const je=function Ne(R){return Re(R||{fid:Ar(),registrationStatus:0})}(pe),rt=function le(R,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(Qt.create("app-offline"))};const B={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},Y=function Xe(R,x){return(xe=xe||(0,z.Z)(function*(B,Y){try{const pe=yield function xn(R,x){return(In=In||(0,z.Z)(function*({appConfig:B,heartbeatServiceProvider:Y},{fid:pe}){const je=Gn(B),rt=Mn(B),yt=Y.getImmediate({optional:!0});if(yt){const Wt=yield yt.getHeartbeatsHeader();Wt&&rt.append("x-firebase-client",Wt)}const Kt={method:"POST",headers:rt,body:JSON.stringify({fid:pe,authVersion:Vn,appId:B.appId,sdkVersion:Sr})},en=yield Hi(()=>fetch(je,Kt));if(en.ok){const Wt=yield en.json();return{fid:Wt.fid||pe,registrationStatus:2,refreshToken:Wt.refreshToken,authToken:ii(Wt.authToken)}}throw yield Ir("Create Installation",en)})).apply(this,arguments)}(B,Y);return _t(B.appConfig,pe)}catch(pe){throw sn(pe)&&409===pe.customData.serverCode?yield nn(B.appConfig):yield _t(B.appConfig,{fid:Y.fid,registrationStatus:0}),pe}})).apply(this,arguments)}(R,B);return{installationEntry:B,registrationPromise:Y}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:re(R)}:{installationEntry:x}}(x,je);return B=rt.registrationPromise,rt.installationEntry});return Y.fid===ki?{installationEntry:yield B}:{installationEntry:Y,registrationPromise:B}})).apply(this,arguments)}function re(R){return(it=it||(0,z.Z)(function*(x){let B=yield fe(x.appConfig);for(;1===B.registrationStatus;)yield si(100),B=yield fe(x.appConfig);if(0===B.registrationStatus){const{installationEntry:Y,registrationPromise:pe}=yield Xn(x);return pe||Y}return B})).apply(this,arguments)}function fe(R){return Yt(R,x=>{if(!x)throw Qt.create("installation-not-found");return Re(x)})}function Re(R){return function tt(R){return 1===R.registrationStatus&&R.registrationTime+Ft<Date.now()}(R)?{fid:R.fid,registrationStatus:0}:R}function qe(R,x){return(pt=pt||(0,z.Z)(function*({appConfig:B,heartbeatServiceProvider:Y},pe){const je=function Dt(R,{fid:x}){return`${Gn(R)}/${x}/authTokens:generate`}(B,pe),rt=function Nr(R,{refreshToken:x}){const B=Mn(R);return B.append("Authorization",function Xi(R){return`${Vn} ${R}`}(x)),B}(B,pe),yt=Y.getImmediate({optional:!0});if(yt){const Wt=yield yt.getHeartbeatsHeader();Wt&&rt.append("x-firebase-client",Wt)}const Kt={method:"POST",headers:rt,body:JSON.stringify({installation:{sdkVersion:Sr,appId:B.appId}})},en=yield Hi(()=>fetch(je,Kt));if(en.ok)return ii(yield en.json());throw yield Ir("Generate Auth Token",en)})).apply(this,arguments)}function St(R){return(bt=bt||(0,z.Z)(function*(x,B=!1){let Y;const pe=yield Yt(x.appConfig,rt=>{if(!dt(rt))throw Qt.create("not-registered");const yt=rt.authToken;if(!B&&function Ur(R){return 2===R.requestStatus&&!function Lr(R){const x=Date.now();return x<R.creationTime||R.creationTime+R.expiresIn<x+xr}(R)}(yt))return rt;if(1===yt.requestStatus)return Y=function Jn(R,x){return(Ct=Ct||(0,z.Z)(function*(B,Y){let pe=yield Pn(B.appConfig);for(;1===pe.authToken.requestStatus;)yield si(100),pe=yield Pn(B.appConfig);const je=pe.authToken;return 0===je.requestStatus?St(B,Y):je})).apply(this,arguments)}(x,B),rt;{if(!navigator.onLine)throw Qt.create("app-offline");const At=function dr(R){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},R),{authToken:x})}(rt);return Y=function bn(R,x){return(Cn=Cn||(0,z.Z)(function*(B,Y){try{const pe=yield qe(B,Y),je=Object.assign(Object.assign({},Y),{authToken:pe});return yield _t(B.appConfig,je),pe}catch(pe){if(!sn(pe)||401!==pe.customData.serverCode&&404!==pe.customData.serverCode){const je=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield _t(B.appConfig,je)}else yield nn(B.appConfig);throw pe}})).apply(this,arguments)}(x,At),At}});return Y?yield Y:pe.authToken})).apply(this,arguments)}function Pn(R){return Yt(R,x=>{if(!dt(x))throw Qt.create("not-registered");return function ir(R){return 1===R.requestStatus&&R.requestTime+Ft<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function dt(R){return void 0!==R&&2===R.registrationStatus}function sr(R){return Qt.create("missing-app-config-values",{valueName:R})}const as="installations",Xs=R=>{const x=R.getProvider("app").getImmediate(),B=function Un(R){if(!R||!R.options)throw sr("App Configuration");if(!R.name)throw sr("App Name");const x=["projectId","apiKey","appId"];for(const B of x)if(!R.options[B])throw sr(B);return{appName:R.name,projectId:R.options.projectId,apiKey:R.options.apiKey,appId:R.options.appId}}(x);return{app:x,appConfig:B,heartbeatServiceProvider:(0,ve._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},es=R=>{const x=R.getProvider("app").getImmediate(),B=(0,ve._getProvider)(x,as).getImmediate();return{getId:()=>function Ji(R){return(Xt=Xt||(0,z.Z)(function*(x){const B=x,{installationEntry:Y,registrationPromise:pe}=yield Xn(B);return pe?pe.catch(console.error):St(B).catch(console.error),Y.fid})).apply(this,arguments)}(B),getToken:pe=>function ws(R){return(yn=yn||(0,z.Z)(function*(x,B=!1){const Y=x;return yield function ai(R){return($t=$t||(0,z.Z)(function*(x){const{registrationPromise:B}=yield Xn(x);B&&(yield B)})).apply(this,arguments)}(Y),(yield St(Y,B)).token})).apply(this,arguments)}(B,pe)}};var yr;(function Fi(){(0,ve._registerComponent)(new ge.wA(as,Xs,"PUBLIC")),(0,ve._registerComponent)(new ge.wA("installations-internal",es,"PRIVATE"))})(),(0,ve.registerVersion)(lr,rn),(0,ve.registerVersion)(lr,rn,"esm2017");const Ko="@firebase/remote-config",be=new me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fr{constructor(x,B,Y,pe){this.client=x,this.storage=B,this.storageCache=Y,this.logger=pe}isCachedDataFresh(x,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Y=Date.now()-B,pe=Y<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Y}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${pe}.`),pe}fetch(x){var B=this;return(0,z.Z)(function*(){const[Y,pe]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(pe&&B.isCachedDataFresh(x.cacheMaxAgeMillis,Y))return pe;x.eTag=pe&&pe.eTag;const je=yield B.client.fetch(x),rt=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===je.status&&rt.push(B.storage.setLastSuccessfulFetchResponse(je)),yield Promise.all(rt),je})()}}function Cs(R=navigator){return R.languages&&R.languages[0]||R.language}class vi{constructor(x,B,Y,pe,je,rt){this.firebaseInstallations=x,this.sdkVersion=B,this.namespace=Y,this.projectId=pe,this.apiKey=je,this.appId=rt}fetch(x){var B=this;return(0,z.Z)(function*(){const[Y,pe]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},At={sdk_version:B.sdkVersion,app_instance_id:Y,app_instance_id_token:pe,app_id:B.appId,language_code:Cs()},Kt={method:"POST",headers:yt,body:JSON.stringify(At)},en=fetch(rt,Kt),Wt=new Promise((tn,Cr)=>{x.signal.addEventListener(()=>{const ds=new Error("The operation was aborted.");ds.name="AbortError",Cr(ds)})});let or;try{yield Promise.race([en,Wt]),or=yield en}catch(tn){let Cr="fetch-client-network";throw"AbortError"===tn?.name&&(Cr="fetch-timeout"),be.create(Cr,{originalErrorMessage:tn?.message})}let ri=or.status;const Ai=or.headers.get("ETag")||void 0;let fn,ls;if(200===or.status){let tn;try{tn=yield or.json()}catch(Cr){throw be.create("fetch-client-parse",{originalErrorMessage:Cr?.message})}fn=tn.entries,ls=tn.state}if("INSTANCE_STATE_UNSPECIFIED"===ls?ri=500:"NO_CHANGE"===ls?ri=304:("NO_TEMPLATE"===ls||"EMPTY_CONFIG"===ls)&&(fn={}),304!==ri&&200!==ri)throw be.create("fetch-status",{httpStatus:ri});return{status:ri,eTag:Ai,config:fn}})()}}class Mi{constructor(x,B){this.client=x,this.storage=B}fetch(x){var B=this;return(0,z.Z)(function*(){const Y=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(x,Y)})()}attemptFetch(x,{throttleEndTimeMillis:B,backoffCount:Y}){var pe=this;return(0,z.Z)(function*(){yield function xs(R,x){return new Promise((B,Y)=>{const pe=Math.max(x-Date.now(),0),je=setTimeout(B,pe);R.addEventListener(()=>{clearTimeout(je),Y(be.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,B);try{const je=yield pe.client.fetch(x);return yield pe.storage.deleteThrottleMetadata(),je}catch(je){if(!function zr(R){if(!(R instanceof me.ZR&&R.customData))return!1;const x=Number(R.customData.httpStatus);return 429===x||500===x||503===x||504===x}(je))throw je;const rt={throttleEndTimeMillis:Date.now()+(0,me.$s)(Y),backoffCount:Y+1};return yield pe.storage.setThrottleMetadata(rt),pe.attemptFetch(x,rt)}})()}}class _i{constructor(x,B,Y,pe,je){this.app=x,this._client=B,this._storageCache=Y,this._storage=pe,this._logger=je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Js(R,x){const B=R.target.error||void 0;return be.create(x,{originalErrorMessage:B&&B?.message})}const Gi="app_namespace_store";class Ei{constructor(x,B,Y,pe=function ao(){return new Promise((R,x)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=Y=>{x(Js(Y,"storage-open"))},B.onsuccess=Y=>{R(Y.target.result)},B.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Gi,{keyPath:"compositeKey"})}}catch(B){x(be.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=x,this.appName=B,this.namespace=Y,this.openDbPromise=pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var B=this;return(0,z.Z)(function*(){const Y=yield B.openDbPromise;return new Promise((pe,je)=>{const yt=Y.transaction([Gi],"readonly").objectStore(Gi),At=B.createCompositeKey(x);try{const Kt=yt.get(At);Kt.onerror=en=>{je(Js(en,"storage-get"))},Kt.onsuccess=en=>{const Wt=en.target.result;pe(Wt?Wt.value:void 0)}}catch(Kt){je(be.create("storage-get",{originalErrorMessage:Kt?.message}))}})})()}set(x,B){var Y=this;return(0,z.Z)(function*(){const pe=yield Y.openDbPromise;return new Promise((je,rt)=>{const At=pe.transaction([Gi],"readwrite").objectStore(Gi),Kt=Y.createCompositeKey(x);try{const en=At.put({compositeKey:Kt,value:B});en.onerror=Wt=>{rt(Js(Wt,"storage-set"))},en.onsuccess=()=>{je()}}catch(en){rt(be.create("storage-set",{originalErrorMessage:en?.message}))}})})()}delete(x){var B=this;return(0,z.Z)(function*(){const Y=yield B.openDbPromise;return new Promise((pe,je)=>{const yt=Y.transaction([Gi],"readwrite").objectStore(Gi),At=B.createCompositeKey(x);try{const Kt=yt.delete(At);Kt.onerror=en=>{je(Js(en,"storage-delete"))},Kt.onsuccess=()=>{pe()}}catch(Kt){je(be.create("storage-delete",{originalErrorMessage:Kt?.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class eo{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,z.Z)(function*(){const B=x.storage.getLastFetchStatus(),Y=x.storage.getLastSuccessfulFetchTimestampMillis(),pe=x.storage.getActiveConfig(),je=yield B;je&&(x.lastFetchStatus=je);const rt=yield Y;rt&&(x.lastSuccessfulFetchTimestampMillis=rt);const yt=yield pe;yt&&(x.activeConfig=yt)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function Ps(){return(yr=yr||(0,z.Z)(function*(){if(!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch{return!1}})).apply(this,arguments)}!function ia(){(0,ve._registerComponent)(new ge.wA("remote-config",function R(x,{instanceIdentifier:B}){const Y=x.getProvider("app").getImmediate(),pe=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw be.create("registration-window");if(!(0,me.hl)())throw be.create("indexed-db-unavailable");const{projectId:je,apiKey:rt,appId:yt}=Y.options;if(!je)throw be.create("registration-project-id");if(!rt)throw be.create("registration-api-key");if(!yt)throw be.create("registration-app-id");const At=new Ei(yt,Y.name,B=B||"firebase"),Kt=new eo(At),en=new Se.Yd(Ko);en.logLevel=Se.in.ERROR;const Wt=new vi(pe,ve.SDK_VERSION,B,je,rt,yt),or=new Mi(Wt,At),ri=new Fr(or,At,Kt,en),Ai=new _i(Y,ri,Kt,At,en);return function $n(R){const x=(0,me.m9)(R);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(Ai),Ai},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Ko,"0.4.4"),(0,ve.registerVersion)(Ko,"0.4.4","esm2017")}();const _o=(R,x)=>x.some(B=>R instanceof B);let Eo,Hn;const Lo=new WeakMap,Ui=new WeakMap,Io=new WeakMap,Br=new WeakMap,uo=new WeakMap;let Bi={get(R,x,B){if(R instanceof IDBTransaction){if("done"===x)return Ui.get(R);if("objectStoreNames"===x)return R.objectStoreNames||Io.get(R);if("store"===x)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Si(R[x])},set:(R,x,B)=>(R[x]=B,!0),has:(R,x)=>R instanceof IDBTransaction&&("done"===x||"store"===x)||x in R};function ks(R){return"function"==typeof R?function ts(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Os(){return Hn||(Hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...x){return R.apply(gs(this),x),Si(Lo.get(this))}:function(...x){return Si(R.apply(gs(this),x))}:function(x,...B){const Y=R.call(gs(this),x,...B);return Io.set(Y,x.sort?x.sort():[x]),Si(Y)}}(R):(R instanceof IDBTransaction&&function ui(R){if(Ui.has(R))return;const x=new Promise((B,Y)=>{const pe=()=>{R.removeEventListener("complete",je),R.removeEventListener("error",rt),R.removeEventListener("abort",rt)},je=()=>{B(),pe()},rt=()=>{Y(R.error||new DOMException("AbortError","AbortError")),pe()};R.addEventListener("complete",je),R.addEventListener("error",rt),R.addEventListener("abort",rt)});Ui.set(R,x)}(R),_o(R,function ko(){return Eo||(Eo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,Bi):R)}function Si(R){if(R instanceof IDBRequest)return function xi(R){const x=new Promise((B,Y)=>{const pe=()=>{R.removeEventListener("success",je),R.removeEventListener("error",rt)},je=()=>{B(Si(R.result)),pe()},rt=()=>{Y(R.error),pe()};R.addEventListener("success",je),R.addEventListener("error",rt)});return x.then(B=>{B instanceof IDBCursor&&Lo.set(B,R)}).catch(()=>{}),uo.set(x,R),x}(R);if(Br.has(R))return Br.get(R);const x=ks(R);return x!==R&&(Br.set(R,x),uo.set(x,R)),x}const gs=R=>uo.get(R);function Fo(R,x,{blocked:B,upgrade:Y,blocking:pe,terminated:je}={}){const rt=indexedDB.open(R,x),yt=Si(rt);return Y&&rt.addEventListener("upgradeneeded",At=>{Y(Si(rt.result),At.oldVersion,At.newVersion,Si(rt.transaction))}),B&&rt.addEventListener("blocked",()=>B()),yt.then(At=>{je&&At.addEventListener("close",()=>je()),pe&&At.addEventListener("versionchange",()=>pe())}).catch(()=>{}),yt}function sa(R,{blocked:x}={}){const B=indexedDB.deleteDatabase(R);return x&&B.addEventListener("blocked",()=>x()),Si(B).then(()=>{})}const Ls=["get","getKey","getAll","getAllKeys","count"],ya=["put","add","delete","clear"],va=new Map;function Yo(R,x){var B;if(!(R instanceof IDBDatabase)||x in R||"string"!=typeof x)return;if(va.get(x))return va.get(x);const Y=x.replace(/FromIndex$/,""),pe=x!==Y,je=ya.includes(Y);if(!(Y in(pe?IDBIndex:IDBObjectStore).prototype)||!je&&!Ls.includes(Y))return;const rt=function(At){return(B=B||(0,z.Z)(function*(Kt,...en){const Wt=this.transaction(Kt,je?"readwrite":"readonly");let or=Wt.store;return pe&&(or=or.index(en.shift())),(yield Promise.all([or[Y](...en),je&&Wt.done]))[0]})).apply(this,arguments)};return va.set(x,rt),rt}var ms,ys,tu,_a,pr,F,L,q,ae,Ie,Je,ft,Ht,zt,hn,kn,Pr,Sn,gr,Xr;!function bi(R){Bi=R(Bi)}(R=>({...R,get:(x,B,Y)=>Yo(x,B)||R.get(x,B,Y),has:(x,B)=>!!Yo(x,B)||R.has(x,B)}));const Ni="/firebase-messaging-sw.js",Tr="/firebase-cloud-messaging-push-scope",Or="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gr="https://fcmregistrations.googleapis.com/v1",Fs="google.c.a.c_id",bs="google.c.a.c_l",Us="google.c.a.ts";var Uo=function(R){return R.PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",R}(Uo||{});function Ss(R){const x=new Uint8Array(R);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oa(R){const B=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Y=atob(B),pe=new Uint8Array(Y.length);for(let je=0;je<Y.length;++je)pe[je]=Y.charCodeAt(je);return pe}const Bo="fcm_token_details_db",Wi=5,Do="fcm_token_object_Store",Qo="firebase-messaging-database",Ea=1,Co="firebase-messaging-store";let Vo=null;function bo(){return Vo||(Vo=Fo(Qo,Ea,{upgrade:(R,x)=>{0===x&&R.createObjectStore(Co)}})),Vo}function ka(R){return(ys=ys||(0,z.Z)(function*(x){const B=La(x),pe=yield(yield bo()).transaction(Co).objectStore(Co).get(B);if(pe)return pe;{const je=yield function To(R){return(ms=ms||(0,z.Z)(function*(x){var B;if("databases"in indexedDB&&!(yield indexedDB.databases()).map(yt=>yt.name).includes(Bo))return null;let Y=null;return(yield Fo(Bo,Wi,{upgrade:function(rt,yt,At,Kt){return(B=B||(0,z.Z)(function*(en,Wt,or,ri){var Ai;if(Wt<2||!en.objectStoreNames.contains(Do))return;const fn=ri.objectStore(Do),ls=yield fn.index("fcmSenderId").get(x);if(yield fn.clear(),ls)if(2===Wt){const tn=ls;if(!tn.auth||!tn.p256dh||!tn.endpoint)return;Y={token:tn.fcmToken,createTime:null!==(Ai=tn.createTime)&&void 0!==Ai?Ai:Date.now(),subscriptionOptions:{auth:tn.auth,p256dh:tn.p256dh,endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:"string"==typeof tn.vapidKey?tn.vapidKey:Ss(tn.vapidKey)}}}else if(3===Wt){const tn=ls;Y={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Ss(tn.auth),p256dh:Ss(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Ss(tn.vapidKey)}}}else if(4===Wt){const tn=ls;Y={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Ss(tn.auth),p256dh:Ss(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Ss(tn.vapidKey)}}}})).apply(this,arguments)}})).close(),yield sa(Bo),yield sa("fcm_vapid_details_db"),yield sa("undefined"),function oa(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:x}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}(Y)?Y:null})).apply(this,arguments)}(x.appConfig.senderId);if(je)return yield ns(x,je),je}})).apply(this,arguments)}function ns(R,x){return(tu=tu||(0,z.Z)(function*(B,Y){const pe=La(B),rt=(yield bo()).transaction(Co,"readwrite");return yield rt.objectStore(Co).put(Y,pe),yield rt.done,Y})).apply(this,arguments)}function La({appConfig:R}){return R.appId}const us=new me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function co(R,x){return(pr=pr||(0,z.Z)(function*(B,Y){const pe=yield P(B),je=J(Y),rt={method:"POST",headers:pe,body:JSON.stringify(je)};let yt;try{yt=yield(yield fetch(E(B.appConfig),rt)).json()}catch(At){throw us.create("token-subscribe-failed",{errorInfo:At?.toString()})}if(yt.error)throw us.create("token-subscribe-failed",{errorInfo:yt.error.message});if(!yt.token)throw us.create("token-subscribe-no-token");return yt.token})).apply(this,arguments)}function vr(R,x){return(L=L||(0,z.Z)(function*(B,Y){const je={method:"DELETE",headers:yield P(B)};try{const yt=yield(yield fetch(`${E(B.appConfig)}/${Y}`,je)).json();if(yt.error)throw us.create("token-unsubscribe-failed",{errorInfo:yt.error.message})}catch(rt){throw us.create("token-unsubscribe-failed",{errorInfo:rt?.toString()})}})).apply(this,arguments)}function E({projectId:R}){return`${Gr}/projects/${R}/registrations`}function P(R){return(q=q||(0,z.Z)(function*({appConfig:x,installations:B}){const Y=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function J({p256dh:R,auth:x,endpoint:B,vapidKey:Y}){const pe={web:{endpoint:B,auth:x,p256dh:R}};return Y!==Or&&(pe.web.applicationPubKey=Y),pe}const M=6048e5;function Z(R){return(ae=ae||(0,z.Z)(function*(x){const B=yield function An(R,x){return(Ht=Ht||(0,z.Z)(function*(B,Y){return(yield B.pushManager.getSubscription())||B.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oa(Y)})})).apply(this,arguments)}(x.swRegistration,x.vapidKey),Y={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:B.endpoint,auth:Ss(B.getKey("auth")),p256dh:Ss(B.getKey("p256dh"))},pe=yield ka(x.firebaseDependencies);if(pe){if(function Rn(R,x){return x.vapidKey===R.vapidKey&&x.endpoint===R.endpoint&&x.auth===R.auth&&x.p256dh===R.p256dh}(pe.subscriptionOptions,Y))return Date.now()>=pe.createTime+M?function ot(R,x){return(Je=Je||(0,z.Z)(function*(B,Y){try{const pe=yield function So(R,x){return(F=F||(0,z.Z)(function*(B,Y){const pe=yield P(B),je=J(Y.subscriptionOptions),rt={method:"PATCH",headers:pe,body:JSON.stringify(je)};let yt;try{yt=yield(yield fetch(`${E(B.appConfig)}/${Y.token}`,rt)).json()}catch(At){throw us.create("token-update-failed",{errorInfo:At?.toString()})}if(yt.error)throw us.create("token-update-failed",{errorInfo:yt.error.message});if(!yt.token)throw us.create("token-update-no-token");return yt.token})).apply(this,arguments)}(B.firebaseDependencies,Y),je=Object.assign(Object.assign({},Y),{token:pe,createTime:Date.now()});return yield ns(B.firebaseDependencies,je),pe}catch(pe){throw yield function _e(R){return(Ie=Ie||(0,z.Z)(function*(x){const B=yield ka(x.firebaseDependencies);B&&(yield vr(x.firebaseDependencies,B.token),yield function aa(R){return(_a=_a||(0,z.Z)(function*(x){const B=La(x),pe=(yield bo()).transaction(Co,"readwrite");yield pe.objectStore(Co).delete(B),yield pe.done})).apply(this,arguments)}(x.firebaseDependencies));const Y=yield x.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()})).apply(this,arguments)}(B),pe}})).apply(this,arguments)}(x,{token:pe.token,createTime:Date.now(),subscriptionOptions:Y}):pe.token;try{yield vr(x.firebaseDependencies,pe.token)}catch(je){console.warn(je)}return Rt(x.firebaseDependencies,Y)}return Rt(x.firebaseDependencies,Y)})).apply(this,arguments)}function Rt(R,x){return(ft=ft||(0,z.Z)(function*(B,Y){const je={token:yield co(B,Y),createTime:Date.now(),subscriptionOptions:Y};return yield ns(B,je),je.token})).apply(this,arguments)}function vn(R){const x={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function Bn(R,x){if(!x.notification)return;R.notification={};const B=x.notification.title;B&&(R.notification.title=B);const Y=x.notification.body;Y&&(R.notification.body=Y);const pe=x.notification.image;pe&&(R.notification.image=pe);const je=x.notification.icon;je&&(R.notification.icon=je)}(x,R),function ei(R,x){x.data&&(R.data=x.data)}(x,R),function _r(R,x){var B,Y,pe,je,rt;if(!(x.fcmOptions||null!==(B=x.notification)&&void 0!==B&&B.click_action))return;R.fcmOptions={};const yt=null!==(pe=null===(Y=x.fcmOptions)||void 0===Y?void 0:Y.link)&&void 0!==pe?pe:null===(je=x.notification)||void 0===je?void 0:je.click_action;yt&&(R.fcmOptions.link=yt);const At=null===(rt=x.fcmOptions)||void 0===rt?void 0:rt.analytics_label;At&&(R.fcmOptions.analyticsLabel=At)}(x,R),x}function Bs(R,x){const B=[];for(let Y=0;Y<R.length;Y++)B.push(R.charAt(Y)),Y<x.length&&B.push(x.charAt(Y));return B.join("")}function lo(R){return us.create("missing-app-config-values",{valueName:R})}Bs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class to{constructor(x,B,Y){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pe=function vs(R){if(!R||!R.options)throw lo("App Configuration Object");if(!R.name)throw lo("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:B}=R;for(const Y of x)if(!B[Y])throw lo(Y);return{appName:R.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:pe,installations:B,analyticsProvider:Y}}_delete(){return Promise.resolve()}}function Mr(R,x){return(Pr=Pr||(0,z.Z)(function*(B,Y){if(!navigator)throw us.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw us.create("permission-blocked");return yield function Xo(R,x){return(kn=kn||(0,z.Z)(function*(B,Y){Y?B.vapidKey=Y:B.vapidKey||(B.vapidKey=Or)})).apply(this,arguments)}(B,Y?.vapidKey),yield function Vs(R,x){return(hn=hn||(0,z.Z)(function*(B,Y){if(!Y&&!B.swRegistration&&(yield function Pi(R){return(zt=zt||(0,z.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:Tr}),x.swRegistration.update().catch(()=>{})}catch(B){throw us.create("failed-service-worker-registration",{browserErrorMessage:B?.message})}})).apply(this,arguments)}(B)),Y||!B.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw us.create("invalid-sw-registration");B.swRegistration=Y}})).apply(this,arguments)}(B,Y?.serviceWorkerRegistration),Z(B)})).apply(this,arguments)}function js(R,x){return(gr=gr||(0,z.Z)(function*(B,Y){const pe=Y.data;if(!pe.isFirebaseMessaging)return;B.onMessageHandler&&pe.messageType===Uo.PUSH_RECEIVED&&("function"==typeof B.onMessageHandler?B.onMessageHandler(vn(pe)):B.onMessageHandler.next(vn(pe)));const je=pe.data;(function ci(R){return"object"==typeof R&&!!R&&Fs in R})(je)&&"1"===je["google.c.a.e"]&&(yield function ua(R,x,B){return(Sn=Sn||(0,z.Z)(function*(Y,pe,je){const rt=function ca(R){switch(R){case Uo.NOTIFICATION_CLICKED:return"notification_open";case Uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(pe);(yield Y.firebaseDependencies.analyticsProvider.get()).logEvent(rt,{message_id:je[Fs],message_name:je[bs],message_time:je[Us],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}(B,pe.messageType,je))})).apply(this,arguments)}const Pc="@firebase/messaging",Ia=R=>{const x=new to(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>js(x,B)),x},li=R=>{const x=R.getProvider("messaging").getImmediate();return{getToken:Y=>Mr(x,Y)}};function bu(){return(Xr=Xr||(0,z.Z)(function*(){try{yield(0,me.eu)()}catch{return!1}return typeof window<"u"&&(0,me.hl)()&&(0,me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}var $o,wa,Dn,ec,tc,Ho,Da,Fa,rc;!function _l(){(0,ve._registerComponent)(new ge.wA("messaging",Ia,"PUBLIC")),(0,ve._registerComponent)(new ge.wA("messaging-internal",li,"PRIVATE")),(0,ve.registerVersion)(Pc,"0.12.4"),(0,ve.registerVersion)(Pc,"0.12.4","esm2017")}();const mt="analytics",Er="firebase_id",Ua="origin",wl=6e4,hi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Au="https://www.googletagmanager.com/gtag/js",wi=new Se.Yd("@firebase/analytics"),Ki=new me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Di(R){if(!R.startsWith(Au)){const x=Ki.create("invalid-gtag-resource",{gtagURL:R});return wi.warn(x.message),""}return R}function sc(R){return Promise.all(R.map(x=>x.catch(B=>B)))}const Ba=30,ho=new class iu{constructor(x={},B=1e3){this.throttleMetadata=x,this.intervalMillis=B}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,B){this.throttleMetadata[x]=B}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function su(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function m(R){return(ec=ec||(0,z.Z)(function*(x,B=ho,Y){const{appId:pe,apiKey:je,measurementId:rt}=x.options;if(!pe)throw Ki.create("no-app-id");if(!je){if(rt)return{measurementId:rt,appId:pe};throw Ki.create("no-api-key")}const yt=B.getThrottleMetadata(pe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},At=new S;return setTimeout((0,z.Z)(function*(){At.abort()}),void 0!==Y?Y:wl),I({appId:pe,apiKey:je,measurementId:rt},yt,At,B)})).apply(this,arguments)}function I(R,x,B){return(tc=tc||(0,z.Z)(function*(Y,{throttleEndTimeMillis:pe,backoffCount:je},rt,yt=ho){var At;const{appId:Kt,measurementId:en}=Y;try{yield function b(R,x){return new Promise((B,Y)=>{const pe=Math.max(x-Date.now(),0),je=setTimeout(B,pe);R.addEventListener(()=>{clearTimeout(je),Y(Ki.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(rt,pe)}catch(Wt){if(en)return wi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${en} provided in the "measurementId" field in the local Firebase config. [${Wt?.message}]`),{appId:Kt,measurementId:en};throw Wt}try{const Wt=yield function Dl(R){return(Dn=Dn||(0,z.Z)(function*(x){var B;const{appId:Y,apiKey:pe}=x,je={method:"GET",headers:su(pe)},rt=hi.replace("{app-id}",Y),yt=yield fetch(rt,je);if(200!==yt.status&&304!==yt.status){let At="";try{const Kt=yield yt.json();null!==(B=Kt.error)&&void 0!==B&&B.message&&(At=Kt.error.message)}catch{}throw Ki.create("config-fetch-failed",{httpStatus:yt.status,responseMessage:At})}return yt.json()})).apply(this,arguments)}(Y);return yt.deleteThrottleMetadata(Kt),Wt}catch(Wt){const or=Wt;if(!function D(R){if(!(R instanceof me.ZR&&R.customData))return!1;const x=Number(R.customData.httpStatus);return 429===x||500===x||503===x||504===x}(or)){if(yt.deleteThrottleMetadata(Kt),en)return wi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${en} provided in the "measurementId" field in the local Firebase config. [${or?.message}]`),{appId:Kt,measurementId:en};throw Wt}const ri=503===Number(null===(At=or?.customData)||void 0===At?void 0:At.httpStatus)?(0,me.$s)(je,yt.intervalMillis,Ba):(0,me.$s)(je,yt.intervalMillis),Ai={throttleEndTimeMillis:Date.now()+ri,backoffCount:je+1};return yt.setThrottleMetadata(Kt,Ai),wi.debug(`Calling attemptFetch again in ${ri} millis`),I(Y,Ai,rt,yt)}})).apply(this,arguments)}class S{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let V,ti;function cc(R,x,B,Y,pe,je,rt){return(Fa=Fa||(0,z.Z)(function*(yt,At,Kt,en,Wt,or,ri){var Ai;const fn=m(yt);fn.then(is=>{Kt[is.measurementId]=is.appId,yt.options.measurementId&&is.measurementId!==yt.options.measurementId&&wi.warn(`The measurement ID in the local Firebase config (${yt.options.measurementId}) does not match the measurement ID fetched from the server (${is.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(is=>wi.error(is)),At.push(fn);const ls=function ou(){return(Da=Da||(0,z.Z)(function*(){if(!(0,me.hl)())return wi.warn(Ki.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,me.eu)()}catch(R){return wi.warn(Ki.create("indexeddb-unavailable",{errorInfo:R?.toString()}).message),!1}return!0})).apply(this,arguments)}().then(is=>{if(is)return en.getId()}),[tn,Cr]=yield Promise.all([fn,ls]);(function uc(R){const x=window.document.getElementsByTagName("script");for(const B of Object.values(x))if(B.src&&B.src.includes(Au)&&B.src.includes(R))return B;return null})(or)||function ac(R,x){const B=function oc(R,x){let B;return window.trustedTypes&&(B=window.trustedTypes.createPolicy(R,x)),B}("firebase-js-sdk-policy",{createScriptURL:Di}),Y=document.createElement("script"),pe=`${Au}?l=${R}&id=${x}`;Y.src=B?B?.createScriptURL(pe):pe,Y.async=!0,document.head.appendChild(Y)}(or,tn.measurementId),ti&&(Wt("consent","default",ti),function _n(R){ti=R}(void 0)),Wt("js",new Date);const ds=null!==(Ai=ri?.config)&&void 0!==Ai?Ai:{};return ds[Ua]="firebase",ds.update=!0,null!=Cr&&(ds[Er]=Cr),Wt("config",tn.measurementId,ds),V&&(Wt("set",V),function zs(R){V=R}(void 0)),tn.measurementId})).apply(this,arguments)}class Ca{constructor(x){this.app=x}_delete(){return delete Ao[this.app.options.appId],Promise.resolve()}}let Ao={},kc=[];const Mu={};let ha,Gs,Go="dataLayer",ni=!1;function mr(R,x,B){!function xu(){const R=[];if((0,me.ru)()&&R.push("This is a browser extension environment."),(0,me.zI)()||R.push("Cookies are not available."),R.length>0){const x=R.map((Y,pe)=>`(${pe+1}) ${Y}`).join(" "),B=Ki.create("invalid-analytics-context",{errorInfo:x});wi.warn(B.message)}}();const Y=R.options.appId;if(!Y)throw Ki.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw Ki.create("no-api-key");wi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ao[Y])throw Ki.create("already-exists",{id:Y});if(!ni){!function _s(R){let x=[];Array.isArray(window[R])?x=window[R]:window[R]=x}(Go);const{wrappedGtag:je,gtagCore:rt}=function Hs(R,x,B,Y,pe){let je=function(...rt){window[Y].push(arguments)};return window[pe]&&"function"==typeof window[pe]&&(je=window[pe]),window[pe]=function Ta(R,x,B,Y){var pe;return function je(rt){return(pe=pe||(0,z.Z)(function*(yt,...At){try{if("event"===yt){const[Kt,en]=At;yield function Ru(R,x,B,Y,pe){return(wa=wa||(0,z.Z)(function*(je,rt,yt,At,Kt){try{let en=[];if(Kt&&Kt.send_to){let Wt=Kt.send_to;Array.isArray(Wt)||(Wt=[Wt]);const or=yield sc(yt);for(const ri of Wt){const Ai=or.find(ls=>ls.measurementId===ri),fn=Ai&&rt[Ai.appId];if(!fn){en=[];break}en.push(fn)}}0===en.length&&(en=Object.values(rt)),yield Promise.all(en),je("event",At,Kt||{})}catch(en){wi.error(en)}})).apply(this,arguments)}(R,x,B,Kt,en)}else if("config"===yt){const[Kt,en]=At;yield function zo(R,x,B,Y,pe,je){return($o=$o||(0,z.Z)(function*(rt,yt,At,Kt,en,Wt){const or=Kt[en];try{if(or)yield yt[or];else{const Ai=(yield sc(At)).find(fn=>fn.measurementId===en);Ai&&(yield yt[Ai.appId])}}catch(ri){wi.error(ri)}rt("config",en,Wt)})).apply(this,arguments)}(R,x,B,Y,Kt,en)}else if("consent"===yt){const[Kt]=At;R("consent","update",Kt)}else if("get"===yt){const[Kt,en,Wt]=At;R("get",Kt,en,Wt)}else if("set"===yt){const[Kt]=At;R("set",Kt)}else R(yt,...At)}catch(Kt){wi.error(Kt)}})).apply(this,arguments)}}(je,R,x,B),{gtagCore:je,wrappedGtag:window[pe]}}(Ao,kc,Mu,Go,"gtag");Gs=je,ha=rt,ni=!0}return Ao[Y]=cc(R,kc,Mu,x,ha,Go,B),new Ca(R)}function Pt(){return(rc=rc||(0,z.Z)(function*(){if((0,me.ru)()||!(0,me.zI)()||!(0,me.hl)())return!1;try{return yield(0,me.eu)()}catch{return!1}})).apply(this,arguments)}const dc="@firebase/analytics";!function Tl(){(0,ve._registerComponent)(new ge.wA(mt,(x,{options:B})=>mr(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,ve._registerComponent)(new ge.wA("analytics-internal",function R(x){try{const B=x.getProvider(mt).getImmediate();return{logEvent:(Y,pe,je)=>function Fc(R,x,B,Y){R=(0,me.m9)(R),function X(R,x,B,Y,pe){return(Ho=Ho||(0,z.Z)(function*(je,rt,yt,At,Kt){if(Kt&&Kt.global)je("event",yt,At);else{const en=yield rt;je("event",yt,Object.assign(Object.assign({},At),{send_to:en}))}})).apply(this,arguments)}(Gs,Ao[R.app.options.appId],x,B,Y).catch(pe=>wi.error(pe))}(B,Y,pe,je)}}catch(B){throw Ki.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,ve.registerVersion)(dc,"0.10.0"),(0,ve.registerVersion)(dc,"0.10.0","esm2017")}();var fa=O(1954),ea=O(2631);const hc=new class Qe extends ea.v{}(class Uc extends fa.o{constructor(x,B){super(x,B),this.scheduler=x,this.work=B}schedule(x,B=0){return B>0?super.schedule(x,B):(this.delay=B,this.state=x,this.scheduler.flush(this),this)}execute(x,B){return B>0||this.closed?super.execute(x,B):this._execute(x,B)}requestAsyncId(x,B,Y=0){return null!=Y&&Y>0||null==Y&&this.delay>0?super.requestAsyncId(x,B,Y):(x.flush(this),0)}});var md=O(6321),no=O(9397),ba=O(3093),Bc=O(5137);const Sa=new y.GfV("7.6.1"),fc="__angularfire_symbol__analyticsIsSupportedValue",ja="__angularfire_symbol__analyticsIsSupported",pc="__angularfire_symbol__remoteConfigIsSupportedValue",Cl="__angularfire_symbol__remoteConfigIsSupported",cs="__angularfire_symbol__messagingIsSupportedValue",Aa="__angularfire_symbol__messagingIsSupported";function Ha(R,x,B){if(x){if(1===x.length)return x[0];const je=x.filter(rt=>rt.app===B);if(1===je.length)return je[0]}return B.container.getProvider(R).getImmediate({optional:!0})}globalThis[ja]||(globalThis[ja]=Pt().then(R=>globalThis[fc]=R).catch(()=>globalThis[fc]=!1)),globalThis[Aa]||(globalThis[Aa]=bu().then(R=>globalThis[cs]=R).catch(()=>globalThis[cs]=!1)),globalThis[Cl]||(globalThis[Cl]=Ps().then(R=>globalThis[pc]=R).catch(()=>globalThis[pc]=!1));const ta=(R,x)=>{const B=x?[x]:(0,ue.C6)(),Y=[];return B.forEach(pe=>{pe.container.getProvider(R).instances.forEach(rt=>{Y.includes(rt)||Y.push(rt)})}),Y};function za(){}class Nu{constructor(x,B=hc){this.zone=x,this.delegate=B}now(){return this.delegate.now()}schedule(x,B,Y){const pe=this.zone;return this.delegate.schedule(function(rt){pe.runGuarded(()=>{x.apply(this,[rt])})},B,Y)}}class Pu{constructor(x){this.zone=x,this.task=null}call(x,B){const Y=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za)),B.pipe((0,no.b)({next:Y,complete:Y,error:Y})).subscribe(x).add(Y)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _h=(()=>{class R{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new Nu(Zone.current)),this.insideAngular=B.run(()=>new Nu(Zone.current,md.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(B){return new(B||R)(y.LFG(y.R0b))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function qi(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function Ou(R){return R.pipe((0,ba.Q)(qi().outsideAngular))}function Sl(R){return qi(),function Al(R){return function(B){return(B=B.lift(new Pu(R.ngZone))).pipe((0,Bc.R)(R.outsideAngular),(0,ba.Q)(R.insideAngular))}}(qi())(R)}},9058:(Lt,We,O)=>{O.d(We,{$s:()=>oi,BH:()=>Te,G6:()=>mn,L:()=>Me,LL:()=>pt,Pz:()=>Le,Sg:()=>Be,UG:()=>Vt,US:()=>ge,ZB:()=>De,ZR:()=>it,aH:()=>ke,b$:()=>Nn,eu:()=>Fe,hl:()=>we,jU:()=>It,m9:()=>Li,ne:()=>Gn,pd:()=>Qt,r3:()=>rn,ru:()=>un,tV:()=>te,uI:()=>Ue,vZ:()=>Qn,w1:()=>cr,xO:()=>zn,xb:()=>Sr,z$:()=>Ke,zI:()=>He,zd:()=>Jt});const ve=function(ye){const G=[];let $=0;for(let oe=0;oe<ye.length;oe++){let K=ye.charCodeAt(oe);K<128?G[$++]=K:K<2048?(G[$++]=K>>6|192,G[$++]=63&K|128):55296==(64512&K)&&oe+1<ye.length&&56320==(64512&ye.charCodeAt(oe+1))?(K=65536+((1023&K)<<10)+(1023&ye.charCodeAt(++oe)),G[$++]=K>>18|240,G[$++]=K>>12&63|128,G[$++]=K>>6&63|128,G[$++]=63&K|128):(G[$++]=K>>12|224,G[$++]=K>>6&63|128,G[$++]=63&K|128)}return G},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,G){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,oe=[];for(let K=0;K<ye.length;K+=3){const Ee=ye[K],Ve=K+1<ye.length,ht=Ve?ye[K+1]:0,Gt=K+2<ye.length,_t=Gt?ye[K+2]:0;let Xn=(15&ht)<<2|_t>>6,Ne=63&_t;Gt||(Ne=64,Ve||(Xn=64)),oe.push($[Ee>>2],$[(3&Ee)<<4|ht>>4],$[Xn],$[Ne])}return oe.join("")},encodeString(ye,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(ye):this.encodeByteArray(ve(ye),G)},decodeString(ye,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(ye):function(ye){const G=[];let $=0,oe=0;for(;$<ye.length;){const K=ye[$++];if(K<128)G[oe++]=String.fromCharCode(K);else if(K>191&&K<224){const Ee=ye[$++];G[oe++]=String.fromCharCode((31&K)<<6|63&Ee)}else if(K>239&&K<365){const Gt=((7&K)<<18|(63&ye[$++])<<12|(63&ye[$++])<<6|63&ye[$++])-65536;G[oe++]=String.fromCharCode(55296+(Gt>>10)),G[oe++]=String.fromCharCode(56320+(1023&Gt))}else{const Ee=ye[$++],Ve=ye[$++];G[oe++]=String.fromCharCode((15&K)<<12|(63&Ee)<<6|63&Ve)}}return G.join("")}(this.decodeStringToByteArray(ye,G))},decodeStringToByteArray(ye,G){this.init_();const $=G?this.charToByteMapWebSafe_:this.charToByteMap_,oe=[];for(let K=0;K<ye.length;){const Ee=$[ye.charAt(K++)],ht=K<ye.length?$[ye.charAt(K)]:0;++K;const _t=K<ye.length?$[ye.charAt(K)]:64;++K;const Yt=K<ye.length?$[ye.charAt(K)]:64;if(++K,null==Ee||null==ht||null==_t||null==Yt)throw new Se;oe.push(Ee<<2|ht>>4),64!==_t&&(oe.push(ht<<4&240|_t>>2),64!==Yt&&oe.push(_t<<6&192|Yt))}return oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(ye){return function(ye){const G=ve(ye);return ge.encodeByteArray(G,!0)}(ye).replace(/\./g,"")},te=function(ye){try{return ge.decodeString(ye,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function De(ye,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return G}for(const $ in G)!G.hasOwnProperty($)||!nt($)||(ye[$]=De(ye[$],G[$]));return ye}function nt(ye){return"__proto__"!==ye}const gt=()=>{try{return function ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=ye&&te(ye[1]);return G&&JSON.parse(G)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},ke=()=>{var ye;return null===(ye=gt())||void 0===ye?void 0:ye.config},Le=ye=>{var G;return null===(G=gt())||void 0===G?void 0:G[`_${ye}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,$)=>{this.resolve=G,this.reject=$})}wrapCallback(G){return($,oe)=>{$?this.reject($):this.resolve(oe),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G($):G($,oe))}}}function Be(ye,G){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const oe=G||"demo-project",K=ye.iat||0,Ee=ye.sub||ye.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${oe}`,aud:oe,iat:K,exp:K+3600,auth_time:K,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Ve)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Vt(){var ye;const G=null===(ye=gt())||void 0===ye?void 0:ye.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function It(){return"object"==typeof self&&self.self===self}function un(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Nn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function cr(){const ye=Ke();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function mn(){return!Vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){try{return"object"==typeof indexedDB}catch{return!1}}function Fe(){return new Promise((ye,G)=>{try{let $=!0;const oe="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(oe);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(oe),ye(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var Ee;G((null===(Ee=K.error)||void 0===Ee?void 0:Ee.message)||"")}}catch($){G($)}})}function He(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class it extends Error{constructor(G,$,oe){super($),this.code=G,this.customData=oe,this.name="FirebaseError",Object.setPrototypeOf(this,it.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}}class pt{constructor(G,$,oe){this.service=G,this.serviceName=$,this.errors=oe}create(G,...$){const oe=$[0]||{},K=`${this.service}/${G}`,Ee=this.errors[G],Ve=Ee?function bt(ye,G){return ye.replace(Ct,($,oe)=>{const K=G[oe];return null!=K?String(K):`<${oe}?>`})}(Ee,oe):"Error";return new it(K,`${this.serviceName}: ${Ve} (${K}).`,oe)}}const Ct=/\{\$([^}]+)}/g;function rn(ye,G){return Object.prototype.hasOwnProperty.call(ye,G)}function Sr(ye){for(const G in ye)if(Object.prototype.hasOwnProperty.call(ye,G))return!1;return!0}function Qn(ye,G){if(ye===G)return!0;const $=Object.keys(ye),oe=Object.keys(G);for(const K of $){if(!oe.includes(K))return!1;const Ee=ye[K],Ve=G[K];if(xr(Ee)&&xr(Ve)){if(!Qn(Ee,Ve))return!1}else if(Ee!==Ve)return!1}for(const K of oe)if(!$.includes(K))return!1;return!0}function xr(ye){return null!==ye&&"object"==typeof ye}function zn(ye){const G=[];for(const[$,oe]of Object.entries(ye))Array.isArray(oe)?oe.forEach(K=>{G.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):G.push(encodeURIComponent($)+"="+encodeURIComponent(oe));return G.length?"&"+G.join("&"):""}function Jt(ye){const G={};return ye.replace(/^\?/,"").split("&").forEach(oe=>{if(oe){const[K,Ee]=oe.split("=");G[decodeURIComponent(K)]=decodeURIComponent(Ee)}}),G}function Qt(ye){const G=ye.indexOf("?");if(!G)return"";const $=ye.indexOf("#",G);return ye.substring(G,$>0?$:void 0)}function Gn(ye,G){const $=new ii(ye,G);return $.subscribe.bind($)}class ii{constructor(G,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{G(this)}).catch(oe=>{this.error(oe)})}next(G){this.forEachObserver($=>{$.next(G)})}error(G){this.forEachObserver($=>{$.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,$,oe){let K;if(void 0===G&&void 0===$&&void 0===oe)throw new Error("Missing Observer.");K=function Mn(ye,G){if("object"!=typeof ye||null===ye)return!1;for(const $ of G)if($ in ye&&"function"==typeof ye[$])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:$,complete:oe},void 0===K.next&&(K.next=Nr),void 0===K.error&&(K.error=Nr),void 0===K.complete&&(K.complete=Nr);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ee}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,G)}sendOne(G,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{$(this.observers[G])}catch(oe){typeof console<"u"&&console.error&&console.error(oe)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nr(){}const Ar=1e3,qr=2,Hr=144e5,Zr=.5;function oi(ye,G=Ar,$=qr){const oe=G*Math.pow($,ye),K=Math.round(Zr*oe*(Math.random()-.5)*2);return Math.min(Hr,oe+K)}function Li(ye){return ye&&ye._delegate?ye._delegate:ye}},975:(Lt,We,O)=>{O.d(We,{u:()=>ue});const ue=new(O(5879).OlP)("IEstablishmentServiceImpl")},9758:(Lt,We,O)=>{O.d(We,{c:()=>z});var y=O(5619),ue=O(5879);let z=(()=>{var ve;class me{constructor(){this.INITIAL_STATE={isOpned:!1},this.alertConfiguration=new y.X(this.INITIAL_STATE)}showAlert(Se){this.alertConfiguration.next(Se),this.schedulestateReset()}schedulestateReset(){setTimeout(()=>{this.alertConfiguration.next(this.INITIAL_STATE)},5e3)}}return(ve=me).\u0275fac=function(Se){return new(Se||ve)},ve.\u0275prov=ue.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),me})()},304:(Lt,We,O)=>{O.d(We,{e:()=>me});var y=O(5879),ue=O(8330),z=O(6796),ve=O(3781);let me=(()=>{var ge;class Se{constructor(Me,te,Q,De){this.afs=Me,this.afAuth=te,this.router=Q,this.ngZone=De,this.afAuth.authState.subscribe(nt=>{nt?(this.userData=nt,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(Me,te){return this.afAuth.signInWithEmailAndPassword(Me,te).then(Q=>{this.SetUserData(Q.user),this.afAuth.authState.subscribe(De=>{De&&this.router.navigate(["/establishment"])})}).catch(Q=>{console.error(Q.message)})}SignUp(Me,te){return this.afAuth.createUserWithEmailAndPassword(Me,te).then(Q=>{this.SendVerificationMail(),this.SetUserData(Q.user)}).catch(Q=>{console.log(Q)})}SendVerificationMail(){return this.afAuth.currentUser.then(Me=>Me.sendEmailVerification()).then(()=>{this.router.navigate(["/verify-email-address"])})}ForgotPassword(Me){return this.afAuth.sendPasswordResetEmail(Me).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(te=>{window.alert(te)})}get isLoggedIn(){const Me=JSON.parse(localStorage.getItem("user"));return null!==Me&&!1!==Me.emailVerified}SetUserData(Me){return this.afs.doc(`users/${Me.uid}`).set({uid:Me.uid,email:Me.email,displayName:Me.displayName,photoURL:Me.photoURL,emailVerified:Me.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/sign-in"])})}}return(ge=Se).\u0275fac=function(Me){return new(Me||ge)(y.LFG(ue.ST),y.LFG(z.zQ),y.LFG(ve.F0),y.LFG(y.R0b))},ge.\u0275prov=y.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),Se})()},2866:(Lt,We,O)=>{O.d(We,{N:()=>Se});var y=O(7398),ue=O(2459),z=O(5879),ve=O(8330);let me=(()=>{var Ge;class Me{constructor(Q,De){this._firestore=Q,this._collectionName=De}getAll(){return this._firestore.collection(this._collectionName).snapshotChanges().pipe((0,y.U)(Q=>Q.reduce((De,nt)=>(De.push({id:nt.payload.doc.id,...nt.payload.doc.data()}),De),[])))}create(Q){const De=this._firestore.collection(this._collectionName).add(Q);return(0,ue.D)(De).pipe((0,y.U)(nt=>nt.id))}update(Q){console.log(Q);const De=this._firestore.doc(`${this._collectionName}/${Q.id}`).update(Q);return(0,ue.D)(De)}delete(Q){return(0,ue.D)(this._firestore.doc(`${this._collectionName}/${Q}`).delete())}}return(Ge=Me).\u0275fac=function(Q){return new(Q||Ge)(z.LFG(ve.ST),z.LFG(String))},Ge.\u0275prov=z.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Me})();const Se={production:!0,envName:"prod",firebase:{projectId:"lasanha-db",appId:"1:2728048523:web:a03cb1242894dcf724618e",storageBucket:"lasanha-db.appspot.com",apiKey:"AIzaSyBq6q_HBkbog3IRdT6vcDg1ZI2JZNSs7D8",authDomain:"lasanha-db.firebaseapp.com",messagingSenderId:"2728048523"},buscaCepUrl:"https://viacep.com.br",dependencies:{establishmentService:(()=>{var Ge;class Me extends me{constructor(Q){super(Q,"establishments"),this.firestore=Q}}return(Ge=Me).\u0275fac=function(Q){return new(Q||Ge)(z.LFG(ve.ST))},Ge.\u0275prov=z.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Me})()}}},3100:(Lt,We,O)=>{var y=O(6593),ue=O(3781),z=O(5879),ve=O(304);const ge=[{path:"not-found",loadChildren:()=>O.e(6).then(O.bind(O,6)).then(Le=>Le.NotFoundModule)},{path:"sign-in",loadComponent:()=>O.e(333).then(O.bind(O,7333)).then(Le=>Le.SignInComponent)},{path:"sign-up",loadComponent:()=>O.e(186).then(O.bind(O,7186)).then(Le=>Le.SignUpComponent)},{path:"forgot-password",loadComponent:()=>O.e(282).then(O.bind(O,8282)).then(Le=>Le.ForgotPasswordComponent)},{path:"verify-email-address",loadComponent:()=>O.e(279).then(O.bind(O,2279)).then(Le=>Le.VerifyEmailComponent)},{path:"establishment",children:[{path:"",loadComponent:()=>Promise.all([O.e(95),O.e(77)]).then(O.bind(O,9077)).then(Le=>Le.ListComponent)},{path:"create",loadComponent:()=>Promise.all([O.e(95),O.e(592),O.e(686)]).then(O.bind(O,686)).then(Le=>Le.CreateEstablishmentComponent)},{path:"details/:id",loadComponent:()=>O.e(735).then(O.bind(O,735)).then(Le=>Le.DetailsComponent)},{path:"edit/:id",loadComponent:()=>Promise.all([O.e(95),O.e(592),O.e(145)]).then(O.bind(O,2145)).then(Le=>Le.EditEstablishmentComponent)}],canActivate:[(()=>{var Le;class Te{constructor(Ke,Ue){this.authService=Ke,this.router=Ue}canActivate(Ke,Ue){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return(Le=Te).\u0275fac=function(Ke){return new(Ke||Le)(z.LFG(ve.e),z.LFG(ue.F0))},Le.\u0275prov=z.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Te})()]},{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"**",redirectTo:"not-found"}];let Se=(()=>{var Le;class Te{}return(Le=Te).\u0275fac=function(Ke){return new(Ke||Le)},Le.\u0275mod=z.oAB({type:Le}),Le.\u0275inj=z.cJS({imports:[ue.Bz.forRoot(ge),ue.Bz]}),Te})();var Ge=O(9758),Me=O(6814);function te(Le,Te){if(1&Le&&(z.TgZ(0,"div",2)(1,"div",3),z._uU(2),z.qZA()()),2&Le){const Be=z.oxw().ngIf;z.xp6(1),z.Tol("alert alert-"+Be.type+" mx-3"),z.xp6(1),z.hij(" ",Be.message," ")}}function Q(Le,Te){if(1&Le&&(z.ynx(0),z.YNc(1,te,3,3,"div",1),z.BQk()),2&Le){const Be=Te.ngIf;z.xp6(1),z.Q6J("ngIf",Be.isOpned)}}let De=(()=>{var Le;class Te{constructor(Ke){this.alertService=Ke,this.alertConfiguration$=this.alertService.alertConfiguration}}return(Le=Te).\u0275fac=function(Ke){return new(Ke||Le)(z.Y36(Ge.c))},Le.\u0275cmp=z.Xpm({type:Le,selectors:[["app-alert"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","alert-fixed",4,"ngIf"],[1,"alert-fixed"],["role","alert"]],template:function(Ke,Ue){1&Ke&&(z.YNc(0,Q,2,1,"ng-container",0),z.ALo(1,"async")),2&Ke&&z.Q6J("ngIf",z.lcZ(1,1,Ue.alertConfiguration$))},dependencies:[Me.O5,Me.Ov],styles:[".alert-fixed[_ngcontent-%COMP%]{position:fixed;top:32px;left:0;z-index:9999;width:100%}"]}),Te})(),nt=(()=>{var Le;class Te{constructor(){this.title="ska"}}return(Le=Te).\u0275fac=function(Ke){return new(Ke||Le)},Le.\u0275cmp=z.Xpm({type:Le,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(Ke,Ue){1&Ke&&(z.TgZ(0,"div",0),z._UZ(1,"router-outlet"),z.qZA(),z._UZ(2,"app-alert"))},dependencies:[ue.lC,De],styles:['@import"https://fonts.googleapis.com/css?family=Numans";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;height:100%;font-family:Numans,sans-serif}.container[_ngcontent-%COMP%]{height:100%;align-content:center}.text-white[_ngcontent-%COMP%]{color:#fff}']}),Te})();var ut=O(6304),Et=O(6796),st=O(8330),Tt=O(2866),gt=O(6240),Oe=O(9862),Ot=O(975);let ke=(()=>{var Le;class Te{}return(Le=Te).\u0275fac=function(Ke){return new(Ke||Le)},Le.\u0275mod=z.oAB({type:Le,bootstrap:[nt]}),Le.\u0275inj=z.cJS({providers:[{provide:Ot.u,useClass:Tt.N.dependencies.establishmentService}],imports:[y.b2,Se,ut.hO.initializeApp(Tt.N.firebase,"lasanha-db"),Et.ww,st.yb,gt.TE,Oe.JF]}),Te})();Tt.N.production&&(0,z.G48)(),y.q6().bootstrapModule(ke).catch(Le=>console.error(Le))},5619:(Lt,We,O)=>{O.d(We,{X:()=>ue});var y=O(8645);class ue extends y.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const me=super._subscribe(ve);return!me.closed&&ve.next(this._value),me}getValue(){const{hasError:ve,thrownError:me,_value:ge}=this;if(ve)throw me;return this._throwIfClosed(),ge}next(ve){super.next(this._value=ve)}}},5592:(Lt,We,O)=>{O.d(We,{y:()=>Ge});var y=O(305),ue=O(7394),z=O(4850),ve=O(8407),me=O(2653),ge=O(4674),Se=O(1441);let Ge=(()=>{class De{constructor(ut){ut&&(this._subscribe=ut)}lift(ut){const Et=new De;return Et.source=this,Et.operator=ut,Et}subscribe(ut,Et,st){const Tt=function Q(De){return De&&De instanceof y.Lv||function te(De){return De&&(0,ge.m)(De.next)&&(0,ge.m)(De.error)&&(0,ge.m)(De.complete)}(De)&&(0,ue.Nn)(De)}(ut)?ut:new y.Hp(ut,Et,st);return(0,Se.x)(()=>{const{operator:gt,source:Oe}=this;Tt.add(gt?gt.call(Tt,Oe):Oe?this._subscribe(Tt):this._trySubscribe(Tt))}),Tt}_trySubscribe(ut){try{return this._subscribe(ut)}catch(Et){ut.error(Et)}}forEach(ut,Et){return new(Et=Me(Et))((st,Tt)=>{const gt=new y.Hp({next:Oe=>{try{ut(Oe)}catch(Ot){Tt(Ot),gt.unsubscribe()}},error:Tt,complete:st});this.subscribe(gt)})}_subscribe(ut){var Et;return null===(Et=this.source)||void 0===Et?void 0:Et.subscribe(ut)}[z.L](){return this}pipe(...ut){return(0,ve.U)(ut)(this)}toPromise(ut){return new(ut=Me(ut))((Et,st)=>{let Tt;this.subscribe(gt=>Tt=gt,gt=>st(gt),()=>Et(Tt))})}}return De.create=nt=>new De(nt),De})();function Me(De){var nt;return null!==(nt=De??me.config.Promise)&&void 0!==nt?nt:Promise}},8645:(Lt,We,O)=>{O.d(We,{x:()=>Se});var y=O(5592),ue=O(7394);const ve=(0,O(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=O(9039),ge=O(1441);let Se=(()=>{class Me extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const De=new Ge(this,this);return De.operator=Q,De}_throwIfClosed(){if(this.closed)throw new ve}next(Q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(Q)}})}error(Q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:De}=this;for(;De.length;)De.shift().error(Q)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:De,isStopped:nt,observers:ut}=this;return De||nt?ue.Lc:(this.currentObservers=null,ut.push(Q),new ue.w0(()=>{this.currentObservers=null,(0,me.P)(ut,Q)}))}_checkFinalizedStatuses(Q){const{hasError:De,thrownError:nt,isStopped:ut}=this;De?Q.error(nt):ut&&Q.complete()}asObservable(){const Q=new y.y;return Q.source=this,Q}}return Me.create=(te,Q)=>new Ge(te,Q),Me})();class Ge extends Se{constructor(te,Q){super(),this.destination=te,this.source=Q}next(te){var Q,De;null===(De=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===De||De.call(Q,te)}error(te){var Q,De;null===(De=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===De||De.call(Q,te)}complete(){var te,Q;null===(Q=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===Q||Q.call(te)}_subscribe(te){var Q,De;return null!==(De=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(te))&&void 0!==De?De:ue.Lc}}},305:(Lt,We,O)=>{O.d(We,{Hp:()=>st,Lv:()=>De});var y=O(4674),ue=O(7394),z=O(2653),ve=O(3894),me=O(2420);const ge=Me("C",void 0,void 0);function Me(ke,Le,Te){return{kind:ke,value:Le,error:Te}}var te=O(7599),Q=O(1441);class De extends ue.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,ue.Nn)(Le)&&Le.add(this)):this.destination=Ot}static create(Le,Te,Be){return new st(Le,Te,Be)}next(Le){this.isStopped?Oe(function Ge(ke){return Me("N",ke,void 0)}(Le),this):this._next(Le)}error(Le){this.isStopped?Oe(function Se(ke){return Me("E",void 0,ke)}(Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?Oe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function ut(ke,Le){return nt.call(ke,Le)}class Et{constructor(Le){this.partialObserver=Le}next(Le){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Le)}catch(Be){Tt(Be)}}error(Le){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Le)}catch(Be){Tt(Be)}else Tt(Le)}complete(){const{partialObserver:Le}=this;if(Le.complete)try{Le.complete()}catch(Te){Tt(Te)}}}class st extends De{constructor(Le,Te,Be){let Ke;if(super(),(0,y.m)(Le)||!Le)Ke={next:Le??void 0,error:Te??void 0,complete:Be??void 0};else{let Ue;this&&z.config.useDeprecatedNextContext?(Ue=Object.create(Le),Ue.unsubscribe=()=>this.unsubscribe(),Ke={next:Le.next&&ut(Le.next,Ue),error:Le.error&&ut(Le.error,Ue),complete:Le.complete&&ut(Le.complete,Ue)}):Ke=Le}this.destination=new Et(Ke)}}function Tt(ke){z.config.useDeprecatedSynchronousErrorHandling?(0,Q.O)(ke):(0,ve.h)(ke)}function Oe(ke,Le){const{onStoppedNotification:Te}=z.config;Te&&te.z.setTimeout(()=>Te(ke,Le))}const Ot={closed:!0,next:me.Z,error:function gt(ke){throw ke},complete:me.Z}},7394:(Lt,We,O)=>{O.d(We,{Lc:()=>ge,w0:()=>me,Nn:()=>Se});var y=O(4674);const z=(0,O(2306).d)(Me=>function(Q){Me(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((De,nt)=>`${nt+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ve=O(9039);class me{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const ut of Q)ut.remove(this);else Q.remove(this);const{initialTeardown:De}=this;if((0,y.m)(De))try{De()}catch(ut){te=ut instanceof z?ut.errors:[ut]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const ut of nt)try{Ge(ut)}catch(Et){te=te??[],Et instanceof z?te=[...te,...Et.errors]:te.push(Et)}}if(te)throw new z(te)}}add(te){var Q;if(te&&te!==this)if(this.closed)Ge(te);else{if(te instanceof me){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(te)}}_hasParent(te){const{_parentage:Q}=this;return Q===te||Array.isArray(Q)&&Q.includes(te)}_addParent(te){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(te),Q):Q?[Q,te]:te}_removeParent(te){const{_parentage:Q}=this;Q===te?this._parentage=null:Array.isArray(Q)&&(0,ve.P)(Q,te)}remove(te){const{_finalizers:Q}=this;Q&&(0,ve.P)(Q,te),te instanceof me&&te._removeParent(this)}}me.EMPTY=(()=>{const Me=new me;return Me.closed=!0,Me})();const ge=me.EMPTY;function Se(Me){return Me instanceof me||Me&&"closed"in Me&&(0,y.m)(Me.remove)&&(0,y.m)(Me.add)&&(0,y.m)(Me.unsubscribe)}function Ge(Me){(0,y.m)(Me)?Me():Me.unsubscribe()}},2653:(Lt,We,O)=>{O.d(We,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Lt,We,O)=>{O.d(We,{z:()=>me});var y=O(7537),z=O(4564),ve=O(2459);function me(...ge){return function ue(){return(0,y.J)(1)}()((0,ve.D)(ge,(0,z.yG)(ge)))}},6232:(Lt,We,O)=>{O.d(We,{E:()=>ue});const ue=new(O(5592).y)(me=>me.complete())},2459:(Lt,We,O)=>{O.d(We,{D:()=>Le});var y=O(4829),ue=O(3093),z=O(5137),ge=O(5592),Ge=O(4971),Me=O(4674),te=O(7103);function De(Te,Be){if(!Te)throw new Error("Iterable cannot be null");return new ge.y(Ke=>{(0,te.f)(Ke,Be,()=>{const Ue=Te[Symbol.asyncIterator]();(0,te.f)(Ke,Be,()=>{Ue.next().then(Vt=>{Vt.done?Ke.complete():Ke.next(Vt.value)})},0,!0)})})}var nt=O(8382),ut=O(4026),Et=O(4266),st=O(3664),Tt=O(5726),gt=O(9853),Oe=O(541);function Le(Te,Be){return Be?function ke(Te,Be){if(null!=Te){if((0,nt.c)(Te))return function ve(Te,Be){return(0,y.Xf)(Te).pipe((0,z.R)(Be),(0,ue.Q)(Be))}(Te,Be);if((0,Et.z)(Te))return function Se(Te,Be){return new ge.y(Ke=>{let Ue=0;return Be.schedule(function(){Ue===Te.length?Ke.complete():(Ke.next(Te[Ue++]),Ke.closed||this.schedule())})})}(Te,Be);if((0,ut.t)(Te))return function me(Te,Be){return(0,y.Xf)(Te).pipe((0,z.R)(Be),(0,ue.Q)(Be))}(Te,Be);if((0,Tt.D)(Te))return De(Te,Be);if((0,st.T)(Te))return function Q(Te,Be){return new ge.y(Ke=>{let Ue;return(0,te.f)(Ke,Be,()=>{Ue=Te[Ge.h](),(0,te.f)(Ke,Be,()=>{let Vt,It;try{({value:Vt,done:It}=Ue.next())}catch(un){return void Ke.error(un)}It?Ke.complete():Ke.next(Vt)},0,!0)}),()=>(0,Me.m)(Ue?.return)&&Ue.return()})}(Te,Be);if((0,Oe.L)(Te))return function Ot(Te,Be){return De((0,Oe.Q)(Te),Be)}(Te,Be)}throw(0,gt.z)(Te)}(Te,Be):(0,y.Xf)(Te)}},4829:(Lt,We,O)=>{O.d(We,{Xf:()=>nt});var y=O(7582),ue=O(4266),z=O(4026),ve=O(5592),me=O(8382),ge=O(5726),Se=O(9853),Ge=O(3664),Me=O(541),te=O(4674),Q=O(3894),De=O(4850);function nt(ke){if(ke instanceof ve.y)return ke;if(null!=ke){if((0,me.c)(ke))return function ut(ke){return new ve.y(Le=>{const Te=ke[De.L]();if((0,te.m)(Te.subscribe))return Te.subscribe(Le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,ue.z)(ke))return function Et(ke){return new ve.y(Le=>{for(let Te=0;Te<ke.length&&!Le.closed;Te++)Le.next(ke[Te]);Le.complete()})}(ke);if((0,z.t)(ke))return function st(ke){return new ve.y(Le=>{ke.then(Te=>{Le.closed||(Le.next(Te),Le.complete())},Te=>Le.error(Te)).then(null,Q.h)})}(ke);if((0,ge.D)(ke))return gt(ke);if((0,Ge.T)(ke))return function Tt(ke){return new ve.y(Le=>{for(const Te of ke)if(Le.next(Te),Le.closed)return;Le.complete()})}(ke);if((0,Me.L)(ke))return function Oe(ke){return gt((0,Me.Q)(ke))}(ke)}throw(0,Se.z)(ke)}function gt(ke){return new ve.y(Le=>{(function Ot(ke,Le){var Te,Be,Ke,Ue;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Te=(0,y.KL)(ke);!(Be=yield Te.next()).done;)if(Le.next(Be.value),Le.closed)return}catch(Vt){Ke={error:Vt}}finally{try{Be&&!Be.done&&(Ue=Te.return)&&(yield Ue.call(Te))}finally{if(Ke)throw Ke.error}}Le.complete()})})(ke,Le).catch(Te=>Le.error(Te))})}},3019:(Lt,We,O)=>{O.d(We,{T:()=>ge});var y=O(7537),ue=O(4829),z=O(6232),ve=O(4564),me=O(2459);function ge(...Se){const Ge=(0,ve.yG)(Se),Me=(0,ve._6)(Se,1/0),te=Se;return te.length?1===te.length?(0,ue.Xf)(te[0]):(0,y.J)(Me)((0,me.D)(te,Ge)):z.E}},2096:(Lt,We,O)=>{O.d(We,{of:()=>z});var y=O(4564),ue=O(2459);function z(...ve){const me=(0,y.yG)(ve);return(0,ue.D)(ve,me)}},8251:(Lt,We,O)=>{O.d(We,{x:()=>ue});var y=O(305);function ue(ve,me,ge,Se,Ge){return new z(ve,me,ge,Se,Ge)}class z extends y.Lv{constructor(me,ge,Se,Ge,Me,te){super(me),this.onFinalize=Me,this.shouldUnsubscribe=te,this._next=ge?function(Q){try{ge(Q)}catch(De){me.error(De)}}:super._next,this._error=Ge?function(Q){try{Ge(Q)}catch(De){me.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(Q){me.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},6328:(Lt,We,O)=>{O.d(We,{b:()=>z});var y=O(1631),ue=O(4674);function z(ve,me){return(0,ue.m)(me)?(0,y.z)(ve,me,1):(0,y.z)(ve,1)}},3572:(Lt,We,O)=>{O.d(We,{d:()=>z});var y=O(9360),ue=O(8251);function z(ve){return(0,y.e)((me,ge)=>{let Se=!1;me.subscribe((0,ue.x)(ge,Ge=>{Se=!0,ge.next(Ge)},()=>{Se||ge.next(ve),ge.complete()}))})}},3997:(Lt,We,O)=>{O.d(We,{x:()=>ve});var y=O(2737),ue=O(9360),z=O(8251);function ve(ge,Se=y.y){return ge=ge??me,(0,ue.e)((Ge,Me)=>{let te,Q=!0;Ge.subscribe((0,z.x)(Me,De=>{const nt=Se(De);(Q||!ge(te,nt))&&(Q=!1,te=nt,Me.next(De))}))})}function me(ge,Se){return ge===Se}},2181:(Lt,We,O)=>{O.d(We,{h:()=>z});var y=O(9360),ue=O(8251);function z(ve,me){return(0,y.e)((ge,Se)=>{let Ge=0;ge.subscribe((0,ue.x)(Se,Me=>ve.call(me,Me,Ge++)&&Se.next(Me)))})}},4716:(Lt,We,O)=>{O.d(We,{x:()=>ue});var y=O(9360);function ue(z){return(0,y.e)((ve,me)=>{try{ve.subscribe(me)}finally{me.add(z)}})}},1374:(Lt,We,O)=>{O.d(We,{P:()=>Se});var y=O(6973),ue=O(2181),z=O(8180),ve=O(3572),me=O(3026),ge=O(2737);function Se(Ge,Me){const te=arguments.length>=2;return Q=>Q.pipe(Ge?(0,ue.h)((De,nt)=>Ge(De,nt,Q)):ge.y,(0,z.q)(1),te?(0,ve.d)(Me):(0,me.T)(()=>new y.K))}},7398:(Lt,We,O)=>{O.d(We,{U:()=>z});var y=O(9360),ue=O(8251);function z(ve,me){return(0,y.e)((ge,Se)=>{let Ge=0;ge.subscribe((0,ue.x)(Se,Me=>{Se.next(ve.call(me,Me,Ge++))}))})}},7537:(Lt,We,O)=>{O.d(We,{J:()=>z});var y=O(1631),ue=O(2737);function z(ve=1/0){return(0,y.z)(ue.y,ve)}},1631:(Lt,We,O)=>{O.d(We,{z:()=>Ge});var y=O(7398),ue=O(4829),z=O(9360),ve=O(7103),me=O(8251),Se=O(4674);function Ge(Me,te,Q=1/0){return(0,Se.m)(te)?Ge((De,nt)=>(0,y.U)((ut,Et)=>te(De,ut,nt,Et))((0,ue.Xf)(Me(De,nt))),Q):("number"==typeof te&&(Q=te),(0,z.e)((De,nt)=>function ge(Me,te,Q,De,nt,ut,Et,st){const Tt=[];let gt=0,Oe=0,Ot=!1;const ke=()=>{Ot&&!Tt.length&&!gt&&te.complete()},Le=Be=>gt<De?Te(Be):Tt.push(Be),Te=Be=>{ut&&te.next(Be),gt++;let Ke=!1;(0,ue.Xf)(Q(Be,Oe++)).subscribe((0,me.x)(te,Ue=>{nt?.(Ue),ut?Le(Ue):te.next(Ue)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(gt--;Tt.length&&gt<De;){const Ue=Tt.shift();Et?(0,ve.f)(te,Et,()=>Te(Ue)):Te(Ue)}ke()}catch(Ue){te.error(Ue)}}))};return Me.subscribe((0,me.x)(te,Le,()=>{Ot=!0,ke()})),()=>{st?.()}}(De,nt,Me,Q)))}},3093:(Lt,We,O)=>{O.d(We,{Q:()=>ve});var y=O(7103),ue=O(9360),z=O(8251);function ve(me,ge=0){return(0,ue.e)((Se,Ge)=>{Se.subscribe((0,z.x)(Ge,Me=>(0,y.f)(Ge,me,()=>Ge.next(Me),ge),()=>(0,y.f)(Ge,me,()=>Ge.complete(),ge),Me=>(0,y.f)(Ge,me,()=>Ge.error(Me),ge)))})}},6699:(Lt,We,O)=>{O.d(We,{R:()=>ve});var y=O(9360),ue=O(8251);function ve(me,ge){return(0,y.e)(function z(me,ge,Se,Ge,Me){return(te,Q)=>{let De=Se,nt=ge,ut=0;te.subscribe((0,ue.x)(Q,Et=>{const st=ut++;nt=De?me(nt,Et,st):(De=!0,Et),Ge&&Q.next(nt)},Me&&(()=>{De&&Q.next(nt),Q.complete()})))}}(me,ge,arguments.length>=2,!0))}},3020:(Lt,We,O)=>{O.d(We,{B:()=>me});var y=O(4829),ue=O(8645),z=O(305),ve=O(9360);function me(Se={}){const{connector:Ge=(()=>new ue.x),resetOnError:Me=!0,resetOnComplete:te=!0,resetOnRefCountZero:Q=!0}=Se;return De=>{let nt,ut,Et,st=0,Tt=!1,gt=!1;const Oe=()=>{ut?.unsubscribe(),ut=void 0},Ot=()=>{Oe(),nt=Et=void 0,Tt=gt=!1},ke=()=>{const Le=nt;Ot(),Le?.unsubscribe()};return(0,ve.e)((Le,Te)=>{st++,!gt&&!Tt&&Oe();const Be=Et=Et??Ge();Te.add(()=>{st--,0===st&&!gt&&!Tt&&(ut=ge(ke,Q))}),Be.subscribe(Te),!nt&&st>0&&(nt=new z.Hp({next:Ke=>Be.next(Ke),error:Ke=>{gt=!0,Oe(),ut=ge(Ot,Me,Ke),Be.error(Ke)},complete:()=>{Tt=!0,Oe(),ut=ge(Ot,te),Be.complete()}}),(0,y.Xf)(Le).subscribe(nt))})(De)}}function ge(Se,Ge,...Me){if(!0===Ge)return void Se();if(!1===Ge)return;const te=new z.Hp({next:()=>{te.unsubscribe(),Se()}});return(0,y.Xf)(Ge(...Me)).subscribe(te)}},7921:(Lt,We,O)=>{O.d(We,{O:()=>ve});var y=O(5211),ue=O(4564),z=O(9360);function ve(...me){const ge=(0,ue.yG)(me);return(0,z.e)((Se,Ge)=>{(ge?(0,y.z)(me,Se,ge):(0,y.z)(me,Se)).subscribe(Ge)})}},5137:(Lt,We,O)=>{O.d(We,{R:()=>ue});var y=O(9360);function ue(z,ve=0){return(0,y.e)((me,ge)=>{ge.add(z.schedule(()=>me.subscribe(ge),ve))})}},4664:(Lt,We,O)=>{O.d(We,{w:()=>ve});var y=O(4829),ue=O(9360),z=O(8251);function ve(me,ge){return(0,ue.e)((Se,Ge)=>{let Me=null,te=0,Q=!1;const De=()=>Q&&!Me&&Ge.complete();Se.subscribe((0,z.x)(Ge,nt=>{Me?.unsubscribe();let ut=0;const Et=te++;(0,y.Xf)(me(nt,Et)).subscribe(Me=(0,z.x)(Ge,st=>Ge.next(ge?ge(nt,st,Et,ut++):st),()=>{Me=null,De()}))},()=>{Q=!0,De()}))})}},8180:(Lt,We,O)=>{O.d(We,{q:()=>ve});var y=O(6232),ue=O(9360),z=O(8251);function ve(me){return me<=0?()=>y.E:(0,ue.e)((ge,Se)=>{let Ge=0;ge.subscribe((0,z.x)(Se,Me=>{++Ge<=me&&(Se.next(Me),me<=Ge&&Se.complete())}))})}},9397:(Lt,We,O)=>{O.d(We,{b:()=>me});var y=O(4674),ue=O(9360),z=O(8251),ve=O(2737);function me(ge,Se,Ge){const Me=(0,y.m)(ge)||Se||Ge?{next:ge,error:Se,complete:Ge}:ge;return Me?(0,ue.e)((te,Q)=>{var De;null===(De=Me.subscribe)||void 0===De||De.call(Me);let nt=!0;te.subscribe((0,z.x)(Q,ut=>{var Et;null===(Et=Me.next)||void 0===Et||Et.call(Me,ut),Q.next(ut)},()=>{var ut;nt=!1,null===(ut=Me.complete)||void 0===ut||ut.call(Me),Q.complete()},ut=>{var Et;nt=!1,null===(Et=Me.error)||void 0===Et||Et.call(Me,ut),Q.error(ut)},()=>{var ut,Et;nt&&(null===(ut=Me.unsubscribe)||void 0===ut||ut.call(Me)),null===(Et=Me.finalize)||void 0===Et||Et.call(Me)}))}):ve.y}},3026:(Lt,We,O)=>{O.d(We,{T:()=>ve});var y=O(6973),ue=O(9360),z=O(8251);function ve(ge=me){return(0,ue.e)((Se,Ge)=>{let Me=!1;Se.subscribe((0,z.x)(Ge,te=>{Me=!0,Ge.next(te)},()=>Me?Ge.complete():Ge.error(ge())))})}function me(){return new y.K}},1954:(Lt,We,O)=>{O.d(We,{o:()=>me});var y=O(7394);class ue extends y.w0{constructor(Se,Ge){super()}schedule(Se,Ge=0){return this}}const z={setInterval(ge,Se,...Ge){const{delegate:Me}=z;return Me?.setInterval?Me.setInterval(ge,Se,...Ge):setInterval(ge,Se,...Ge)},clearInterval(ge){const{delegate:Se}=z;return(Se?.clearInterval||clearInterval)(ge)},delegate:void 0};var ve=O(9039);class me extends ue{constructor(Se,Ge){super(Se,Ge),this.scheduler=Se,this.work=Ge,this.pending=!1}schedule(Se,Ge=0){var Me;if(this.closed)return this;this.state=Se;const te=this.id,Q=this.scheduler;return null!=te&&(this.id=this.recycleAsyncId(Q,te,Ge)),this.pending=!0,this.delay=Ge,this.id=null!==(Me=this.id)&&void 0!==Me?Me:this.requestAsyncId(Q,this.id,Ge),this}requestAsyncId(Se,Ge,Me=0){return z.setInterval(Se.flush.bind(Se,this),Me)}recycleAsyncId(Se,Ge,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return Ge;null!=Ge&&z.clearInterval(Ge)}execute(Se,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(Se,Ge);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Ge){let te,Me=!1;try{this.work(Se)}catch(Q){Me=!0,te=Q||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Ge}=this,{actions:Me}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Me,this),null!=Se&&(this.id=this.recycleAsyncId(Ge,Se,null)),this.delay=null,super.unsubscribe()}}}},2631:(Lt,We,O)=>{O.d(We,{v:()=>z});var y=O(4552);class ue{constructor(me,ge=ue.now){this.schedulerActionCtor=me,this.now=ge}schedule(me,ge=0,Se){return new this.schedulerActionCtor(this,me).schedule(Se,ge)}}ue.now=y.l.now;class z extends ue{constructor(me,ge=ue.now){super(me,ge),this.actions=[],this._active=!1}flush(me){const{actions:ge}=this;if(this._active)return void ge.push(me);let Se;this._active=!0;do{if(Se=me.execute(me.state,me.delay))break}while(me=ge.shift());if(this._active=!1,Se){for(;me=ge.shift();)me.unsubscribe();throw Se}}}},6321:(Lt,We,O)=>{O.d(We,{z:()=>z});var y=O(1954);const z=new(O(2631).v)(y.o)},4552:(Lt,We,O)=>{O.d(We,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(Lt,We,O)=>{O.d(We,{z:()=>y});const y={setTimeout(ue,z,...ve){const{delegate:me}=y;return me?.setTimeout?me.setTimeout(ue,z,...ve):setTimeout(ue,z,...ve)},clearTimeout(ue){const{delegate:z}=y;return(z?.clearTimeout||clearTimeout)(ue)},delegate:void 0}},4971:(Lt,We,O)=>{O.d(We,{h:()=>ue});const ue=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Lt,We,O)=>{O.d(We,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Lt,We,O)=>{O.d(We,{K:()=>ue});const ue=(0,O(2306).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Lt,We,O)=>{O.d(We,{_6:()=>ge,jO:()=>ve,yG:()=>me});var y=O(4674);function z(Se){return Se[Se.length-1]}function ve(Se){return(0,y.m)(z(Se))?Se.pop():void 0}function me(Se){return function ue(Se){return Se&&(0,y.m)(Se.schedule)}(z(Se))?Se.pop():void 0}function ge(Se,Ge){return"number"==typeof z(Se)?Se.pop():Ge}},7453:(Lt,We,O)=>{O.d(We,{D:()=>me});const{isArray:y}=Array,{getPrototypeOf:ue,prototype:z,keys:ve}=Object;function me(Se){if(1===Se.length){const Ge=Se[0];if(y(Ge))return{args:Ge,keys:null};if(function ge(Se){return Se&&"object"==typeof Se&&ue(Se)===z}(Ge)){const Me=ve(Ge);return{args:Me.map(te=>Ge[te]),keys:Me}}}return{args:Se,keys:null}}},9039:(Lt,We,O)=>{function y(ue,z){if(ue){const ve=ue.indexOf(z);0<=ve&&ue.splice(ve,1)}}O.d(We,{P:()=>y})},2306:(Lt,We,O)=>{function y(ue){const ve=ue(me=>{Error.call(me),me.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}O.d(We,{d:()=>y})},2714:(Lt,We,O)=>{function y(ue,z){return ue.reduce((ve,me,ge)=>(ve[me]=z[ge],ve),{})}O.d(We,{n:()=>y})},1441:(Lt,We,O)=>{O.d(We,{O:()=>ve,x:()=>z});var y=O(2653);let ue=null;function z(me){if(y.config.useDeprecatedSynchronousErrorHandling){const ge=!ue;if(ge&&(ue={errorThrown:!1,error:null}),me(),ge){const{errorThrown:Se,error:Ge}=ue;if(ue=null,Se)throw Ge}}else me()}function ve(me){y.config.useDeprecatedSynchronousErrorHandling&&ue&&(ue.errorThrown=!0,ue.error=me)}},7103:(Lt,We,O)=>{function y(ue,z,ve,me=0,ge=!1){const Se=z.schedule(function(){ve(),ge?ue.add(this.schedule(null,me)):this.unsubscribe()},me);if(ue.add(Se),!ge)return Se}O.d(We,{f:()=>y})},2737:(Lt,We,O)=>{function y(ue){return ue}O.d(We,{y:()=>y})},4266:(Lt,We,O)=>{O.d(We,{z:()=>y});const y=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},5726:(Lt,We,O)=>{O.d(We,{D:()=>ue});var y=O(4674);function ue(z){return Symbol.asyncIterator&&(0,y.m)(z?.[Symbol.asyncIterator])}},4674:(Lt,We,O)=>{function y(ue){return"function"==typeof ue}O.d(We,{m:()=>y})},8382:(Lt,We,O)=>{O.d(We,{c:()=>z});var y=O(4850),ue=O(4674);function z(ve){return(0,ue.m)(ve[y.L])}},3664:(Lt,We,O)=>{O.d(We,{T:()=>z});var y=O(4971),ue=O(4674);function z(ve){return(0,ue.m)(ve?.[y.h])}},4026:(Lt,We,O)=>{O.d(We,{t:()=>ue});var y=O(4674);function ue(z){return(0,y.m)(z?.then)}},541:(Lt,We,O)=>{O.d(We,{L:()=>ve,Q:()=>z});var y=O(7582),ue=O(4674);function z(me){return(0,y.FC)(this,arguments,function*(){const Se=me.getReader();try{for(;;){const{value:Ge,done:Me}=yield(0,y.qq)(Se.read());if(Me)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Ge)}}finally{Se.releaseLock()}})}function ve(me){return(0,ue.m)(me?.getReader)}},9360:(Lt,We,O)=>{O.d(We,{A:()=>ue,e:()=>z});var y=O(4674);function ue(ve){return(0,y.m)(ve?.lift)}function z(ve){return me=>{if(ue(me))return me.lift(function(ge){try{return ve(ge,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Lt,We,O)=>{O.d(We,{Z:()=>ve});var y=O(7398);const{isArray:ue}=Array;function ve(me){return(0,y.U)(ge=>function z(me,ge){return ue(ge)?me(...ge):me(ge)}(me,ge))}},2420:(Lt,We,O)=>{function y(){}O.d(We,{Z:()=>y})},8407:(Lt,We,O)=>{O.d(We,{U:()=>z,z:()=>ue});var y=O(2737);function ue(...ve){return z(ve)}function z(ve){return 0===ve.length?y.y:1===ve.length?ve[0]:function(ge){return ve.reduce((Se,Ge)=>Ge(Se),ge)}}},3894:(Lt,We,O)=>{O.d(We,{h:()=>z});var y=O(2653),ue=O(7599);function z(ve){ue.z.setTimeout(()=>{const{onUnhandledError:me}=y.config;if(!me)throw ve;me(ve)})}},9853:(Lt,We,O)=>{function y(ue){return new TypeError(`You provided ${null!==ue&&"object"==typeof ue?"an invalid object":`'${ue}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(We,{z:()=>y})},6814:(Lt,We,O)=>{O.d(We,{Do:()=>st,EM:()=>Ei,HT:()=>ve,JF:()=>Ps,K0:()=>ge,Mx:()=>dt,O5:()=>Ds,Ov:()=>Ms,PM:()=>Gi,S$:()=>nt,V_:()=>Ge,Ye:()=>Tt,b0:()=>Et,bD:()=>Mi,ez:()=>zr,q:()=>z,sg:()=>ai,w_:()=>me});var y=O(5879);let ue=null;function z(){return ue}function ve(E){ue||(ue=E)}class me{}const ge=new y.OlP("DocumentToken");let Se=(()=>{var E;class P{historyGo(M){throw new Error("Not implemented")}}return(E=P).\u0275fac=function(M){return new(M||E)},E.\u0275prov=y.Yz7({token:E,factory:function(){return(0,y.f3M)(Me)},providedIn:"platform"}),P})();const Ge=new y.OlP("Location Initialized");let Me=(()=>{var E;class P extends Se{constructor(){super(),this._doc=(0,y.f3M)(ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(M){const Z=z().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",M,!1),()=>Z.removeEventListener("popstate",M)}onHashChange(M){const Z=z().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",M,!1),()=>Z.removeEventListener("hashchange",M)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(M){this._location.pathname=M}pushState(M,Z,_e){this._history.pushState(M,Z,_e)}replaceState(M,Z,_e){this._history.replaceState(M,Z,_e)}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return(E=P).\u0275fac=function(M){return new(M||E)},E.\u0275prov=y.Yz7({token:E,factory:function(){return new E},providedIn:"platform"}),P})();function te(E,P){if(0==E.length)return P;if(0==P.length)return E;let J=0;return E.endsWith("/")&&J++,P.startsWith("/")&&J++,2==J?E+P.substring(1):1==J?E+P:E+"/"+P}function Q(E){const P=E.match(/#|\?|$/),J=P&&P.index||E.length;return E.slice(0,J-("/"===E[J-1]?1:0))+E.slice(J)}function De(E){return E&&"?"!==E[0]?"?"+E:E}let nt=(()=>{var E;class P{historyGo(M){throw new Error("Not implemented")}}return(E=P).\u0275fac=function(M){return new(M||E)},E.\u0275prov=y.Yz7({token:E,factory:function(){return(0,y.f3M)(Et)},providedIn:"root"}),P})();const ut=new y.OlP("appBaseHref");let Et=(()=>{var E;class P extends nt{constructor(M,Z){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=Z??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return te(this._baseHref,M)}path(M=!1){const Z=this._platformLocation.pathname+De(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&M?`${Z}${_e}`:Z}pushState(M,Z,_e,ot){const Rt=this.prepareExternalUrl(_e+De(ot));this._platformLocation.pushState(M,Z,Rt)}replaceState(M,Z,_e,ot){const Rt=this.prepareExternalUrl(_e+De(ot));this._platformLocation.replaceState(M,Z,Rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return(E=P).\u0275fac=function(M){return new(M||E)(y.LFG(Se),y.LFG(ut,8))},E.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),P})(),st=(()=>{var E;class P extends nt{constructor(M,Z){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(M){const Z=te(this._baseHref,M);return Z.length>0?"#"+Z:Z}pushState(M,Z,_e,ot){let Rt=this.prepareExternalUrl(_e+De(ot));0==Rt.length&&(Rt=this._platformLocation.pathname),this._platformLocation.pushState(M,Z,Rt)}replaceState(M,Z,_e,ot){let Rt=this.prepareExternalUrl(_e+De(ot));0==Rt.length&&(Rt=this._platformLocation.pathname),this._platformLocation.replaceState(M,Z,Rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return(E=P).\u0275fac=function(M){return new(M||E)(y.LFG(Se),y.LFG(ut,8))},E.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac}),P})(),Tt=(()=>{var E;class P{constructor(M){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const Z=this._locationStrategy.getBaseHref();this._basePath=function ke(E){if(new RegExp("^(https?:)?//").test(E)){const[,J]=E.split(/\/\/[^\/]+/);return J}return E}(Q(Ot(Z))),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,Z=""){return this.path()==this.normalize(M+De(Z))}normalize(M){return P.stripTrailingSlash(function Oe(E,P){if(!E||!P.startsWith(E))return P;const J=P.substring(E.length);return""===J||["/",";","?","#"].includes(J[0])?J:P}(this._basePath,Ot(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,Z="",_e=null){this._locationStrategy.pushState(_e,"",M,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+De(Z)),_e)}replaceState(M,Z="",_e=null){this._locationStrategy.replaceState(_e,"",M,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+De(Z)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)})),()=>{const Z=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(Z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",Z){this._urlChangeListeners.forEach(_e=>_e(M,Z))}subscribe(M,Z,_e){return this._subject.subscribe({next:M,error:Z,complete:_e})}}return(E=P).normalizeQueryParams=De,E.joinWithSlash=te,E.stripTrailingSlash=Q,E.\u0275fac=function(M){return new(M||E)(y.LFG(nt))},E.\u0275prov=y.Yz7({token:E,factory:function(){return function gt(){return new Tt((0,y.LFG)(nt))}()},providedIn:"root"}),P})();function Ot(E){return E.replace(/\/index.html$/,"")}function dt(E,P){P=encodeURIComponent(P);for(const J of E.split(";")){const M=J.indexOf("="),[Z,_e]=-1==M?[J,""]:[J.slice(0,M),J.slice(M+1)];if(Z.trim()===P)return decodeURIComponent(_e)}return null}class ws{constructor(P,J,M,Z){this.$implicit=P,this.ngForOf=J,this.index=M,this.count=Z}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{var E;class P{set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}constructor(M,Z,_e){this._viewContainer=M,this._template=Z,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const Z=this._viewContainer;M.forEachOperation((_e,ot,Rt)=>{if(null==_e.previousIndex)Z.createEmbeddedView(this._template,new ws(_e.item,this._ngForOf,-1,-1),null===Rt?void 0:Rt);else if(null==Rt)Z.remove(null===ot?void 0:ot);else if(null!==ot){const An=Z.get(ot);Z.move(An,Rt),mi(An,_e)}});for(let _e=0,ot=Z.length;_e<ot;_e++){const An=Z.get(_e).context;An.index=_e,An.count=ot,An.ngForOf=this._ngForOf}M.forEachIdentityChange(_e=>{mi(Z.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(M,Z){return!0}}return(E=P).\u0275fac=function(M){return new(M||E)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},E.\u0275dir=y.lG2({type:E,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function mi(E,P){E.context.$implicit=P.item}let Ds=(()=>{var E;class P{constructor(M,Z){this._viewContainer=M,this._context=new Ts,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Po("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Po("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,Z){return!0}}return(E=P).\u0275fac=function(M){return new(M||E)(y.Y36(y.s_b),y.Y36(y.Rgc))},E.\u0275dir=y.lG2({type:E,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class Ts{constructor(){this.$implicit=null,this.ngIf=null}}function Po(E,P){if(P&&!P.createEmbeddedView)throw new Error(`${E} must be a TemplateRef, but received '${(0,y.AaK)(P)}'.`)}class Ko{createSubscription(P,J){return(0,y.rg0)(()=>P.subscribe({next:J,error:M=>{throw M}}))}dispose(P){(0,y.rg0)(()=>P.unsubscribe())}}class qo{createSubscription(P,J){return P.then(J,M=>{throw M})}dispose(P){}}const Zo=new qo,mo=new Ko;let Ms=(()=>{var E;class P{constructor(M){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=M}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(M){return this._obj?M!==this._obj?(this._dispose(),this.transform(M)):this._latestValue:(M&&this._subscribe(M),this._latestValue)}_subscribe(M){this._obj=M,this._strategy=this._selectStrategy(M),this._subscription=this._strategy.createSubscription(M,Z=>this._updateLatestValue(M,Z))}_selectStrategy(M){if((0,y.QGY)(M))return Zo;if((0,y.F4k)(M))return mo;throw function yr(E,P){return new y.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(M,Z){M===this._obj&&(this._latestValue=Z,this._ref.markForCheck())}}return(E=P).\u0275fac=function(M){return new(M||E)(y.Y36(y.sBO,16))},E.\u0275pipe=y.Yjl({name:"async",type:E,pure:!1,standalone:!0}),P})(),zr=(()=>{var E;class P{}return(E=P).\u0275fac=function(M){return new(M||E)},E.\u0275mod=y.oAB({type:E}),E.\u0275inj=y.cJS({}),P})();const Mi="browser",vo="server";function Gi(E){return E===vo}let Ei=(()=>{var E;class P{}return(E=P).\u0275prov=(0,y.Yz7)({token:E,providedIn:"root",factory:()=>new eo((0,y.LFG)(ge),window)}),P})();class eo{constructor(P,J){this.document=P,this.window=J,this.offset=()=>[0,0]}setOffset(P){this.offset=Array.isArray(P)?()=>P:P}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(P){this.supportsScrolling()&&this.window.scrollTo(P[0],P[1])}scrollToAnchor(P){if(!this.supportsScrolling())return;const J=function ia(E,P){const J=E.getElementById(P)||E.getElementsByName(P)[0];if(J)return J;if("function"==typeof E.createTreeWalker&&E.body&&"function"==typeof E.body.attachShadow){const M=E.createTreeWalker(E.body,NodeFilter.SHOW_ELEMENT);let Z=M.currentNode;for(;Z;){const _e=Z.shadowRoot;if(_e){const ot=_e.getElementById(P)||_e.querySelector(`[name="${P}"]`);if(ot)return ot}Z=M.nextNode()}}return null}(this.document,P);J&&(this.scrollToElement(J),J.focus())}setHistoryScrollRestoration(P){this.supportsScrolling()&&(this.window.history.scrollRestoration=P)}scrollToElement(P){const J=P.getBoundingClientRect(),M=J.left+this.window.pageXOffset,Z=J.top+this.window.pageYOffset,_e=this.offset();this.window.scrollTo(M-_e[0],Z-_e[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ps{}},9862:(Lt,We,O)=>{O.d(We,{JF:()=>K,eN:()=>we});var y=O(5879),ue=O(2096),z=O(2459),ve=O(5592),me=O(6328),ge=O(2181),Se=O(7398),Ge=O(4716),Me=O(4664),te=O(6814);class Q{}class De{}class nt{constructor(le){this.normalizedNames=new Map,this.lazyUpdate=null,le?"string"==typeof le?this.lazyInit=()=>{this.headers=new Map,le.split("\n").forEach(Xe=>{const re=Xe.indexOf(":");if(re>0){const fe=Xe.slice(0,re),Re=fe.toLowerCase(),tt=Xe.slice(re+1).trim();this.maybeSetNormalizedName(fe,Re),this.headers.has(Re)?this.headers.get(Re).push(tt):this.headers.set(Re,[tt])}})}:typeof Headers<"u"&&le instanceof Headers?(this.headers=new Map,le.forEach((Xe,re)=>{this.setHeaderEntries(re,Xe)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(le).forEach(([Xe,re])=>{this.setHeaderEntries(Xe,re)})}:this.headers=new Map}has(le){return this.init(),this.headers.has(le.toLowerCase())}get(le){this.init();const Xe=this.headers.get(le.toLowerCase());return Xe&&Xe.length>0?Xe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(le){return this.init(),this.headers.get(le.toLowerCase())||null}append(le,Xe){return this.clone({name:le,value:Xe,op:"a"})}set(le,Xe){return this.clone({name:le,value:Xe,op:"s"})}delete(le,Xe){return this.clone({name:le,value:Xe,op:"d"})}maybeSetNormalizedName(le,Xe){this.normalizedNames.has(Xe)||this.normalizedNames.set(Xe,le)}init(){this.lazyInit&&(this.lazyInit instanceof nt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(le=>this.applyUpdate(le)),this.lazyUpdate=null))}copyFrom(le){le.init(),Array.from(le.headers.keys()).forEach(Xe=>{this.headers.set(Xe,le.headers.get(Xe)),this.normalizedNames.set(Xe,le.normalizedNames.get(Xe))})}clone(le){const Xe=new nt;return Xe.lazyInit=this.lazyInit&&this.lazyInit instanceof nt?this.lazyInit:this,Xe.lazyUpdate=(this.lazyUpdate||[]).concat([le]),Xe}applyUpdate(le){const Xe=le.name.toLowerCase();switch(le.op){case"a":case"s":let re=le.value;if("string"==typeof re&&(re=[re]),0===re.length)return;this.maybeSetNormalizedName(le.name,Xe);const fe=("a"===le.op?this.headers.get(Xe):void 0)||[];fe.push(...re),this.headers.set(Xe,fe);break;case"d":const Re=le.value;if(Re){let tt=this.headers.get(Xe);if(!tt)return;tt=tt.filter(qe=>-1===Re.indexOf(qe)),0===tt.length?(this.headers.delete(Xe),this.normalizedNames.delete(Xe)):this.headers.set(Xe,tt)}else this.headers.delete(Xe),this.normalizedNames.delete(Xe)}}setHeaderEntries(le,Xe){const re=(Array.isArray(Xe)?Xe:[Xe]).map(Re=>Re.toString()),fe=le.toLowerCase();this.headers.set(fe,re),this.maybeSetNormalizedName(le,fe)}forEach(le){this.init(),Array.from(this.normalizedNames.keys()).forEach(Xe=>le(this.normalizedNames.get(Xe),this.headers.get(Xe)))}}class Et{encodeKey(le){return Oe(le)}encodeValue(le){return Oe(le)}decodeKey(le){return decodeURIComponent(le)}decodeValue(le){return decodeURIComponent(le)}}const Tt=/%(\d[a-f0-9])/gi,gt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Oe(Ne){return encodeURIComponent(Ne).replace(Tt,(le,Xe)=>gt[Xe]??le)}function Ot(Ne){return`${Ne}`}class ke{constructor(le={}){if(this.updates=null,this.cloneFrom=null,this.encoder=le.encoder||new Et,le.fromString){if(le.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function st(Ne,le){const Xe=new Map;return Ne.length>0&&Ne.replace(/^\?/,"").split("&").forEach(fe=>{const Re=fe.indexOf("="),[tt,qe]=-1==Re?[le.decodeKey(fe),""]:[le.decodeKey(fe.slice(0,Re)),le.decodeValue(fe.slice(Re+1))],Dt=Xe.get(tt)||[];Dt.push(qe),Xe.set(tt,Dt)}),Xe}(le.fromString,this.encoder)}else le.fromObject?(this.map=new Map,Object.keys(le.fromObject).forEach(Xe=>{const re=le.fromObject[Xe],fe=Array.isArray(re)?re.map(Ot):[Ot(re)];this.map.set(Xe,fe)})):this.map=null}has(le){return this.init(),this.map.has(le)}get(le){this.init();const Xe=this.map.get(le);return Xe?Xe[0]:null}getAll(le){return this.init(),this.map.get(le)||null}keys(){return this.init(),Array.from(this.map.keys())}append(le,Xe){return this.clone({param:le,value:Xe,op:"a"})}appendAll(le){const Xe=[];return Object.keys(le).forEach(re=>{const fe=le[re];Array.isArray(fe)?fe.forEach(Re=>{Xe.push({param:re,value:Re,op:"a"})}):Xe.push({param:re,value:fe,op:"a"})}),this.clone(Xe)}set(le,Xe){return this.clone({param:le,value:Xe,op:"s"})}delete(le,Xe){return this.clone({param:le,value:Xe,op:"d"})}toString(){return this.init(),this.keys().map(le=>{const Xe=this.encoder.encodeKey(le);return this.map.get(le).map(re=>Xe+"="+this.encoder.encodeValue(re)).join("&")}).filter(le=>""!==le).join("&")}clone(le){const Xe=new ke({encoder:this.encoder});return Xe.cloneFrom=this.cloneFrom||this,Xe.updates=(this.updates||[]).concat(le),Xe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(le=>this.map.set(le,this.cloneFrom.map.get(le))),this.updates.forEach(le=>{switch(le.op){case"a":case"s":const Xe=("a"===le.op?this.map.get(le.param):void 0)||[];Xe.push(Ot(le.value)),this.map.set(le.param,Xe);break;case"d":if(void 0===le.value){this.map.delete(le.param);break}{let re=this.map.get(le.param)||[];const fe=re.indexOf(Ot(le.value));-1!==fe&&re.splice(fe,1),re.length>0?this.map.set(le.param,re):this.map.delete(le.param)}}}),this.cloneFrom=this.updates=null)}}class Te{constructor(){this.map=new Map}set(le,Xe){return this.map.set(le,Xe),this}get(le){return this.map.has(le)||this.map.set(le,le.defaultValue()),this.map.get(le)}delete(le){return this.map.delete(le),this}has(le){return this.map.has(le)}keys(){return this.map.keys()}}function Ke(Ne){return typeof ArrayBuffer<"u"&&Ne instanceof ArrayBuffer}function Ue(Ne){return typeof Blob<"u"&&Ne instanceof Blob}function Vt(Ne){return typeof FormData<"u"&&Ne instanceof FormData}class un{constructor(le,Xe,re,fe){let Re;if(this.url=Xe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=le.toUpperCase(),function Be(Ne){switch(Ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fe?(this.body=void 0!==re?re:null,Re=fe):Re=re,Re&&(this.reportProgress=!!Re.reportProgress,this.withCredentials=!!Re.withCredentials,Re.responseType&&(this.responseType=Re.responseType),Re.headers&&(this.headers=Re.headers),Re.context&&(this.context=Re.context),Re.params&&(this.params=Re.params)),this.headers||(this.headers=new nt),this.context||(this.context=new Te),this.params){const tt=this.params.toString();if(0===tt.length)this.urlWithParams=Xe;else{const qe=Xe.indexOf("?");this.urlWithParams=Xe+(-1===qe?"?":qe<Xe.length-1?"&":"")+tt}}else this.params=new ke,this.urlWithParams=Xe}serializeBody(){return null===this.body?null:Ke(this.body)||Ue(this.body)||Vt(this.body)||function It(Ne){return typeof URLSearchParams<"u"&&Ne instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ke?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Vt(this.body)?null:Ue(this.body)?this.body.type||null:Ke(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ke?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(le={}){const Xe=le.method||this.method,re=le.url||this.url,fe=le.responseType||this.responseType,Re=void 0!==le.body?le.body:this.body,tt=void 0!==le.withCredentials?le.withCredentials:this.withCredentials,qe=void 0!==le.reportProgress?le.reportProgress:this.reportProgress;let Dt=le.headers||this.headers,St=le.params||this.params;const Jn=le.context??this.context;return void 0!==le.setHeaders&&(Dt=Object.keys(le.setHeaders).reduce((Pn,bn)=>Pn.set(bn,le.setHeaders[bn]),Dt)),le.setParams&&(St=Object.keys(le.setParams).reduce((Pn,bn)=>Pn.set(bn,le.setParams[bn]),St)),new un(Xe,re,Re,{params:St,headers:Dt,context:Jn,reportProgress:qe,responseType:fe,withCredentials:tt})}}var Nn=function(Ne){return Ne[Ne.Sent=0]="Sent",Ne[Ne.UploadProgress=1]="UploadProgress",Ne[Ne.ResponseHeader=2]="ResponseHeader",Ne[Ne.DownloadProgress=3]="DownloadProgress",Ne[Ne.Response=4]="Response",Ne[Ne.User=5]="User",Ne}(Nn||{});class En{constructor(le,Xe=200,re="OK"){this.headers=le.headers||new nt,this.status=void 0!==le.status?le.status:Xe,this.statusText=le.statusText||re,this.url=le.url||null,this.ok=this.status>=200&&this.status<300}}class cr extends En{constructor(le={}){super(le),this.type=Nn.ResponseHeader}clone(le={}){return new cr({headers:le.headers||this.headers,status:void 0!==le.status?le.status:this.status,statusText:le.statusText||this.statusText,url:le.url||this.url||void 0})}}class rr extends En{constructor(le={}){super(le),this.type=Nn.Response,this.body=void 0!==le.body?le.body:null}clone(le={}){return new rr({body:void 0!==le.body?le.body:this.body,headers:le.headers||this.headers,status:void 0!==le.status?le.status:this.status,statusText:le.statusText||this.statusText,url:le.url||this.url||void 0})}}class In extends En{constructor(le){super(le,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${le.url||"(unknown url)"}`:`Http failure response for ${le.url||"(unknown url)"}: ${le.status} ${le.statusText}`,this.error=le.error||null}}function mn(Ne,le){return{body:le,headers:Ne.headers,context:Ne.context,observe:Ne.observe,params:Ne.params,reportProgress:Ne.reportProgress,responseType:Ne.responseType,withCredentials:Ne.withCredentials}}let we=(()=>{var Ne;class le{constructor(re){this.handler=re}request(re,fe,Re={}){let tt;if(re instanceof un)tt=re;else{let St,Jn;St=Re.headers instanceof nt?Re.headers:new nt(Re.headers),Re.params&&(Jn=Re.params instanceof ke?Re.params:new ke({fromObject:Re.params})),tt=new un(re,fe,void 0!==Re.body?Re.body:null,{headers:St,context:Re.context,params:Jn,reportProgress:Re.reportProgress,responseType:Re.responseType||"json",withCredentials:Re.withCredentials})}const qe=(0,ue.of)(tt).pipe((0,me.b)(St=>this.handler.handle(St)));if(re instanceof un||"events"===Re.observe)return qe;const Dt=qe.pipe((0,ge.h)(St=>St instanceof rr));switch(Re.observe||"body"){case"body":switch(tt.responseType){case"arraybuffer":return Dt.pipe((0,Se.U)(St=>{if(null!==St.body&&!(St.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return St.body}));case"blob":return Dt.pipe((0,Se.U)(St=>{if(null!==St.body&&!(St.body instanceof Blob))throw new Error("Response is not a Blob.");return St.body}));case"text":return Dt.pipe((0,Se.U)(St=>{if(null!==St.body&&"string"!=typeof St.body)throw new Error("Response is not a string.");return St.body}));default:return Dt.pipe((0,Se.U)(St=>St.body))}case"response":return Dt;default:throw new Error(`Unreachable: unhandled observe type ${Re.observe}}`)}}delete(re,fe={}){return this.request("DELETE",re,fe)}get(re,fe={}){return this.request("GET",re,fe)}head(re,fe={}){return this.request("HEAD",re,fe)}jsonp(re,fe){return this.request("JSONP",re,{params:(new ke).append(fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(re,fe={}){return this.request("OPTIONS",re,fe)}patch(re,fe,Re={}){return this.request("PATCH",re,mn(Re,fe))}post(re,fe,Re={}){return this.request("POST",re,mn(Re,fe))}put(re,fe,Re={}){return this.request("PUT",re,mn(Re,fe))}}return(Ne=le).\u0275fac=function(re){return new(re||Ne)(y.LFG(Q))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac}),le})();function Cn(Ne,le){return le(Ne)}function Xt(Ne,le){return(Xe,re)=>le.intercept(Xe,{handle:fe=>Ne(fe,re)})}const $t=new y.OlP(""),wn=new y.OlP(""),qn=new y.OlP("");function lr(){let Ne=null;return(le,Xe)=>{null===Ne&&(Ne=((0,y.f3M)($t,{optional:!0})??[]).reduceRight(Xt,Cn));const re=(0,y.f3M)(y.HDt),fe=re.add();return Ne(le,Xe).pipe((0,Ge.x)(()=>re.remove(fe)))}}let rn=(()=>{var Ne;class le extends Q{constructor(re,fe){super(),this.backend=re,this.injector=fe,this.chain=null,this.pendingTasks=(0,y.f3M)(y.HDt)}handle(re){if(null===this.chain){const Re=Array.from(new Set([...this.injector.get(wn),...this.injector.get(qn,[])]));this.chain=Re.reduceRight((tt,qe)=>function yn(Ne,le,Xe){return(re,fe)=>Xe.runInContext(()=>le(re,Re=>Ne(Re,fe)))}(tt,qe,this.injector),Cn)}const fe=this.pendingTasks.add();return this.chain(re,Re=>this.backend.handle(Re)).pipe((0,Ge.x)(()=>this.pendingTasks.remove(fe)))}}return(Ne=le).\u0275fac=function(re){return new(re||Ne)(y.LFG(De),y.LFG(y.lqb))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac}),le})();const ii=/^\)\]\}',?\n/;let Mn=(()=>{var Ne;class le{constructor(re){this.xhrFactory=re}handle(re){if("JSONP"===re.method)throw new y.vHH(-2800,!1);const fe=this.xhrFactory;return(fe.\u0275loadImpl?(0,z.D)(fe.\u0275loadImpl()):(0,ue.of)(null)).pipe((0,Me.w)(()=>new ve.y(tt=>{const qe=fe.build();if(qe.open(re.method,re.urlWithParams),re.withCredentials&&(qe.withCredentials=!0),re.headers.forEach((dr,ir)=>qe.setRequestHeader(dr,ir.join(","))),re.headers.has("Accept")||qe.setRequestHeader("Accept","application/json, text/plain, */*"),!re.headers.has("Content-Type")){const dr=re.detectContentTypeHeader();null!==dr&&qe.setRequestHeader("Content-Type",dr)}if(re.responseType){const dr=re.responseType.toLowerCase();qe.responseType="json"!==dr?dr:"text"}const Dt=re.serializeBody();let St=null;const Jn=()=>{if(null!==St)return St;const dr=qe.statusText||"OK",ir=new nt(qe.getAllResponseHeaders()),Ji=function Ir(Ne){return"responseURL"in Ne&&Ne.responseURL?Ne.responseURL:/^X-Request-URL:/m.test(Ne.getAllResponseHeaders())?Ne.getResponseHeader("X-Request-URL"):null}(qe)||re.url;return St=new cr({headers:ir,status:qe.status,statusText:dr,url:Ji}),St},Pn=()=>{let{headers:dr,status:ir,statusText:Ji,url:ws}=Jn(),ai=null;204!==ir&&(ai=typeof qe.response>"u"?qe.responseText:qe.response),0===ir&&(ir=ai?200:0);let mi=ir>=200&&ir<300;if("json"===re.responseType&&"string"==typeof ai){const zi=ai;ai=ai.replace(ii,"");try{ai=""!==ai?JSON.parse(ai):null}catch(Ds){ai=zi,mi&&(mi=!1,ai={error:Ds,text:ai})}}mi?(tt.next(new rr({body:ai,headers:dr,status:ir,statusText:Ji,url:ws||void 0})),tt.complete()):tt.error(new In({error:ai,headers:dr,status:ir,statusText:Ji,url:ws||void 0}))},bn=dr=>{const{url:ir}=Jn(),Ji=new In({error:dr,status:qe.status||0,statusText:qe.statusText||"Unknown Error",url:ir||void 0});tt.error(Ji)};let dt=!1;const Ur=dr=>{dt||(tt.next(Jn()),dt=!0);let ir={type:Nn.DownloadProgress,loaded:dr.loaded};dr.lengthComputable&&(ir.total=dr.total),"text"===re.responseType&&qe.responseText&&(ir.partialText=qe.responseText),tt.next(ir)},Lr=dr=>{let ir={type:Nn.UploadProgress,loaded:dr.loaded};dr.lengthComputable&&(ir.total=dr.total),tt.next(ir)};return qe.addEventListener("load",Pn),qe.addEventListener("error",bn),qe.addEventListener("timeout",bn),qe.addEventListener("abort",bn),re.reportProgress&&(qe.addEventListener("progress",Ur),null!==Dt&&qe.upload&&qe.upload.addEventListener("progress",Lr)),qe.send(Dt),tt.next({type:Nn.Sent}),()=>{qe.removeEventListener("error",bn),qe.removeEventListener("abort",bn),qe.removeEventListener("load",Pn),qe.removeEventListener("timeout",bn),re.reportProgress&&(qe.removeEventListener("progress",Ur),null!==Dt&&qe.upload&&qe.upload.removeEventListener("progress",Lr)),qe.readyState!==qe.DONE&&qe.abort()}})))}}return(Ne=le).\u0275fac=function(re){return new(re||Ne)(y.LFG(te.JF))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac}),le})();const Nr=new y.OlP("XSRF_ENABLED"),jn=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),xn=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class si{}let On=(()=>{var Ne;class le{constructor(re,fe,Re){this.doc=re,this.platform=fe,this.cookieName=Re,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const re=this.doc.cookie||"";return re!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,te.Mx)(re,this.cookieName),this.lastCookieString=re),this.lastToken}}return(Ne=le).\u0275fac=function(re){return new(re||Ne)(y.LFG(te.K0),y.LFG(y.Lbi),y.LFG(jn))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac}),le})();function Ln(Ne,le){const Xe=Ne.url.toLowerCase();if(!(0,y.f3M)(Nr)||"GET"===Ne.method||"HEAD"===Ne.method||Xe.startsWith("http://")||Xe.startsWith("https://"))return le(Ne);const re=(0,y.f3M)(si).getToken(),fe=(0,y.f3M)(xn);return null!=re&&!Ne.headers.has(fe)&&(Ne=Ne.clone({headers:Ne.headers.set(fe,re)})),le(Ne)}var Ar=function(Ne){return Ne[Ne.Interceptors=0]="Interceptors",Ne[Ne.LegacyInterceptors=1]="LegacyInterceptors",Ne[Ne.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ne[Ne.NoXsrfProtection=3]="NoXsrfProtection",Ne[Ne.JsonpSupport=4]="JsonpSupport",Ne[Ne.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ne[Ne.Fetch=6]="Fetch",Ne}(Ar||{});function qr(Ne,le){return{\u0275kind:Ne,\u0275providers:le}}function Hr(...Ne){const le=[we,Mn,rn,{provide:Q,useExisting:rn},{provide:De,useExisting:Mn},{provide:wn,useValue:Ln,multi:!0},{provide:Nr,useValue:!0},{provide:si,useClass:On}];for(const Xe of Ne)le.push(...Xe.\u0275providers);return(0,y.MR2)(le)}const oi=new y.OlP("LEGACY_INTERCEPTOR_FN");let K=(()=>{var Ne;class le{}return(Ne=le).\u0275fac=function(re){return new(re||Ne)},Ne.\u0275mod=y.oAB({type:Ne}),Ne.\u0275inj=y.cJS({providers:[Hr(qr(Ar.LegacyInterceptors,[{provide:oi,useFactory:lr},{provide:wn,useExisting:oi,multi:!0}]))]}),le})()},5879:(Lt,We,O)=>{O.d(We,{$8M:()=>Al,$WT:()=>Rr,$Z:()=>Yy,AFp:()=>Xl,ALo:()=>QI,AaK:()=>De,BQk:()=>Kp,CHM:()=>Ua,CRH:()=>fw,EJc:()=>OC,EpF:()=>xv,F4k:()=>Nv,FYo:()=>Ug,FiY:()=>zc,G48:()=>mb,Gf:()=>dw,GfV:()=>ky,Gpc:()=>Et,HDt:()=>kw,JOm:()=>ga,KtG:()=>wl,LFG:()=>ht,LSH:()=>Yf,Lbi:()=>ap,Lck:()=>vT,MAs:()=>Rv,MMx:()=>UI,MR2:()=>Xf,NdJ:()=>Om,Ojb:()=>x_,OlP:()=>Kr,Oqu:()=>s,P3R:()=>bg,PXZ:()=>ab,Q6J:()=>Yu,QGY:()=>Pm,Qsj:()=>Py,R0b:()=>Is,RDi:()=>__,Rgc:()=>Xm,SBq:()=>Gu,Sil:()=>FC,Suo:()=>hw,TTD:()=>vn,TgZ:()=>Gp,Tol:()=>Kv,VuI:()=>zb,X6Q:()=>gb,XFs:()=>Jt,Xpm:()=>Ko,Xq5:()=>wu,Xts:()=>gu,Y36:()=>qd,YKP:()=>LI,YNc:()=>pl,Yjl:()=>ct,Yz7:()=>$t,Z0I:()=>rn,ZZ4:()=>DE,_Bn:()=>kI,_UZ:()=>xm,_c5:()=>Nb,_uU:()=>e_,aQg:()=>TE,c2e:()=>Ow,cJS:()=>qn,cg1:()=>z0,dDg:()=>rb,dqk:()=>Mn,eFA:()=>Gw,eJc:()=>aE,ekj:()=>Bm,eoX:()=>jw,f3M:()=>_t,g9A:()=>bc,h0i:()=>Df,hGG:()=>Pb,hij:()=>u,iGM:()=>lw,ifc:()=>Re,ip1:()=>Pw,jDz:()=>BI,kL8:()=>aI,lG2:()=>Ye,lcZ:()=>XI,lqb:()=>mu,lri:()=>Bw,n5z:()=>Ga,oAB:()=>Ms,oxw:()=>Ov,q4F:()=>Bg,qFp:()=>Wb,qLn:()=>_u,qOj:()=>ps,qZA:()=>Wp,rWj:()=>Vw,rg0:()=>Z,sBO:()=>yb,s_b:()=>l_,soG:()=>h_,tb:()=>yE,tp0:()=>Wa,uIk:()=>ad,vHH:()=>ke,vpe:()=>Wu,wAp:()=>rg,xp6:()=>tm,ynx:()=>vf,z2F:()=>ag,zSh:()=>np,zs3:()=>vu});var y=O(8645),ue=O(7394),z=O(5592),ve=O(3019),me=O(5619),ge=O(2096),Se=O(3020),Ge=O(4664),Me=O(3997);function te(t){for(let r in t)if(t[r]===te)return r;throw Error("Could not find renamed property on target object.")}function Q(t,r){for(const o in r)r.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=r[o])}function De(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(De).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function nt(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ut=te({__forward_ref__:te});function Et(t){return t.__forward_ref__=Et,t.toString=function(){return De(this())},t}function st(t){return Tt(t)?t():t}function Tt(t){return"function"==typeof t&&t.hasOwnProperty(ut)&&t.__forward_ref__===Et}function gt(t){return t&&!!t.\u0275providers}const Ot="https://g.co/ng/security#xss";class ke extends Error{constructor(r,o){super(function Le(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,o)),this.code=r}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function It(t,r){throw new ke(-201,!1)}function bt(t,r){null==t&&function Ct(t,r,o,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function $t(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function qn(t){return{providers:t.providers||[],imports:t.imports||[]}}function lr(t){return Ft(t,Qn)||Ft(t,pi)}function rn(t){return null!==lr(t)}function Ft(t,r){return t.hasOwnProperty(r)?t[r]:null}function Vn(t){return t&&(t.hasOwnProperty(xr)||t.hasOwnProperty(zn))?t[xr]:null}const Qn=te({\u0275prov:te}),xr=te({\u0275inj:te}),pi=te({ngInjectableDef:te}),zn=te({ngInjectorDef:te});var Jt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Jt||{});let Qt;function Gn(t){const r=Qt;return Qt=t,r}function ii(t,r,o){const a=lr(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Jt.Optional?null:void 0!==r?r:void It(De(t))}const Mn=globalThis,oi={},di="__NG_DI_FLAG__",gi="ngTempTokenPath",ye=/\n/gm,$="__source";let oe;function Ee(t){const r=oe;return oe=t,r}function Ve(t,r=Jt.Default){if(void 0===oe)throw new ke(-203,!1);return null===oe?ii(t,void 0,r):oe.get(t,r&Jt.Optional?null:void 0,r)}function ht(t,r=Jt.Default){return(function sn(){return Qt}()||Ve)(st(t),r)}function _t(t,r=Jt.Default){return ht(t,nn(r))}function nn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yt(t){const r=[];for(let o=0;o<t.length;o++){const a=st(t[o]);if(Array.isArray(a)){if(0===a.length)throw new ke(900,!1);let c,d=Jt.Default;for(let g=0;g<a.length;g++){const _=a[g],T=Ne(_);"number"==typeof T?-1===T?c=_.token:d|=T:c=_}r.push(ht(c,d))}else r.push(ht(a))}return r}function Xn(t,r){return t[di]=r,t.prototype[di]=r,t}function Ne(t){return t[di]}function re(t){return{toString:t}.toString()}var fe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(fe||{}),Re=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Re||{});const tt={},qe=[],Dt=te({\u0275cmp:te}),St=te({\u0275dir:te}),Jn=te({\u0275pipe:te}),Pn=te({\u0275mod:te}),bn=te({\u0275fac:te}),dt=te({__NG_ELEMENT_ID__:te}),Ur=te({__NG_ENV_ID__:te});function Lr(t,r,o){let a=t.length;for(;;){const c=t.indexOf(r,o);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const d=r.length;if(c+d===a||t.charCodeAt(c+d)<=32)return c}o=c+1}}function dr(t,r,o){let a=0;for(;a<o.length;){const c=o[a];if("number"==typeof c){if(0!==c)break;a++;const d=o[a++],g=o[a++],_=o[a++];t.setAttribute(r,g,_,d)}else{const d=c,g=o[++a];Ji(d)?t.setProperty(r,d,g):t.setAttribute(r,d,g),a++}}return a}function ir(t){return 3===t||4===t||6===t}function Ji(t){return 64===t.charCodeAt(0)}function ws(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?o=c:0===o||ai(t,o,c,null,-1===o||2===o?r[++a]:null)}}return t}function ai(t,r,o,a,c){let d=0,g=t.length;if(-1===r)g=-1;else for(;d<t.length;){const _=t[d++];if("number"==typeof _){if(_===r){g=-1;break}if(_>r){g=d-1;break}}}for(;d<t.length;){const _=t[d];if("number"==typeof _)break;if(_===o){if(null===a)return void(null!==c&&(t[d+1]=c));if(a===t[d+1])return void(t[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==g&&(t.splice(g,0,r),d=g+1),t.splice(d++,0,o),null!==a&&t.splice(d++,0,a),null!==c&&t.splice(d++,0,c)}const mi="ng-template";function zi(t,r,o){let a=0,c=!0;for(;a<t.length;){let d=t[a++];if("string"==typeof d&&c){const g=t[a++];if(o&&"class"===d&&-1!==Lr(g.toLowerCase(),r,0))return!0}else{if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}"number"==typeof d&&(c=!1)}}return!1}function Ds(t){return 4===t.type&&t.value!==mi}function Ts(t,r,o){return r===(4!==t.type||o?t.value:mi)}function Po(t,r,o){let a=4;const c=t.attrs||[],d=function Xs(t){for(let r=0;r<t.length;r++)if(ir(t[r]))return r;return t.length}(c);let g=!1;for(let _=0;_<r.length;_++){const T=r[_];if("number"!=typeof T){if(!g)if(4&a){if(a=2|1&a,""!==T&&!Ts(t,T,o)||""===T&&1===r.length){if(Un(a))return!1;g=!0}}else{const k=8&a?T:r[++_];if(8&a&&null!==t.attrs){if(!zi(t.attrs,k,o)){if(Un(a))return!1;g=!0}continue}const se=sr(8&a?"class":T,c,Ds(t),o);if(-1===se){if(Un(a))return!1;g=!0;continue}if(""!==k){let Ae;Ae=se>d?"":c[se+1].toLowerCase();const $e=8&a?Ae:null;if($e&&-1!==Lr($e,k,0)||2&a&&k!==Ae){if(Un(a))return!1;g=!0}}}}else{if(!g&&!Un(a)&&!Un(T))return!1;if(g&&Un(T))continue;g=!1,a=T|1&a}}return Un(a)||g}function Un(t){return 0==(1&t)}function sr(t,r,o,a){if(null===r)return-1;let c=0;if(a||!o){let d=!1;for(;c<r.length;){const g=r[c];if(g===t)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let _=r[++c];for(;"string"==typeof _;)_=r[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function es(t,r){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const a=t[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,t)}function as(t,r,o=!1){for(let a=0;a<r.length;a++)if(Po(t,r[a],o))return!0;return!1}function Yr(t,r){return t?":not("+r.trim()+")":r}function Oo(t){let r=t[0],o=1,a=2,c="",d=!1;for(;o<t.length;){let g=t[o];if("string"==typeof g)if(2&a){const _=t[++o];c+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&a?c+="."+g:4&a&&(c+=" "+g);else""!==c&&!Un(g)&&(r+=Yr(d,c),c=""),a=g,d=d||!Un(a);o++}return""!==c&&(r+=Yr(d,c)),r}function Ko(t){return re(()=>{const r=$n(t),o={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===fe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Re.Emulated,styles:t.styles||qe,_:null,schemas:t.schemas||null,tView:null,id:""};yi(o);const a=t.dependencies;return o.directiveDefs=Ci(a,!1),o.pipeDefs=Ci(a,!0),o.id=function fr(t){let r=0;const o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of o)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(o),o})}function Zo(t){return et(t)||kt(t)}function mo(t){return null!==t}function Ms(t){return re(()=>({type:t.type,bootstrap:t.bootstrap||qe,declarations:t.declarations||qe,imports:t.imports||qe,exports:t.exports||qe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ce(t,r){if(null==t)return tt;const o={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=a,r&&(r[c]=d)}return o}function Ye(t){return re(()=>{const r=$n(t);return yi(r),r})}function ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function et(t){return t[Dt]||null}function kt(t){return t[St]||null}function cn(t){return t[Jn]||null}function Rr(t){const r=et(t)||kt(t)||cn(t);return null!==r&&r.standalone}function er(t,r){const o=t[Pn]||null;if(!o&&!0===r)throw new Error(`Type ${De(t)} does not have '\u0275mod' property.`);return o}function $n(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||tt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||qe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ce(t.inputs,r),outputs:Ce(t.outputs)}}function yi(t){t.features?.forEach(r=>r(t))}function Ci(t,r){if(!t)return null;const o=r?cn:Zo;return()=>("function"==typeof t?t():t).map(a=>o(a)).filter(mo)}const wr=0,Nt=1,ln=2,hr=3,Fr=4,Cs=5,vi=6,xs=7,zr=8,Mi=9,vo=10,dn=11,_i=12,Js=13,Gi=14,Qr=15,Dr=16,ao=17,Ei=18,eo=19,ia=20,Ns=21,Ps=22,_o=23,Eo=24,Hn=25,Os=1,Lo=2,Ui=7,Br=9,xi=11;function Bi(t){return Array.isArray(t)&&"object"==typeof t[Os]}function bi(t){return Array.isArray(t)&&!0===t[Os]}function ts(t){return 0!=(4&t.flags)}function ks(t){return t.componentOffset>-1}function Si(t){return 1==(1&t.flags)}function gs(t){return!!t.template}function Fo(t){return 0!=(512&t[ln])}function Sn(t,r){return t.hasOwnProperty(bn)?t[bn]:null}let Wn=null,Ni=!1;function Tr(t){const r=Wn;return Wn=t,r}const Or={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Fs(t){if(!Do(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ss(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function wo(t){t.dirty=!0,function bs(t){if(void 0===t.liveConsumerNode)return;const r=Ni;Ni=!0;try{for(const o of t.liveConsumerNode)o.dirty||wo(o)}finally{Ni=r}}(t),t.consumerMarkedDirty?.(t)}function Ii(t){return t&&(t.nextProducerIndex=0),Tr(t)}function Uo(t,r){if(Tr(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Do(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)Wi(t.producerNode[o],t.producerIndexOfThis[o]);for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ss(t){To(t);for(let r=0;r<t.producerNode.length;r++){const o=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==o.version||(Fs(o),a!==o.version))return!0}return!1}function Oa(t){if(To(t),Do(t))for(let r=0;r<t.producerNode.length;r++)Wi(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Wi(t,r){if(function oa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),To(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Wi(t.producerNode[a],t.producerIndexOfThis[a]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];To(c),c.producerIndexOfThis[a]=r}}function Do(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function To(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let ns=null;function Z(t){const r=Tr(null);try{return t()}finally{Tr(r)}}const ot=()=>{},Rt={...Or,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:ot};class Rn{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function vn(){return Bn}function Bn(t){return t.type.prototype.ngOnChanges&&(t.setInput=_r),ei}function ei(){const t=Bs(this),r=t?.current;if(r){const o=t.previous;if(o===tt)t.previous=r;else for(let a in r)o[a]=r[a];t.current=null,this.ngOnChanges(r)}}function _r(t,r,o,a){const c=this.declaredInputs[o],d=Bs(t)||function vs(t,r){return t[ci]=r}(t,{previous:tt,current:null}),g=d.current||(d.current={}),_=d.previous,T=_[c];g[c]=new Rn(T&&T.currentValue,r,_===tt),t[a]=r}vn.ngInherit=!0;const ci="__ngSimpleChanges__";function Bs(t){return t[ci]||null}const Pi=function(t,r,o){};function Mr(t){for(;Array.isArray(t);)t=t[wr];return t}function ca(t,r){return Mr(r[t])}function js(t,r){return Mr(r[t.index])}function la(t,r){return t.data[r]}function Ia(t,r){return t[r]}function li(t,r){const o=r[t];return Bi(o)?o:o[wr]}function da(t,r){return null==r?null:t[r]}function El(t){t[ao]=0}function Il(t){1024&t[ln]||(t[ln]|=1024,gd(t,1))}function pd(t){1024&t[ln]&&(t[ln]&=-1025,gd(t,-1))}function gd(t,r){let o=t[hr];if(null===o)return;o[Cs]+=r;let a=o;for(o=o[hr];null!==o&&(1===r&&1===a[Cs]||-1===r&&0===a[Cs]);)o[Cs]+=r,a=o,o=o[hr]}const Dn={lFrame:V(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ru(){return Dn.bindingsEnabled}function mt(){return Dn.lFrame.lView}function Er(){return Dn.lFrame.tView}function Ua(t){return Dn.lFrame.contextLView=t,t[zr]}function wl(t){return Dn.lFrame.contextLView=null,t}function hi(){let t=Au();for(;null!==t&&64===t.type;)t=t.parent;return t}function Au(){return Dn.lFrame.currentTNode}function $s(t,r){const o=Dn.lFrame;o.currentTNode=t,o.isParent=r}function Ki(){return Dn.lFrame.isParent}function Di(){Dn.lFrame.isParent=!1}function Ta(){return Dn.lFrame.bindingIndex++}function Hs(t){const r=Dn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,o}function Vi(t,r){const o=Dn.lFrame;o.bindingIndex=o.bindingRootIndex=t,ho(r)}function ho(t){Dn.lFrame.currentDirectiveIndex=t}function Dl(){return Dn.lFrame.currentQueryIndex}function m(t){Dn.lFrame.currentQueryIndex=t}function I(t){const r=t[Nt];return 2===r.type?r.declTNode:1===r.type?t[vi]:null}function b(t,r,o){if(o&Jt.SkipSelf){let c=r,d=t;for(;!(c=c.parent,null!==c||o&Jt.Host||(c=I(d),null===c||(d=d[Gi],10&c.type))););if(null===c)return!1;r=c,t=d}const a=Dn.lFrame=S();return a.currentTNode=r,a.lView=t,!0}function D(t){const r=S(),o=t[Nt];Dn.lFrame=r,r.currentTNode=o.firstChild,r.lView=t,r.tView=o,r.contextLView=t,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function S(){const t=Dn.lFrame,r=null===t?null:t.child;return null===r?V(t):r}function V(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function X(){const t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ce=X;function he(){const t=X();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gn(){return Dn.lFrame.selectedIndex}function ti(t){Dn.lFrame.selectedIndex=t}function _n(){const t=Dn.lFrame;return la(t.tView,t.selectedIndex)}let kc=!0;function Mu(){return kc}function Go(t){kc=t}function ha(t,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const d=t.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:T,ngAfterViewChecked:k,ngOnDestroy:H}=d;g&&(t.contentHooks??=[]).push(-o,g),_&&((t.contentHooks??=[]).push(o,_),(t.contentCheckHooks??=[]).push(o,_)),T&&(t.viewHooks??=[]).push(-o,T),k&&((t.viewHooks??=[]).push(o,k),(t.viewCheckHooks??=[]).push(o,k)),null!=H&&(t.destroyHooks??=[]).push(o,H)}}function Gs(t,r,o){xu(t,r,3,o)}function ni(t,r,o,a){(3&t[ln])===o&&xu(t,r,o,a)}function an(t,r){let o=t[ln];(3&o)===r&&(o&=8191,o+=1,t[ln]=o)}function xu(t,r,o,a){const d=a??-1,g=r.length-1;let _=0;for(let T=void 0!==a?65535&t[ao]:0;T<g;T++)if("number"==typeof r[T+1]){if(_=r[T],null!=a&&_>=a)break}else r[T]<0&&(t[ao]+=65536),(_<d||-1==d)&&(Cf(t,o,r,T),t[ao]=(4294901760&t[ao])+T+2),T++}function mr(t,r){Pi(4,t,r);const o=Tr(null);try{r.call(t)}finally{Tr(o),Pi(5,t,r)}}function Cf(t,r,o,a){const c=o[a]<0,d=o[a+1],_=t[c?-o[a]:o[a]];c?t[ln]>>13<t[ao]>>16&&(3&t[ln])===r&&(t[ln]+=8192,mr(_,d)):mr(_,d)}const Wr=-1;class Pt{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function dc(t){return t!==Wr}function rs(t){return 32767&t}function fa(t,r){let o=function Tl(t){return t>>16}(t),a=r;for(;o>0;)a=a[Gi],o--;return a}let Uc=!0;function ea(t){const r=Uc;return Uc=t,r}const hc=255,Ro=5;let md=0;const no={};function Bc(t,r){const o=fc(t,r);if(-1!==o)return o;const a=r[Nt];a.firstCreatePass&&(t.injectorIndex=r.length,Sa(a.data,t),Sa(r,null),Sa(a.blueprint,null));const c=ja(t,r),d=t.injectorIndex;if(dc(c)){const g=rs(c),_=fa(c,r),T=_[Nt].data;for(let k=0;k<8;k++)r[d+k]=_[g+k]|T[g+k]}return r[d+8]=c,d}function Sa(t,r){t.push(0,0,0,0,0,0,0,0,r)}function fc(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function ja(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,a=null,c=r;for(;null!==c;){if(a=Sl(c),null===a)return Wr;if(o++,c=c[Gi],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return Wr}function pc(t,r,o){!function ba(t,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(dt)&&(a=o[dt]),null==a&&(a=o[dt]=md++);const c=a&hc;r.data[t+(c>>Ro)]|=1<<c}(t,r,o)}function cs(t,r,o){if(o&Jt.Optional||void 0!==t)return t;It()}function Aa(t,r,o,a){if(o&Jt.Optional&&void 0===a&&(a=null),!(o&(Jt.Self|Jt.Host))){const c=t[Mi],d=Gn(void 0);try{return c?c.get(r,a,o&Jt.Optional):ii(r,a,o&Jt.Optional)}finally{Gn(d)}}return cs(a,0,o)}function $a(t,r,o,a=Jt.Default,c){if(null!==t){if(2048&r[ln]&&!(a&Jt.Self)){const g=function Af(t,r,o,a,c){let d=t,g=r;for(;null!==d&&null!==g&&2048&g[ln]&&!(512&g[ln]);){const _=bl(d,g,o,a|Jt.Self,no);if(_!==no)return _;let T=d.parent;if(!T){const k=g[ia];if(k){const H=k.get(o,no,a);if(H!==no)return H}T=Sl(g),g=g[Gi]}d=T}return c}(t,r,o,a,no);if(g!==no)return g}const d=bl(t,r,o,a,no);if(d!==no)return d}return Aa(r,o,a,c)}function bl(t,r,o,a,c){const d=function ta(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(dt)?t[dt]:void 0;return"number"==typeof r?r>=0?r&hc:yd:r}(o);if("function"==typeof d){if(!b(r,t,a))return a&Jt.Host?cs(c,0,a):Aa(r,o,a,c);try{let g;if(g=d(a),null!=g||a&Jt.Optional)return g;It()}finally{ce()}}else if("number"==typeof d){let g=null,_=fc(t,r),T=Wr,k=a&Jt.Host?r[Qr][vi]:null;for((-1===_||a&Jt.SkipSelf)&&(T=-1===_?ja(t,r):r[_+8],T!==Wr&&Nu(a,!1)?(g=r[Nt],_=rs(T),r=fa(T,r)):_=-1);-1!==_;){const H=r[Nt];if(za(d,_,H.data)){const se=Ws(_,r,o,g,a,k);if(se!==no)return se}T=r[_+8],T!==Wr&&Nu(a,r[Nt].data[_+8]===k)&&za(d,_,r)?(g=H,_=rs(T),r=fa(T,r)):_=-1}}return c}function Ws(t,r,o,a,c,d){const g=r[Nt],_=g.data[t+8],H=Vc(_,g,o,null==a?ks(_)&&Uc:a!=g&&0!=(3&_.type),c&Jt.Host&&d===_);return null!==H?Ha(r,g,H,_):no}function Vc(t,r,o,a,c){const d=t.providerIndexes,g=r.data,_=1048575&d,T=t.directiveStart,H=d>>20,Ae=c?_+H:t.directiveEnd;for(let $e=a?_:_+H;$e<Ae;$e++){const lt=g[$e];if($e<T&&o===lt||$e>=T&&lt.type===o)return $e}if(c){const $e=g[T];if($e&&gs($e)&&$e.type===o)return T}return null}function Ha(t,r,o,a){let c=t[o];const d=r.data;if(function lc(t){return t instanceof Pt}(c)){const g=c;g.resolving&&function Ke(t,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ke(-200,`Circular dependency in DI detected for ${t}${o}`)}(function Be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(d[o]));const _=ea(g.canSeeViewProviders);g.resolving=!0;const k=g.injectImpl?Gn(g.injectImpl):null;b(t,a,Jt.Default);try{c=t[o]=g.factory(void 0,d,t,a),r.firstCreatePass&&o>=a.directiveStart&&function Fn(t,r,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=r.type.prototype;if(a){const g=Bn(r);(o.preOrderHooks??=[]).push(t,g),(o.preOrderCheckHooks??=[]).push(t,g)}c&&(o.preOrderHooks??=[]).push(0-t,c),d&&((o.preOrderHooks??=[]).push(t,d),(o.preOrderCheckHooks??=[]).push(t,d))}(o,d[o],r)}finally{null!==k&&Gn(k),ea(_),g.resolving=!1,ce()}}return c}function za(t,r,o){return!!(o[r+(t>>Ro)]&1<<t)}function Nu(t,r){return!(t&Jt.Self||t&Jt.Host&&r)}class qi{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return $a(this._tNode,this._lView,r,nn(a),o)}}function yd(){return new qi(hi(),mt())}function Ga(t){return re(()=>{const r=t.prototype.constructor,o=r[bn]||Ou(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const d=c[bn]||Ou(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function Ou(t){return Tt(t)?()=>{const r=Ou(st(t));return r&&r()}:Sn(t)}function Sl(t){const r=t[Nt],o=r.type;return 2===o?r.declTNode:1===o?t[vi]:null}function Al(t){return function Cl(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const o=t.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const d=o[c];if(ir(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(d===r)return o[c+1];c+=2}}}return null}(hi(),t)}const gc="__parameters__";function Y(t,r,o){return re(()=>{const a=function B(t){return function(...o){if(t){const a=t(...o);for(const c in a)this[c]=a[c]}}}(r);function c(...d){if(this instanceof c)return a.apply(this,d),this;const g=new c(...d);return _.annotation=g,_;function _(T,k,H){const se=T.hasOwnProperty(gc)?T[gc]:Object.defineProperty(T,gc,{value:[]})[gc];for(;se.length<=H;)se.push(null);return(se[H]=se[H]||[]).push(g),T}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function is(t,r){t.forEach(o=>Array.isArray(o)?is(o,r):r(o))}function Mo(t,r,o){r>=t.length?t.push(o):t.splice(r,0,o)}function vd(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function hs(t,r,o){let a=uu(t,r);return a>=0?t[1|a]=o:(a=~a,function au(t,r,o,a){let c=t.length;if(c==r)t.push(o,a);else if(1===c)t.push(a,t[0]),t[0]=o;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=o,t[r+1]=a}}(t,a,r,o)),a}function jc(t,r){const o=uu(t,r);if(o>=0)return t[1|o]}function uu(t,r){return function Rf(t,r,o){let a=0,c=t.length>>o;for(;c!==a;){const d=a+(c-a>>1),g=t[d<<o];if(r===g)return d<<o;g>r?c=d:a=d+1}return~(c<<o)}(t,r,1)}const zc=Xn(Y("Optional"),8),Wa=Xn(Y("SkipSelf"),4);function Ll(t){return 128==(128&t.flags)}var ga=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ga||{});const Sh=/^>|^->|<!--|-->|--!>|<!-$/g,Yc=/(<|>)/g,fu="\u200b$1\u200b";const Qc=new Map;let Ah=0;const Bl="__ngContext__";function io(t,r){Bi(r)?(t[Bl]=r[eo],function fo(t){Qc.set(t[eo],t)}(r)):t[Bl]=r}let ee;function ie(t,r){return ee(t,r)}function at(t){const r=t[hr];return bi(r)?r[hr]:r}function on(t){return Ti(t[_i])}function Yn(t){return Ti(t[Fr])}function Ti(t){for(;null!==t&&!bi(t);)t=t[Fr];return t}function fs(t,r,o,a,c){if(null!=a){let d,g=!1;bi(a)?d=a:Bi(a)&&(g=!0,a=a[wr]);const _=Mr(a);0===t&&null!==o?null==c?gg(r,o,_):Vl(r,o,_,c||null,!0):1===t&&null!==o?Vl(r,o,_,c||null,!0):2===t?function kh(t,r,o){const a=Nh(t,r);a&&function Dc(t,r,o,a){t.removeChild(r,o,a)}(t,a,r,o)}(r,_,g):3===t&&r.destroyNode(_),null!=d&&function uy(t,r,o,a,c){const d=o[Ui];d!==Mr(o)&&fs(r,t,a,d,c);for(let _=xi;_<o.length;_++){const T=o[_];Jc(T[Nt],T,t,r,a,d)}}(r,t,d,o,c)}}function qa(t,r){return t.createComment(function Fl(t){return t.replace(Sh,r=>r.replace(Yc,fu))}(r))}function Ic(t,r,o){return t.createElement(r,o)}function Ff(t,r){const o=t[Br],a=o.indexOf(r);pd(r),o.splice(a,1)}function Uf(t,r){if(t.length<=xi)return;const o=xi+r,a=t[o];if(a){const c=a[Dr];null!==c&&c!==t&&Ff(c,a),r>0&&(t[o-1][Fr]=a[Fr]);const d=vd(t,xi+r);!function Vu(t,r){Jc(t,r,r[dn],2,null,null),r[wr]=null,r[vi]=null}(a[Nt],a);const g=d[Ei];null!==g&&g.detachView(d[Nt]),a[hr]=null,a[Fr]=null,a[ln]&=-129}return a}function ji(t,r){if(!(256&r[ln])){const o=r[dn];r[_o]&&Oa(r[_o]),r[Eo]&&Oa(r[Eo]),o.destroyNode&&Jc(t,r,o,3,null,null),function xh(t){let r=t[_i];if(!r)return bd(t[Nt],t);for(;r;){let o=null;if(Bi(r))o=r[_i];else{const a=r[xi];a&&(o=a)}if(!o){for(;r&&!r[Fr]&&r!==t;)Bi(r)&&bd(r[Nt],r),r=r[hr];null===r&&(r=t),Bi(r)&&bd(r[Nt],r),o=r&&r[Fr]}r=o}}(r)}}function bd(t,r){if(!(256&r[ln])){r[ln]&=-129,r[ln]|=256,function iy(t,r){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let a=0;a<o.length;a+=2){const c=r[o[a]];if(!(c instanceof Pt)){const d=o[a+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const _=c[d[g]],T=d[g+1];Pi(4,_,T);try{T.call(_)}finally{Pi(5,_,T)}}else{Pi(4,c,d);try{d.call(c)}finally{Pi(5,c,d)}}}}}(t,r),function Bf(t,r){const o=t.cleanup,a=r[xs];if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+3];g>=0?a[g]():a[-g].unsubscribe(),d+=2}else o[d].call(a[o[d+1]]);null!==a&&(r[xs]=null);const c=r[Ns];if(null!==c){r[Ns]=null;for(let d=0;d<c.length;d++)(0,c[d])()}}(t,r),1===r[Nt].type&&r[dn].destroy();const o=r[Dr];if(null!==o&&bi(r[hr])){o!==r[hr]&&Ff(o,r);const a=r[Ei];null!==a&&a.detachView(t)}!function Xc(t){Qc.delete(t[eo])}(r)}}function pg(t,r,o){return function Sd(t,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[wr];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:d}=t.data[a.directiveStart+c];if(d===Re.None||d===Re.Emulated)return null}return js(a,o)}}(t,r.parent,o)}function Vl(t,r,o,a,c){t.insertBefore(r,o,a,c)}function gg(t,r,o){t.appendChild(r,o)}function jl(t,r,o,a,c){null!==a?Vl(t,r,o,a,c):gg(t,r,o)}function Nh(t,r){return t.parentNode(r)}let Ph,zf,Gf,jf=function Vf(t,r,o){return 40&t.type?js(t,o):null};function Hf(t,r,o,a){const c=pg(t,a,r),d=r[dn],_=function $l(t,r,o){return jf(t,r,o)}(a.parent||r[vi],a,r);if(null!=c)if(Array.isArray(o))for(let T=0;T<o.length;T++)jl(d,c,o[T],_,!1);else jl(d,c,o,_,!1);void 0!==Ph&&Ph(d,a,r,o,c)}function Oh(t,r){if(null!==r){const o=r.type;if(3&o)return js(r,t);if(4&o)return Vr(-1,t[r.index]);if(8&o){const a=r.child;if(null!==a)return Oh(t,a);{const c=t[r.index];return bi(c)?Vr(-1,c):Mr(c)}}if(32&o)return ie(r,t)()||Mr(t[r.index]);{const a=As(t,r);return null!==a?Array.isArray(a)?a[0]:Oh(at(t[Qr]),a):Oh(t,r.next)}}return null}function As(t,r){return null!==r?t[Qr][vi].projection[r.projection]:null}function Vr(t,r){const o=xi+t+1;if(o<r.length){const a=r[o],c=a[Nt].firstChild;if(null!==c)return Oh(a,c)}return r[Ui]}function Lh(t,r,o,a,c,d,g){for(;null!=o;){const _=a[o.index],T=o.type;if(g&&0===r&&(_&&io(Mr(_),a),o.flags|=2),32!=(32&o.flags))if(8&T)Lh(t,r,o.child,a,c,d,!1),fs(r,t,c,_,d);else if(32&T){const k=ie(o,a);let H;for(;H=k();)fs(r,t,c,H,d);fs(r,t,c,_,d)}else 16&T?ay(t,r,a,o,c,d):fs(r,t,c,_,d);o=g?o.projectionNext:o.next}}function Jc(t,r,o,a,c,d){Lh(o,a,t.firstChild,r,c,d,!1)}function ay(t,r,o,a,c,d){const g=o[Qr],T=g[vi].projection[a.projection];if(Array.isArray(T))for(let k=0;k<T.length;k++)fs(r,t,c,T[k],d);else{let k=T;const H=g[hr];Ll(a)&&(k.flags|=128),Lh(t,r,k,H,c,d,!0)}}function Ad(t,r,o){""===o?t.removeAttribute(r,"class"):t.setAttribute(r,"class",o)}function Rd(t,r,o){const{mergedAttrs:a,classes:c,styles:d}=o;null!==a&&dr(t,r,a),null!==c&&Ad(t,r,c),null!==d&&function yg(t,r,o){t.setAttribute(r,"style",o)}(t,r,d)}function __(t){zf=t}function _g(t){return function vg(){if(void 0===Gf&&(Gf=null,Mn.trustedTypes))try{Gf=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Gf}()?.createScriptURL(t)||t}class fy{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ot})`}}function Hu(t){return t instanceof fy?t.changingThisBreaksApplicationSecurity:t}function Nd(t,r){const o=function Uh(t){return t instanceof fy&&t.getTypeName()||null}(t);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${Ot})`)}return o===r}const wg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ql=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ql||{});function Yf(t){const r=$h();return r?r.sanitize(ql.URL,t)||"":Nd(t,"URL")?Hu(t):function Kf(t){return(t=String(t)).match(wg)?t:"unsafe:"+t}(Te(t))}function Cg(t){const r=$h();if(r)return _g(r.sanitize(ql.RESOURCE_URL,t)||"");if(Nd(t,"ResourceURL"))return _g(Hu(t));throw new ke(904,!1)}function bg(t,r,o){return function S_(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Cg:Yf}(r,o)(t)}function $h(){const t=mt();return t&&t[vo].sanitizer}class Kr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=$t({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gu=new Kr("ENVIRONMENT_INITIALIZER"),Cc=new Kr("INJECTOR",-1),Sg=new Kr("INJECTOR_DEF_TYPES");class Ag{get(r,o=oi){if(o===oi){const a=new Error(`NullInjectorError: No provider for ${De(r)}!`);throw a.name="NullInjectorError",a}return o}}function Xf(t){return{\u0275providers:t}}function A_(...t){return{\u0275providers:Jf(0,t),\u0275fromNgModule:!0}}function Jf(t,...r){const o=[],a=new Set;let c;const d=g=>{o.push(g)};return is(r,g=>{const _=g;Hh(_,d,[],a)&&(c||=[],c.push(_))}),void 0!==c&&ep(c,d),o}function ep(t,r){for(let o=0;o<t.length;o++){const{ngModule:a,providers:c}=t[o];zh(c,d=>{r(d,a)})}}function Hh(t,r,o,a){if(!(t=st(t)))return!1;let c=null,d=Vn(t);const g=!d&&et(t);if(d||g){if(g&&!g.standalone)return!1;c=t}else{const T=t.ngModule;if(d=Vn(T),!d)return!1;c=T}const _=a.has(c);if(g){if(_)return!1;if(a.add(c),g.dependencies){const T="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const k of T)Hh(k,r,o,a)}}else{if(!d)return!1;{if(null!=d.imports&&!_){let k;a.add(c);try{is(d.imports,H=>{Hh(H,r,o,a)&&(k||=[],k.push(H))})}finally{}void 0!==k&&ep(k,r)}if(!_){const k=Sn(c)||(()=>new c);r({provide:c,useFactory:k,deps:qe},c),r({provide:Sg,useValue:c,multi:!0},c),r({provide:gu,useValue:()=>ht(c),multi:!0},c)}const T=d.providers;if(null!=T&&!_){const k=t;zh(T,H=>{r(H,k)})}}}return c!==t&&void 0!==t.providers}function zh(t,r){for(let o of t)gt(o)&&(o=o.\u0275providers),Array.isArray(o)?zh(o,r):r(o)}const Ty=te({provide:String,useValue:te});function kd(t){return null!==t&&"object"==typeof t&&Ty in t}function zu(t){return"function"==typeof t}const np=new Kr("Set Injector scope."),il={},rp={};let Yl;function Gh(){return void 0===Yl&&(Yl=new Ag),Yl}class mu{}class so extends mu{get destroyed(){return this._destroyed}constructor(r,o,a,c){super(),this.parent=o,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mg(r,g=>this.processProvider(g)),this.records.set(Cc,xa(void 0,this)),c.has("environment")&&this.records.set(mu,xa(void 0,this));const d=this.records.get(np);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(Sg.multi,qe,Jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const o=Ee(this),a=Gn(void 0);try{return r()}finally{Ee(o),Gn(a)}}get(r,o=oi,a=Jt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ur))return r[Ur](this);a=nn(a);const d=Ee(this),g=Gn(void 0);try{if(!(a&Jt.SkipSelf)){let T=this.records.get(r);if(void 0===T){const k=function Ql(t){return"function"==typeof t||"object"==typeof t&&t instanceof Kr}(r)&&lr(r);T=k&&this.injectableDefInScope(k)?xa(ip(r),il):null,this.records.set(r,T)}if(null!=T)return this.hydrate(r,T)}return(a&Jt.Self?Gh():this.parent).get(r,o=a&Jt.Optional&&o===oi?null:o)}catch(_){if("NullInjectorError"===_.name){if((_[gi]=_[gi]||[]).unshift(De(r)),d)throw _;return function le(t,r,o,a){const c=t[gi];throw r[$]&&c.unshift(r[$]),t.message=function Xe(t,r,o,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=De(r);if(Array.isArray(r))c=r.map(De).join(" -> ");else if("object"==typeof r){let d=[];for(let g in r)if(r.hasOwnProperty(g)){let _=r[g];d.push(g+":"+("string"==typeof _?JSON.stringify(_):De(_)))}c=`{${d.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${t.replace(ye,"\n  ")}`}("\n"+t.message,c,o,a),t.ngTokenPath=c,t[gi]=null,t}(_,r,"R3InjectorError",this.source)}throw _}finally{Gn(g),Ee(d)}}resolveInjectorInitializers(){const r=Ee(this),o=Gn(void 0);try{const c=this.get(gu.multi,qe,Jt.Self);for(const d of c)d()}finally{Ee(r),Gn(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(De(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(r){let o=zu(r=st(r))?r:st(r&&r.provide);const a=function op(t){return kd(t)?xa(void 0,t.useValue):xa(Rg(t),il)}(r);if(zu(r)||!0!==r.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=xa(void 0,il,!0),c.factory=()=>Yt(c.multi),this.records.set(o,c)),o=r,c.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===il&&(o.value=rp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function by(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=st(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(r){const o=this._onDestroyHooks.indexOf(r);-1!==o&&this._onDestroyHooks.splice(o,1)}}function ip(t){const r=lr(t),o=null!==r?r.factory:Sn(t);if(null!==o)return o;if(t instanceof Kr)throw new ke(204,!1);if(t instanceof Function)return function sp(t){const r=t.length;if(r>0)throw function mc(t,r){const o=[];for(let a=0;a<t;a++)o.push(r);return o}(r,"?"),new ke(204,!1);const o=function Sr(t){return t&&(t[Qn]||t[pi])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new ke(204,!1)}function Rg(t,r,o){let a;if(zu(t)){const c=st(t);return Sn(c)||ip(c)}if(kd(t))a=()=>st(t.useValue);else if(function tp(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Yt(t.deps||[]));else if(function Cy(t){return!(!t||!t.useExisting)}(t))a=()=>ht(st(t.useExisting));else{const c=st(t&&(t.useClass||t.provide));if(!function Ld(t){return!!t.deps}(t))return Sn(c)||ip(c);a=()=>new c(...Yt(t.deps))}return a}function xa(t,r,o=!1){return{factory:t,value:r,multi:o?[]:void 0}}function Mg(t,r){for(const o of t)Array.isArray(o)?Mg(o,r):o&&gt(o)?Mg(o.\u0275providers,r):r(o)}const Xl=new Kr("AppId",{providedIn:"root",factory:()=>Sy}),Sy="ng",bc=new Kr("Platform Initializer"),ap=new Kr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),x_=new Kr("CSP nonce",{providedIn:"root",factory:()=>function xd(){if(void 0!==zf)return zf;if(typeof document<"u")return document;throw new ke(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let My=(t,r,o)=>null;function kg(t,r,o=!1){return My(t,r,o)}class F_{}class Fg{}class B_{resolveComponentFactory(r){throw function xy(t){const r=Error(`No component factory found for ${De(t)}.`);return r.ngComponent=t,r}(r)}}let Xh=(()=>{class r{}return r.NULL=new B_,r})();function V_(){return yu(hi(),mt())}function yu(t,r){return new Gu(js(t,r))}let Gu=(()=>{class r{constructor(a){this.nativeElement=a}}return r.__NG_ELEMENT_ID__=V_,r})();function pp(t){return t instanceof Gu?t.nativeElement:t}class Ug{}let Py=(()=>{class r{constructor(){this.destroyNode=null}}return r.__NG_ELEMENT_ID__=()=>function Oy(){const t=mt(),o=li(hi().index,t);return(Bi(o)?o:t)[dn]}(),r})(),j_=(()=>{var t;class r{}return(t=r).\u0275prov=$t({token:t,providedIn:"root",factory:()=>null}),r})();class ky{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Bg=new ky("16.2.5"),gp={};function vp(t,r=null,o=null,a){const c=Uy(t,r,o,a);return c.resolveInjectorInitializers(),c}function Uy(t,r=null,o=null,a,c=new Set){const d=[o||qe,A_(t)];return a=a||("object"==typeof t?void 0:De(t)),new so(d,r||Gh(),a||null,c)}let vu=(()=>{var t;class r{static create(a,c){if(Array.isArray(a))return vp({name:""},c,a,"");{const d=a.name??"";return vp({name:d},a.parent,a.providers,d)}}}return(t=r).THROW_IF_NOT_FOUND=oi,t.NULL=new Ag,t.\u0275prov=$t({token:t,providedIn:"any",factory:()=>ht(Cc)}),t.__NG_ELEMENT_ID__=-1,r})();function _p(t){return t.ngOriginalError}class _u{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&_p(r);for(;o&&_p(o);)o=_p(o);return o||null}}function Gg(t){return r=>{setTimeout(t,void 0,r)}}const Wu=class z_ extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let c=r,d=o||(()=>null),g=a;if(r&&"object"==typeof r){const T=r;c=T.next?.bind(T),d=T.error?.bind(T),g=T.complete?.bind(T)}this.__isAsync&&(d=Gg(d),c&&(c=Gg(c)),g&&(g=Gg(g)));const _=super.subscribe({next:c,error:d,complete:g});return r instanceof ue.w0&&r.add(_),_}};function By(...t){}class Is{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wu(!1),this.onMicrotaskEmpty=new Wu(!1),this.onStable=new Wu(!1),this.onError=new Wu(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function G_(){const t="function"==typeof Mn.requestAnimationFrame;let r=Mn[t?"requestAnimationFrame":"setTimeout"],o=Mn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&o){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Wg(t){const r=()=>{!function Jh(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ep(t),t.isCheckStableRunning=!0,Hd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ep(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,d,g,_)=>{if(function W_(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(_))return o.invokeTask(c,d,g,_);try{return Ip(t),o.invokeTask(c,d,g,_)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&r(),wp(t)}},onInvoke:(o,a,c,d,g,_,T)=>{try{return Ip(t),o.invoke(c,d,g,_,T)}finally{t.shouldCoalesceRunChangeDetection&&r(),wp(t)}},onHasTask:(o,a,c,d)=>{o.hasTask(c,d),a===c&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,Ep(t),Hd(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,a,c,d)=>(o.handleError(c,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new ke(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,r,$d,By,By);try{return d.runTask(g,o,a)}finally{d.cancelTask(g)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const $d={};function Hd(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ep(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ip(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wp(t){t._nesting--,Hd(t)}class sl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wu,this.onMicrotaskEmpty=new Wu,this.onStable=new Wu,this.onError=new Wu}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,c){return r.apply(o,a)}}const Kg=new Kr("",{providedIn:"root",factory:Vy});function Vy(){const t=_t(Is);let r=!0;const o=new z.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new z.y(c=>{let d;t.runOutsideAngular(()=>{d=t.onStable.subscribe(()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const g=t.onUnstable.subscribe(()=>{Is.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),g.unsubscribe()}});return(0,ve.T)(o,a.pipe((0,Se.B)()))}function Ac(t){return t instanceof Function?t():t}let Zg=(()=>{var t;class r{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}}return(t=r).\u0275prov=$t({token:t,providedIn:"root",factory:()=>new t}),r})();function ef(t){for(;t;){t[ln]|=64;const r=at(t);if(Fo(t)&&!r)return t;t=r}return null}const rd=new Kr("",{providedIn:"root",factory:()=>!1});let Kd=null;function qy(t,r){return t[r]??em()}function Xg(t,r){const o=em();o.producerNode?.length&&(t[r]=Kd,o.lView=t,Kd=Jg())}const Z_={...Or,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ef(t.lView)},lView:null};function Jg(){return Object.create(Z_)}function em(){return Kd??=Jg(),Kd}const tr={};function tm(t){Zy(Er(),mt(),gn()+t,!1)}function Zy(t,r,o,a){if(!a)if(3==(3&r[ln])){const d=t.preOrderCheckHooks;null!==d&&Gs(r,d,o)}else{const d=t.preOrderHooks;null!==d&&ni(r,d,0,o)}ti(o)}function qd(t,r=Jt.Default){const o=mt();return null===o?ht(t,r):$a(hi(),o,st(t),r)}function Yy(){throw new Error("invalid")}function Zd(t,r,o,a,c,d,g,_,T,k,H){const se=r.blueprint.slice();return se[wr]=c,se[ln]=140|a,(null!==k||t&&2048&t[ln])&&(se[ln]|=2048),El(se),se[hr]=se[Gi]=t,se[zr]=o,se[vo]=g||t&&t[vo],se[dn]=_||t&&t[dn],se[Mi]=T||t&&t[Mi]||null,se[vi]=d,se[eo]=function vc(){return Ah++}(),se[Ps]=H,se[ia]=k,se[Qr]=2==r.type?t[Qr]:se,se}function Yd(t,r,o,a,c){let d=t.data[r];if(null===d)d=function nm(t,r,o,a,c){const d=Au(),g=Ki(),T=t.data[r]=function X_(t,r,o,a,c,d){let g=r?r.injectorIndex:-1,_=0;return function Jo(){return null!==Dn.skipHydrationRootTNode}()&&(_|=128),{type:o,index:a,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,r,a,c);return null===t.firstChild&&(t.firstChild=T),null!==d&&(g?null==d.child&&null!==T.parent&&(d.child=T):null===d.next&&(d.next=T,T.prev=d)),T}(t,r,o,a,c),function uc(){return Dn.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=o,d.value=a,d.attrs=c;const g=function wi(){const t=Dn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return $s(d,!0),d}function Qd(t,r,o,a){if(0===o)return-1;const c=r.length;for(let d=0;d<o;d++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function rm(t,r,o,a,c){const d=qy(r,_o),g=gn(),_=2&a;try{ti(-1),_&&r.length>Hn&&Zy(t,r,Hn,!1),Pi(_?2:0,c);const k=_?d:null,H=Ii(k);try{null!==k&&(k.dirty=!1),o(a,c)}finally{Uo(k,H)}}finally{_&&null===r[_o]&&Xg(r,_o),ti(g),Pi(_?3:1,c)}}function im(t,r,o){if(ts(r)){const a=Tr(null);try{const d=r.directiveEnd;for(let g=r.directiveStart;g<d;g++){const _=t.data[g];_.contentQueries&&_.contentQueries(1,o[g],g)}}finally{Tr(a)}}}function sm(t,r,o){ru()&&(function t0(t,r,o,a){const c=o.directiveStart,d=o.directiveEnd;ks(o)&&function s0(t,r,o){const a=js(r,t),c=Qy(o);let g=16;o.signals?g=4096:o.onPush&&(g=64);const _=af(t,Zd(t,c,null,g,a,r,null,t[vo].rendererFactory.createRenderer(a,o),null,null,null));t[r.index]=_}(r,o,t.data[c+o.componentOffset]),t.firstCreatePass||Bc(o,r),io(a,r);const g=o.initialInputs;for(let _=c;_<d;_++){const T=t.data[_],k=Ha(r,t,_,o);io(k,r),null!==g&&Rp(0,_-c,k,T,0,g),gs(T)&&(li(o.index,r)[zr]=Ha(r,t,_,o))}}(t,r,o,js(o,r)),64==(64&o.flags)&&Jd(t,r,o))}function om(t,r,o=js){const a=r.localNames;if(null!==a){let c=r.index+1;for(let d=0;d<a.length;d+=2){const g=a[d+1],_=-1===g?o(r,t):t[g];t[c++]=_}}}function Qy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=rf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function rf(t,r,o,a,c,d,g,_,T,k,H){const se=Hn+a,Ae=se+c,$e=function am(t,r){const o=[];for(let a=0;a<r;a++)o.push(a<t?null:tr);return o}(se,Ae),lt="function"==typeof k?k():k;return $e[Nt]={type:t,blueprint:$e,template:o,queries:null,viewQuery:_,declTNode:r,data:$e.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:T,consts:lt,incompleteFirstPass:!1,ssrId:H}}let bp=t=>null;function Jy(t,r,o,a){for(let c in t)if(t.hasOwnProperty(c)){o=null===o?{}:o;const d=t[c];null===a?ev(o,r,c,d):a.hasOwnProperty(c)&&ev(o,r,a[c],d)}return o}function ev(t,r,o,a){t.hasOwnProperty(o)?t[o].push(r,a):t[o]=[r,a]}function cm(t,r,o,a){if(ru()){const c=null===a?null:{"":-1},d=function hm(t,r){const o=t.directiveRegistry;let a=null,c=null;if(o)for(let d=0;d<o.length;d++){const g=o[d];if(as(r,g.selectors,!1))if(a||(a=[]),gs(g))if(null!==g.findHostDirectiveDefs){const _=[];c=c||new Map,g.findHostDirectiveDefs(g,_,c),a.unshift(..._,g),Sp(t,r,_.length)}else a.unshift(g),Sp(t,r,0);else c=c||new Map,g.findHostDirectiveDefs?.(g,a,c),a.push(g)}return null===a?null:[a,c]}(t,o);let g,_;null===d?g=_=null:[g,_]=d,null!==g&&rv(t,r,o,g,c,_),c&&function eh(t,r,o){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const d=o[r[c+1]];if(null==d)throw new ke(-301,!1);a.push(r[c],d)}}}(o,a,c)}o.mergedAttrs=ws(o.mergedAttrs,o.attrs)}function rv(t,r,o,a,c,d){for(let k=0;k<a.length;k++)pc(Bc(o,r),t,a[k].type);!function Ap(t,r,o){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+o,t.providerIndexes=r}(o,t.data.length,a.length);for(let k=0;k<a.length;k++){const H=a[k];H.providersResolver&&H.providersResolver(H)}let g=!1,_=!1,T=Qd(t,r,a.length,null);for(let k=0;k<a.length;k++){const H=a[k];o.mergedAttrs=ws(o.mergedAttrs,H.hostAttrs),r0(t,o,r,T,H),iv(T,H,c),null!==H.contentQueries&&(o.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(o.flags|=64);const se=H.type.prototype;!g&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),g=!0),!_&&(se.ngOnChanges||se.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),_=!0),T++}!function J_(t,r,o){const c=r.directiveEnd,d=t.data,g=r.attrs,_=[];let T=null,k=null;for(let H=r.directiveStart;H<c;H++){const se=d[H],Ae=o?o.get(se):null,lt=Ae?Ae.outputs:null;T=Jy(se.inputs,H,T,Ae?Ae.inputs:null),k=Jy(se.outputs,H,k,lt);const Mt=null===T||null===g||Ds(r)?null:sv(T,H,g);_.push(Mt)}null!==T&&(T.hasOwnProperty("class")&&(r.flags|=8),T.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=_,r.inputs=T,r.outputs=k}(t,o,d)}function Jd(t,r,o){const a=o.directiveStart,c=o.directiveEnd,d=o.index,g=function iu(){return Dn.lFrame.currentDirectiveIndex}();try{ti(d);for(let _=a;_<c;_++){const T=t.data[_],k=r[_];ho(_),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&n0(T,k)}}finally{ti(-1),ho(g)}}function n0(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Sp(t,r,o){r.componentOffset=o,(t.components??=[]).push(r.index)}function iv(t,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=t;gs(r)&&(o[""]=t)}}function r0(t,r,o,a,c){t.data[a]=c;const d=c.factory||(c.factory=Sn(c.type)),g=new Pt(d,gs(c),qd);t.blueprint[a]=g,o[a]=g,function lm(t,r,o,a,c){const d=c.hostBindings;if(d){let g=t.hostBindingOpCodes;null===g&&(g=t.hostBindingOpCodes=[]);const _=~r.index;(function dm(t){let r=t.length;for(;r>0;){const o=t[--r];if("number"==typeof o&&o<0)return o}return 0})(g)!=_&&g.push(_),g.push(o,a,d)}}(t,r,a,Qd(t,o,c.hostVars,tr),c)}function Ku(t,r,o,a,c,d){const g=js(t,r);!function fm(t,r,o,a,c,d,g){if(null==d)t.removeAttribute(r,c,o);else{const _=null==g?Te(d):g(d,a||"",c);t.setAttribute(r,c,_,o)}}(r[dn],g,d,t.value,o,a,c)}function Rp(t,r,o,a,c,d){const g=d[r];if(null!==g)for(let _=0;_<g.length;)Mp(a,o,g[_++],g[_++],g[_++])}function Mp(t,r,o,a,c){const d=Tr(null);try{const g=t.inputTransforms;null!==g&&g.hasOwnProperty(a)&&(c=g[a].call(r,c)),null!==t.setInput?t.setInput(r,c,o,a):r[a]=c}finally{Tr(d)}}function sv(t,r,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===a&&(a=[]);const g=t[d];for(let _=0;_<g.length;_+=2)if(g[_]===r){a.push(d,g[_+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function xp(t,r,o,a){return[t,!0,!1,r,null,0,a,o,null,null,null]}function sf(t,r){const o=t.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const d=o[a+1];if(-1!==d){const g=t.data[d];m(o[a]),g.contentQueries(2,r[d],d)}}}function af(t,r){return t[_i]?t[Js][Fr]=r:t[_i]=r,t[Js]=r,r}function th(t,r,o){m(0);const a=Tr(null);try{r(t,o)}finally{Tr(a)}}function Np(t){return t[xs]||(t[xs]=[])}function pm(t){return t.cleanup||(t.cleanup=[])}function ov(t,r){const o=t[Mi],a=o?o.get(_u,null):null;a&&a.handleError(r)}function gm(t,r,o,a,c){for(let d=0;d<o.length;){const g=o[d++],_=o[d++];Mp(t.data[g],r[g],a,_,c)}}function av(t,r){const o=li(r,t),a=o[Nt];!function a0(t,r){for(let o=r.length;o<t.blueprint.length;o++)r.push(t.blueprint[o])}(a,o);const c=o[wr];null!==c&&null===o[Ps]&&(o[Ps]=kg(c,o[Mi])),Pp(a,o,o[zr])}function Pp(t,r,o){D(r);try{const a=t.viewQuery;null!==a&&th(1,a,o);const c=t.template;null!==c&&rm(t,r,c,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&sf(t,r),t.staticViewQueries&&th(2,t.viewQuery,o);const d=t.components;null!==d&&function u0(t,r){for(let o=0;o<r.length;o++)av(t,r[o])}(r,d)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[ln]&=-5,he()}}let uv=(()=>{var t;class r{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const g=typeof Zone>"u"?null:Zone.current,_=function _e(t,r,o){const a=Object.create(Rt);o&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=g=>{a.cleanupFn=g};return a.ref={notify:()=>wo(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Ss(a))return;a.hasRun=!0;const g=Ii(a);try{a.cleanupFn(),a.cleanupFn=ot,a.fn(c)}finally{Uo(a,g)}},cleanup:()=>a.cleanupFn()},a.ref}(a,H=>{this.all.has(H)&&this.queue.set(H,g)},d);let T;this.all.add(_),_.notify();const k=()=>{_.cleanup(),T?.(),this.all.delete(_),this.queue.delete(_)};return T=c?.onDestroy(k),{destroy:k}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=r).\u0275prov=$t({token:t,providedIn:"root",factory:()=>new t}),r})();function Op(t,r,o){let a=o?t.styles:null,c=o?t.classes:null,d=0;if(null!==r)for(let g=0;g<r.length;g++){const _=r[g];"number"==typeof _?d=_:1==d?c=nt(c,_):2==d&&(a=nt(a,_+": "+r[++g]+";"))}o?t.styles=a:t.stylesWithoutHost=a,o?t.classes=c:t.classesWithoutHost=c}function nh(t,r,o,a,c=!1){for(;null!==o;){const d=r[o.index];null!==d&&a.push(Mr(d)),bi(d)&&mm(d,a);const g=o.type;if(8&g)nh(t,r,o.child,a);else if(32&g){const _=ie(o,r);let T;for(;T=_();)a.push(T)}else if(16&g){const _=As(r,o);if(Array.isArray(_))a.push(..._);else{const T=at(r[Qr]);nh(T[Nt],T,_,a,!0)}}o=c?o.projectionNext:o.next}return a}function mm(t,r){for(let o=xi;o<t.length;o++){const a=t[o],c=a[Nt].firstChild;null!==c&&nh(a[Nt],a,c,r)}t[Ui]!==t[wr]&&r.push(t[Ui])}function rh(t,r,o,a=!0){const c=r[vo],d=c.rendererFactory,g=c.afterRenderEventManager;d.begin?.(),g?.begin();try{ym(t,r,t.template,o)}catch(T){throw a&&ov(r,T),T}finally{d.end?.(),c.effectManager?.flush(),g?.end()}}function ym(t,r,o,a){const c=r[ln];if(256!=(256&c)){r[vo].effectManager?.flush(),D(r);try{El(r),function Ru(t){return Dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&rm(t,r,o,2,a);const g=3==(3&c);if(g){const k=t.preOrderCheckHooks;null!==k&&Gs(r,k,null)}else{const k=t.preOrderHooks;null!==k&&ni(r,k,0,null),an(r,0)}if(function jr(t){for(let r=on(t);null!==r;r=Yn(r)){if(!r[Lo])continue;const o=r[Br];for(let a=0;a<o.length;a++){Il(o[a])}}}(r),uf(r,2),null!==t.contentQueries&&sf(t,r),g){const k=t.contentCheckHooks;null!==k&&Gs(r,k)}else{const k=t.contentHooks;null!==k&&ni(r,k,1),an(r,1)}!function Y_(t,r){const o=t.hostBindingOpCodes;if(null===o)return;const a=qy(r,Eo);try{for(let c=0;c<o.length;c++){const d=o[c];if(d<0)ti(~d);else{const g=d,_=o[++c],T=o[++c];Vi(_,g),a.dirty=!1;const k=Ii(a);try{T(2,r[g])}finally{Uo(a,k)}}}}finally{null===r[Eo]&&Xg(r,Eo),ti(-1)}}(t,r);const _=t.components;null!==_&&ih(r,_,0);const T=t.viewQuery;if(null!==T&&th(2,T,a),g){const k=t.viewCheckHooks;null!==k&&Gs(r,k)}else{const k=t.viewHooks;null!==k&&ni(r,k,2),an(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[ln]&=-73,pd(r)}finally{he()}}}function uf(t,r){for(let o=on(t);null!==o;o=Yn(o))for(let a=xi;a<o.length;a++)vm(o[a],r)}function lv(t,r,o){vm(li(r,t),o)}function vm(t,r){if(!function bu(t){return 128==(128&t[ln])}(t))return;const o=t[Nt],a=t[ln];if(80&a&&0===r||1024&a||2===r)ym(o,t,o.template,t[zr]);else if(t[Cs]>0){uf(t,1);const c=o.components;null!==c&&ih(t,c,1)}}function ih(t,r,o){for(let a=0;a<r.length;a++)lv(t,r[a],o)}class sh{get rootNodes(){const r=this._lView,o=r[Nt];return nh(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zr]}set context(r){this._lView[zr]=r}get destroyed(){return 256==(256&this._lView[ln])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[hr];if(bi(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Uf(r,a),vd(o,a))}this._attachedToViewContainer=!1}ji(this._lView[Nt],this._lView)}onDestroy(r){!function $o(t,r){if(256==(256&t[ln]))throw new ke(911,!1);null===t[Ns]&&(t[Ns]=[]),t[Ns].push(r)}(this._lView,r)}markForCheck(){ef(this._cdRefInjectingView||this._lView)}detach(){this._lView[ln]&=-129}reattach(){this._lView[ln]|=128}detectChanges(){rh(this._lView[Nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ju(t,r){Jc(t,r,r[dn],2,null,null)}(this._lView[Nt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=r}}class Yi extends sh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;rh(r[Nt],r,r[zr],!1)}checkNoChanges(){}get context(){return null}}class po extends Xh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=et(r);return new al(o,this.ngModule)}}function Iu(t){const r=[];for(let o in t)t.hasOwnProperty(o)&&r.push({propName:t[o],templateName:o});return r}class d0{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){a=nn(a);const c=this.injector.get(r,gp,a);return c!==gp||o===gp?c:this.parentInjector.get(r,o,a)}}class al extends Fg{get inputs(){const r=this.componentDef,o=r.inputTransforms,a=Iu(r.inputs);if(null!==o)for(const c of a)o.hasOwnProperty(c.propName)&&(c.transform=o[c.propName]);return a}get outputs(){return Iu(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function go(t){return t.map(Oo).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,a,c){let d=(c=c||this.ngModule)instanceof mu?c:c?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const g=d?new d0(r,d):r,_=g.get(Ug,null);if(null===_)throw new ke(407,!1);const se={rendererFactory:_,sanitizer:g.get(j_,null),effectManager:g.get(uv,null),afterRenderEventManager:g.get(Zg,null)},Ae=_.createRenderer(null,this.componentDef),$e=this.componentDef.selectors[0][0]||"div",lt=a?function Xd(t,r,o,a){const d=a.get(rd,!1)||o===Re.ShadowDom,g=t.selectRootElement(r,d);return function Xy(t){bp(t)}(g),g}(Ae,a,this.componentDef.encapsulation,g):Ic(Ae,$e,function dv(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}($e)),Tn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let wt=null;null!==lt&&(wt=kg(lt,g,!0));const nr=rf(0,null,null,1,0,null,null,null,null,null,null),kr=Zd(null,nr,null,Tn,null,null,se,Ae,g,null,wt);let Oi,eu;D(kr);try{const fd=this.componentDef;let ug,bE=null;fd.findHostDirectiveDefs?(ug=[],bE=new Map,fd.findHostDirectiveDefs(fd,ug,bE),ug.push(fd)):ug=[fd];const Kb=function _m(t,r){const o=t[Nt],a=Hn;return t[a]=r,Yd(o,a,2,"#host",null)}(kr,lt),qb=function h0(t,r,o,a,c,d,g){const _=c[Nt];!function Em(t,r,o,a){for(const c of t)r.mergedAttrs=ws(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Op(r,r.mergedAttrs,!0),null!==o&&Rd(a,o,r))}(a,t,r,g);let T=null;null!==r&&(T=kg(r,c[Mi]));const k=d.rendererFactory.createRenderer(r,o);let H=16;o.signals?H=4096:o.onPush&&(H=64);const se=Zd(c,Qy(o),null,H,c[t.index],t,d,k,null,null,T);return _.firstCreatePass&&Sp(_,t,a.length-1),af(c,se),c[t.index]=se}(Kb,lt,fd,ug,kr,se,Ae);eu=la(nr,Hn),lt&&function p0(t,r,o,a){if(a)dr(t,o,["ng-version",Bg.full]);else{const{attrs:c,classes:d}=function yr(t){const r=[],o=[];let a=1,c=2;for(;a<t.length;){let d=t[a];if("string"==typeof d)2===c?""!==d&&r.push(d,t[++a]):8===c&&o.push(d);else{if(!Un(c))break;c=d}a++}return{attrs:r,classes:o}}(r.selectors[0]);c&&dr(t,o,c),d&&d.length>0&&Ad(t,o,d.join(" "))}}(Ae,fd,lt,a),void 0!==o&&function Qi(t,r,o){const a=t.projection=[];for(let c=0;c<r.length;c++){const d=o[c];a.push(null!=d?Array.from(d):null)}}(eu,this.ngContentSelectors,o),Oi=function f0(t,r,o,a,c,d){const g=hi(),_=c[Nt],T=js(g,c);rv(_,c,g,o,null,a);for(let H=0;H<o.length;H++)io(Ha(c,_,g.directiveStart+H,g),c);Jd(_,c,g),T&&io(T,c);const k=Ha(c,_,g.directiveStart+g.componentOffset,g);if(t[zr]=c[zr]=k,null!==d)for(const H of d)H(k,r);return im(_,g,t),k}(qb,fd,ug,bE,kr,[BE]),Pp(nr,kr,null)}finally{he()}return new hv(this.componentType,Oi,yu(eu,kr),kr,eu)}}class hv extends F_{constructor(r,o,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new Yi(c),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),o))return;const d=this._rootLView;gm(d[Nt],d,c,r,o),this.previousInputValues.set(r,o),ef(li(this._tNode.index,d))}}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function BE(){const t=hi();ha(mt()[Nt],t)}function ps(t){let r=function g0(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const a=[t];for(;r;){let c;if(gs(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ke(903,!1);c=r.\u0275dir}if(c){if(o){a.push(c);const g=t;g.inputs=kp(t.inputs),g.inputTransforms=kp(t.inputTransforms),g.declaredInputs=kp(t.declaredInputs),g.outputs=kp(t.outputs);const _=c.hostBindings;_&&y0(t,_);const T=c.viewQuery,k=c.contentQueries;if(T&&m0(t,T),k&&pv(t,k),Q(t.inputs,c.inputs),Q(t.declaredInputs,c.declaredInputs),Q(t.outputs,c.outputs),null!==c.inputTransforms&&(null===g.inputTransforms&&(g.inputTransforms={}),Q(g.inputTransforms,c.inputTransforms)),gs(c)&&c.data.animation){const H=t.data;H.animation=(H.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let g=0;g<d.length;g++){const _=d[g];_&&_.ngInherit&&_(t),_===ps&&(o=!1)}}r=Object.getPrototypeOf(r)}!function fv(t){let r=0,o=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=ws(c.hostAttrs,o=ws(o,c.hostAttrs))}}(a)}function kp(t){return t===tt?{}:t===qe?[]:t}function m0(t,r){const o=t.viewQuery;t.viewQuery=o?(a,c)=>{r(a,c),o(a,c)}:r}function pv(t,r){const o=t.contentQueries;t.contentQueries=o?(a,c,d)=>{r(a,c,d),o(a,c,d)}:r}function y0(t,r){const o=t.hostBindings;t.hostBindings=o?(a,c)=>{r(a,c),o(a,c)}:r}function wu(t){const r=t.inputConfig,o={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(o[a]=c[2])}t.inputTransforms=o}function Im(t){return!!wm(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function wm(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function oo(t,r,o){return!Object.is(t[r],o)&&(t[r]=o,!0)}function ad(t,r,o,a){const c=mt();return oo(c,Ta(),r)&&(Er(),Ku(_n(),c,t,r,o,a)),ad}function pl(t,r,o,a,c,d,g,_){const T=mt(),k=Er(),H=t+Hn,se=k.firstCreatePass?function GE(t,r,o,a,c,d,g,_,T){const k=r.consts,H=Yd(r,t,4,g||null,da(k,_));cm(r,o,H,da(k,T)),ha(r,H);const se=H.tView=rf(2,H,a,c,d,r.directiveRegistry,r.pipeRegistry,null,r.schemas,k,null);return null!==r.queries&&(r.queries.template(r,H),se.queries=r.queries.embeddedTView(H)),H}(H,k,T,r,o,a,c,d,g):k.data[H];$s(se,!1);const Ae=Zu(k,T,se,t);Mu()&&Hf(k,T,Ae,se),io(Ae,T),af(T,T[H]=xp(Ae,T,Ae,se)),Si(se)&&sm(k,T,se),null!=g&&om(T,se,_)}let Zu=function hh(t,r,o,a){return Go(!0),r[dn].createComment("")};function Rv(t){return Ia(function sc(){return Dn.lFrame.contextLView}(),Hn+t)}function Yu(t,r,o){const a=mt();return oo(a,Ta(),r)&&function Na(t,r,o,a,c,d,g,_){const T=js(r,o);let H,k=r.inputs;!_&&null!=k&&(H=k[a])?(gm(t,o,H,a,c),ks(r)&&function tv(t,r){const o=li(r,t);16&o[ln]||(o[ln]|=64)}(o,r.index)):3&r.type&&(a=function e0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=g?g(c,r.value||"",a):c,d.setProperty(T,a,c))}(Er(),_n(),a,t,r,a[dn],o,!1),Yu}function Mm(t,r,o,a,c){const g=c?"class":"style";gm(t,o,r.inputs[g],g,a)}function Gp(t,r,o,a){const c=mt(),d=Er(),g=Hn+t,_=c[dn],T=d.firstCreatePass?function S0(t,r,o,a,c,d){const g=r.consts,T=Yd(r,t,2,a,da(g,c));return cm(r,o,T,da(g,d)),null!==T.attrs&&Op(T,T.attrs,!1),null!==T.mergedAttrs&&Op(T,T.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,T),T}(g,d,c,r,o,a):d.data[g],k=Nm(d,c,T,_,r,t);c[g]=k;const H=Si(T);return $s(T,!0),Rd(_,k,T),32!=(32&T.flags)&&Mu()&&Hf(d,c,k,T),0===function Ho(){return Dn.lFrame.elementDepthCount}()&&io(k,c),function nc(){Dn.lFrame.elementDepthCount++}(),H&&(sm(d,c,T),im(d,T,c)),null!==a&&om(c,T),Gp}function Wp(){let t=hi();Ki()?Di():(t=t.parent,$s(t,!1));const r=t;(function Su(t){return Dn.skipHydrationRootTNode===t})(r)&&function ic(){Dn.skipHydrationRootTNode=null}(),function Oc(){Dn.lFrame.elementDepthCount--}();const o=Er();return o.firstCreatePass&&(ha(o,t),ts(t)&&o.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Lc(t){return 0!=(8&t.flags)}(r)&&Mm(o,r,mt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function bf(t){return 0!=(16&t.flags)}(r)&&Mm(o,r,mt(),r.stylesWithoutHost,!1),Wp}function xm(t,r,o,a){return Gp(t,r,o,a),Wp(),xm}let Nm=(t,r,o,a,c,d)=>(Go(!0),Ic(a,c,function Ao(){return Dn.lFrame.currentNamespace}()));function vf(t,r,o){const a=mt(),c=Er(),d=t+Hn,g=c.firstCreatePass?function R0(t,r,o,a,c){const d=r.consts,g=da(d,a),_=Yd(r,t,8,"ng-container",g);return null!==g&&Op(_,g,!0),cm(r,o,_,da(d,c)),null!==r.queries&&r.queries.elementStart(r,_),_}(d,c,a,r,o):c.data[d];$s(g,!0);const _=qp(c,a,g,t);return a[d]=_,Mu()&&Hf(c,a,_,g),io(_,a),Si(g)&&(sm(c,a,g),im(c,g,a)),null!=o&&om(a,g),vf}function Kp(){let t=hi();const r=Er();return Ki()?Di():(t=t.parent,$s(t,!1)),r.firstCreatePass&&(ha(r,t),ts(t)&&r.queries.elementEnd(t)),Kp}let qp=(t,r,o,a)=>(Go(!0),qa(r[dn],""));function xv(){return mt()}function Pm(t){return!!t&&"function"==typeof t.then}function Nv(t){return!!t&&"function"==typeof t.subscribe}function Om(t,r,o,a){const c=mt(),d=Er(),g=hi();return function N0(t,r,o,a,c,d,g){const _=Si(a),k=t.firstCreatePass&&pm(t),H=r[zr],se=Np(r);let Ae=!0;if(3&a.type||g){const Mt=js(a,r),qt=g?g(Mt):Mt,Tn=se.length,wt=g?kr=>g(Mr(kr[a.index])):a.index;let nr=null;if(!g&&_&&(nr=function KE(t,r,o,a){const c=t.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===a){const _=r[xs],T=c[d+2];return _.length>T?_[T]:null}"string"==typeof g&&(d+=2)}return null}(t,r,c,a.index)),null!==nr)(nr.__ngLastListenerFn__||nr).__ngNextListenerFn__=d,nr.__ngLastListenerFn__=d,Ae=!1;else{d=Pv(a,r,H,d,!1);const kr=o.listen(qt,c,d);se.push(d,kr),k&&k.push(c,wt,Tn,Tn+1)}}else d=Pv(a,r,H,d,!1);const $e=a.outputs;let lt;if(Ae&&null!==$e&&(lt=$e[c])){const Mt=lt.length;if(Mt)for(let qt=0;qt<Mt;qt+=2){const Oi=r[lt[qt]][lt[qt+1]].subscribe(d),eu=se.length;se.push(d,Oi),k&&k.push(c,a.index,eu,-(eu+1))}}}(d,c,c[dn],g,t,r,a),Om}function P0(t,r,o,a){try{return Pi(6,r,o),!1!==o(a)}catch(c){return ov(t,c),!1}finally{Pi(7,r,o)}}function Pv(t,r,o,a,c){return function d(g){if(g===Function)return a;ef(t.componentOffset>-1?li(t.index,r):r);let T=P0(r,o,a,g),k=d.__ngNextListenerFn__;for(;k;)T=P0(r,o,k,g)&&T,k=k.__ngNextListenerFn__;return c&&!1===T&&g.preventDefault(),T}}function Ov(t=1){return function de(t){return(Dn.lFrame.contextLView=function Ut(t,r){for(;t>0;)r=r[Gi],t--;return r}(t,Dn.lFrame.contextLView))[zr]}(t)}function Lm(t,r){return t<<17|r<<2}function xc(t){return t>>17&32767}function _f(t){return 2|t}function ml(t){return(131068&t)>>2}function Zp(t,r){return-131069&t|r<<2}function If(t){return 1|t}function Hv(t,r,o,a,c){const d=t[o+1],g=null===r;let _=a?xc(d):ml(d),T=!1;for(;0!==_&&(!1===T||g);){const H=t[_+1];zv(t[_],r)&&(T=!0,t[_+1]=a?If(H):_f(H)),_=a?xc(H):ml(H)}T&&(t[o+1]=a?_f(d):If(d))}function zv(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&uu(t,r)>=0}const Ys={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yl(t){return t.substring(Ys.key,Ys.keyEnd)}function Fm(t,r){const o=Ys.textEnd;return o===r?-1:(r=Ys.keyEnd=function B0(t,r,o){for(;r<o&&t.charCodeAt(r)>32;)r++;return r}(t,Ys.key=r,o),Qs(t,r,o))}function Qs(t,r,o){for(;r<o&&t.charCodeAt(r)<=32;)r++;return r}function Bm(t,r){return function Tu(t,r,o,a){const c=mt(),d=Er(),g=Hs(2);d.firstUpdatePass&&Xp(d,t,g,a),r!==tr&&oo(c,g,r)&&Hm(d,d.data[gn()],c,c[dn],t,c[g+1]=function Jv(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=De(Hu(t)))),t}(r,o),a,g)}(t,r,null,!0),Bm}function Kv(t){!function Qa(t,r,o,a){const c=Er(),d=Hs(2);c.firstUpdatePass&&Xp(c,null,d,a);const g=mt();if(o!==tr&&oo(g,d,o)){const _=c.data[gn()];if(zm(_,a)&&!qv(c,d)){let T=a?_.classesWithoutHost:_.stylesWithoutHost;null!==T&&(o=nt(T,o||"")),Mm(c,_,g,o,a)}else!function Qv(t,r,o,a,c,d,g,_){c===tr&&(c=qe);let T=0,k=0,H=0<c.length?c[0]:null,se=0<d.length?d[0]:null;for(;null!==H||null!==se;){const Ae=T<c.length?c[T+1]:void 0,$e=k<d.length?d[k+1]:void 0;let Mt,lt=null;H===se?(T+=2,k+=2,Ae!==$e&&(lt=se,Mt=$e)):null===se||null!==H&&H<se?(T+=2,lt=H):(k+=2,lt=se,Mt=$e),null!==lt&&Hm(t,r,o,a,lt,Mt,g,_),H=T<c.length?c[T]:null,se=k<d.length?d[k]:null}}(c,_,g,g[dn],g[d+1],g[d+1]=function Yv(t,r,o){if(null==o||""===o)return qe;const a=[],c=Hu(o);if(Array.isArray(c))for(let d=0;d<c.length;d++)t(a,c[d],!0);else if("object"==typeof c)for(const d in c)c.hasOwnProperty(d)&&t(a,d,c[d]);else"string"==typeof c&&r(a,c);return a}(t,r,o),a,d)}}(j0,Ju,t,!0)}function Ju(t,r){for(let o=function ra(t){return function ph(t){Ys.key=0,Ys.keyEnd=0,Ys.value=0,Ys.valueEnd=0,Ys.textEnd=t.length}(t),Fm(t,Qs(t,0,Ys.textEnd))}(r);o>=0;o=Fm(r,o))hs(t,yl(r),!0)}function qv(t,r){return r>=t.expandoStartIndex}function Xp(t,r,o,a){const c=t.data;if(null===c[o+1]){const d=c[gn()],g=qv(t,o);zm(d,a)&&null===r&&!g&&(r=!1),r=function Jp(t,r,o,a){const c=function su(t){const r=Dn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let d=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(o=mh(o=jm(null,t,r,o,a),r.attrs,a),d=null);else{const g=r.directiveStylingLast;if(-1===g||t[g]!==c)if(o=jm(c,t,r,o,a),null===d){let T=function Zv(t,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==ml(a))return t[xc(a)]}(t,r,a);void 0!==T&&Array.isArray(T)&&(T=jm(null,t,r,T[1],a),T=mh(T,r.attrs,a),function V0(t,r,o,a){t[xc(o?r.classBindings:r.styleBindings)]=a}(t,r,a,T))}else d=function Vm(t,r,o){let a;const c=r.directiveEnd;for(let d=1+r.directiveStylingLast;d<c;d++)a=mh(a,t[d].hostAttrs,o);return mh(a,r.attrs,o)}(t,r,a)}return void 0!==d&&(a?r.residualClasses=d:r.residualStyles=d),o}(c,d,r,a),function $v(t,r,o,a,c,d){let g=d?r.classBindings:r.styleBindings,_=xc(g),T=ml(g);t[a]=o;let H,k=!1;if(Array.isArray(o)?(H=o[1],(null===H||uu(o,H)>0)&&(k=!0)):H=o,c)if(0!==T){const Ae=xc(t[_+1]);t[a+1]=Lm(Ae,_),0!==Ae&&(t[Ae+1]=Zp(t[Ae+1],a)),t[_+1]=function U0(t,r){return 131071&t|r<<17}(t[_+1],a)}else t[a+1]=Lm(_,0),0!==_&&(t[_+1]=Zp(t[_+1],a)),_=a;else t[a+1]=Lm(T,0),0===_?_=a:t[T+1]=Zp(t[T+1],a),T=a;k&&(t[a+1]=_f(t[a+1])),Hv(t,H,a,!0),Hv(t,H,a,!1),function Yp(t,r,o,a,c){const d=c?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof r&&uu(d,r)>=0&&(o[a+1]=If(o[a+1]))}(r,H,t,a,d),g=Lm(_,T),d?r.classBindings=g:r.styleBindings=g}(c,d,r,o,g,a)}}function jm(t,r,o,a,c){let d=null;const g=o.directiveEnd;let _=o.directiveStylingLast;for(-1===_?_=o.directiveStart:_++;_<g&&(d=r[_],a=mh(a,d.hostAttrs,c),d!==t);)_++;return null!==t&&(o.directiveStylingLast=_),a}function mh(t,r,o){const a=o?1:2;let c=-1;if(null!==r)for(let d=0;d<r.length;d++){const g=r[d];"number"==typeof g?c=g:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hs(t,g,!!o||r[++d]))}return void 0===t?null:t}function j0(t,r,o){const a=String(r);""!==a&&!a.includes(" ")&&hs(t,a,o)}function Hm(t,r,o,a,c,d,g,_){if(!(3&r.type))return;const T=t.data,k=T[_+1],H=function Ef(t){return 1==(1&t)}(k)?Xv(T,r,o,c,ml(k),g):void 0;eg(H)||(eg(d)||function F0(t){return 2==(2&t)}(k)&&(d=Xv(T,null,o,c,_,g)),function cy(t,r,o,a,c){if(r)c?t.addClass(o,a):t.removeClass(o,a);else{let d=-1===a.indexOf("-")?void 0:ga.DashCase;null==c?t.removeStyle(o,a,d):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),d|=ga.Important),t.setStyle(o,a,c,d))}}(a,g,ca(gn(),o),c,d))}function Xv(t,r,o,a,c,d){const g=null===r;let _;for(;c>0;){const T=t[c],k=Array.isArray(T),H=k?T[1]:T,se=null===H;let Ae=o[c+1];Ae===tr&&(Ae=se?qe:void 0);let $e=se?jc(Ae,a):H===a?Ae:void 0;if(k&&!eg($e)&&($e=jc(T,a)),eg($e)&&(_=$e,g))return _;const lt=t[c+1];c=g?xc(lt):ml(lt)}if(null!==r){let T=d?r.residualClasses:r.residualStyles;null!=T&&(_=jc(T,a))}return _}function eg(t){return void 0!==t}function zm(t,r){return 0!=(t.flags&(r?8:16))}function e_(t,r=""){const o=mt(),a=Er(),c=t+Hn,d=a.firstCreatePass?Yd(a,c,1,r,null):a.data[c],g=i(a,o,d,r,t);o[c]=g,Mu()&&Hf(a,o,g,d),$s(d,!1)}let i=(t,r,o,a,c)=>(Go(!0),function qs(t,r){return t.createText(r)}(r[dn],a));function s(t){return u("",t,""),s}function u(t,r,o){const a=mt(),c=function cl(t,r,o,a){return oo(t,Ta(),o)?r+Te(o)+a:tr}(a,t,r,o);return c!==tr&&function Mc(t,r,o){const a=ca(r,t);!function ma(t,r,o){t.setValue(r,o)}(t[dn],a,o)}(a,gn(),c),u}const wf=void 0;var vD=["en",[["a","p"],["AM","PM"],wf],[["AM","PM"],wf,wf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wf,"{1} 'at' {0}",wf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yD(t){const o=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let ng={};function z0(t){const r=function _D(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=uI(r);if(o)return o;const a=r.split("-")[0];if(o=uI(a),o)return o;if("en"===a)return vD;throw new ke(701,!1)}function aI(t){return z0(t)[rg.PluralCase]}function uI(t){return t in ng||(ng[t]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[t]),ng[t]}var rg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(rg||{});const ig="en-US";let cI=ig;function K0(t,r,o,a,c){if(t=st(t),Array.isArray(t))for(let d=0;d<t.length;d++)K0(t[d],r,o,a,c);else{const d=Er(),g=mt(),_=hi();let T=zu(t)?t:st(t.provide);const k=Rg(t),H=1048575&_.providerIndexes,se=_.directiveStart,Ae=_.providerIndexes>>20;if(zu(t)||!t.multi){const $e=new Pt(k,c,qd),lt=Z0(T,r,c?H:H+Ae,se);-1===lt?(pc(Bc(_,g),d,T),q0(d,t,r.length),r.push(T),_.directiveStart++,_.directiveEnd++,c&&(_.providerIndexes+=1048576),o.push($e),g.push($e)):(o[lt]=$e,g[lt]=$e)}else{const $e=Z0(T,r,H+Ae,se),lt=Z0(T,r,H,H+Ae),qt=lt>=0&&o[lt];if(c&&!qt||!c&&!($e>=0&&o[$e])){pc(Bc(_,g),d,T);const Tn=function yT(t,r,o,a,c){const d=new Pt(t,o,qd);return d.multi=[],d.index=r,d.componentProviders=0,OI(d,c,a&&!o),d}(c?mT:gT,o.length,c,a,k);!c&&qt&&(o[lt].providerFactory=Tn),q0(d,t,r.length,0),r.push(T),_.directiveStart++,_.directiveEnd++,c&&(_.providerIndexes+=1048576),o.push(Tn),g.push(Tn)}else q0(d,t,$e>-1?$e:lt,OI(o[c?lt:$e],k,!c&&a));!c&&a&&qt&&o[lt].componentProviders++}}}function q0(t,r,o,a){const c=zu(r),d=function R_(t){return!!t.useClass}(r);if(c||d){const T=(d?st(r.useClass):r).prototype.ngOnDestroy;if(T){const k=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const H=k.indexOf(o);-1===H?k.push(o,[a,T]):k[H+1].push(a,T)}else k.push(o,T)}}}function OI(t,r,o){return o&&t.componentProviders++,t.multi.push(r)-1}function Z0(t,r,o,a){for(let c=o;c<a;c++)if(r[c]===t)return c;return-1}function gT(t,r,o,a){return Y0(this.multi,[])}function mT(t,r,o,a){const c=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,_=Ha(o,o[Nt],this.providerFactory.index,a);d=_.slice(0,g),Y0(c,d);for(let T=g;T<_.length;T++)d.push(_[T])}else d=[],Y0(c,d);return d}function Y0(t,r){for(let o=0;o<t.length;o++)r.push((0,t[o])());return r}function kI(t,r=[]){return o=>{o.providersResolver=(a,c)=>function pT(t,r,o){const a=Er();if(a.firstCreatePass){const c=gs(t);K0(o,a.data,a.blueprint,c,!0),K0(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}class Df{}class LI{}function vT(t,r){return new Q0(t,r??null,[])}class Q0 extends Df{constructor(r,o,a){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new po(this);const c=er(r);this._bootstrapComponents=Ac(c.bootstrap),this._r3Injector=Uy(r,o,[{provide:Df,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver},...a],De(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class X0 extends LI{constructor(r){super(),this.moduleType=r}create(r){return new Q0(this.moduleType,r,[])}}class FI extends Df{constructor(r){super(),this.componentFactoryResolver=new po(this),this.instance=null;const o=new so([...r.providers,{provide:Df,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver}],r.parent||Gh(),r.debugName,new Set(["environment"]));this.injector=o,r.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function UI(t,r,o=null){return new FI({providers:t,parent:r,debugName:o,runEnvironmentInitializers:!0}).injector}let ET=(()=>{var t;class r{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=Jf(0,a.type),d=c.length>0?UI([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return(t=r).\u0275prov=$t({token:t,providedIn:"environment",factory:()=>new t(ht(mu))}),r})();function BI(t){t.getStandaloneInjector=r=>r.get(ET).getOrCreateStandaloneInjector(t)}function WI(t,r,o,a,c,d){const g=r+o;return oo(t,g,c)?function Du(t,r,o){return t[r]=o}(t,g+1,d?a.call(d,c):a(c)):function Ym(t,r){const o=t[r];return o===tr?void 0:o}(t,g+1)}function QI(t,r){const o=Er();let a;const c=t+Hn;o.firstCreatePass?(a=function BT(t,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(t===a.name)return a}}(r,o.pipeRegistry),o.data[c]=a,a.onDestroy&&(o.destroyHooks??=[]).push(c,a.onDestroy)):a=o.data[c];const d=a.factory||(a.factory=Sn(a.type)),_=Gn(qd);try{const T=ea(!1),k=d();return ea(T),function Av(t,r,o,a){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),r[o]=a}(o,mt(),c,k),k}finally{Gn(_)}}function XI(t,r,o){const a=t+Hn,c=mt(),d=Ia(c,a);return function Qm(t,r){return t[Nt].data[r].pure}(c,a)?WI(c,function _s(){const t=Dn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,d.transform,o,d):d.transform(o)}function zT(){return this._results[Symbol.iterator]()}class eE{get changes(){return this._changes||(this._changes=new Wu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=eE.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=zT)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const c=function ds(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Cr(t,r,o){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],d=r[a];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WT(t,r,o,a=!0){const c=r[Nt];if(function Lf(t,r,o,a){const c=xi+a,d=o.length;a>0&&(o[c-1][Fr]=r),a<d-xi?(r[Fr]=o[c],Mo(o,xi+a,r)):(o.push(r),r[Fr]=null),r[hr]=o;const g=r[Dr];null!==g&&o!==g&&function wc(t,r){const o=t[Br];r[Qr]!==r[hr][hr][Qr]&&(t[Lo]=!0),null===o?t[Br]=[r]:o.push(r)}(g,r);const _=r[Ei];null!==_&&_.insertView(t),r[ln]|=128}(c,r,t,o),a){const d=Vr(o,t),g=r[dn],_=Nh(g,t[Ui]);null!==_&&function Mh(t,r,o,a,c,d){a[wr]=c,a[vi]=r,Jc(t,a,o,1,c,d)}(c,t[vi],g,r,_,d)}}let Xm=(()=>{class r{}return r.__NG_ELEMENT_ID__=ZT,r})();const KT=Xm,qT=class extends KT{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,o){return this.createEmbeddedViewImpl(r,o)}createEmbeddedViewImpl(r,o,a){const c=function GT(t,r,o,a){const c=r.tView,_=Zd(t,c,o,4096&t[ln]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);_[Dr]=t[r.index];const k=t[Ei];return null!==k&&(_[Ei]=k.createEmbeddedView(c)),Pp(c,_,o),_}(this._declarationLView,this._declarationTContainer,r,{injector:o,hydrationInfo:a});return new sh(c)}};function ZT(){return u_(hi(),mt())}function u_(t,r){return 4&t.type?new qT(r,t,yu(t,r)):null}let l_=(()=>{class r{}return r.__NG_ELEMENT_ID__=tC,r})();function tC(){return sw(hi(),mt())}const nC=l_,rw=class extends nC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return yu(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){const r=ja(this._hostTNode,this._hostLView);if(dc(r)){const o=fa(r,this._hostLView),a=rs(r);return new qi(o[Nt].data[a+8],o)}return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=iw(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-xi}createEmbeddedView(r,o,a){let c,d;"number"==typeof a?c=a:null!=a&&(c=a.index,d=a.injector);const _=r.createEmbeddedViewImpl(o||{},d,null);return this.insertImpl(_,c,false),_}createComponent(r,o,a,c,d){const g=r&&!function tn(t){return"function"==typeof t}(r);let _;if(g)_=o;else{const Mt=o||{};_=Mt.index,a=Mt.injector,c=Mt.projectableNodes,d=Mt.environmentInjector||Mt.ngModuleRef}const T=g?r:new al(et(r)),k=a||this.parentInjector;if(!d&&null==T.ngModule){const qt=(g?k:this.parentInjector).get(mu,null);qt&&(d=qt)}et(T.componentType??{});const $e=T.create(k,c,null,d);return this.insertImpl($e.hostView,_,false),$e}insert(r,o){return this.insertImpl(r,o,!1)}insertImpl(r,o,a){const c=r._lView;if(function nu(t){return bi(t[hr])}(c)){const T=this.indexOf(r);if(-1!==T)this.detach(T);else{const k=c[hr],H=new rw(k,k[vi],k[hr]);H.detach(H.indexOf(r))}}const g=this._adjustIndex(o),_=this._lContainer;return WT(_,c,g,!a),r.attachToViewContainerRef(),Mo(tE(_),g,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=iw(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Uf(this._lContainer,o);a&&(vd(tE(this._lContainer),o),ji(a[Nt],a))}detach(r){const o=this._adjustIndex(r,-1),a=Uf(this._lContainer,o);return a&&null!=vd(tE(this._lContainer),o)?new sh(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function iw(t){return t[8]}function tE(t){return t[8]||(t[8]=[])}function sw(t,r){let o;const a=r[t.index];return bi(a)?o=a:(o=xp(a,r,null,t),r[t.index]=o,af(r,o)),ow(o,r,t,a),new rw(o,t,r)}let ow=function aw(t,r,o,a){if(t[Ui])return;let c;c=8&o.type?Mr(a):function rC(t,r){const o=t[dn],a=o.createComment(""),c=js(r,t);return Vl(o,Nh(o,c),a,function sy(t,r){return t.nextSibling(r)}(o,c),!1),a}(r,o),t[Ui]=c};class nE{constructor(r){this.queryList=r,this.matches=null}clone(){return new nE(this.queryList)}setDirty(){this.queryList.setDirty()}}class rE{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let d=0;d<a;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new rE(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==mw(r,o).matches&&this.queries[o].setDirty()}}class uw{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class iE{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,d=this.getByIndex(a).embeddedTView(r,c);d&&(d.indexInDeclarationView=a,null!==o?o.push(d):o=[d])}return null!==o?new iE(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class sE{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new sE(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(r,o,oC(o,d)),this.matchTNodeWithReadOption(r,o,Vc(o,r,d,!1,!1))}else a===Xm?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Vc(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Gu||c===l_||c===Xm&&4&o.type)this.addMatch(o.index,-2);else{const d=Vc(o,r,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function oC(t,r){const o=t.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function uC(t,r,o,a){return-1===o?function aC(t,r){return 11&t.type?yu(t,r):4&t.type?u_(t,r):null}(r,t):-2===o?function cC(t,r,o){return o===Gu?yu(r,t):o===Xm?u_(r,t):o===l_?sw(r,t):void 0}(t,r,a):Ha(t,t[Nt],o,r)}function cw(t,r,o,a){const c=r[Ei].queries[a];if(null===c.matches){const d=t.data,g=o.matches,_=[];for(let T=0;T<g.length;T+=2){const k=g[T];_.push(k<0?null:uC(r,d[k],g[T+1],o.metadata.read))}c.matches=_}return c.matches}function oE(t,r,o,a){const c=t.queries.getByIndex(o),d=c.matches;if(null!==d){const g=cw(t,r,c,o);for(let _=0;_<d.length;_+=2){const T=d[_];if(T>0)a.push(g[_/2]);else{const k=d[_+1],H=r[-T];for(let se=xi;se<H.length;se++){const Ae=H[se];Ae[Dr]===Ae[hr]&&oE(Ae[Nt],Ae,k,a)}if(null!==H[Br]){const se=H[Br];for(let Ae=0;Ae<se.length;Ae++){const $e=se[Ae];oE($e[Nt],$e,k,a)}}}}}return a}function lw(t){const r=mt(),o=Er(),a=Dl();m(a+1);const c=mw(o,a);if(t.dirty&&function _l(t){return 4==(4&t[ln])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const d=c.crossesNgTemplate?oE(o,r,a,[]):cw(o,r,c,a);t.reset(d,pp),t.notifyOnChanges()}return!0}return!1}function dw(t,r,o){const a=Er();a.firstCreatePass&&(gw(a,new uw(t,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),pw(a,mt(),r)}function hw(t,r,o,a){const c=Er();if(c.firstCreatePass){const d=hi();gw(c,new uw(r,o,a),d.index),function dC(t,r){const o=t.contentQueries||(t.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,r)}(c,t),2==(2&o)&&(c.staticContentQueries=!0)}pw(c,mt(),o)}function fw(){return function lC(t,r){return t[Ei].queries[r].queryList}(mt(),Dl())}function pw(t,r,o){const a=new eE(4==(4&o));(function Rc(t,r,o,a){const c=Np(r);c.push(o),t.firstCreatePass&&pm(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[Ei]&&(r[Ei]=new rE),r[Ei].queries.push(new nE(a))}function gw(t,r,o){null===t.queries&&(t.queries=new iE),t.queries.track(new sE(r,o))}function mw(t,r){return t.queries.getByIndex(r)}function aE(t){return!!er(t)}const Pw=new Kr("Application Initializer");let hE=(()=>{var t;class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=_t(Pw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const g=d();if(Pm(g))a.push(g);else if(Nv(g)){const _=new Promise((T,k)=>{g.subscribe({complete:T,error:k})});a.push(_)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),r})(),Ow=(()=>{var t;class r{log(a){console.log(a)}warn(a){console.warn(a)}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})();const h_=new Kr("LocaleId",{providedIn:"root",factory:()=>_t(h_,Jt.Optional|Jt.SkipSelf)||function PC(){return typeof $localize<"u"&&$localize.locale||ig}()}),OC=new Kr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kw=(()=>{var t;class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();class LC{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let FC=(()=>{var t;class r{compileModuleSync(a){return new X0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Ac(er(a).declarations).reduce((_,T)=>{const k=et(T);return k&&_.push(new al(k)),_},[]);return new LC(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();const Bw=new Kr(""),Vw=new Kr("");let gE,rb=(()=>{var t;class r{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gE||(function ib(t){gE=t}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return(t=r).\u0275fac=function(a){return new(a||t)(ht(Is),ht(jw),ht(Vw))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),r})(),jw=(()=>{var t;class r{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return gE?.findTestabilityInTree(this,a,c)??null}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})(),yh=null;const $w=new Kr("AllowMultipleToken"),mE=new Kr("PlatformDestroyListeners"),yE=new Kr("appBootstrapListener");class ab{constructor(r,o){this.name=r,this.token=o}}function Gw(t,r,o=[]){const a=`Platform: ${r}`,c=new Kr(a);return(d=[])=>{let g=vE();if(!g||g.injector.get($w,!1)){const _=[...o,...d,{provide:c,useValue:!0}];t?t(_):function ub(t){if(yh&&!yh.get($w,!1))throw new ke(400,!1);(function Hw(){!function La(t){ns=t}(()=>{throw new ke(600,!1)})})(),yh=t;const r=t.get(Kw);(function zw(t){t.get(bc,null)?.forEach(o=>o())})(t)}(function Ww(t=[],r){return vu.create({name:r,providers:[{provide:np,useValue:"platform"},{provide:mE,useValue:new Set([()=>yh=null])},...t]})}(_,a))}return function lb(t){const r=vE();if(!r)throw new ke(401,!1);return r}()}}function vE(){return yh?.get(Kw)??null}let Kw=(()=>{var t;class r{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function db(t="zone.js",r){return"noop"===t?new sl:"zone.js"===t?new Is(r):t}(c?.ngZone,function qw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const g=function _T(t,r,o){return new Q0(t,r,o)}(a.moduleType,this.injector,function Jw(t){return[{provide:Is,useFactory:t},{provide:gu,multi:!0,useFactory:()=>{const r=_t(fb,{optional:!0});return()=>r.initialize()}},{provide:Xw,useFactory:hb},{provide:Kg,useFactory:Vy}]}(()=>d)),_=g.injector.get(_u,null);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:k=>{_.handleError(k)}});g.onDestroy(()=>{p_(this._modules,g),T.unsubscribe()})}),function Zw(t,r,o){try{const a=o();return Pm(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(_,d,()=>{const T=g.injector.get(hE);return T.runInitializers(),T.donePromise.then(()=>(function lI(t){bt(t,"Expected localeId to be defined"),"string"==typeof t&&(cI=t.toLowerCase().replace(/_/g,"-"))}(g.injector.get(h_,ig)||ig),this._moduleDoBootstrap(g),g))})})}bootstrapModule(a,c=[]){const d=Yw({},c);return function sb(t,r,o){const a=new X0(o);return Promise.resolve(a)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(ag);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ke(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(mE,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=r).\u0275fac=function(a){return new(a||t)(ht(vu))},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})();function Yw(t,r){return Array.isArray(r)?r.reduce(Yw,t):{...t,...r}}let ag=(()=>{var t;class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_t(Xw),this.zoneIsStable=_t(Kg),this.componentTypes=[],this.components=[],this.isStable=_t(kw).hasPendingTasks.pipe((0,Ge.w)(a=>a?(0,ge.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,Se.B)()),this._injector=_t(mu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Fg;if(!this._injector.get(hE).done)throw!d&&Rr(a),new ke(405,!1);let _;_=d?a:this._injector.get(Xh).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const T=function ob(t){return t.isBoundToModule}(_)?void 0:this._injector.get(Df),H=_.create(vu.NULL,[],c||_.selector,T),se=H.location.nativeElement,Ae=H.injector.get(Bw,null);return Ae?.registerApplication(se),H.onDestroy(()=>{this.detachView(H.hostView),p_(this.components,H),Ae?.unregisterApplication(se)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;p_(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(yE,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>p_(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ke(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();function p_(t,r){const o=t.indexOf(r);o>-1&&t.splice(o,1)}const Xw=new Kr("",{providedIn:"root",factory:()=>_t(_u).handleError.bind(void 0)});function hb(){const t=_t(Is),r=_t(_u);return o=>t.runOutsideAngular(()=>r.handleError(o))}let fb=(()=>{var t;class r{constructor(){this.zone=_t(Is),this.applicationRef=_t(ag)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();function gb(){return!1}function mb(){}let yb=(()=>{class r{}return r.__NG_ELEMENT_ID__=vb,r})();function vb(t){return function _b(t,r,o){if(ks(t)&&!o){const a=li(t.index,r);return new sh(a,a)}return 47&t.type?new sh(r[Qr],r):null}(hi(),mt(),16==(16&t))}class rD{constructor(){}supports(r){return Im(r)}create(r){return new Cb(r)}}const Tb=(t,r)=>r;class Cb{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Tb}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,c=0,d=null;for(;o||a;){const g=!a||o&&o.currentIndex<sD(a,c,d)?o:a,_=sD(g,c,d),T=g.currentIndex;if(g===a)c--,a=a._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const k=_-c,H=T-c;if(k!=H){for(let Ae=0;Ae<k;Ae++){const $e=Ae<d.length?d[Ae]:d[Ae]=0,lt=$e+Ae;H<=lt&&lt<k&&(d[Ae]=$e+1)}d[g.previousIndex]=H-k}}_!==T&&r(g,_,T)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Im(r))throw new ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,d,g,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let _=0;_<this.length;_++)d=r[_],g=this._trackByFn(_,d),null!==o&&Object.is(o.trackById,g)?(a&&(o=this._verifyReinsertion(o,d,g,_)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,_),a=!0),o=o._next}else c=0,function Fp(t,r){if(Array.isArray(t))for(let o=0;o<t.length;o++)r(t[o]);else{const o=t[Symbol.iterator]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,_=>{g=this._trackByFn(c,_),null!==o&&Object.is(o.trackById,g)?(a&&(o=this._verifyReinsertion(o,_,g,c)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,g,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,c){let d;return null===r?d=this._itTail:(d=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,d,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,d,c)):r=this._addAfter(new bb(o,a),d,c),r}_verifyReinsertion(r,o,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?r=this._reinsertAfter(d,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,d=r._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const c=null===o?this._itHead:o._next;return r._next=c,r._prev=o,null===c?this._itTail=r:c._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new iD),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iD),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bb{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sb{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class iD{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new Sb,this.map.set(o,a)),a.add(r)}get(r,o){const c=this.map.get(r);return c?c.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sD(t,r,o){const a=t.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+r+c}class oD{constructor(){}supports(r){return r instanceof Map||wm(r)}create(){return new Ab}}class Ab{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||wm(r)))throw new ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const a=new Rb(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class Rb{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aD(){return new DE([new rD])}let DE=(()=>{var t;class r{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new r(a)}static extend(a){return{provide:r,useFactory:c=>r.create(a,c||aD()),deps:[[r,new Wa,new zc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ke(901,!1)}}return(t=r).\u0275prov=$t({token:t,providedIn:"root",factory:aD}),r})();function uD(){return new TE([new oD])}let TE=(()=>{var t;class r{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new r(a)}static extend(a){return{provide:r,useFactory:c=>r.create(a,c||uD()),deps:[[r,new Wa,new zc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ke(901,!1)}}return(t=r).\u0275prov=$t({token:t,providedIn:"root",factory:uD}),r})();const Nb=Gw(null,"core",[]);let Pb=(()=>{var t;class r{constructor(a){}}return(t=r).\u0275fac=function(a){return new(a||t)(ht(ag))},t.\u0275mod=Ms({type:t}),t.\u0275inj=qn({}),r})();function zb(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Wb(t){const r=et(t);if(!r)return null;const o=new al(r);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},6593:(Lt,We,O)=>{O.d(We,{Dx:()=>xr,b2:()=>rn,q6:()=>$t});var y=O(5879),ue=O(6814);class z extends ue.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends z{static makeCurrent(){(0,ue.HT)(new ve)}onAndCancel($,oe,K){return $.addEventListener(oe,K),()=>{$.removeEventListener(oe,K)}}dispatchEvent($,oe){$.dispatchEvent(oe)}remove($){$.parentNode&&$.parentNode.removeChild($)}createElement($,oe){return(oe=oe||this.getDefaultDocument()).createElement($)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($){return $.nodeType===Node.ELEMENT_NODE}isShadowRoot($){return $ instanceof DocumentFragment}getGlobalEventTarget($,oe){return"window"===oe?window:"document"===oe?$:"body"===oe?$.body:null}getBaseHref($){const oe=function ge(){return me=me||document.querySelector("base"),me?me.getAttribute("href"):null}();return null==oe?null:function Ge(G){Se=Se||document.createElement("a"),Se.setAttribute("href",G);const $=Se.pathname;return"/"===$.charAt(0)?$:`/${$}`}(oe)}resetBaseElement(){me=null}getUserAgent(){return window.navigator.userAgent}getCookie($){return(0,ue.Mx)(document.cookie,$)}}let Se,me=null,te=(()=>{var G;class ${build(){return new XMLHttpRequest}}return(G=$).\u0275fac=function(K){return new(K||G)},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();const Q=new y.OlP("EventManagerPlugins");let De=(()=>{var G;class ${constructor(K,Ee){this._zone=Ee,this._eventNameToPlugin=new Map,K.forEach(Ve=>{Ve.manager=this}),this._plugins=K.slice().reverse()}addEventListener(K,Ee,Ve){return this._findPluginFor(Ee).addEventListener(K,Ee,Ve)}getZone(){return this._zone}_findPluginFor(K){let Ee=this._eventNameToPlugin.get(K);if(Ee)return Ee;if(Ee=this._plugins.find(ht=>ht.supports(K)),!Ee)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(K,Ee),Ee}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(Q),y.LFG(y.R0b))},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();class nt{constructor($){this._doc=$}}const ut="ng-app-id";let Et=(()=>{var G;class ${constructor(K,Ee,Ve,ht={}){this.doc=K,this.appId=Ee,this.nonce=Ve,this.platformId=ht,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ue.PM)(ht),this.resetHostNodes()}addStyles(K){for(const Ee of K)1===this.changeUsageCount(Ee,1)&&this.onStyleAdded(Ee)}removeStyles(K){for(const Ee of K)this.changeUsageCount(Ee,-1)<=0&&this.onStyleRemoved(Ee)}ngOnDestroy(){const K=this.styleNodesInDOM;K&&(K.forEach(Ee=>Ee.remove()),K.clear());for(const Ee of this.getAllStyles())this.onStyleRemoved(Ee);this.resetHostNodes()}addHost(K){this.hostNodes.add(K);for(const Ee of this.getAllStyles())this.addStyleToHost(K,Ee)}removeHost(K){this.hostNodes.delete(K)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(K){for(const Ee of this.hostNodes)this.addStyleToHost(Ee,K)}onStyleRemoved(K){const Ee=this.styleRef;Ee.get(K)?.elements?.forEach(Ve=>Ve.remove()),Ee.delete(K)}collectServerRenderedStyles(){const K=this.doc.head?.querySelectorAll(`style[${ut}="${this.appId}"]`);if(K?.length){const Ee=new Map;return K.forEach(Ve=>{null!=Ve.textContent&&Ee.set(Ve.textContent,Ve)}),Ee}return null}changeUsageCount(K,Ee){const Ve=this.styleRef;if(Ve.has(K)){const ht=Ve.get(K);return ht.usage+=Ee,ht.usage}return Ve.set(K,{usage:Ee,elements:[]}),Ee}getStyleElement(K,Ee){const Ve=this.styleNodesInDOM,ht=Ve?.get(Ee);if(ht?.parentNode===K)return Ve.delete(Ee),ht.removeAttribute(ut),ht;{const Gt=this.doc.createElement("style");return this.nonce&&Gt.setAttribute("nonce",this.nonce),Gt.textContent=Ee,this.platformIsServer&&Gt.setAttribute(ut,this.appId),Gt}}addStyleToHost(K,Ee){const Ve=this.getStyleElement(K,Ee);K.appendChild(Ve);const ht=this.styleRef,Gt=ht.get(Ee)?.elements;Gt?Gt.push(Ve):ht.set(Ee,{elements:[Ve],usage:1})}resetHostNodes(){const K=this.hostNodes;K.clear(),K.add(this.doc.head)}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(ue.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tt=/%COMP%/g,Le=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ke(G,$){return $.map(oe=>oe.replace(Tt,G))}let Ue=(()=>{var G;class ${constructor(K,Ee,Ve,ht,Gt,_t,nn,Yt=null){this.eventManager=K,this.sharedStylesHost=Ee,this.appId=Ve,this.removeStylesOnCompDestroy=ht,this.doc=Gt,this.platformId=_t,this.ngZone=nn,this.nonce=Yt,this.rendererByCompId=new Map,this.platformIsServer=(0,ue.PM)(_t),this.defaultRenderer=new Vt(K,Gt,nn,this.platformIsServer)}createRenderer(K,Ee){if(!K||!Ee)return this.defaultRenderer;this.platformIsServer&&Ee.encapsulation===y.ifc.ShadowDom&&(Ee={...Ee,encapsulation:y.ifc.Emulated});const Ve=this.getOrCreateRenderer(K,Ee);return Ve instanceof rr?Ve.applyToHost(K):Ve instanceof cr&&Ve.applyStyles(),Ve}getOrCreateRenderer(K,Ee){const Ve=this.rendererByCompId;let ht=Ve.get(Ee.id);if(!ht){const Gt=this.doc,_t=this.ngZone,nn=this.eventManager,Yt=this.sharedStylesHost,Xn=this.removeStylesOnCompDestroy,Ne=this.platformIsServer;switch(Ee.encapsulation){case y.ifc.Emulated:ht=new rr(nn,Yt,Ee,this.appId,Xn,Gt,_t,Ne);break;case y.ifc.ShadowDom:return new En(nn,Yt,K,Ee,Gt,_t,this.nonce,Ne);default:ht=new cr(nn,Yt,Ee,Xn,Gt,_t,Ne)}Ve.set(Ee.id,ht)}return ht}ngOnDestroy(){this.rendererByCompId.clear()}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(De),y.LFG(Et),y.LFG(y.AFp),y.LFG(Le),y.LFG(ue.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();class Vt{constructor($,oe,K,Ee){this.eventManager=$,this.doc=oe,this.ngZone=K,this.platformIsServer=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($,oe){return oe?this.doc.createElementNS(st[oe]||oe,$):this.doc.createElement($)}createComment($){return this.doc.createComment($)}createText($){return this.doc.createTextNode($)}appendChild($,oe){(Nn($)?$.content:$).appendChild(oe)}insertBefore($,oe,K){$&&(Nn($)?$.content:$).insertBefore(oe,K)}removeChild($,oe){$&&$.removeChild(oe)}selectRootElement($,oe){let K="string"==typeof $?this.doc.querySelector($):$;if(!K)throw new y.vHH(-5104,!1);return oe||(K.textContent=""),K}parentNode($){return $.parentNode}nextSibling($){return $.nextSibling}setAttribute($,oe,K,Ee){if(Ee){oe=Ee+":"+oe;const Ve=st[Ee];Ve?$.setAttributeNS(Ve,oe,K):$.setAttribute(oe,K)}else $.setAttribute(oe,K)}removeAttribute($,oe,K){if(K){const Ee=st[K];Ee?$.removeAttributeNS(Ee,oe):$.removeAttribute(`${K}:${oe}`)}else $.removeAttribute(oe)}addClass($,oe){$.classList.add(oe)}removeClass($,oe){$.classList.remove(oe)}setStyle($,oe,K,Ee){Ee&(y.JOm.DashCase|y.JOm.Important)?$.style.setProperty(oe,K,Ee&y.JOm.Important?"important":""):$.style[oe]=K}removeStyle($,oe,K){K&y.JOm.DashCase?$.style.removeProperty(oe):$.style[oe]=""}setProperty($,oe,K){$[oe]=K}setValue($,oe){$.nodeValue=oe}listen($,oe,K){if("string"==typeof $&&!($=(0,ue.q)().getGlobalEventTarget(this.doc,$)))throw new Error(`Unsupported event target ${$} for event ${oe}`);return this.eventManager.addEventListener($,oe,this.decoratePreventDefault(K))}decoratePreventDefault($){return oe=>{if("__ngUnwrap__"===oe)return $;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$(oe)):$(oe))&&oe.preventDefault()}}}function Nn(G){return"TEMPLATE"===G.tagName&&void 0!==G.content}class En extends Vt{constructor($,oe,K,Ee,Ve,ht,Gt,_t){super($,Ve,ht,_t),this.sharedStylesHost=oe,this.hostEl=K,this.shadowRoot=K.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const nn=Ke(Ee.id,Ee.styles);for(const Yt of nn){const Xn=document.createElement("style");Gt&&Xn.setAttribute("nonce",Gt),Xn.textContent=Yt,this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot($){return $===this.hostEl?this.shadowRoot:$}appendChild($,oe){return super.appendChild(this.nodeOrShadowRoot($),oe)}insertBefore($,oe,K){return super.insertBefore(this.nodeOrShadowRoot($),oe,K)}removeChild($,oe){return super.removeChild(this.nodeOrShadowRoot($),oe)}parentNode($){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class cr extends Vt{constructor($,oe,K,Ee,Ve,ht,Gt,_t){super($,Ve,ht,Gt),this.sharedStylesHost=oe,this.removeStylesOnCompDestroy=Ee,this.styles=_t?Ke(_t,K.styles):K.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rr extends cr{constructor($,oe,K,Ee,Ve,ht,Gt,_t){const nn=Ee+"-"+K.id;super($,oe,K,Ve,ht,Gt,_t,nn),this.contentAttr=function Te(G){return"_ngcontent-%COMP%".replace(Tt,G)}(nn),this.hostAttr=function Be(G){return"_nghost-%COMP%".replace(Tt,G)}(nn)}applyToHost($){this.applyStyles(),this.setAttribute($,this.hostAttr,"")}createElement($,oe){const K=super.createElement($,oe);return super.setAttribute(K,this.contentAttr,""),K}}let In=(()=>{var G;class $ extends nt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,Ee,Ve){return K.addEventListener(Ee,Ve,!1),()=>this.removeEventListener(K,Ee,Ve)}removeEventListener(K,Ee,Ve){return K.removeEventListener(Ee,Ve)}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(ue.K0))},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();const mn=["alt","control","meta","shift"],we={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fe={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let He=(()=>{var G;class $ extends nt{constructor(K){super(K)}supports(K){return null!=$.parseEventName(K)}addEventListener(K,Ee,Ve){const ht=$.parseEventName(Ee),Gt=$.eventCallback(ht.fullKey,Ve,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ue.q)().onAndCancel(K,ht.domEventName,Gt))}static parseEventName(K){const Ee=K.toLowerCase().split("."),Ve=Ee.shift();if(0===Ee.length||"keydown"!==Ve&&"keyup"!==Ve)return null;const ht=$._normalizeKey(Ee.pop());let Gt="",_t=Ee.indexOf("code");if(_t>-1&&(Ee.splice(_t,1),Gt="code."),mn.forEach(Yt=>{const Xn=Ee.indexOf(Yt);Xn>-1&&(Ee.splice(Xn,1),Gt+=Yt+".")}),Gt+=ht,0!=Ee.length||0===ht.length)return null;const nn={};return nn.domEventName=Ve,nn.fullKey=Gt,nn}static matchEventFullKeyCode(K,Ee){let Ve=we[K.key]||K.key,ht="";return Ee.indexOf("code.")>-1&&(Ve=K.code,ht="code."),!(null==Ve||!Ve)&&(Ve=Ve.toLowerCase()," "===Ve?Ve="space":"."===Ve&&(Ve="dot"),mn.forEach(Gt=>{Gt!==Ve&&(0,Fe[Gt])(K)&&(ht+=Gt+".")}),ht+=Ve,ht===Ee)}static eventCallback(K,Ee,Ve){return ht=>{$.matchEventFullKeyCode(ht,K)&&Ve.runGuarded(()=>Ee(ht))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(ue.K0))},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac}),$})();const $t=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:ue.bD},{provide:y.g9A,useValue:function Ct(){ve.makeCurrent()},multi:!0},{provide:ue.K0,useFactory:function Xt(){return(0,y.RDi)(document),document},deps:[]}]),wn=new y.OlP(""),qn=[{provide:y.rWj,useClass:class Me{addToWindow($){y.dqk.getAngularTestability=(K,Ee=!0)=>{const Ve=$.findTestabilityInTree(K,Ee);if(null==Ve)throw new y.vHH(5103,!1);return Ve},y.dqk.getAllAngularTestabilities=()=>$.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>$.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(K=>{const Ee=y.dqk.getAllAngularTestabilities();let Ve=Ee.length,ht=!1;const Gt=function(_t){ht=ht||_t,Ve--,0==Ve&&K(ht)};Ee.forEach(_t=>{_t.whenStable(Gt)})})}findTestabilityInTree($,oe,K){return null==oe?null:$.getTestability(oe)??(K?(0,ue.q)().isShadowRoot(oe)?this.findTestabilityInTree($,oe.host,!0):this.findTestabilityInTree($,oe.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],lr=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Cn(){return new y.qLn},deps:[]},{provide:Q,useClass:In,multi:!0,deps:[ue.K0,y.R0b,y.Lbi]},{provide:Q,useClass:He,multi:!0,deps:[ue.K0]},Ue,Et,De,{provide:y.FYo,useExisting:Ue},{provide:ue.JF,useClass:te,deps:[]},[]];let rn=(()=>{var G;class ${constructor(K){}static withServerTransition(K){return{ngModule:$,providers:[{provide:y.AFp,useValue:K.appId}]}}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(wn,12))},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({providers:[...lr,...qn],imports:[ue.ez,y.hGG]}),$})(),xr=(()=>{var G;class ${constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return(G=$).\u0275fac=function(K){return new(K||G)(y.LFG(ue.K0))},G.\u0275prov=y.Yz7({token:G,factory:function(K){let Ee=null;return Ee=K?new K:function Qn(){return new xr((0,y.LFG)(ue.K0))}(),Ee},providedIn:"root"}),$})();typeof window<"u"&&window},3781:(Lt,We,O)=>{O.d(We,{gz:()=>Fr,F0:()=>li,rH:()=>nu,Bz:()=>oc,lC:()=>Js});var y=O(5879),ue=O(5592),z=O(4674),me=O(2459),ge=O(2096),Se=O(5619),Ge=O(7453),Me=O(2737),te=O(7400),Q=O(4564),De=O(2714),nt=O(8251),ut=O(7103);function Et(...m){const I=(0,Q.yG)(m),b=(0,Q.jO)(m),{args:D,keys:S}=(0,Ge.D)(m);if(0===D.length)return(0,me.D)([],I);const V=new ue.y(function st(m,I,b=Me.y){return D=>{Tt(I,()=>{const{length:S}=m,V=new Array(S);let X=S,ce=S;for(let he=0;he<S;he++)Tt(I,()=>{const de=(0,me.D)(m[he],I);let Ut=!1;de.subscribe((0,nt.x)(D,gn=>{V[he]=gn,Ut||(Ut=!0,ce--),ce||D.next(b(V.slice()))},()=>{--X||D.complete()}))},D)},D)}}(D,I,S?X=>(0,De.n)(S,X):Me.y));return b?V.pipe((0,te.Z)(b)):V}function Tt(m,I,b){m?(0,ut.f)(b,m,I):I()}var gt=O(6973),Oe=O(5211),Ot=O(4829);function ke(m){return new ue.y(I=>{(0,Ot.Xf)(m()).subscribe(I)})}var Le=O(8407);function Te(m,I){const b=(0,z.m)(m)?m:()=>m,D=S=>S.error(b());return new ue.y(I?S=>I.schedule(D,0,S):D)}var Be=O(6232),Ke=O(7394),Ue=O(9360);function Vt(){return(0,Ue.e)((m,I)=>{let b=null;m._refCount++;const D=(0,nt.x)(I,void 0,void 0,void 0,()=>{if(!m||m._refCount<=0||0<--m._refCount)return void(b=null);const S=m._connection,V=b;b=null,S&&(!V||S===V)&&S.unsubscribe(),I.unsubscribe()});m.subscribe(D),D.closed||(b=m.connect())})}class It extends ue.y{constructor(I,b){super(),this.source=I,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Ue.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,I?.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new Ke.w0;const b=this.getSubject();I.add(this.source.subscribe((0,nt.x)(b,void 0,()=>{this._teardown(),b.complete()},D=>{this._teardown(),b.error(D)},()=>this._teardown()))),I.closed&&(this._connection=null,I=Ke.w0.EMPTY)}return I}refCount(){return Vt()(this)}}var un=O(8645),Nn=O(6814),En=O(7398),cr=O(4664),rr=O(8180),In=O(7921),mn=O(2181),we=O(1631),Fe=O(1374),He=O(6328),xe=O(9397);function it(m){return(0,Ue.e)((I,b)=>{let V,D=null,S=!1;D=I.subscribe((0,nt.x)(b,void 0,void 0,X=>{V=(0,Ot.Xf)(m(X,it(m)(I))),D?(D.unsubscribe(),D=null,V.subscribe(b)):S=!0})),S&&(D.unsubscribe(),D=null,V.subscribe(b))})}var pt=O(6699),bt=O(3572);function Ct(m){return m<=0?()=>Be.E:(0,Ue.e)((I,b)=>{let D=[];I.subscribe((0,nt.x)(b,S=>{D.push(S),m<D.length&&D.shift()},()=>{for(const S of D)b.next(S);b.complete()},void 0,()=>{D=null}))})}var Cn=O(3026),$t=O(4716),wn=O(2420),lr=O(7537),rn=O(6593);const Ft="primary",Sr=Symbol("RouteTitle");class Vn{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const b=this.params[I];return Array.isArray(b)?b[0]:b}return null}getAll(I){if(this.has(I)){const b=this.params[I];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Qn(m){return new Vn(m)}function xr(m,I,b){const D=b.path.split("/");if(D.length>m.length||"full"===b.pathMatch&&(I.hasChildren()||D.length<m.length))return null;const S={};for(let V=0;V<D.length;V++){const X=D[V],ce=m[V];if(X.startsWith(":"))S[X.substring(1)]=ce;else if(X!==ce.path)return null}return{consumed:m.slice(0,D.length),posParams:S}}function zn(m,I){const b=m?Object.keys(m):void 0,D=I?Object.keys(I):void 0;if(!b||!D||b.length!=D.length)return!1;let S;for(let V=0;V<b.length;V++)if(S=b[V],!Jt(m[S],I[S]))return!1;return!0}function Jt(m,I){if(Array.isArray(m)&&Array.isArray(I)){if(m.length!==I.length)return!1;const b=[...m].sort(),D=[...I].sort();return b.every((S,V)=>D[V]===S)}return m===I}function Qt(m){return m.length>0?m[m.length-1]:null}function sn(m){return function ve(m){return!!m&&(m instanceof ue.y||(0,z.m)(m.lift)&&(0,z.m)(m.subscribe))}(m)?m:(0,y.QGY)(m)?(0,me.D)(Promise.resolve(m)):(0,ge.of)(m)}const Gn={exact:function Nr(m,I,b){if(!Ar(m.segments,I.segments)||!xn(m.segments,I.segments,b)||m.numberOfChildren!==I.numberOfChildren)return!1;for(const D in I.children)if(!m.children[D]||!Nr(m.children[D],I.children[D],b))return!1;return!0},subset:jn},ii={exact:function Mn(m,I){return zn(m,I)},subset:function Hi(m,I){return Object.keys(I).length<=Object.keys(m).length&&Object.keys(I).every(b=>Jt(m[b],I[b]))},ignored:()=>!0};function Ir(m,I,b){return Gn[b.paths](m.root,I.root,b.matrixParams)&&ii[b.queryParams](m.queryParams,I.queryParams)&&!("exact"===b.fragment&&m.fragment!==I.fragment)}function jn(m,I,b){return Xi(m,I,I.segments,b)}function Xi(m,I,b,D){if(m.segments.length>b.length){const S=m.segments.slice(0,b.length);return!(!Ar(S,b)||I.hasChildren()||!xn(S,b,D))}if(m.segments.length===b.length){if(!Ar(m.segments,b)||!xn(m.segments,b,D))return!1;for(const S in I.children)if(!m.children[S]||!jn(m.children[S],I.children[S],D))return!1;return!0}{const S=b.slice(0,m.segments.length),V=b.slice(m.segments.length);return!!(Ar(m.segments,S)&&xn(m.segments,S,D)&&m.children[Ft])&&Xi(m.children[Ft],I,V,D)}}function xn(m,I,b){return I.every((D,S)=>ii[b](m[S].parameters,D.parameters))}class si{constructor(I=new On([],{}),b={},D=null){this.root=I,this.queryParams=b,this.fragment=D}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return oi.serialize(this)}}class On{constructor(I,b){this.segments=I,this.children=b,this.parent=null,Object.values(b).forEach(D=>D.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class Ln{constructor(I,b){this.path=I,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return Ee(this)}}function Ar(m,I){return m.length===I.length&&m.every((b,D)=>b.path===I[D].path)}let Hr=(()=>{var m;class I{}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:function(){return new Zr},providedIn:"root"}),I})();class Zr{parse(I){const b=new re(I);return new si(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(I){const b=`/${gi(I.root,!0)}`,D=function ht(m){const I=Object.keys(m).map(b=>{const D=m[b];return Array.isArray(D)?D.map(S=>`${ye(b)}=${ye(S)}`).join("&"):`${ye(b)}=${ye(D)}`}).filter(b=>!!b);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${b}${D}${"string"==typeof I.fragment?`#${function G(m){return encodeURI(m)}(I.fragment)}`:""}`}}const oi=new Zr;function di(m){return m.segments.map(I=>Ee(I)).join("/")}function gi(m,I){if(!m.hasChildren())return di(m);if(I){const b=m.children[Ft]?gi(m.children[Ft],!1):"",D=[];return Object.entries(m.children).forEach(([S,V])=>{S!==Ft&&D.push(`${S}:${gi(V,!1)}`)}),D.length>0?`${b}(${D.join("//")})`:b}{const b=function qr(m,I){let b=[];return Object.entries(m.children).forEach(([D,S])=>{D===Ft&&(b=b.concat(I(S,D)))}),Object.entries(m.children).forEach(([D,S])=>{D!==Ft&&(b=b.concat(I(S,D)))}),b}(m,(D,S)=>S===Ft?[gi(m.children[Ft],!1)]:[`${S}:${gi(D,!1)}`]);return 1===Object.keys(m.children).length&&null!=m.children[Ft]?`${di(m)}/${b[0]}`:`${di(m)}/(${b.join("//")})`}}function Li(m){return encodeURIComponent(m).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ye(m){return Li(m).replace(/%3B/gi,";")}function $(m){return Li(m).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oe(m){return decodeURIComponent(m)}function K(m){return oe(m.replace(/\+/g,"%20"))}function Ee(m){return`${$(m.path)}${function Ve(m){return Object.keys(m).map(I=>`;${$(I)}=${$(m[I])}`).join("")}(m.parameters)}`}const Gt=/^[^\/()?;#]+/;function _t(m){const I=m.match(Gt);return I?I[0]:""}const nn=/^[^\/()?;=#]+/,Xn=/^[^=?&#]+/,le=/^[^&#]+/;class re{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let D={};return this.peekStartsWith("(")&&(D=this.parseParens(!1)),(I.length>0||Object.keys(b).length>0)&&(D[Ft]=new On(I,b)),D}parseSegment(){const I=_t(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(I),new Ln(oe(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const b=function Yt(m){const I=m.match(nn);return I?I[0]:""}(this.remaining);if(!b)return;this.capture(b);let D="";if(this.consumeOptional("=")){const S=_t(this.remaining);S&&(D=S,this.capture(D))}I[oe(b)]=oe(D)}parseQueryParam(I){const b=function Ne(m){const I=m.match(Xn);return I?I[0]:""}(this.remaining);if(!b)return;this.capture(b);let D="";if(this.consumeOptional("=")){const X=function Xe(m){const I=m.match(le);return I?I[0]:""}(this.remaining);X&&(D=X,this.capture(D))}const S=K(b),V=K(D);if(I.hasOwnProperty(S)){let X=I[S];Array.isArray(X)||(X=[X],I[S]=X),X.push(V)}else I[S]=V}parseParens(I){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const D=_t(this.remaining),S=this.remaining[D.length];if("/"!==S&&")"!==S&&";"!==S)throw new y.vHH(4010,!1);let V;D.indexOf(":")>-1?(V=D.slice(0,D.indexOf(":")),this.capture(V),this.capture(":")):I&&(V=Ft);const X=this.parseChildren();b[V]=1===Object.keys(X).length?X[Ft]:new On([],X),this.consumeOptional("//")}return b}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new y.vHH(4011,!1)}}function fe(m){return m.segments.length>0?new On([],{[Ft]:m}):m}function Re(m){const I={};for(const D of Object.keys(m.children)){const V=Re(m.children[D]);if(D===Ft&&0===V.segments.length&&V.hasChildren())for(const[X,ce]of Object.entries(V.children))I[X]=ce;else(V.segments.length>0||V.hasChildren())&&(I[D]=V)}return function tt(m){if(1===m.numberOfChildren&&m.children[Ft]){const I=m.children[Ft];return new On(m.segments.concat(I.segments),I.children)}return m}(new On(m.segments,I))}function qe(m){return m instanceof si}function St(m){let I;const S=fe(function b(V){const X={};for(const he of V.children){const de=b(he);X[he.outlet]=de}const ce=new On(V.url,X);return V===m&&(I=ce),ce}(m.root));return I??S}function Jn(m,I,b,D){let S=m;for(;S.parent;)S=S.parent;if(0===I.length)return dt(S,S,S,b,D);const V=function dr(m){if("string"==typeof m[0]&&1===m.length&&"/"===m[0])return new Lr(!0,0,m);let I=0,b=!1;const D=m.reduce((S,V,X)=>{if("object"==typeof V&&null!=V){if(V.outlets){const ce={};return Object.entries(V.outlets).forEach(([he,de])=>{ce[he]="string"==typeof de?de.split("/"):de}),[...S,{outlets:ce}]}if(V.segmentPath)return[...S,V.segmentPath]}return"string"!=typeof V?[...S,V]:0===X?(V.split("/").forEach((ce,he)=>{0==he&&"."===ce||(0==he&&""===ce?b=!0:".."===ce?I++:""!=ce&&S.push(ce))}),S):[...S,V]},[]);return new Lr(b,I,D)}(I);if(V.toRoot())return dt(S,S,new On([],{}),b,D);const X=function Ji(m,I,b){if(m.isAbsolute)return new ir(I,!0,0);if(!b)return new ir(I,!1,NaN);if(null===b.parent)return new ir(b,!0,0);const D=Pn(m.commands[0])?0:1;return function ws(m,I,b){let D=m,S=I,V=b;for(;V>S;){if(V-=S,D=D.parent,!D)throw new y.vHH(4005,!1);S=D.segments.length}return new ir(D,!1,S-V)}(b,b.segments.length-1+D,m.numberOfDoubleDots)}(V,S,m),ce=X.processChildren?zi(X.segmentGroup,X.index,V.commands):mi(X.segmentGroup,X.index,V.commands);return dt(S,X.segmentGroup,ce,b,D)}function Pn(m){return"object"==typeof m&&null!=m&&!m.outlets&&!m.segmentPath}function bn(m){return"object"==typeof m&&null!=m&&m.outlets}function dt(m,I,b,D,S){let X,V={};D&&Object.entries(D).forEach(([he,de])=>{V[he]=Array.isArray(de)?de.map(Ut=>`${Ut}`):`${de}`}),X=m===I?b:Ur(m,I,b);const ce=fe(Re(X));return new si(ce,V,S)}function Ur(m,I,b){const D={};return Object.entries(m.children).forEach(([S,V])=>{D[S]=V===I?b:Ur(V,I,b)}),new On(m.segments,D)}class Lr{constructor(I,b,D){if(this.isAbsolute=I,this.numberOfDoubleDots=b,this.commands=D,I&&D.length>0&&Pn(D[0]))throw new y.vHH(4003,!1);const S=D.find(bn);if(S&&S!==Qt(D))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ir{constructor(I,b,D){this.segmentGroup=I,this.processChildren=b,this.index=D}}function mi(m,I,b){if(m||(m=new On([],{})),0===m.segments.length&&m.hasChildren())return zi(m,I,b);const D=function Ds(m,I,b){let D=0,S=I;const V={match:!1,pathIndex:0,commandIndex:0};for(;S<m.segments.length;){if(D>=b.length)return V;const X=m.segments[S],ce=b[D];if(bn(ce))break;const he=`${ce}`,de=D<b.length-1?b[D+1]:null;if(S>0&&void 0===he)break;if(he&&de&&"object"==typeof de&&void 0===de.outlets){if(!sr(he,de,X))return V;D+=2}else{if(!sr(he,{},X))return V;D++}S++}return{match:!0,pathIndex:S,commandIndex:D}}(m,I,b),S=b.slice(D.commandIndex);if(D.match&&D.pathIndex<m.segments.length){const V=new On(m.segments.slice(0,D.pathIndex),{});return V.children[Ft]=new On(m.segments.slice(D.pathIndex),m.children),zi(V,0,S)}return D.match&&0===S.length?new On(m.segments,{}):D.match&&!m.hasChildren()?Ts(m,I,b):D.match?zi(m,0,S):Ts(m,I,b)}function zi(m,I,b){if(0===b.length)return new On(m.segments,{});{const D=function ai(m){return bn(m[0])?m[0].outlets:{[Ft]:m}}(b),S={};if(Object.keys(D).some(V=>V!==Ft)&&m.children[Ft]&&1===m.numberOfChildren&&0===m.children[Ft].segments.length){const V=zi(m.children[Ft],I,b);return new On(m.segments,V.children)}return Object.entries(D).forEach(([V,X])=>{"string"==typeof X&&(X=[X]),null!==X&&(S[V]=mi(m.children[V],I,X))}),Object.entries(m.children).forEach(([V,X])=>{void 0===D[V]&&(S[V]=X)}),new On(m.segments,S)}}function Ts(m,I,b){const D=m.segments.slice(0,I);let S=0;for(;S<b.length;){const V=b[S];if(bn(V)){const he=Po(V.outlets);return new On(D,he)}if(0===S&&Pn(b[0])){D.push(new Ln(m.segments[I].path,Un(b[0]))),S++;continue}const X=bn(V)?V.outlets[Ft]:`${V}`,ce=S<b.length-1?b[S+1]:null;X&&ce&&Pn(ce)?(D.push(new Ln(X,Un(ce))),S+=2):(D.push(new Ln(X,{})),S++)}return new On(D,{})}function Po(m){const I={};return Object.entries(m).forEach(([b,D])=>{"string"==typeof D&&(D=[D]),null!==D&&(I[b]=Ts(new On([],{}),0,D))}),I}function Un(m){const I={};return Object.entries(m).forEach(([b,D])=>I[b]=`${D}`),I}function sr(m,I,b){return m==b.path&&zn(I,b.parameters)}const as="imperative";class Zn{constructor(I,b){this.id=I,this.url=b}}class Xs extends Zn{constructor(I,b,D="imperative",S=null){super(I,b),this.type=0,this.navigationTrigger=D,this.restoredState=S}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class es extends Zn{constructor(I,b,D){super(I,b),this.urlAfterRedirects=D,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fi extends Zn{constructor(I,b,D,S){super(I,b),this.reason=D,this.code=S,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Yr extends Zn{constructor(I,b,D,S){super(I,b),this.reason=D,this.code=S,this.type=16}}class Oo extends Zn{constructor(I,b,D,S){super(I,b),this.error=D,this.target=S,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class go extends Zn{constructor(I,b,D,S){super(I,b),this.urlAfterRedirects=D,this.state=S,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends Zn{constructor(I,b,D,S){super(I,b),this.urlAfterRedirects=D,this.state=S,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ko extends Zn{constructor(I,b,D,S,V){super(I,b),this.urlAfterRedirects=D,this.state=S,this.shouldActivate=V,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qo extends Zn{constructor(I,b,D,S){super(I,b),this.urlAfterRedirects=D,this.state=S,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zo extends Zn{constructor(I,b,D,S){super(I,b),this.urlAfterRedirects=D,this.state=S,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo{constructor(I){this.route=I,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ms{constructor(I){this.route=I,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class be{constructor(I){this.snapshot=I,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ce{constructor(I){this.snapshot=I,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ye{constructor(I){this.snapshot=I,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(I){this.snapshot=I,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(I,b,D){this.routerEvent=I,this.position=b,this.anchor=D,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kt{}class cn{constructor(I){this.url=I}}class er{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $n,this.attachRef=null}}let $n=(()=>{var m;class I{constructor(){this.contexts=new Map}onChildOutletCreated(D,S){const V=this.getOrCreateContext(D);V.outlet=S,this.contexts.set(D,V)}onChildOutletDestroyed(D){const S=this.getContext(D);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let S=this.getContext(D);return S||(S=new er,this.contexts.set(D,S)),S}getContext(D){return this.contexts.get(D)||null}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();class yi{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const b=this.pathFromRoot(I);return b.length>1?b[b.length-2]:null}children(I){const b=Ci(I,this._root);return b?b.children.map(D=>D.value):[]}firstChild(I){const b=Ci(I,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(I){const b=yo(I,this._root);return b.length<2?[]:b[b.length-2].children.map(S=>S.value).filter(S=>S!==I)}pathFromRoot(I){return yo(I,this._root).map(b=>b.value)}}function Ci(m,I){if(m===I.value)return I;for(const b of I.children){const D=Ci(m,b);if(D)return D}return null}function yo(m,I){if(m===I.value)return[I];for(const b of I.children){const D=yo(m,b);if(D.length)return D.unshift(I),D}return[]}class fr{constructor(I,b){this.value=I,this.children=b}toString(){return`TreeNode(${this.value})`}}function wr(m){const I={};return m&&m.children.forEach(b=>I[b.value.outlet]=b),I}class Nt extends yi{constructor(I,b){super(I),this.snapshot=b,Mi(this,I)}toString(){return this.snapshot.toString()}}function ln(m,I){const b=function hr(m,I){const X=new xs([],{},{},"",{},Ft,I,null,{});return new zr("",new fr(X,[]))}(0,I),D=new Se.X([new Ln("",{})]),S=new Se.X({}),V=new Se.X({}),X=new Se.X({}),ce=new Se.X(""),he=new Fr(D,S,X,ce,V,Ft,I,b.root);return he.snapshot=b.root,new Nt(new fr(he,[]),b)}class Fr{constructor(I,b,D,S,V,X,ce,he){this.urlSubject=I,this.paramsSubject=b,this.queryParamsSubject=D,this.fragmentSubject=S,this.dataSubject=V,this.outlet=X,this.component=ce,this._futureSnapshot=he,this.title=this.dataSubject?.pipe((0,En.U)(de=>de[Sr]))??(0,ge.of)(void 0),this.url=I,this.params=b,this.queryParams=D,this.fragment=S,this.data=V}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,En.U)(I=>Qn(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,En.U)(I=>Qn(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cs(m,I="emptyOnly"){const b=m.pathFromRoot;let D=0;if("always"!==I)for(D=b.length-1;D>=1;){const S=b[D],V=b[D-1];if(S.routeConfig&&""===S.routeConfig.path)D--;else{if(V.component)break;D--}}return function vi(m){return m.reduce((I,b)=>({params:{...I.params,...b.params},data:{...I.data,...b.data},resolve:{...b.data,...I.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(D))}class xs{get title(){return this.data?.[Sr]}constructor(I,b,D,S,V,X,ce,he,de){this.url=I,this.params=b,this.queryParams=D,this.fragment=S,this.data=V,this.outlet=X,this.component=ce,this.routeConfig=he,this._resolve=de}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(D=>D.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zr extends yi{constructor(I,b){super(b),this.url=I,Mi(this,b)}toString(){return vo(this._root)}}function Mi(m,I){I.value._routerState=m,I.children.forEach(b=>Mi(m,b))}function vo(m){const I=m.children.length>0?` { ${m.children.map(vo).join(", ")} } `:"";return`${m.value}${I}`}function dn(m){if(m.snapshot){const I=m.snapshot,b=m._futureSnapshot;m.snapshot=b,zn(I.queryParams,b.queryParams)||m.queryParamsSubject.next(b.queryParams),I.fragment!==b.fragment&&m.fragmentSubject.next(b.fragment),zn(I.params,b.params)||m.paramsSubject.next(b.params),function pi(m,I){if(m.length!==I.length)return!1;for(let b=0;b<m.length;++b)if(!zn(m[b],I[b]))return!1;return!0}(I.url,b.url)||m.urlSubject.next(b.url),zn(I.data,b.data)||m.dataSubject.next(b.data)}else m.snapshot=m._futureSnapshot,m.dataSubject.next(m._futureSnapshot.data)}function _i(m,I){const b=zn(m.params,I.params)&&function ki(m,I){return Ar(m,I)&&m.every((b,D)=>zn(b.parameters,I[D].parameters))}(m.url,I.url);return b&&!(!m.parent!=!I.parent)&&(!m.parent||_i(m.parent,I.parent))}let Js=(()=>{var m;class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ft,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)($n),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(Qr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(D){if(D.name){const{firstChange:S,previousValue:V}=D.name;if(S)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,S){this.activated=D,this._activatedRoute=S,this.location.insert(D.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,S){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=D;const V=this.location,ce=D.snapshot.component,he=this.parentContexts.getOrCreateContext(this.name).children,de=new Gi(D,he,V.injector);this.activated=V.createComponent(ce,{index:V.length,injector:de,environmentInjector:S??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275dir=y.lG2({type:m,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),I})();class Gi{constructor(I,b,D){this.route=I,this.childContexts=b,this.parent=D}get(I,b){return I===Fr?this.route:I===$n?this.childContexts:this.parent.get(I,b)}}const Qr=new y.OlP("");let Dr=(()=>{var m;class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(D){this.unsubscribeFromRouteData(D),this.subscribeToRouteData(D)}unsubscribeFromRouteData(D){this.outletDataSubscriptions.get(D)?.unsubscribe(),this.outletDataSubscriptions.delete(D)}subscribeToRouteData(D){const{activatedRoute:S}=D,V=Et([S.queryParams,S.params,S.data]).pipe((0,cr.w)(([X,ce,he],de)=>(he={...X,...ce,...he},0===de?(0,ge.of)(he):Promise.resolve(he)))).subscribe(X=>{if(!D.isActivated||!D.activatedComponentRef||D.activatedRoute!==S||null===S.component)return void this.unsubscribeFromRouteData(D);const ce=(0,y.qFp)(S.component);if(ce)for(const{templateName:he}of ce.inputs)D.activatedComponentRef.setInput(he,X[he]);else this.unsubscribeFromRouteData(D)});this.outletDataSubscriptions.set(D,V)}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac}),I})();function Ei(m,I,b){if(b&&m.shouldReuseRoute(I.value,b.value.snapshot)){const D=b.value;D._futureSnapshot=I.value;const S=function eo(m,I,b){return I.children.map(D=>{for(const S of b.children)if(m.shouldReuseRoute(D.value,S.value.snapshot))return Ei(m,D,S);return Ei(m,D)})}(m,I,b);return new fr(D,S)}{if(m.shouldAttach(I.value)){const V=m.retrieve(I.value);if(null!==V){const X=V.route;return X.value._futureSnapshot=I.value,X.children=I.children.map(ce=>Ei(m,ce)),X}}const D=function ia(m){return new Fr(new Se.X(m.url),new Se.X(m.params),new Se.X(m.queryParams),new Se.X(m.fragment),new Se.X(m.data),m.outlet,m.component,m)}(I.value),S=I.children.map(V=>Ei(m,V));return new fr(D,S)}}const Ns="ngNavigationCancelingError";function Ps(m,I){const{redirectTo:b,navigationBehaviorOptions:D}=qe(I)?{redirectTo:I,navigationBehaviorOptions:void 0}:I,S=_o(!1,0,I);return S.url=b,S.navigationBehaviorOptions=D,S}function _o(m,I,b){const D=new Error("NavigationCancelingError: "+(m||""));return D[Ns]=!0,D.cancellationCode=I,b&&(D.url=b),D}function Hn(m){return m&&m[Ns]}let ko=(()=>{var m;class I{}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275cmp=y.Xpm({type:m,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(D,S){1&D&&y._UZ(0,"router-outlet")},dependencies:[Js],encapsulation:2}),I})();function bi(m){const I=m.children&&m.children.map(bi),b=I?{...m,children:I}:{...m};return!b.component&&!b.loadComponent&&(I||b.loadChildren)&&b.outlet&&b.outlet!==Ft&&(b.component=ko),b}function ts(m){return m.outlet||Ft}function Si(m){if(!m)return null;if(m.routeConfig?._injector)return m.routeConfig._injector;for(let I=m.parent;I;I=I.parent){const b=I.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class sa{constructor(I,b,D,S,V){this.routeReuseStrategy=I,this.futureState=b,this.currState=D,this.forwardEvent=S,this.inputBindingEnabled=V}activate(I){const b=this.futureState._root,D=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,D,I),dn(this.futureState.root),this.activateChildRoutes(b,D,I)}deactivateChildRoutes(I,b,D){const S=wr(b);I.children.forEach(V=>{const X=V.value.outlet;this.deactivateRoutes(V,S[X],D),delete S[X]}),Object.values(S).forEach(V=>{this.deactivateRouteAndItsChildren(V,D)})}deactivateRoutes(I,b,D){const S=I.value,V=b?b.value:null;if(S===V)if(S.component){const X=D.getContext(S.outlet);X&&this.deactivateChildRoutes(I,b,X.children)}else this.deactivateChildRoutes(I,b,D);else V&&this.deactivateRouteAndItsChildren(b,D)}deactivateRouteAndItsChildren(I,b){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,b):this.deactivateRouteAndOutlet(I,b)}detachAndStoreRouteSubtree(I,b){const D=b.getContext(I.value.outlet),S=D&&I.value.component?D.children:b,V=wr(I);for(const X of Object.keys(V))this.deactivateRouteAndItsChildren(V[X],S);if(D&&D.outlet){const X=D.outlet.detach(),ce=D.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:X,route:I,contexts:ce})}}deactivateRouteAndOutlet(I,b){const D=b.getContext(I.value.outlet),S=D&&I.value.component?D.children:b,V=wr(I);for(const X of Object.keys(V))this.deactivateRouteAndItsChildren(V[X],S);D&&(D.outlet&&(D.outlet.deactivate(),D.children.onOutletDeactivated()),D.attachRef=null,D.route=null)}activateChildRoutes(I,b,D){const S=wr(b);I.children.forEach(V=>{this.activateRoutes(V,S[V.value.outlet],D),this.forwardEvent(new ct(V.value.snapshot))}),I.children.length&&this.forwardEvent(new Ce(I.value.snapshot))}activateRoutes(I,b,D){const S=I.value,V=b?b.value:null;if(dn(S),S===V)if(S.component){const X=D.getOrCreateContext(S.outlet);this.activateChildRoutes(I,b,X.children)}else this.activateChildRoutes(I,b,D);else if(S.component){const X=D.getOrCreateContext(S.outlet);if(this.routeReuseStrategy.shouldAttach(S.snapshot)){const ce=this.routeReuseStrategy.retrieve(S.snapshot);this.routeReuseStrategy.store(S.snapshot,null),X.children.onOutletReAttached(ce.contexts),X.attachRef=ce.componentRef,X.route=ce.route.value,X.outlet&&X.outlet.attach(ce.componentRef,ce.route.value),dn(ce.route.value),this.activateChildRoutes(I,null,X.children)}else{const ce=Si(S.snapshot);X.attachRef=null,X.route=S,X.injector=ce,X.outlet&&X.outlet.activateWith(S,X.injector),this.activateChildRoutes(I,null,X.children)}}else this.activateChildRoutes(I,null,D)}}class Ls{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class ya{constructor(I,b){this.component=I,this.route=b}}function va(m,I,b){const D=m._root;return ys(D,I?I._root:null,b,[D.value])}function ms(m,I){const b=Symbol(),D=I.get(m,b);return D===b?"function"!=typeof m||(0,y.Z0I)(m)?I.get(m):m:D}function ys(m,I,b,D,S={canDeactivateChecks:[],canActivateChecks:[]}){const V=wr(I);return m.children.forEach(X=>{(function tu(m,I,b,D,S={canDeactivateChecks:[],canActivateChecks:[]}){const V=m.value,X=I?I.value:null,ce=b?b.getContext(m.value.outlet):null;if(X&&V.routeConfig===X.routeConfig){const he=function _a(m,I,b){if("function"==typeof b)return b(m,I);switch(b){case"pathParamsChange":return!Ar(m.url,I.url);case"pathParamsOrQueryParamsChange":return!Ar(m.url,I.url)||!zn(m.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_i(m,I)||!zn(m.queryParams,I.queryParams);default:return!_i(m,I)}}(X,V,V.routeConfig.runGuardsAndResolvers);he?S.canActivateChecks.push(new Ls(D)):(V.data=X.data,V._resolvedData=X._resolvedData),ys(m,I,V.component?ce?ce.children:null:b,D,S),he&&ce&&ce.outlet&&ce.outlet.isActivated&&S.canDeactivateChecks.push(new ya(ce.outlet.component,X))}else X&&pr(I,ce,S),S.canActivateChecks.push(new Ls(D)),ys(m,null,V.component?ce?ce.children:null:b,D,S)})(X,V[X.value.outlet],b,D.concat([X.value]),S),delete V[X.value.outlet]}),Object.entries(V).forEach(([X,ce])=>pr(ce,b.getContext(X),S)),S}function pr(m,I,b){const D=wr(m),S=m.value;Object.entries(D).forEach(([V,X])=>{pr(X,S.component?I?I.children.getContext(V):null:I,b)}),b.canDeactivateChecks.push(new ya(S.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,S))}function F(m){return"function"==typeof m}function hn(m){return m instanceof gt.K||"EmptyError"===m?.name}const kn=Symbol("INITIAL_VALUE");function Pr(){return(0,cr.w)(m=>Et(m.map(I=>I.pipe((0,rr.q)(1),(0,In.O)(kn)))).pipe((0,En.U)(I=>{for(const b of I)if(!0!==b){if(b===kn)return kn;if(!1===b||b instanceof si)return b}return!0}),(0,mn.h)(I=>I!==kn),(0,rr.q)(1)))}function Fs(m){return(0,Le.z)((0,xe.b)(I=>{if(qe(I))throw Ps(0,I)}),(0,En.U)(I=>!0===I))}class Us{constructor(I){this.segmentGroup=I||null}}class wo{constructor(I){this.urlTree=I}}function Ii(m){return Te(new Us(m))}function Uo(m){return Te(new wo(m))}class Bo{constructor(I,b){this.urlSerializer=I,this.urlTree=b}noMatchError(I){return new y.vHH(4002,!1)}lineralizeSegments(I,b){let D=[],S=b.root;for(;;){if(D=D.concat(S.segments),0===S.numberOfChildren)return(0,ge.of)(D);if(S.numberOfChildren>1||!S.children[Ft])return Te(new y.vHH(4e3,!1));S=S.children[Ft]}}applyRedirectCommands(I,b,D){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),I,D)}applyRedirectCreateUrlTree(I,b,D,S){const V=this.createSegmentGroup(I,b.root,D,S);return new si(V,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(I,b){const D={};return Object.entries(I).forEach(([S,V])=>{if("string"==typeof V&&V.startsWith(":")){const ce=V.substring(1);D[S]=b[ce]}else D[S]=V}),D}createSegmentGroup(I,b,D,S){const V=this.createSegments(I,b.segments,D,S);let X={};return Object.entries(b.children).forEach(([ce,he])=>{X[ce]=this.createSegmentGroup(I,he,D,S)}),new On(V,X)}createSegments(I,b,D,S){return b.map(V=>V.path.startsWith(":")?this.findPosParam(I,V,S):this.findOrReturn(V,D))}findPosParam(I,b,D){const S=D[b.path.substring(1)];if(!S)throw new y.vHH(4001,!1);return S}findOrReturn(I,b){let D=0;for(const S of b){if(S.path===I.path)return b.splice(D),S;D++}return I}}const Wi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Do(m,I,b,D,S){const V=To(m,I,b);return V.matched?(D=function Os(m,I){return m.providers&&!m._injector&&(m._injector=(0,y.MMx)(m.providers,I,`Route: ${m.path}`)),m._injector??I}(I,D),function bs(m,I,b,D){const S=I.canMatch;if(!S||0===S.length)return(0,ge.of)(!0);const V=S.map(X=>{const ce=ms(X,m);return sn(function ft(m){return m&&F(m.canMatch)}(ce)?ce.canMatch(I,b):m.runInContext(()=>ce(I,b)))});return(0,ge.of)(V).pipe(Pr(),Fs())}(D,I,b).pipe((0,En.U)(X=>!0===X?V:{...Wi}))):(0,ge.of)(V)}function To(m,I,b){if(""===I.path)return"full"===I.pathMatch&&(m.hasChildren()||b.length>0)?{...Wi}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const S=(I.matcher||xr)(b,m,I);if(!S)return{...Wi};const V={};Object.entries(S.posParams??{}).forEach(([ce,he])=>{V[ce]=he.path});const X=S.consumed.length>0?{...V,...S.consumed[S.consumed.length-1].parameters}:V;return{matched:!0,consumedSegments:S.consumed,remainingSegments:b.slice(S.consumed.length),parameters:X,positionalParamSegments:S.posParams??{}}}function oa(m,I,b,D){return b.length>0&&function Co(m,I,b){return b.some(D=>bo(m,I,D)&&ts(D)!==Ft)}(m,b,D)?{segmentGroup:new On(I,Ea(D,new On(b,m.children))),slicedSegments:[]}:0===b.length&&function Vo(m,I,b){return b.some(D=>bo(m,I,D))}(m,b,D)?{segmentGroup:new On(m.segments,Qo(m,0,b,D,m.children)),slicedSegments:b}:{segmentGroup:new On(m.segments,m.children),slicedSegments:b}}function Qo(m,I,b,D,S){const V={};for(const X of D)if(bo(m,b,X)&&!S[ts(X)]){const ce=new On([],{});V[ts(X)]=ce}return{...S,...V}}function Ea(m,I){const b={};b[Ft]=I;for(const D of m)if(""===D.path&&ts(D)!==Ft){const S=new On([],{});b[ts(D)]=S}return b}function bo(m,I,b){return(!(m.hasChildren()||I.length>0)||"full"!==b.pathMatch)&&""===b.path}class La{constructor(I,b,D,S,V,X,ce){this.injector=I,this.configLoader=b,this.rootComponentType=D,this.config=S,this.urlTree=V,this.paramsInheritanceStrategy=X,this.urlSerializer=ce,this.allowRedirects=!0,this.applyRedirects=new Bo(this.urlSerializer,this.urlTree)}noMatchError(I){return new y.vHH(4002,!1)}recognize(){const I=oa(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,I,Ft).pipe(it(b=>{if(b instanceof wo)return this.allowRedirects=!1,this.urlTree=b.urlTree,this.match(b.urlTree);throw b instanceof Us?this.noMatchError(b):b}),(0,En.U)(b=>{const D=new xs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ft,this.rootComponentType,null,{}),S=new fr(D,b),V=new zr("",S),X=function Dt(m,I,b=null,D=null){return Jn(St(m),I,b,D)}(D,[],this.urlTree.queryParams,this.urlTree.fragment);return X.queryParams=this.urlTree.queryParams,V.url=this.urlSerializer.serialize(X),this.inheritParamsAndData(V._root),{state:V,tree:X}}))}match(I){return this.processSegmentGroup(this.injector,this.config,I.root,Ft).pipe(it(D=>{throw D instanceof Us?this.noMatchError(D):D}))}inheritParamsAndData(I){const b=I.value,D=Cs(b,this.paramsInheritanceStrategy);b.params=Object.freeze(D.params),b.data=Object.freeze(D.data),I.children.forEach(S=>this.inheritParamsAndData(S))}processSegmentGroup(I,b,D,S){return 0===D.segments.length&&D.hasChildren()?this.processChildren(I,b,D):this.processSegment(I,b,D,D.segments,S,!0)}processChildren(I,b,D){const S=[];for(const V of Object.keys(D.children))"primary"===V?S.unshift(V):S.push(V);return(0,me.D)(S).pipe((0,He.b)(V=>{const X=D.children[V],ce=function ks(m,I){const b=m.filter(D=>ts(D)===I);return b.push(...m.filter(D=>ts(D)!==I)),b}(b,V);return this.processSegmentGroup(I,ce,X,V)}),(0,pt.R)((V,X)=>(V.push(...X),V)),(0,bt.d)(null),function Xt(m,I){const b=arguments.length>=2;return D=>D.pipe(m?(0,mn.h)((S,V)=>m(S,V,D)):Me.y,Ct(1),b?(0,bt.d)(I):(0,Cn.T)(()=>new gt.K))}(),(0,we.z)(V=>{if(null===V)return Ii(D);const X=co(V);return function jo(m){m.sort((I,b)=>I.value.outlet===Ft?-1:b.value.outlet===Ft?1:I.value.outlet.localeCompare(b.value.outlet))}(X),(0,ge.of)(X)}))}processSegment(I,b,D,S,V,X){return(0,me.D)(b).pipe((0,He.b)(ce=>this.processSegmentAgainstRoute(ce._injector??I,b,ce,D,S,V,X).pipe(it(he=>{if(he instanceof Us)return(0,ge.of)(null);throw he}))),(0,Fe.P)(ce=>!!ce),it(ce=>{if(hn(ce))return function ns(m,I,b){return 0===I.length&&!m.children[b]}(D,S,V)?(0,ge.of)([]):Ii(D);throw ce}))}processSegmentAgainstRoute(I,b,D,S,V,X,ce){return function ka(m,I,b,D){return!!(ts(m)===D||D!==Ft&&bo(I,b,m))&&("**"===m.path||To(I,m,b).matched)}(D,S,V,X)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(I,S,D,V,X,ce):ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,S,b,D,V,X):Ii(S):Ii(S)}expandSegmentAgainstRouteUsingRedirect(I,b,D,S,V,X){return"**"===S.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,D,S,X):this.expandRegularSegmentAgainstRouteUsingRedirect(I,b,D,S,V,X)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,b,D,S){const V=this.applyRedirects.applyRedirectCommands([],D.redirectTo,{});return D.redirectTo.startsWith("/")?Uo(V):this.applyRedirects.lineralizeSegments(D,V).pipe((0,we.z)(X=>{const ce=new On(X,{});return this.processSegment(I,b,ce,X,S,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,b,D,S,V,X){const{matched:ce,consumedSegments:he,remainingSegments:de,positionalParamSegments:Ut}=To(b,S,V);if(!ce)return Ii(b);const gn=this.applyRedirects.applyRedirectCommands(he,S.redirectTo,Ut);return S.redirectTo.startsWith("/")?Uo(gn):this.applyRedirects.lineralizeSegments(S,gn).pipe((0,we.z)(ti=>this.processSegment(I,D,b,ti.concat(de),X,!1)))}matchSegmentAgainstRoute(I,b,D,S,V,X){let ce;if("**"===D.path){const he=S.length>0?Qt(S).parameters:{},de=new xs(S,he,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vr(D),ts(D),D.component??D._loadedComponent??null,D,E(D));ce=(0,ge.of)({snapshot:de,consumedSegments:[],remainingSegments:[]}),b.children={}}else ce=Do(b,D,S,I).pipe((0,En.U)(({matched:he,consumedSegments:de,remainingSegments:Ut,parameters:gn})=>he?{snapshot:new xs(de,gn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vr(D),ts(D),D.component??D._loadedComponent??null,D,E(D)),consumedSegments:de,remainingSegments:Ut}:null));return ce.pipe((0,cr.w)(he=>null===he?Ii(b):this.getChildConfig(I=D._injector??I,D,S).pipe((0,cr.w)(({routes:de})=>{const Ut=D._loadedInjector??I,{snapshot:gn,consumedSegments:ti,remainingSegments:_n}=he,{segmentGroup:zs,slicedSegments:ou}=oa(b,ti,_n,de);if(0===ou.length&&zs.hasChildren())return this.processChildren(Ut,de,zs).pipe((0,En.U)(Ca=>null===Ca?null:[new fr(gn,Ca)]));if(0===de.length&&0===ou.length)return(0,ge.of)([new fr(gn,[])]);const cc=ts(D)===V;return this.processSegment(Ut,de,zs,ou,cc?Ft:V,!0).pipe((0,En.U)(Ca=>[new fr(gn,Ca)]))}))))}getChildConfig(I,b,D){return b.children?(0,ge.of)({routes:b.children,injector:I}):b.loadChildren?void 0!==b._loadedRoutes?(0,ge.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function Gr(m,I,b,D){const S=I.canLoad;if(void 0===S||0===S.length)return(0,ge.of)(!0);const V=S.map(X=>{const ce=ms(X,m);return sn(function q(m){return m&&F(m.canLoad)}(ce)?ce.canLoad(I,b):m.runInContext(()=>ce(I,b)))});return(0,ge.of)(V).pipe(Pr(),Fs())}(I,b,D).pipe((0,we.z)(S=>S?this.configLoader.loadChildren(I,b).pipe((0,xe.b)(V=>{b._loadedRoutes=V.routes,b._loadedInjector=V.injector})):function Oa(m){return Te(_o(!1,3))}())):(0,ge.of)({routes:[],injector:I})}}function us(m){const I=m.value.routeConfig;return I&&""===I.path}function co(m){const I=[],b=new Set;for(const D of m){if(!us(D)){I.push(D);continue}const S=I.find(V=>D.value.routeConfig===V.value.routeConfig);void 0!==S?(S.children.push(...D.children),b.add(S)):I.push(D)}for(const D of b){const S=co(D.children);I.push(new fr(D.value,S))}return I.filter(D=>!b.has(D))}function vr(m){return m.data||{}}function E(m){return m.resolve||{}}function Rt(m){return"string"==typeof m.title||null===m.title}function An(m){return(0,cr.w)(I=>{const b=m(I);return b?(0,me.D)(b).pipe((0,En.U)(()=>I)):(0,ge.of)(I)})}const Rn=new y.OlP("ROUTES");let vn=(()=>{var m;class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,ge.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const S=sn(D.loadComponent()).pipe((0,En.U)(ei),(0,xe.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=X}),(0,$t.x)(()=>{this.componentLoaders.delete(D)})),V=new It(S,()=>new un.x).pipe(Vt());return this.componentLoaders.set(D,V),V}loadChildren(D,S){if(this.childrenLoaders.get(S))return this.childrenLoaders.get(S);if(S._loadedRoutes)return(0,ge.of)({routes:S._loadedRoutes,injector:S._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(S);const X=this.loadModuleFactoryOrRoutes(S.loadChildren).pipe((0,En.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(S);let de,Ut;return Array.isArray(he)?Ut=he:(de=he.create(D).injector,Ut=de.get(Rn,[],y.XFs.Self|y.XFs.Optional).flat()),{routes:Ut.map(bi),injector:de}}),(0,$t.x)(()=>{this.childrenLoaders.delete(S)})),ce=new It(X,()=>new un.x).pipe(Vt());return this.childrenLoaders.set(S,ce),ce}loadModuleFactoryOrRoutes(D){return sn(D()).pipe((0,En.U)(ei),(0,we.z)(S=>S instanceof y.YKP||Array.isArray(S)?(0,ge.of)(S):(0,me.D)(this.compiler.compileModuleAsync(S))))}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();function ei(m){return function Bn(m){return m&&"object"==typeof m&&"default"in m}(m)?m.default:m}let _r=(()=>{var m;class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new un.x,this.transitionAbortSubject=new un.x,this.configLoader=(0,y.f3M)(vn),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Hr),this.rootContexts=(0,y.f3M)($n),this.inputBindingEnabled=null!==(0,y.f3M)(Qr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ge.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Ms(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new mo(V))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const S=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:S})}setupNavigations(D,S,V){return this.transitions=new Se.X({id:0,currentUrlTree:S,currentRawUrl:S,currentBrowserUrl:S,extractedUrl:D.urlHandlingStrategy.extract(S),urlAfterRedirects:D.urlHandlingStrategy.extract(S),rawUrl:S,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:as,restoredState:null,currentSnapshot:V.snapshot,targetSnapshot:null,currentRouterState:V,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,mn.h)(X=>0!==X.id),(0,En.U)(X=>({...X,extractedUrl:D.urlHandlingStrategy.extract(X.rawUrl)})),(0,cr.w)(X=>{this.currentTransition=X;let ce=!1,he=!1;return(0,ge.of)(X).pipe((0,xe.b)(de=>{this.currentNavigation={id:de.id,initialUrl:de.rawUrl,extractedUrl:de.extractedUrl,trigger:de.source,extras:de.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,cr.w)(de=>{const Ut=de.currentBrowserUrl.toString(),gn=!D.navigated||de.extractedUrl.toString()!==Ut||Ut!==de.currentUrlTree.toString();if(!gn&&"reload"!==(de.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const _n="";return this.events.next(new Yr(de.id,this.urlSerializer.serialize(de.rawUrl),_n,0)),de.resolve(null),Be.E}if(D.urlHandlingStrategy.shouldProcessUrl(de.rawUrl))return(0,ge.of)(de).pipe((0,cr.w)(_n=>{const zs=this.transitions?.getValue();return this.events.next(new Xs(_n.id,this.urlSerializer.serialize(_n.extractedUrl),_n.source,_n.restoredState)),zs!==this.transitions?.getValue()?Be.E:Promise.resolve(_n)}),function P(m,I,b,D,S,V){return(0,we.z)(X=>function aa(m,I,b,D,S,V,X="emptyOnly"){return new La(m,I,b,D,S,X,V).recognize()}(m,I,b,D,X.extractedUrl,S,V).pipe((0,En.U)(({state:ce,tree:he})=>({...X,targetSnapshot:ce,urlAfterRedirects:he}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,xe.b)(_n=>{X.targetSnapshot=_n.targetSnapshot,X.urlAfterRedirects=_n.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects};const zs=new go(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(zs)}));if(gn&&D.urlHandlingStrategy.shouldProcessUrl(de.currentRawUrl)){const{id:_n,extractedUrl:zs,source:ou,restoredState:cc,extras:Ca}=de,Ao=new Xs(_n,this.urlSerializer.serialize(zs),ou,cc);this.events.next(Ao);const kc=ln(0,this.rootComponentType).snapshot;return this.currentTransition=X={...de,targetSnapshot:kc,urlAfterRedirects:zs,extras:{...Ca,skipLocationChange:!1,replaceUrl:!1}},(0,ge.of)(X)}{const _n="";return this.events.next(new Yr(de.id,this.urlSerializer.serialize(de.extractedUrl),_n,1)),de.resolve(null),Be.E}}),(0,xe.b)(de=>{const Ut=new yr(de.id,this.urlSerializer.serialize(de.extractedUrl),this.urlSerializer.serialize(de.urlAfterRedirects),de.targetSnapshot);this.events.next(Ut)}),(0,En.U)(de=>(this.currentTransition=X={...de,guards:va(de.targetSnapshot,de.currentSnapshot,this.rootContexts)},X)),function Sn(m,I){return(0,we.z)(b=>{const{targetSnapshot:D,currentSnapshot:S,guards:{canActivateChecks:V,canDeactivateChecks:X}}=b;return 0===X.length&&0===V.length?(0,ge.of)({...b,guardsResult:!0}):function gr(m,I,b,D){return(0,me.D)(m).pipe((0,we.z)(S=>function Or(m,I,b,D,S){const V=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!V||0===V.length)return(0,ge.of)(!0);const X=V.map(ce=>{const he=Si(I)??S,de=ms(ce,he);return sn(function Je(m){return m&&F(m.canDeactivate)}(de)?de.canDeactivate(m,I,b,D):he.runInContext(()=>de(m,I,b,D))).pipe((0,Fe.P)())});return(0,ge.of)(X).pipe(Pr())}(S.component,S.route,b,I,D)),(0,Fe.P)(S=>!0!==S,!0))}(X,D,S,m).pipe((0,we.z)(ce=>ce&&function L(m){return"boolean"==typeof m}(ce)?function Xr(m,I,b,D){return(0,me.D)(I).pipe((0,He.b)(S=>(0,Oe.z)(function Wn(m,I){return null!==m&&I&&I(new be(m)),(0,ge.of)(!0)}(S.route.parent,D),function Jr(m,I){return null!==m&&I&&I(new Ye(m)),(0,ge.of)(!0)}(S.route,D),function Tr(m,I,b){const D=I[I.length-1],V=I.slice(0,I.length-1).reverse().map(X=>function Yo(m){const I=m.routeConfig?m.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:m,guards:I}:null}(X)).filter(X=>null!==X).map(X=>ke(()=>{const ce=X.guards.map(he=>{const de=Si(X.node)??b,Ut=ms(he,de);return sn(function Ie(m){return m&&F(m.canActivateChild)}(Ut)?Ut.canActivateChild(D,m):de.runInContext(()=>Ut(D,m))).pipe((0,Fe.P)())});return(0,ge.of)(ce).pipe(Pr())}));return(0,ge.of)(V).pipe(Pr())}(m,S.path,b),function Ni(m,I,b){const D=I.routeConfig?I.routeConfig.canActivate:null;if(!D||0===D.length)return(0,ge.of)(!0);const S=D.map(V=>ke(()=>{const X=Si(I)??b,ce=ms(V,X);return sn(function ae(m){return m&&F(m.canActivate)}(ce)?ce.canActivate(I,m):X.runInContext(()=>ce(I,m))).pipe((0,Fe.P)())}));return(0,ge.of)(S).pipe(Pr())}(m,S.route,b))),(0,Fe.P)(S=>!0!==S,!0))}(D,V,m,I):(0,ge.of)(ce)),(0,En.U)(ce=>({...b,guardsResult:ce})))})}(this.environmentInjector,de=>this.events.next(de)),(0,xe.b)(de=>{if(X.guardsResult=de.guardsResult,qe(de.guardsResult))throw Ps(0,de.guardsResult);const Ut=new Ko(de.id,this.urlSerializer.serialize(de.extractedUrl),this.urlSerializer.serialize(de.urlAfterRedirects),de.targetSnapshot,!!de.guardsResult);this.events.next(Ut)}),(0,mn.h)(de=>!!de.guardsResult||(this.cancelNavigationTransition(de,"",3),!1)),An(de=>{if(de.guards.canActivateChecks.length)return(0,ge.of)(de).pipe((0,xe.b)(Ut=>{const gn=new qo(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(gn)}),(0,cr.w)(Ut=>{let gn=!1;return(0,ge.of)(Ut).pipe(function J(m,I){return(0,we.z)(b=>{const{targetSnapshot:D,guards:{canActivateChecks:S}}=b;if(!S.length)return(0,ge.of)(b);let V=0;return(0,me.D)(S).pipe((0,He.b)(X=>function M(m,I,b,D){const S=m.routeConfig,V=m._resolve;return void 0!==S?.title&&!Rt(S)&&(V[Sr]=S.title),function Z(m,I,b,D){const S=function _e(m){return[...Object.keys(m),...Object.getOwnPropertySymbols(m)]}(m);if(0===S.length)return(0,ge.of)({});const V={};return(0,me.D)(S).pipe((0,we.z)(X=>function ot(m,I,b,D){const S=Si(I)??D,V=ms(m,S);return sn(V.resolve?V.resolve(I,b):S.runInContext(()=>V(I,b)))}(m[X],I,b,D).pipe((0,Fe.P)(),(0,xe.b)(ce=>{V[X]=ce}))),Ct(1),function yn(m){return(0,En.U)(()=>m)}(V),it(X=>hn(X)?Be.E:Te(X)))}(V,m,I,D).pipe((0,En.U)(X=>(m._resolvedData=X,m.data=Cs(m,b).resolve,S&&Rt(S)&&(m.data[Sr]=S.title),null)))}(X.route,D,m,I)),(0,xe.b)(()=>V++),Ct(1),(0,we.z)(X=>V===S.length?(0,ge.of)(b):Be.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,xe.b)({next:()=>gn=!0,complete:()=>{gn||this.cancelNavigationTransition(Ut,"",2)}}))}),(0,xe.b)(Ut=>{const gn=new Zo(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(gn)}))}),An(de=>{const Ut=gn=>{const ti=[];gn.routeConfig?.loadComponent&&!gn.routeConfig._loadedComponent&&ti.push(this.configLoader.loadComponent(gn.routeConfig).pipe((0,xe.b)(_n=>{gn.component=_n}),(0,En.U)(()=>{})));for(const _n of gn.children)ti.push(...Ut(_n));return ti};return Et(Ut(de.targetSnapshot.root)).pipe((0,bt.d)(),(0,rr.q)(1))}),An(()=>this.afterPreactivation()),(0,En.U)(de=>{const Ut=function ao(m,I,b){const D=Ei(m,I._root,b?b._root:void 0);return new Nt(D,I)}(D.routeReuseStrategy,de.targetSnapshot,de.currentRouterState);return this.currentTransition=X={...de,targetRouterState:Ut},X}),(0,xe.b)(()=>{this.events.next(new kt)}),((m,I,b,D)=>(0,En.U)(S=>(new sa(I,S.targetRouterState,S.currentRouterState,b,D).activate(m),S)))(this.rootContexts,D.routeReuseStrategy,de=>this.events.next(de),this.inputBindingEnabled),(0,rr.q)(1),(0,xe.b)({next:de=>{ce=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new es(de.id,this.urlSerializer.serialize(de.extractedUrl),this.urlSerializer.serialize(de.urlAfterRedirects))),D.titleStrategy?.updateTitle(de.targetRouterState.snapshot),de.resolve(!0)},complete:()=>{ce=!0}}),function qn(m){return(0,Ue.e)((I,b)=>{(0,Ot.Xf)(m).subscribe((0,nt.x)(b,()=>b.complete(),wn.Z)),!b.closed&&I.subscribe(b)})}(this.transitionAbortSubject.pipe((0,xe.b)(de=>{throw de}))),(0,$t.x)(()=>{ce||he||this.cancelNavigationTransition(X,"",1),this.currentNavigation?.id===X.id&&(this.currentNavigation=null)}),it(de=>{if(he=!0,Hn(de))this.events.next(new Fi(X.id,this.urlSerializer.serialize(X.extractedUrl),de.message,de.cancellationCode)),function Eo(m){return Hn(m)&&qe(m.url)}(de)?this.events.next(new cn(de.url)):X.resolve(!1);else{this.events.next(new Oo(X.id,this.urlSerializer.serialize(X.extractedUrl),de,X.targetSnapshot??void 0));try{X.resolve(D.errorHandler(de))}catch(Ut){X.reject(Ut)}}return Be.E}))}))}cancelNavigationTransition(D,S,V){const X=new Fi(D.id,this.urlSerializer.serialize(D.extractedUrl),S,V);this.events.next(X),D.resolve(!1)}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();function ci(m){return m!==as}let Bs=(()=>{var m;class I{buildTitle(D){let S,V=D.root;for(;void 0!==V;)S=this.getResolvedTitleForRoute(V)??S,V=V.children.find(X=>X.outlet===Ft);return S}getResolvedTitleForRoute(D){return D.data[Sr]}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:function(){return(0,y.f3M)(vs)},providedIn:"root"}),I})(),vs=(()=>{var m;class I extends Bs{constructor(D){super(),this.title=D}updateTitle(D){const S=this.buildTitle(D);void 0!==S&&this.title.setTitle(S)}}return(m=I).\u0275fac=function(D){return new(D||m)(y.LFG(rn.Dx))},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})(),lo=(()=>{var m;class I{}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:function(){return(0,y.f3M)(Pi)},providedIn:"root"}),I})();class to{shouldDetach(I){return!1}store(I,b){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,b){return I.routeConfig===b.routeConfig}}let Pi=(()=>{var m;class I extends to{}return(m=I).\u0275fac=function(){let b;return function(S){return(b||(b=y.n5z(m)))(S||m)}}(),m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();const Vs=new y.OlP("",{providedIn:"root",factory:()=>({})});let Xo=(()=>{var m;class I{}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:function(){return(0,y.f3M)(Mr)},providedIn:"root"}),I})(),Mr=(()=>{var m;class I{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,S){return D}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();var ua=function(m){return m[m.COMPLETE=0]="COMPLETE",m[m.FAILED=1]="FAILED",m[m.REDIRECTING=2]="REDIRECTING",m}(ua||{});function ca(m,I){m.events.pipe((0,mn.h)(b=>b instanceof es||b instanceof Fi||b instanceof Oo||b instanceof Yr),(0,En.U)(b=>b instanceof es||b instanceof Yr?ua.COMPLETE:b instanceof Fi&&(0===b.code||1===b.code)?ua.REDIRECTING:ua.FAILED),(0,mn.h)(b=>b!==ua.REDIRECTING),(0,rr.q)(1)).subscribe(()=>{I()})}function js(m){throw m}function Pc(m,I,b){return I.parse("/")}const la={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ia={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let li=(()=>{var m;class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new un.x,this.options=(0,y.f3M)(Vs,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||js,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Pc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(Xo),this.routeReuseStrategy=(0,y.f3M)(lo),this.titleStrategy=(0,y.f3M)(Bs),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(Rn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(_r),this.urlSerializer=(0,y.f3M)(Hr),this.location=(0,y.f3M)(Nn.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(Qr,{optional:!0}),this.eventsSubscription=new Ke.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new si,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ln(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=this.browserPageId},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const D=this.navigationTransitions.events.subscribe(S=>{try{const{currentTransition:V}=this.navigationTransitions;if(null===V)return void(bu(S)&&this._events.next(S));if(S instanceof Xs)ci(V.source)&&(this.browserUrlTree=V.extractedUrl);else if(S instanceof Yr)this.rawUrlTree=V.rawUrl;else if(S instanceof go){if("eager"===this.urlUpdateStrategy){if(!V.extras.skipLocationChange){const X=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);this.setBrowserUrl(X,V)}this.browserUrlTree=V.urlAfterRedirects}}else if(S instanceof kt)this.currentUrlTree=V.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl),this.routerState=V.targetRouterState,"deferred"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,V),this.browserUrlTree=V.urlAfterRedirects);else if(S instanceof Fi)0!==S.code&&1!==S.code&&(this.navigated=!0),(3===S.code||2===S.code)&&this.restoreHistory(V);else if(S instanceof cn){const X=this.urlHandlingStrategy.merge(S.url,V.currentRawUrl),ce={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ci(V.source)};this.scheduleNavigation(X,as,null,ce,{resolve:V.resolve,reject:V.reject,promise:V.promise})}S instanceof Oo&&this.restoreHistory(V,!0),S instanceof es&&(this.navigated=!0),bu(S)&&this._events.next(S)}catch(V){this.navigationTransitions.transitionAbortSubject.next(V)}});this.eventsSubscription.add(D)}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),as,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const S="popstate"===D.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,S,D.state)},0)}))}navigateToSyncWithBrowser(D,S,V){const X={replaceUrl:!0},ce=V?.navigationId?V:null;if(V){const de={...V};delete de.navigationId,delete de.\u0275routerPageId,0!==Object.keys(de).length&&(X.state=de)}const he=this.parseUrl(D);this.scheduleNavigation(he,S,ce,X)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(D){this.config=D.map(bi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(D,S={}){const{relativeTo:V,queryParams:X,fragment:ce,queryParamsHandling:he,preserveFragment:de}=S,Ut=de?this.currentUrlTree.fragment:ce;let ti,gn=null;switch(he){case"merge":gn={...this.currentUrlTree.queryParams,...X};break;case"preserve":gn=this.currentUrlTree.queryParams;break;default:gn=X||null}null!==gn&&(gn=this.removeEmptyProps(gn));try{ti=St(V?V.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof D[0]||!D[0].startsWith("/"))&&(D=[]),ti=this.currentUrlTree.root}return Jn(ti,D,gn,Ut??null)}navigateByUrl(D,S={skipLocationChange:!1}){const V=qe(D)?D:this.parseUrl(D),X=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(X,as,null,S)}navigate(D,S={skipLocationChange:!1}){return function _l(m){for(let I=0;I<m.length;I++)if(null==m[I])throw new y.vHH(4008,!1)}(D),this.navigateByUrl(this.createUrlTree(D,S),S)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let S;try{S=this.urlSerializer.parse(D)}catch(V){S=this.malformedUriErrorHandler(V,this.urlSerializer,D)}return S}isActive(D,S){let V;if(V=!0===S?{...la}:!1===S?{...Ia}:S,qe(D))return Ir(this.currentUrlTree,D,V);const X=this.parseUrl(D);return Ir(this.currentUrlTree,X,V)}removeEmptyProps(D){return Object.keys(D).reduce((S,V)=>{const X=D[V];return null!=X&&(S[V]=X),S},{})}scheduleNavigation(D,S,V,X,ce){if(this.disposed)return Promise.resolve(!1);let he,de,Ut;ce?(he=ce.resolve,de=ce.reject,Ut=ce.promise):Ut=new Promise((ti,_n)=>{he=ti,de=_n});const gn=this.pendingTasks.add();return ca(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(gn))}),this.navigationTransitions.handleNavigationRequest({source:S,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:D,extras:X,resolve:he,reject:de,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(ti=>Promise.reject(ti))}setBrowserUrl(D,S){const V=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(V)||S.extras.replaceUrl){const ce={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId)};this.location.replaceState(V,"",ce)}else{const X={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId+1)};this.location.go(V,"",X)}}restoreHistory(D,S=!1){if("computed"===this.canceledNavigationResolution){const X=this.currentPageId-this.browserPageId;0!==X?this.location.historyGo(X):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===X&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,S){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:S}:{navigationId:D}}}return(m=I).\u0275fac=function(D){return new(D||m)},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();function bu(m){return!(m instanceof kt||m instanceof cn)}let nu=(()=>{var m;class I{constructor(D,S,V,X,ce,he){this.router=D,this.route=S,this.tabIndexAttribute=V,this.renderer=X,this.el=ce,this.locationStrategy=he,this.href=null,this.commands=null,this.onChanges=new un.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const de=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===de||"area"===de,this.isAnchorElement?this.subscription=D.events.subscribe(Ut=>{Ut instanceof es&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,S,V,X,ce){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||S||V||X||ce||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,S){const V=this.renderer,X=this.el.nativeElement;null!==S?V.setAttribute(X,D,S):V.removeAttribute(X,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(m=I).\u0275fac=function(D){return new(D||m)(y.Y36(li),y.Y36(Fr),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Nn.S$))},m.\u0275dir=y.lG2({type:m,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,S){1&D&&y.NdJ("click",function(X){return S.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&D&&y.uIk("target",S.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",y.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",y.VuI],replaceUrl:["replaceUrl","replaceUrl",y.VuI],routerLink:"routerLink"},standalone:!0,features:[y.Xq5,y.TTD]}),I})();class Il{}let $o=(()=>{var m;class I{constructor(D,S,V,X,ce){this.router=D,this.injector=V,this.preloadingStrategy=X,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,mn.h)(D=>D instanceof es),(0,He.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,S){const V=[];for(const X of S){X.providers&&!X._injector&&(X._injector=(0,y.MMx)(X.providers,D,`Route: ${X.path}`));const ce=X._injector??D,he=X._loadedInjector??ce;(X.loadChildren&&!X._loadedRoutes&&void 0===X.canLoad||X.loadComponent&&!X._loadedComponent)&&V.push(this.preloadConfig(ce,X)),(X.children||X._loadedRoutes)&&V.push(this.processRoutes(he,X.children??X._loadedRoutes))}return(0,me.D)(V).pipe((0,lr.J)())}preloadConfig(D,S){return this.preloadingStrategy.preload(S,()=>{let V;V=S.loadChildren&&void 0===S.canLoad?this.loader.loadChildren(D,S):(0,ge.of)(null);const X=V.pipe((0,we.z)(ce=>null===ce?(0,ge.of)(void 0):(S._loadedRoutes=ce.routes,S._loadedInjector=ce.injector,this.processRoutes(ce.injector??D,ce.routes))));if(S.loadComponent&&!S._loadedComponent){const ce=this.loader.loadComponent(S);return(0,me.D)([X,ce]).pipe((0,lr.J)())}return X})}}return(m=I).\u0275fac=function(D){return new(D||m)(y.LFG(li),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Il),y.LFG(vn))},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),I})();const wa=new y.OlP("");let Dn=(()=>{var m;class I{constructor(D,S,V,X,ce={}){this.urlSerializer=D,this.transitions=S,this.viewportScroller=V,this.zone=X,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration=ce.scrollPositionRestoration||"disabled",ce.anchorScrolling=ce.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof es?(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment)):D instanceof Yr&&0===D.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof et&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,S){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new et(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(m=I).\u0275fac=function(D){y.$Z()},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac}),I})();function Ho(m,I){return{\u0275kind:m,\u0275providers:I}}function Su(){const m=(0,y.f3M)(y.zs3);return I=>{const b=m.get(y.z2F);if(I!==b.components[0])return;const D=m.get(li),S=m.get(Da);1===m.get(Fa)&&D.initialNavigation(),m.get(Er,null,y.XFs.Optional)?.setUpPreloading(),m.get(wa,null,y.XFs.Optional)?.init(),D.resetRootComponentType(b.componentTypes[0]),S.closed||(S.next(),S.complete(),S.unsubscribe())}}const Da=new y.OlP("",{factory:()=>new un.x}),Fa=new y.OlP("",{providedIn:"root",factory:()=>1}),Er=new y.OlP("");function Ua(m){return Ho(0,[{provide:Er,useExisting:$o},{provide:Il,useExisting:m}])}const Ki=new y.OlP("ROUTER_FORROOT_GUARD"),Di=[Nn.Ye,{provide:Hr,useClass:Zr},li,$n,{provide:Fr,useFactory:function tc(m){return m.routerState.root},deps:[li]},vn,[]];function sc(){return new y.PXZ("Router",li)}let oc=(()=>{var m;class I{constructor(D){}static forRoot(D,S){return{ngModule:I,providers:[Di,[],{provide:Rn,multi:!0,useValue:D},{provide:Ki,useFactory:Ru,deps:[[li,new y.FiY,new y.tp0]]},{provide:Vs,useValue:S||{}},S?.useHash?{provide:Nn.S$,useClass:Nn.Do}:{provide:Nn.S$,useClass:Nn.b0},{provide:wa,useFactory:()=>{const m=(0,y.f3M)(Nn.EM),I=(0,y.f3M)(y.R0b),b=(0,y.f3M)(Vs),D=(0,y.f3M)(_r),S=(0,y.f3M)(Hr);return b.scrollOffset&&m.setOffset(b.scrollOffset),new Dn(S,D,m,I,b)}},S?.preloadingStrategy?Ua(S.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:sc},S?.initialNavigation?Ta(S):[],S?.bindToComponentInputs?Ho(8,[Dr,{provide:Qr,useExisting:Dr}]).\u0275providers:[],[{provide:Hs,useFactory:Su},{provide:y.tb,multi:!0,useExisting:Hs}]]}}static forChild(D){return{ngModule:I,providers:[{provide:Rn,multi:!0,useValue:D}]}}}return(m=I).\u0275fac=function(D){return new(D||m)(y.LFG(Ki,8))},m.\u0275mod=y.oAB({type:m}),m.\u0275inj=y.cJS({}),I})();function Ru(m){return"guarded"}function Ta(m){return["disabled"===m.initialNavigation?Ho(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const I=(0,y.f3M)(li);return()=>{I.setUpLocationChangeListener()}}},{provide:Fa,useValue:2}]).\u0275providers:[],"enabledBlocking"===m.initialNavigation?Ho(2,[{provide:Fa,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:I=>{const b=I.get(Nn.V_,Promise.resolve());return()=>b.then(()=>new Promise(D=>{const S=I.get(li),V=I.get(Da);ca(S,()=>{D(!0)}),I.get(_r).afterPreactivation=()=>(D(!0),V.closed?(0,ge.of)(void 0):V),S.initialNavigation()}))}}]).\u0275providers:[]]}const Hs=new y.OlP("")},3106:(Lt,We,O)=>{O.d(We,{Z:()=>Et});var y=O(9058),ue=O(4537),z=O(534),ve=O(7879);class me{constructor(Tt,gt){this._delegate=Tt,this.firebase=gt,(0,z._addComponent)(Tt,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=Tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Tt){this._delegate.automaticDataCollectionEnabled=Tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Tt=>{this._delegate.checkDestroyed(),Tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Tt,gt=z._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Ot=this._delegate.container.getProvider(Tt);return!Ot.isInitialized()&&"EXPLICIT"===(null===(Oe=Ot.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Ot.initialize(),Ot.getImmediate({identifier:gt})}_removeServiceInstance(Tt,gt=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Tt).clearInstance(gt)}_addComponent(Tt){(0,z._addComponent)(this._delegate,Tt)}_addOrOverwriteComponent(Tt){(0,z._addOrOverwriteComponent)(this._delegate,Tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function Me(){const st=function Ge(st){const Tt={},gt={__esModule:!0,initializeApp:function ke(Ke,Ue={}){const Vt=z.initializeApp(Ke,Ue);if((0,y.r3)(Tt,Vt.name))return Tt[Vt.name];const It=new st(Vt,gt);return Tt[Vt.name]=It,It},app:Ot,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Te(Ke){const Ue=Ke.name,Vt=Ue.replace("-compat","");if(z._registerComponent(Ke)&&"PUBLIC"===Ke.type){const It=(un=Ot())=>{if("function"!=typeof un[Vt])throw Se.create("invalid-app-argument",{appName:Ue});return un[Vt]()};void 0!==Ke.serviceProps&&(0,y.ZB)(It,Ke.serviceProps),gt[Vt]=It,st.prototype[Vt]=function(...un){return this._getService.bind(this,Ue).apply(this,Ke.multipleInstances?un:[])}}return"PUBLIC"===Ke.type?gt[Vt]:null},removeApp:function Oe(Ke){delete Tt[Ke]},useAsService:function Be(Ke,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:z}};function Ot(Ke){if(!(0,y.r3)(Tt,Ke=Ke||z._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:Ke});return Tt[Ke]}return gt.default=gt,Object.defineProperty(gt,"apps",{get:function Le(){return Object.keys(Tt).map(Ke=>Tt[Ke])}}),Ot.App=st,gt}(me);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function Tt(gt){(0,y.ZB)(st,gt)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),st}(),Q=new ve.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Et=te;!function ut(st){(0,z.registerVersion)("@firebase/app-compat","0.2.13",st)}()},534:(Lt,We,O)=>{O.r(We),O.d(We,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>Gn,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>Hi,_apps:()=>Ir,_clearComponents:()=>si,_components:()=>Mn,_getProvider:()=>Xi,_registerComponent:()=>jn,_removeServiceInstance:()=>xn,deleteApp:()=>oi,getApp:()=>Hr,getApps:()=>Zr,initializeApp:()=>qr,onLog:()=>gi,registerVersion:()=>di,setLogLevel:()=>Li});var y=O(5861),ue=O(4537),z=O(7879),ve=O(9058);const me=(re,fe)=>fe.some(Re=>re instanceof Re);let ge,Se;const te=new WeakMap,Q=new WeakMap,De=new WeakMap,nt=new WeakMap,ut=new WeakMap;let Tt={get(re,fe,Re){if(re instanceof IDBTransaction){if("done"===fe)return Q.get(re);if("objectStoreNames"===fe)return re.objectStoreNames||De.get(re);if("store"===fe)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return ke(re[fe])},set:(re,fe,Re)=>(re[fe]=Re,!0),has:(re,fe)=>re instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in re};function Ot(re){return"function"==typeof re?function Oe(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...fe){return re.apply(Le(this),fe),ke(te.get(this))}:function(...fe){return ke(re.apply(Le(this),fe))}:function(fe,...Re){const tt=re.call(Le(this),fe,...Re);return De.set(tt,fe.sort?fe.sort():[fe]),ke(tt)}}(re):(re instanceof IDBTransaction&&function st(re){if(Q.has(re))return;const fe=new Promise((Re,tt)=>{const qe=()=>{re.removeEventListener("complete",Dt),re.removeEventListener("error",St),re.removeEventListener("abort",St)},Dt=()=>{Re(),qe()},St=()=>{tt(re.error||new DOMException("AbortError","AbortError")),qe()};re.addEventListener("complete",Dt),re.addEventListener("error",St),re.addEventListener("abort",St)});Q.set(re,fe)}(re),me(re,function Ge(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,Tt):re)}function ke(re){if(re instanceof IDBRequest)return function Et(re){const fe=new Promise((Re,tt)=>{const qe=()=>{re.removeEventListener("success",Dt),re.removeEventListener("error",St)},Dt=()=>{Re(ke(re.result)),qe()},St=()=>{tt(re.error),qe()};re.addEventListener("success",Dt),re.addEventListener("error",St)});return fe.then(Re=>{Re instanceof IDBCursor&&te.set(Re,re)}).catch(()=>{}),ut.set(fe,re),fe}(re);if(nt.has(re))return nt.get(re);const fe=Ot(re);return fe!==re&&(nt.set(re,fe),ut.set(fe,re)),fe}const Le=re=>ut.get(re),Ke=["get","getKey","getAll","getAllKeys","count"],Ue=["put","add","delete","clear"],Vt=new Map;function It(re,fe){var Re;if(!(re instanceof IDBDatabase)||fe in re||"string"!=typeof fe)return;if(Vt.get(fe))return Vt.get(fe);const tt=fe.replace(/FromIndex$/,""),qe=fe!==tt,Dt=Ue.includes(tt);if(!(tt in(qe?IDBIndex:IDBObjectStore).prototype)||!Dt&&!Ke.includes(tt))return;const St=function(Pn){return(Re=Re||(0,y.Z)(function*(bn,...dt){const Ur=this.transaction(bn,Dt?"readwrite":"readonly");let Lr=Ur.store;return qe&&(Lr=Lr.index(dt.shift())),(yield Promise.all([Lr[tt](...dt),Dt&&Ur.done]))[0]})).apply(this,arguments)};return Vt.set(fe,St),St}var un,Nn,En;!function gt(re){Tt=re(Tt)}(re=>({...re,get:(fe,Re,tt)=>It(fe,Re)||re.get(fe,Re,tt),has:(fe,Re)=>!!It(fe,Re)||re.has(fe,Re)}));class cr{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function rr(re){const fe=re.getComponent();return"VERSION"===fe?.type}(Re)){const tt=Re.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(Re=>Re).join(" ")}}const In="@firebase/app",we=new z.Yd("@firebase/app"),Gn="[DEFAULT]",ii={[In]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ir=new Map,Mn=new Map;function Nr(re,fe){try{re.container.addComponent(fe)}catch(Re){we.debug(`Component ${fe.name} failed to register with FirebaseApp ${re.name}`,Re)}}function Hi(re,fe){re.container.addOrOverwriteComponent(fe)}function jn(re){const fe=re.name;if(Mn.has(fe))return we.debug(`There were multiple attempts to register component ${fe}.`),!1;Mn.set(fe,re);for(const Re of Ir.values())Nr(Re,re);return!0}function Xi(re,fe){const Re=re.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),re.container.getProvider(fe)}function xn(re,fe,Re=Gn){Xi(re,fe).clearInstance(Re)}function si(){Mn.clear()}const Ln=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ki{constructor(fe,Re,tt){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const Ar="9.23.0";function qr(re,fe={}){let Re=re;"object"!=typeof fe&&(fe={name:fe});const tt=Object.assign({name:Gn,automaticDataCollectionEnabled:!1},fe),qe=tt.name;if("string"!=typeof qe||!qe)throw Ln.create("bad-app-name",{appName:String(qe)});if(Re||(Re=(0,ve.aH)()),!Re)throw Ln.create("no-options");const Dt=Ir.get(qe);if(Dt){if((0,ve.vZ)(Re,Dt.options)&&(0,ve.vZ)(tt,Dt.config))return Dt;throw Ln.create("duplicate-app",{appName:qe})}const St=new ue.H0(qe);for(const Pn of Mn.values())St.addComponent(Pn);const Jn=new ki(Re,tt,St);return Ir.set(qe,Jn),Jn}function Hr(re=Gn){const fe=Ir.get(re);if(!fe&&re===Gn&&(0,ve.aH)())return qr();if(!fe)throw Ln.create("no-app",{appName:re});return fe}function Zr(){return Array.from(Ir.values())}function oi(re){return(un=un||(0,y.Z)(function*(fe){const Re=fe.name;Ir.has(Re)&&(Ir.delete(Re),yield Promise.all(fe.container.getProviders().map(tt=>tt.delete())),fe.isDeleted=!0)})).apply(this,arguments)}function di(re,fe,Re){var tt;let qe=null!==(tt=ii[re])&&void 0!==tt?tt:re;Re&&(qe+=`-${Re}`);const Dt=qe.match(/\s|\//),St=fe.match(/\s|\//);if(Dt||St){const Jn=[`Unable to register library "${qe}" with version "${fe}":`];return Dt&&Jn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),Dt&&St&&Jn.push("and"),St&&Jn.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void we.warn(Jn.join(" "))}jn(new ue.wA(`${qe}-version`,()=>({library:qe,version:fe}),"VERSION"))}function gi(re,fe){if(null!==re&&"function"!=typeof re)throw Ln.create("invalid-log-argument");(0,z.Am)(re,fe)}function Li(re){(0,z.Ub)(re)}const ye="firebase-heartbeat-database",G=1,$="firebase-heartbeat-store";let oe=null;function K(){return oe||(oe=function Te(re,fe,{blocked:Re,upgrade:tt,blocking:qe,terminated:Dt}={}){const St=indexedDB.open(re,fe),Jn=ke(St);return tt&&St.addEventListener("upgradeneeded",Pn=>{tt(ke(St.result),Pn.oldVersion,Pn.newVersion,ke(St.transaction),Pn)}),Re&&St.addEventListener("blocked",Pn=>Re(Pn.oldVersion,Pn.newVersion,Pn)),Jn.then(Pn=>{Dt&&Pn.addEventListener("close",()=>Dt()),qe&&Pn.addEventListener("versionchange",bn=>qe(bn.oldVersion,bn.newVersion,bn))}).catch(()=>{}),Jn}(ye,G,{upgrade:(re,fe)=>{0===fe&&re.createObjectStore($)}}).catch(re=>{throw Ln.create("idb-open",{originalErrorMessage:re.message})})),oe}function Ve(re,fe){return(En=En||(0,y.Z)(function*(Re,tt){try{const Dt=(yield K()).transaction($,"readwrite");yield Dt.objectStore($).put(tt,ht(Re)),yield Dt.done}catch(qe){if(qe instanceof ve.ZR)we.warn(qe.message);else{const Dt=Ln.create("idb-set",{originalErrorMessage:qe?.message});we.warn(Dt.message)}}})).apply(this,arguments)}function ht(re){return`${re.name}!${re.options.appId}`}class nn{constructor(fe){this.container=fe,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new Ne(Re),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var fe=this;return(0,y.Z)(function*(){const tt=fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=Yt();if(null===fe._heartbeatsCache&&(fe._heartbeatsCache=yield fe._heartbeatsCachePromise),fe._heartbeatsCache.lastSentHeartbeatDate!==qe&&!fe._heartbeatsCache.heartbeats.some(Dt=>Dt.date===qe))return fe._heartbeatsCache.heartbeats.push({date:qe,agent:tt}),fe._heartbeatsCache.heartbeats=fe._heartbeatsCache.heartbeats.filter(Dt=>{const St=new Date(Dt.date).valueOf();return Date.now()-St<=2592e6}),fe._storage.overwrite(fe._heartbeatsCache)})()}getHeartbeatsHeader(){var fe=this;return(0,y.Z)(function*(){if(null===fe._heartbeatsCache&&(yield fe._heartbeatsCachePromise),null===fe._heartbeatsCache||0===fe._heartbeatsCache.heartbeats.length)return"";const Re=Yt(),{heartbeatsToSend:tt,unsentEntries:qe}=function Xn(re,fe=1024){const Re=[];let tt=re.slice();for(const qe of re){const Dt=Re.find(St=>St.agent===qe.agent);if(Dt){if(Dt.dates.push(qe.date),le(Re)>fe){Dt.dates.pop();break}}else if(Re.push({agent:qe.agent,dates:[qe.date]}),le(Re)>fe){Re.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:Re,unsentEntries:tt}}(fe._heartbeatsCache.heartbeats),Dt=(0,ve.L)(JSON.stringify({version:2,heartbeats:tt}));return fe._heartbeatsCache.lastSentHeartbeatDate=Re,qe.length>0?(fe._heartbeatsCache.heartbeats=qe,yield fe._storage.overwrite(fe._heartbeatsCache)):(fe._heartbeatsCache.heartbeats=[],fe._storage.overwrite(fe._heartbeatsCache)),Dt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(fe){this.app=fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var fe=this;return(0,y.Z)(function*(){return(yield fe._canUseIndexedDBPromise)&&(yield function Ee(re){return(Nn=Nn||(0,y.Z)(function*(fe){try{return yield(yield K()).transaction($).objectStore($).get(ht(fe))}catch(Re){if(Re instanceof ve.ZR)we.warn(Re.message);else{const tt=Ln.create("idb-get",{originalErrorMessage:Re?.message});we.warn(tt.message)}}})).apply(this,arguments)}(fe.app))||{heartbeats:[]}})()}overwrite(fe){var Re=this;return(0,y.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const Dt=yield Re.read();return Ve(Re.app,{lastSentHeartbeatDate:null!==(tt=fe.lastSentHeartbeatDate)&&void 0!==tt?tt:Dt.lastSentHeartbeatDate,heartbeats:fe.heartbeats})}})()}add(fe){var Re=this;return(0,y.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const Dt=yield Re.read();return Ve(Re.app,{lastSentHeartbeatDate:null!==(tt=fe.lastSentHeartbeatDate)&&void 0!==tt?tt:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...fe.heartbeats]})}})()}}function le(re){return(0,ve.L)(JSON.stringify({version:2,heartbeats:re})).length}!function Xe(re){jn(new ue.wA("platform-logger",fe=>new cr(fe),"PRIVATE")),jn(new ue.wA("heartbeat",fe=>new nn(fe),"PRIVATE")),di(In,"0.9.13",re),di(In,"0.9.13","esm2017"),di("fire-js","")}("")},4537:(Lt,We,O)=>{O.d(We,{H0:()=>Ge,wA:()=>z});var y=O(5861),ue=O(9058);class z{constructor(te,Q,De){this.name=te,this.instanceFactory=Q,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const ve="[DEFAULT]";class me{constructor(te,Q){this.name=te,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const Q=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(Q)){const De=new ue.BH;if(this.instancesDeferred.set(Q,De),this.isInitialized(Q)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:Q});nt&&De.resolve(nt)}catch{}}return this.instancesDeferred.get(Q).promise}getImmediate(te){var Q;const De=this.normalizeInstanceIdentifier(te?.identifier),nt=null!==(Q=te?.optional)&&void 0!==Q&&Q;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(ut){if(nt)return null;throw ut}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function Se(Me){return"EAGER"===Me.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[Q,De]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(Q);try{const ut=this.getOrInitializeService({instanceIdentifier:nt});De.resolve(ut)}catch{}}}}clearInstance(te=ve){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,y.Z)(function*(){const Q=Array.from(te.instances.values());yield Promise.all([...Q.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...Q.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=ve){return this.instances.has(te)}getOptions(te=ve){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:Q={}}=te,De=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:De,options:Q});for(const[ut,Et]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(ut)&&Et.resolve(nt);return nt}onInit(te,Q){var De;const nt=this.normalizeInstanceIdentifier(Q),ut=null!==(De=this.onInitCallbacks.get(nt))&&void 0!==De?De:new Set;ut.add(te),this.onInitCallbacks.set(nt,ut);const Et=this.instances.get(nt);return Et&&te(Et,nt),()=>{ut.delete(te)}}invokeOnInitCallbacks(te,Q){const De=this.onInitCallbacks.get(Q);if(De)for(const nt of De)try{nt(te,Q)}catch{}}getOrInitializeService({instanceIdentifier:te,options:Q={}}){let De=this.instances.get(te);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=te,Me===ve?void 0:Me),options:Q}),this.instances.set(te,De),this.instancesOptions.set(te,Q),this.invokeOnInitCallbacks(De,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,De)}catch{}var Me;return De||null}normalizeInstanceIdentifier(te=ve){return this.component?this.component.multipleInstances?te:ve:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ge{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const Q=this.getProvider(te.name);if(Q.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);Q.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const Q=new me(te,this);return this.providers.set(te,Q),Q}getProviders(){return Array.from(this.providers.values())}}},7879:(Lt,We,O)=>{O.d(We,{Am:()=>Me,Ub:()=>Ge,Yd:()=>Se,in:()=>ue});const y=[];var ue=function(te){return te[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",te}(ue||{});const z={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},ve=ue.INFO,me={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},ge=(te,Q,...De)=>{if(Q<te.logLevel)return;const nt=(new Date).toISOString(),ut=me[Q];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[ut](`[${nt}]  ${te.name}:`,...De)};class Se{constructor(Q){this.name=Q,this._logLevel=ve,this._logHandler=ge,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in ue))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?z[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...Q),this._logHandler(this,ue.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...Q),this._logHandler(this,ue.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...Q),this._logHandler(this,ue.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...Q),this._logHandler(this,ue.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...Q),this._logHandler(this,ue.ERROR,...Q)}}function Ge(te){y.forEach(Q=>{Q.setLogLevel(te)})}function Me(te,Q){for(const De of y){let nt=null;Q&&Q.level&&(nt=z[Q.level]),De.userLogHandler=null===te?null:(ut,Et,...st)=>{const Tt=st.map(gt=>{if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch{return null}}).filter(gt=>gt).join(" ");Et>=(nt??ut.logLevel)&&te({level:ue[Et].toLowerCase(),message:Tt,args:st,type:ut.name})}}}},3182:(Lt,We,O)=>{O.d(We,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=O(534);(0,y.registerVersion)("firebase","9.23.0","app")},7142:(Lt,We,O)=>{O.d(We,{Z:()=>y.Z});var y=O(3106);y.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(Lt,We,O)=>{O.r(We);var Ge,Me,te,Q,De,nt,ut,Et,st,Tt,gt,Oe,Ot,ke,Le,Te,Be,Ke,Ue,Vt,It,un,Nn,En,cr,rr,In,mn,we,Fe,He,xe,it,pt,bt,Ct,Cn,Xt,yn,$t,wn,qn,lr,rn,Ft,Sr,Vn,Qn,xr,pi,zn,Jt,Qt,sn,Gn,ii,Ir,Nr,Hi,jn,Xi,xn,si,On,Ln,ki,Ar,qr,Hr,Zr,oi,di,gi,Li,ye,G,$,oe,K,Ee,Ve,y=O(5861),ue=O(3106),z=O(9058),ve=O(534),me=O(7582),ge=O(7879),Se=O(4537);const Gt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const le=function Xn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Xe=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},re=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new ge.Yd("@firebase/auth");function qe(C,...h){Re.logLevel<=ge.in.ERROR&&Re.error(`Auth (${ve.SDK_VERSION}): ${C}`,...h)}function Dt(C,...h){throw bn(C,...h)}function St(C,...h){return bn(C,...h)}function Jn(C,h,f){const v=Object.assign(Object.assign({},Xe()),{[h]:f});return new z.LL("auth","Firebase",v).create(h,{appName:C.name})}function Pn(C,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Dt(C,"argument-error"),Jn(C,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bn(C,...h){if("string"!=typeof C){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=C.name),C._errorFactory.create(f,...v)}return re.create(C,...h)}function dt(C,h,...f){if(!C)throw bn(h,...f)}function Ur(C){const h="INTERNAL ASSERTION FAILED: "+C;throw qe(h),new Error(h)}function Lr(C,h){C||Ur(h)}function dr(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function ir(){return"http:"===Ji()||"https:"===Ji()}function Ji(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class mi{constructor(h,f){this.shortDelay=h,this.longDelay=f,Lr(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function ws(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ir()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zi(C,h){Lr(C.emulator,"Emulator should always be set here");const{url:f}=C.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Ds{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ts={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Po=new mi(3e4,6e4);function Un(C,h){return C.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:C.tenantId}):h}function sr(C,h,f,v){return(Ge=Ge||(0,y.Z)(function*(N,j,ee,ie,Ze={}){return as(N,Ze,(0,y.Z)(function*(){let at={},Zt={};ie&&("GET"===j?Zt=ie:at={body:JSON.stringify(ie)});const jt=(0,z.xO)(Object.assign({key:N.config.apiKey},Zt)).slice(1),on=yield N._getAdditionalHeaders();return on["Content-Type"]="application/json",N.languageCode&&(on["X-Firebase-Locale"]=N.languageCode),Ds.fetch()(Xs(N,N.config.apiHost,ee,jt),Object.assign({method:j,headers:on,referrerPolicy:"no-referrer"},at))}))})).apply(this,arguments)}function as(C,h,f){return(Me=Me||(0,y.Z)(function*(v,N,j){v._canInitEmulator=!1;const ee=Object.assign(Object.assign({},Ts),N);try{const ie=new es(v),Ze=yield Promise.race([j(),ie.promise]);ie.clearNetworkTimeout();const at=yield Ze.json();if("needConfirmation"in at)throw Fi(v,"account-exists-with-different-credential",at);if(Ze.ok&&!("errorMessage"in at))return at;{const Zt=Ze.ok?at.errorMessage:at.error.message,[jt,on]=Zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw Fi(v,"credential-already-in-use",at);if("EMAIL_EXISTS"===jt)throw Fi(v,"email-already-in-use",at);if("USER_DISABLED"===jt)throw Fi(v,"user-disabled",at);const Yn=ee[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(on)throw Jn(v,Yn,on);Dt(v,Yn)}}catch(ie){if(ie instanceof z.ZR)throw ie;Dt(v,"network-request-failed",{message:String(ie)})}})).apply(this,arguments)}function Zn(C,h,f,v){return(te=te||(0,y.Z)(function*(N,j,ee,ie,Ze={}){const at=yield sr(N,j,ee,ie,Ze);return"mfaPendingCredential"in at&&Dt(N,"multi-factor-auth-required",{_serverResponse:at}),at})).apply(this,arguments)}function Xs(C,h,f,v){const N=`${h}${f}?${v}`;return C.config.emulator?zi(C.config,N):`${C.config.apiScheme}://${N}`}class es{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(St(this.auth,"network-request-failed")),Po.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fi(C,h,f){const v={appName:C.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const N=St(C,h,v);return N.customData._tokenResponse=f,N}function yr(C){if(C)try{const h=new Date(Number(C));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Zo(C){return 1e3*Number(C)}function mo(C){const[h,f,v]=C.split(".");if(void 0===h||void 0===f||void 0===v)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,z.tV)(f);return N?JSON.parse(N):(qe("Failed to decode base64 JWT payload"),null)}catch(N){return qe("Caught error parsing JWT payload as JSON",N?.toString()),null}}function be(C,h){return(Et=Et||(0,y.Z)(function*(f,v,N=!1){if(N)return v;try{return yield v}catch(j){throw j instanceof z.ZR&&function Ce({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(j)&&f.auth.currentUser===f&&(yield f.auth.signOut()),j}})).apply(this,arguments)}class Ye{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const N=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,y.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,y.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class ct{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function et(C){return(st=st||(0,y.Z)(function*(h){var f;const v=h.auth,N=yield h.getIdToken(),j=yield be(h,function go(C,h){return(nt=nt||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}(v,{idToken:N}));dt(j?.users.length,v,"internal-error");const ee=j.users[0];h._notifyReloadListener(ee);const ie=null!==(f=ee.providerUserInfo)&&void 0!==f&&f.length?function Rr(C){return C.map(h=>{var{providerId:f}=h,v=(0,me._T)(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(ee.providerUserInfo):[],Ze=function cn(C,h){return[...C.filter(v=>!h.some(N=>N.providerId===v.providerId)),...h]}(h.providerData,ie),jt=!!h.isAnonymous&&!(h.email&&ee.passwordHash||Ze?.length),on={uid:ee.localId,displayName:ee.displayName||null,photoURL:ee.photoUrl||null,email:ee.email||null,emailVerified:ee.emailVerified||!1,phoneNumber:ee.phoneNumber||null,tenantId:ee.tenantId||null,providerData:Ze,metadata:new ct(ee.createdAt,ee.lastLoginAt),isAnonymous:jt};Object.assign(h,on)})).apply(this,arguments)}class $n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){dt(h.idToken,"internal-error"),dt(typeof h.idToken<"u","internal-error"),dt(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Ms(C){const h=mo(C);return dt(h,"internal-error"),dt(typeof h.exp<"u","internal-error"),dt(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,y.Z)(function*(){return dt(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,y.Z)(function*(){const{accessToken:N,refreshToken:j,expiresIn:ee}=yield function er(C,h){return(gt=gt||(0,y.Z)(function*(f,v){const N=yield as(f,{},(0,y.Z)(function*(){const j=(0,z.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:ee,apiKey:ie}=f.config,Ze=Xs(f,ee,"/v1/token",`key=${ie}`),at=yield f._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",Ds.fetch()(Ze,{method:"POST",headers:at,body:j})}));return{accessToken:N.access_token,expiresIn:N.expires_in,refreshToken:N.refresh_token}})).apply(this,arguments)}(h,f);v.updateTokensAndExpiration(N,j,Number(ee))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:N,expirationTime:j}=f,ee=new $n;return v&&(dt("string"==typeof v,"internal-error",{appName:h}),ee.refreshToken=v),N&&(dt("string"==typeof N,"internal-error",{appName:h}),ee.accessToken=N),j&&(dt("number"==typeof j,"internal-error",{appName:h}),ee.expirationTime=j),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $n,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function yi(C,h){dt("string"==typeof C||typeof C>"u","internal-error",{appName:h})}class Ci{constructor(h){var{uid:f,auth:v,stsTokenManager:N}=h,j=(0,me._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new ct(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,y.Z)(function*(){const v=yield be(f,f.stsTokenManager.getToken(f.auth,h));return dt(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function qo(C){return(ut=ut||(0,y.Z)(function*(h,f=!1){const v=(0,z.m9)(h),N=yield v.getIdToken(f),j=mo(N);dt(j&&j.exp&&j.auth_time&&j.iat,v.auth,"internal-error");const ee="object"==typeof j.firebase?j.firebase:void 0,ie=ee?.sign_in_provider;return{claims:j,token:N,authTime:yr(Zo(j.auth_time)),issuedAtTime:yr(Zo(j.iat)),expirationTime:yr(Zo(j.exp)),signInProvider:ie||null,signInSecondFactor:ee?.sign_in_second_factor||null}})).apply(this,arguments)}(this,h)}reload(){return function kt(C){return(Tt=Tt||(0,y.Z)(function*(h){const f=(0,z.m9)(h);yield et(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}(this)}_assign(h){this!==h&&(dt(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new Ci(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,y.Z)(function*(){let N=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),N=!0),f&&(yield et(v)),yield v.auth._persistUserIfCurrent(v),N&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,y.Z)(function*(){const f=yield h.getIdToken();return yield be(h,function Yr(C,h){return(Q=Q||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,N,j,ee,ie,Ze,at,Zt;const jt=null!==(v=f.displayName)&&void 0!==v?v:void 0,on=null!==(N=f.email)&&void 0!==N?N:void 0,Yn=null!==(j=f.phoneNumber)&&void 0!==j?j:void 0,Ti=null!==(ee=f.photoURL)&&void 0!==ee?ee:void 0,fs=null!==(ie=f.tenantId)&&void 0!==ie?ie:void 0,qs=null!==(Ze=f._redirectEventId)&&void 0!==Ze?Ze:void 0,ma=null!==(at=f.createdAt)&&void 0!==at?at:void 0,qa=null!==(Zt=f.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:Ic,emailVerified:Vu,isAnonymous:Mh,providerData:ju,stsTokenManager:xh}=f;dt(Ic&&xh,h,"internal-error");const Lf=$n.fromJSON(this.name,xh);dt("string"==typeof Ic,h,"internal-error"),yi(jt,h.name),yi(on,h.name),dt("boolean"==typeof Vu,h,"internal-error"),dt("boolean"==typeof Mh,h,"internal-error"),yi(Yn,h.name),yi(Ti,h.name),yi(fs,h.name),yi(qs,h.name),yi(ma,h.name),yi(qa,h.name);const wc=new Ci({uid:Ic,auth:h,email:on,emailVerified:Vu,displayName:jt,isAnonymous:Mh,photoURL:Ti,phoneNumber:Yn,tenantId:fs,stsTokenManager:Lf,createdAt:ma,lastLoginAt:qa});return ju&&Array.isArray(ju)&&(wc.providerData=ju.map(Ff=>Object.assign({},Ff))),qs&&(wc._redirectEventId=qs),wc}static _fromIdTokenResponse(h,f,v=!1){return(0,y.Z)(function*(){const N=new $n;N.updateFromServerResponse(f);const j=new Ci({uid:f.localId,auth:h,stsTokenManager:N,isAnonymous:v});return yield et(j),j})()}}const yo=new Map;function fr(C){Lr(C instanceof Function,"Expected a class definition");let h=yo.get(C);return h?(Lr(h instanceof C,"Instance stored in cache mismatched with class"),h):(h=new C,yo.set(C,h),h)}const Nt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(f,v){var N=this;return(0,y.Z)(function*(){N.storage[f]=v})()}_get(f){var v=this;return(0,y.Z)(function*(){const N=v.storage[f];return void 0===N?null:N})()}_remove(f){var v=this;return(0,y.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return C.type="NONE",C})();function ln(C,h,f){return`firebase:${C}:${h}:${f}`}class hr{constructor(h,f,v){this.persistence=h,this.auth=f,this.userKey=v;const{config:N,name:j}=this.auth;this.fullUserKey=ln(this.userKey,N.apiKey,j),this.fullPersistenceKey=ln("persistence",N.apiKey,j),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,y.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?Ci._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,y.Z)(function*(){if(f.persistence===h)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,v="authUser"){return(0,y.Z)(function*(){var N,j;if(!f.length)return new hr(fr(Nt),h,v);const ee=(yield Promise.all(f.map(function(jt){return(N=N||(0,y.Z)(function*(on){if(yield on._isAvailable())return on})).apply(this,arguments)}))).filter(jt=>jt);let ie=ee[0]||fr(Nt);const Ze=ln(v,h.config.apiKey,h.name);let at=null;for(const jt of f)try{const on=yield jt._get(Ze);if(on){const Yn=Ci._fromJSON(h,on);jt!==ie&&(at=Yn),ie=jt;break}}catch{}const Zt=ee.filter(jt=>jt._shouldAllowMigration);return ie._shouldAllowMigration&&Zt.length?(ie=Zt[0],at&&(yield ie._set(Ze,at.toJSON())),yield Promise.all(f.map(function(jt){return(j=j||(0,y.Z)(function*(on){if(on!==ie)try{yield on._remove(Ze)}catch{}})).apply(this,arguments)})),new hr(ie,h,v)):new hr(ie,h,v)})()}}function Fr(C){const h=C.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(zr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Cs(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(vo(h))return"Blackberry";if(dn(h))return"Webos";if(vi(h))return"Safari";if((h.includes("chrome/")||xs(h))&&!h.includes("edge/"))return"Chrome";if(Mi(h))return"Android";{const v=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function Cs(C=(0,z.z$)()){return/firefox\//i.test(C)}function vi(C=(0,z.z$)()){const h=C.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function xs(C=(0,z.z$)()){return/crios\//i.test(C)}function zr(C=(0,z.z$)()){return/iemobile/i.test(C)}function Mi(C=(0,z.z$)()){return/android/i.test(C)}function vo(C=(0,z.z$)()){return/blackberry/i.test(C)}function dn(C=(0,z.z$)()){return/webos/i.test(C)}function _i(C=(0,z.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Dr(C=(0,z.z$)()){return _i(C)||Mi(C)||dn(C)||vo(C)||/windows phone/i.test(C)||zr(C)}function Ei(C,h=[]){let f;switch(C){case"Browser":f=Fr((0,z.z$)());break;case"Worker":f=`${Fr((0,z.z$)())}-${C}`;break;default:f=C}const v=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ve.SDK_VERSION}/${v}`}function ia(C,h){return(Ot=Ot||(0,y.Z)(function*(f,v){return sr(f,"GET","/v2/recaptchaConfig",Un(f,v))})).apply(this,arguments)}function Ns(C){return void 0!==C&&void 0!==C.getResponse}function Ps(C){return void 0!==C&&void 0!==C.enterprise}class _o{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(f=>"EMAIL_PASSWORD_PROVIDER"===f.provider&&"OFF"!==f.enforcementState)}}function Hn(C){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",C),v.onload=h,v.onerror=N=>{const j=St("internal-error");j.customData=N,f(j)},v.type="text/javascript",v.charset="UTF-8",function Eo(){var C,h;return null!==(h=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==h?h:document}().appendChild(v)})}function ko(C){return`__${C}${Math.floor(1e6*Math.random())}`}class Io{constructor(h){this.type="recaptcha-enterprise",this.auth=ui(h)}verify(h="verify",f=!1){var v=this;return(0,y.Z)(function*(){var N;function ee(ie,Ze,at){const Zt=window.grecaptcha;Ps(Zt)?Zt.enterprise.ready(()=>{Zt.enterprise.execute(ie,{action:h}).then(jt=>{Ze(jt)}).catch(()=>{Ze("NO_RECAPTCHA")})}):at(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ie,Ze)=>{(function j(ie){return(N=N||(0,y.Z)(function*(Ze){var at;if(!f){if(null==Ze.tenantId&&null!=Ze._agentRecaptchaConfig)return Ze._agentRecaptchaConfig.siteKey;if(null!=Ze.tenantId&&void 0!==Ze._tenantRecaptchaConfigs[Ze.tenantId])return Ze._tenantRecaptchaConfigs[Ze.tenantId].siteKey}return new Promise(function(Zt,jt){return(at=at||(0,y.Z)(function*(on,Yn){ia(Ze,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ti=>{if(void 0!==Ti.recaptchaKey){const fs=new _o(Ti);return null==Ze.tenantId?Ze._agentRecaptchaConfig=fs:Ze._tenantRecaptchaConfigs[Ze.tenantId]=fs,on(fs.siteKey)}Yn(new Error("recaptcha Enterprise site key undefined"))}).catch(Ti=>{Yn(Ti)})})).apply(this,arguments)})})).apply(this,arguments)})(v.auth).then(at=>{if(!f&&Ps(window.grecaptcha))ee(at,ie,Ze);else{if(typeof window>"u")return void Ze(new Error("RecaptchaVerifier is only supported in browser"));Hn("https://www.google.com/recaptcha/enterprise.js?render="+at).then(()=>{ee(at,ie,Ze)}).catch(Zt=>{Ze(Zt)})}}).catch(at=>{Ze(at)})})})()}}function Br(C,h,f){return(ke=ke||(0,y.Z)(function*(v,N,j,ee=!1){const ie=new Io(v);let Ze;try{Ze=yield ie.verify(j)}catch{Ze=yield ie.verify(j,!0)}const at=Object.assign({},N);return Object.assign(at,ee?{captchaResp:Ze}:{captchaResponse:Ze}),Object.assign(at,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(at,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),at})).apply(this,arguments)}class uo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const v=j=>new Promise((ee,ie)=>{try{ee(h(j))}catch(Ze){ie(Ze)}});v.onAbort=f,this.queue.push(v);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,y.Z)(function*(){if(f.auth.currentUser===h)return;const v=[];try{for(const N of f.queue)yield N(h),N.onAbort&&v.push(N.onAbort)}catch(N){v.reverse();for(const j of v)try{j()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:N?.message})}})()}}class xi{constructor(h,f,v,N){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=v,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bi(this),this.idTokenSubscription=new Bi(this),this.beforeStateQueue=new uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=re,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(h,f){var v=this;return f&&(this._popupRedirectResolver=fr(f)),this._initializationPromise=this.queue((0,y.Z)(function*(){var N,j;if(!v._deleted&&(v.persistenceManager=yield hr.create(v,h),!v._deleted)){if(null!==(N=v._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(j=v.currentUser)||void 0===j?void 0:j.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,y.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUser(h){var f=this;return(0,y.Z)(function*(){var v;const N=yield f.assertedPersistence.getCurrentUser();let j=N,ee=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ie=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,Ze=j?._redirectEventId,at=yield f.tryRedirectSignIn(h);(!ie||ie===Ze)&&at?.user&&(j=at.user,ee=!0)}if(!j)return f.directlySetCurrentUser(null);if(!j._redirectEventId){if(ee)try{yield f.beforeStateQueue.runMiddleware(j)}catch(ie){j=N,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ie))}return j?f.reloadAndSetCurrentUserOrClear(j):f.directlySetCurrentUser(null)}return dt(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===j._redirectEventId?f.directlySetCurrentUser(j):f.reloadAndSetCurrentUserOrClear(j)})()}tryRedirectSignIn(h){var f=this;return(0,y.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,y.Z)(function*(){try{yield et(h)}catch(v){if("auth/network-request-failed"!==v?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ai(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var h=this;return(0,y.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,y.Z)(function*(){const v=h?(0,z.m9)(h):null;return v&&dt(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(h,f=!1){var v=this;return(0,y.Z)(function*(){if(!v._deleted)return h&&dt(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),f||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,y.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,y.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var f=this;return this.queue((0,y.Z)(function*(){yield f.assertedPersistence.setPersistence(fr(h))}))}initializeRecaptchaConfig(){var h=this;return(0,y.Z)(function*(){const f=yield ia(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new _o(f);null==h.tenantId?h._agentRecaptchaConfig=v:h._tenantRecaptchaConfigs[h.tenantId]=v,v.emailPasswordEnabled&&new Io(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new z.LL("auth","Firebase",h())}onAuthStateChanged(h,f,v){return this.registerStateListener(this.authStateSubscription,h,f,v)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,v){return this.registerStateListener(this.idTokenSubscription,h,f,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var v=this;return(0,y.Z)(function*(){const N=yield v.getOrInitRedirectPersistenceManager(f);return null===h?N.removeCurrentUser():N.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,y.Z)(function*(){if(!f.redirectPersistenceManager){const v=h&&fr(h)||f._popupRedirectResolver;dt(v,f,"argument-error"),f.redirectPersistenceManager=yield hr.create(f,[fr(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,y.Z)(function*(){var v,N;return f._isInitialized&&(yield f.queue((0,y.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===h?f._currentUser:(null===(N=f.redirectUser)||void 0===N?void 0:N._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,y.Z)(function*(){if(h===f.currentUser)return f.queue((0,y.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,v,N){if(this._deleted)return()=>{};const j="function"==typeof f?f:f.next.bind(f),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return dt(ee,this,"internal-error"),ee.then(()=>j(this.currentUser)),"function"==typeof f?h.addObserver(f,v,N):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,y.Z)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,y.Z)(function*(){var f;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const N=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();N&&(v["X-Firebase-Client"]=N);const j=yield h._getAppCheckToken();return j&&(v["X-Firebase-AppCheck"]=j),v})()}_getAppCheckToken(){var h=this;return(0,y.Z)(function*(){var f;const v=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return v?.error&&function tt(C,...h){Re.logLevel<=ge.in.WARN&&Re.warn(`Auth (${ve.SDK_VERSION}): ${C}`,...h)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function ui(C){return(0,z.m9)(C)}class Bi{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,z.ne)(f=>this.observer=f)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(C){const h=C.indexOf(":");return h<0?"":C.substr(0,h+1)}function Fo(C){if(!C)return null;const h=Number(C);return isNaN(h)?null:h}class Ls{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Ur("not implemented")}_getIdTokenResponse(h){return Ur("not implemented")}_linkToIdToken(h,f){return Ur("not implemented")}_getReauthenticationResolver(h){return Ur("not implemented")}}function ya(C,h){return(Le=Le||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:resetPassword",Un(f,v))})).apply(this,arguments)}function va(C,h){return(Te=Te||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function ms(C,h){return(Ke=Ke||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithPassword",Un(f,v))})).apply(this,arguments)}function ys(C,h){return(Ue=Ue||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:sendOobCode",Un(f,v))})).apply(this,arguments)}function _a(C,h){return(It=It||(0,y.Z)(function*(f,v){return ys(f,v)})).apply(this,arguments)}function pr(C,h){return(un=un||(0,y.Z)(function*(f,v){return ys(f,v)})).apply(this,arguments)}class ae extends Ls{constructor(h,f,v,N=null){super("password",v),this._email=h,this._password=f,this._tenantId=N}static _fromEmailAndPassword(h,f){return new ae(h,f,"password")}static _fromEmailAndCode(h,f,v=null){return new ae(h,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,y.Z)(function*(){var v;switch(f.signInMethod){case"password":const j={returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=h._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const ee=yield Br(h,j,"signInWithPassword");return ms(h,ee)}var N;return ms(h,j).catch(function(ee){return(N=N||(0,y.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ze=yield Br(h,j,"signInWithPassword");return ms(h,Ze)}return Promise.reject(ie)})).apply(this,arguments)});case"emailLink":return function L(C,h){return(En=En||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithEmailLink",Un(f,v))})).apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Dt(h,"internal-error")}})()}_linkToIdToken(h,f){var v=this;return(0,y.Z)(function*(){switch(v.signInMethod){case"password":return va(h,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function q(C,h){return(cr=cr||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithEmailLink",Un(f,v))})).apply(this,arguments)}(h,{idToken:f,email:v._email,oobCode:v._password});default:Dt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ie(C,h){return(rr=rr||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithIdp",Un(f,v))})).apply(this,arguments)}class ft extends Ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new ft(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Dt("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:N}=f,j=(0,me._T)(f,["providerId","signInMethod"]);if(!v||!N)return null;const ee=new ft(v,N);return ee.idToken=j.idToken||void 0,ee.accessToken=j.accessToken||void 0,ee.secret=j.secret,ee.nonce=j.nonce,ee.pendingToken=j.pendingToken||null,ee}_getIdTokenResponse(h){return Ie(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Ie(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ie(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,z.xO)(f)}return h}}const kn={USER_NOT_FOUND:"user-not-found"};class Sn extends Ls{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new Sn({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new Sn({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function zt(C,h){return(mn=mn||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithPhoneNumber",Un(f,v))})).apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function hn(C,h){return(we=we||(0,y.Z)(function*(f,v){const N=yield Zn(f,"POST","/v1/accounts:signInWithPhoneNumber",Un(f,v));if(N.temporaryProof)throw Fi(f,"account-exists-with-different-credential",N);return N})).apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Pr(C,h){return(Fe=Fe||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithPhoneNumber",Un(f,Object.assign(Object.assign({},v),{operation:"REAUTH"})),kn)})).apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:N}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:N}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:N,temporaryProof:j}=h;return v||f||N||j?new Sn({verificationId:f,verificationCode:v,phoneNumber:N,temporaryProof:j}):null}}class Jr{constructor(h){var f,v,N,j,ee,ie;const Ze=(0,z.zd)((0,z.pd)(h)),at=null!==(f=Ze.apiKey)&&void 0!==f?f:null,Zt=null!==(v=Ze.oobCode)&&void 0!==v?v:null,jt=function gr(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=Ze.mode)&&void 0!==N?N:null);dt(at&&Zt&&jt,"argument-error"),this.apiKey=at,this.operation=jt,this.code=Zt,this.continueUrl=null!==(j=Ze.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(ee=Ze.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ie=Ze.tenantId)&&void 0!==ie?ie:null}static parseLink(h){const f=function Xr(C){const h=(0,z.zd)((0,z.pd)(C)).link,f=h?(0,z.zd)((0,z.pd)(h)).deep_link_id:null,v=(0,z.zd)((0,z.pd)(C)).deep_link_id;return(v?(0,z.zd)((0,z.pd)(v)).link:null)||v||f||h||C}(h);try{return new Jr(f)}catch{return null}}}let Ni=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(f,v){return ae._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const N=Jr.parseLink(v);return dt(N,"argument-error"),ae._fromEmailAndCode(f,N.code,N.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Tr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Or extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Gr extends Or{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return dt("providerId"in f&&"signInMethod"in f,"argument-error"),ft._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return dt(h.idToken||h.accessToken,"argument-error"),ft._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Gr.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Gr.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:N,pendingToken:j,nonce:ee,providerId:ie}=h;if(!v&&!N&&!f&&!j||!ie)return null;try{return new Gr(ie)._credential({idToken:f,accessToken:v,nonce:ee,pendingToken:j})}catch{return null}}}let Fs=(()=>{class C extends Or{constructor(){super("facebook.com")}static credential(f){return ft._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return C.credentialFromTaggedObject(f)}static credentialFromError(f){return C.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return C.credential(f.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),bs=(()=>{class C extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return ft._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return C.credentialFromTaggedObject(f)}static credentialFromError(f){return C.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:N}=f;if(!v&&!N)return null;try{return C.credential(v,N)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Us=(()=>{class C extends Or{constructor(){super("github.com")}static credential(f){return ft._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return C.credentialFromTaggedObject(f)}static credentialFromError(f){return C.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return C.credential(f.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class Ii extends Ls{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ie(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Ie(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ie(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:N,pendingToken:j}=f;return v&&N&&j&&v===N?new Ii(v,j):null}static _create(h,f){return new Ii(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ss extends Tr{constructor(h){dt(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ss.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ss.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Ii.fromJSON(h);return dt(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:v}=h;if(!f||!v)return null;try{return Ii._create(v,f)}catch{return null}}}let Oa=(()=>{class C extends Or{constructor(){super("twitter.com")}static credential(f,v){return ft._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return C.credentialFromTaggedObject(f)}static credentialFromError(f){return C.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:N}=f;if(!v||!N)return null;try{return C.credential(v,N)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Bo(C,h){return(He=He||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signUp",Un(f,v))})).apply(this,arguments)}class Wi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,N=!1){return(0,y.Z)(function*(){const j=yield Ci._fromIdTokenResponse(h,v,N),ee=Do(v);return new Wi({user:j,providerId:ee,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,y.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const N=Do(v);return new Wi({user:h,providerId:N,_tokenResponse:v,operationType:f})})()}}function Do(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}class oa extends z.ZR{constructor(h,f,v,N){var j;super(f.code,f.message),this.operationType=v,this.user=N,Object.setPrototypeOf(this,oa.prototype),this.customData={appName:h.name,tenantId:null!==(j=h.tenantId)&&void 0!==j?j:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,N){return new oa(h,f,v,N)}}function Qo(C,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(C):f._getIdTokenResponse(C)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?oa._fromErrorAndOperation(C,j,h,v):j})}function Ea(C){return new Set(C.map(({providerId:h})=>h).filter(h=>!!h))}function Vo(C,h){return(pt=pt||(0,y.Z)(function*(f,v,N=!1){const j=yield be(f,v._linkToIdToken(f.auth,yield f.getIdToken()),N);return Wi._forOperation(f,"link",j)})).apply(this,arguments)}function bo(C,h,f){return(bt=bt||(0,y.Z)(function*(v,N,j){yield et(N);const ie=!1===v?"provider-already-linked":"no-such-provider";dt(Ea(N.providerData).has(j)===v,N.auth,ie)})).apply(this,arguments)}function ka(C,h){return(Ct=Ct||(0,y.Z)(function*(f,v,N=!1){const{auth:j}=f,ee="reauthenticate";try{const ie=yield be(f,Qo(j,ee,v,f),N);dt(ie.idToken,j,"internal-error");const Ze=mo(ie.idToken);dt(Ze,j,"internal-error");const{sub:at}=Ze;return dt(f.uid===at,j,"user-mismatch"),Wi._forOperation(f,ee,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&Dt(j,"user-mismatch"),ie}})).apply(this,arguments)}function ns(C,h){return(Cn=Cn||(0,y.Z)(function*(f,v,N=!1){const j="signIn",ee=yield Qo(f,j,v),ie=yield Wi._fromIdTokenResponse(f,j,ee);return N||(yield f._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function aa(C,h){return(Xt=Xt||(0,y.Z)(function*(f,v){return ns(ui(f),v)})).apply(this,arguments)}function La(C,h){return(yn=yn||(0,y.Z)(function*(f,v){const N=(0,z.m9)(f);return yield bo(!1,N,v.providerId),Vo(N,v)})).apply(this,arguments)}function jo(C,h){return($t=$t||(0,y.Z)(function*(f,v){return ka((0,z.m9)(f),v)})).apply(this,arguments)}class So{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?vr._fromServerResponse(h,f):"totpInfo"in f?E._fromServerResponse(h,f):Dt(h,"internal-error")}}class vr extends So{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new vr(f)}}class E extends So{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new E(f)}}function P(C,h,f){var v;dt((null===(v=f.url)||void 0===v?void 0:v.length)>0,C,"invalid-continue-uri"),dt(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(dt(f.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(dt(f.android.packageName.length>0,C,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function _e(C,h){return(Sr=Sr||(0,y.Z)(function*(f,v){const N=(0,z.m9)(f),j=yield ya(N,{oobCode:v}),ee=j.requestType;switch(dt(ee,N,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":dt(j.newEmail,N,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":dt(j.mfaInfo,N,"internal-error");default:dt(j.email,N,"internal-error")}let ie=null;return j.mfaInfo&&(ie=So._fromServerResponse(ui(N),j.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===j.requestType?j.newEmail:j.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===j.requestType?j.email:j.newEmail)||null,multiFactorInfo:ie},operation:ee}})).apply(this,arguments)}function Vs(C,h,f){return(Ir=Ir||(0,y.Z)(function*(v,N,j){const{auth:ee}=v,Ze={idToken:yield v.getIdToken(),returnSecureToken:!0};N&&(Ze.email=N),j&&(Ze.password=j);const at=yield be(v,va(ee,Ze));yield v._updateTokensIfNecessary(at,!0)})).apply(this,arguments)}class Mr{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class ua extends Mr{constructor(h,f,v,N){super(h,f,v),this.username=N}}class ca extends Mr{constructor(h,f){super(h,"facebook.com",f)}}class js extends ua{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Pc extends Mr{constructor(h,f){super(h,"google.com",f)}}class la extends ua{constructor(h,f,v){super(h,"twitter.com",f,v)}}function Ia(C){const{user:h,_tokenResponse:f}=C;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Xo(C){var h,f;if(!C)return null;const{providerId:v}=C,N=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},j=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!v&&C?.idToken){const ee=null===(f=null===(h=mo(C.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(ee)return new Mr(j,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!v)return null;switch(v){case"facebook.com":return new ca(j,N);case"github.com":return new js(j,N);case"google.com":return new Pc(j,N);case"twitter.com":return new la(j,N,C.screenName||null);case"custom":case"anonymous":return new Mr(j,null);default:return new Mr(j,v,N)}}(f)}class $o{constructor(h,f,v){this.type=h,this.credential=f,this.auth=v}static _fromIdtoken(h,f){return new $o("enroll",h,f)}static _fromMfaPendingCredential(h){return new $o("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return $o._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return $o._fromIdtoken(h.multiFactorSession.idToken)}return null}}class wa{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){var v;const N=ui(h),j=f.customData._serverResponse,ee=(j.mfaInfo||[]).map(Ze=>So._fromServerResponse(N,Ze));dt(j.mfaPendingCredential,N,"internal-error");const ie=$o._fromMfaPendingCredential(j.mfaPendingCredential);return new wa(ie,ee,function(Ze){return(v=v||(0,y.Z)(function*(at){const Zt=yield at._process(N,ie);delete j.mfaInfo,delete j.mfaPendingCredential;const jt=Object.assign(Object.assign({},j),{idToken:Zt.idToken,refreshToken:Zt.refreshToken});switch(f.operationType){case"signIn":const on=yield Wi._fromIdTokenResponse(N,f.operationType,jt);return yield N._updateCurrentUser(on.user),on;case"reauthenticate":return dt(f.user,N,"internal-error"),Wi._forOperation(f.user,f.operationType,jt);default:Dt(N,"internal-error")}})).apply(this,arguments)})}resolveSignIn(h){var f=this;return(0,y.Z)(function*(){return f.signInResolver(h)})()}}class ru{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>So._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new ru(h)}getSession(){var h=this;return(0,y.Z)(function*(){return $o._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var v=this;return(0,y.Z)(function*(){const N=h,j=yield v.getSession(),ee=yield be(v.user,N._process(v.user.auth,j,f));return yield v.user._updateTokensIfNecessary(ee),v.user.reload()})()}unenroll(h){var f=this;return(0,y.Z)(function*(){const v="string"==typeof h?h:h.uid,N=yield f.user.getIdToken();try{const j=yield be(f.user,function Oc(C,h){return sr(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Un(C,h))}(f.user.auth,{idToken:N,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ee})=>ee!==v),yield f.user._updateTokensIfNecessary(j),yield f.user.reload()}catch(j){throw j}})()}}const Jo=new WeakMap,Da="__sak";class Fa{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ua=(()=>{class C extends Fa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rc(){const C=(0,z.z$)();return vi(C)||_i(C)}()&&function ao(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Dr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const N=this.storage.getItem(v),j=this.localCache[v];N!==j&&f(v,j,N)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((ie,Ze,at)=>{this.notifyListeners(ie,at)});const N=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(N);if(f.newValue!==ie)null!==f.newValue?this.storage.setItem(N,f.newValue):this.storage.removeItem(N);else if(this.localCache[N]===f.newValue&&!v)return}const j=()=>{const ie=this.storage.getItem(N);!v&&this.localCache[N]===ie||this.notifyListeners(N,ie)},ee=this.storage.getItem(N);!function Qr(){return(0,z.w1)()&&10===document.documentMode}()||ee===f.newValue||f.newValue===f.oldValue?j():setTimeout(j,10)}notifyListeners(f,v){this.localCache[f]=v;const N=this.listeners[f];if(N)for(const j of Array.from(N))j(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var N=()=>super._set,j=this;return(0,y.Z)(function*(){yield N().call(j,f,v),j.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,N=this;return(0,y.Z)(function*(){const j=yield v().call(N,f);return N.localCache[f]=JSON.stringify(j),j})()}_remove(f){var v=()=>super._remove,N=this;return(0,y.Z)(function*(){yield v().call(N,f),delete N.localCache[f]})()}}return C.type="LOCAL",C})(),hi=(()=>{class C extends Fa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return C.type="SESSION",C})();let wi=(()=>{class C{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(j=>j.isListeningto(f));if(v)return v;const N=new C(f);return this.receivers.push(N),N}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,y.Z)(function*(){var N;const j=f,{eventId:ee,eventType:ie,data:Ze}=j.data,at=v.handlersMap[ie];if(!at?.size)return;j.ports[0].postMessage({status:"ack",eventId:ee,eventType:ie});const Zt=Array.from(at).map(function(on){return(N=N||(0,y.Z)(function*(Yn){return Yn(j.origin,Ze)})).apply(this,arguments)}),jt=yield function Au(C){var h;return Promise.all(C.map(function(f){return(h=h||(0,y.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(N){return{fulfilled:!1,reason:N}}})).apply(this,arguments)}))}(Zt);j.ports[0].postMessage({status:"done",eventId:ee,eventType:ie,response:jt})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function $s(C="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return C+f}class Ki{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,v=50){var N=this;return(0,y.Z)(function*(){const j=typeof MessageChannel<"u"?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let ee,ie;return new Promise((Ze,at)=>{const Zt=$s("",20);j.port1.start();const jt=setTimeout(()=>{at(new Error("unsupported_event"))},v);ie={messageChannel:j,onMessage(on){const Yn=on;if(Yn.data.eventId===Zt)switch(Yn.data.status){case"ack":clearTimeout(jt),ee=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ze(Yn.data.response);break;default:clearTimeout(jt),clearTimeout(ee),at(new Error("invalid_response"))}}},N.handlers.add(ie),j.port1.addEventListener("message",ie.onMessage),N.target.postMessage({eventType:h,eventId:Zt,data:f},[j.port2])}).finally(()=>{ie&&N.removeMessageHandler(ie)})})()}}function Di(){return window}function oc(){return typeof Di().WorkerGlobalScope<"u"&&"function"==typeof Di().importScripts}const Ru="firebaseLocalStorageDb",Hs="firebaseLocalStorage",uc="fbase_key";class Ba{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Vi(C,h){return C.transaction([Hs],h?"readwrite":"readonly").objectStore(Hs)}function ho(){const C=indexedDB.open(Ru,1);return new Promise((h,f)=>{C.addEventListener("error",()=>{f(C.error)}),C.addEventListener("upgradeneeded",()=>{const v=C.result;try{v.createObjectStore(Hs,{keyPath:uc})}catch(N){f(N)}}),C.addEventListener("success",(0,y.Z)(function*(){const v=C.result;v.objectStoreNames.contains(Hs)?h(v):(v.close(),yield function iu(){const C=indexedDB.deleteDatabase(Ru);return new Ba(C).toPromise()}(),h(yield ho()))}))})}function su(C,h,f){return(Hi=Hi||(0,y.Z)(function*(v,N,j){const ee=Vi(v,!0).put({[uc]:N,value:j});return new Ba(ee).toPromise()})).apply(this,arguments)}function m(C,h){const f=Vi(C,!0).delete(h);return new Ba(f).toPromise()}const S=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,y.Z)(function*(){return f.db||(f.db=yield ho()),f.db})()}_withRetries(f){var v=this;return(0,y.Z)(function*(){let N=0;for(;;)try{const j=yield v._openDb();return yield f(j)}catch(j){if(N++>3)throw j;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,y.Z)(function*(){return oc()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,y.Z)(function*(){var v,N;f.receiver=wi._getInstance(function zo(){return oc()?self:null}()),f.receiver._subscribe("keyChanged",function(j,ee){return(v=v||(0,y.Z)(function*(ie,Ze){return{keyProcessed:(yield f._poll()).includes(Ze.key)}})).apply(this,arguments)}),f.receiver._subscribe("ping",function(j,ee){return(N=N||(0,y.Z)(function*(ie,Ze){return["keyChanged"]})).apply(this,arguments)})})()}initializeSender(){var f=this;return(0,y.Z)(function*(){var v,N;if(f.activeServiceWorker=yield function ac(){return(Nr=Nr||(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ki(f.activeServiceWorker);const j=yield f.sender._send("ping",{},800);j&&null!==(v=j[0])&&void 0!==v&&v.fulfilled&&null!==(N=j[0])&&void 0!==N&&N.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,y.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function _s(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ho();return yield su(f,Da,"1"),yield m(f,Da),!0}catch{}return!1})()}_withPendingWrite(f){var v=this;return(0,y.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var N=this;return(0,y.Z)(function*(){return N._withPendingWrite((0,y.Z)(function*(){return yield N._withRetries(j=>su(j,f,v)),N.localCache[f]=v,N.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,y.Z)(function*(){const N=yield v._withRetries(j=>function Dl(C,h){return(jn=jn||(0,y.Z)(function*(f,v){const N=Vi(f,!1).get(v),j=yield new Ba(N).toPromise();return void 0===j?null:j.value})).apply(this,arguments)}(j,f));return v.localCache[f]=N,N})()}_remove(f){var v=this;return(0,y.Z)(function*(){return v._withPendingWrite((0,y.Z)(function*(){return yield v._withRetries(N=>m(N,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,y.Z)(function*(){const v=yield f._withRetries(ee=>{const ie=Vi(ee,!1).getAll();return new Ba(ie).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const N=[],j=new Set;for(const{fbase_key:ee,value:ie}of v)j.add(ee),JSON.stringify(f.localCache[ee])!==JSON.stringify(ie)&&(f.notifyListeners(ee,ie),N.push(ee));for(const ee of Object.keys(f.localCache))f.localCache[ee]&&!j.has(ee)&&(f.notifyListeners(ee,null),N.push(ee));return N})()}notifyListeners(f,v){this.localCache[f]=v;const N=this.listeners[f];if(N)for(const j of Array.from(N))j(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),Ut=1e12;class gn{constructor(h){this.auth=h,this.counter=Ut,this._widgets=new Map}render(h,f){const v=this.counter;return this._widgets.set(v,new ti(h,this.auth.name,f||{})),this.counter++,v}reset(h){var f;const v=h||Ut;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Ut))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,y.Z)(function*(){var v;return null===(v=f._widgets.get(h||Ut))||void 0===v||v.execute(),""})()}}class ti{constructor(h,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof h?document.getElementById(h):h;dt(N,"argument-error",{appName:f}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _n(C){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<C;v++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zs=ko("rcb"),ou=new mi(3e4,6e4);class Ca{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Di().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return dt(function Ao(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Ns(Di().grecaptcha)?Promise.resolve(Di().grecaptcha):new Promise((v,N)=>{const j=Di().setTimeout(()=>{N(St(h,"network-request-failed"))},ou.get());Di()[zs]=()=>{Di().clearTimeout(j),delete Di()[zs];const ie=Di().grecaptcha;if(!ie||!Ns(ie))return void N(St(h,"internal-error"));const Ze=ie.render;ie.render=(at,Zt)=>{const jt=Ze(at,Zt);return this.counter++,jt},this.hostLanguage=f,v(ie)},Hn(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:zs,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(j),N(St(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Di().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kc{load(h){return(0,y.Z)(function*(){return new gn(h)})()}clearedOneInstance(){}}const Mu="recaptcha",Go={theme:"light",type:"image"};class Fn{constructor(h,f=Object.assign({},Go),v){this.parameters=f,this.type=Mu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ui(v),this.isInvisible="invisible"===this.parameters.size,dt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof h?document.getElementById(h):h;dt(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kc:new Ca,this.validateStartingState()}verify(){var h=this;return(0,y.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(f)||new Promise(j=>{const ee=ie=>{ie&&(h.tokenChangeListeners.delete(ee),j(ie))};h.tokenChangeListeners.add(ee),h.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){dt(!this.parameters.sitekey,this.auth,"argument-error"),dt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),dt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof h)h(f);else if("string"==typeof h){const v=Di()[h];"function"==typeof v&&v(f)}}}assertNotDestroyed(){dt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,y.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,y.Z)(function*(){dt(ir()&&!oc(),h.auth,"internal-error"),yield function ha(){let C=null;return new Promise(h=>{"complete"!==document.readyState?(C=()=>h(),window.addEventListener("load",C)):h()}).catch(h=>{throw C&&window.removeEventListener("load",C),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function eo(C){return(Oe=Oe||(0,y.Z)(function*(h){return(yield sr(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}(h.auth);dt(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return dt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gs{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=Sn._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function mr(C,h,f){return(On=On||(0,y.Z)(function*(v,N,j){var ee;const ie=yield j.verify();try{let Ze;if(dt("string"==typeof ie,v,"argument-error"),dt(j.type===Mu,v,"argument-error"),Ze="string"==typeof N?{phoneNumber:N}:N,"session"in Ze){const at=Ze.session;if("phoneNumber"in Ze)return dt("enroll"===at.type,v,"internal-error"),(yield function ec(C,h){return sr(C,"POST","/v2/accounts/mfaEnrollment:start",Un(C,h))}(v,{idToken:at.credential,phoneEnrollmentInfo:{phoneNumber:Ze.phoneNumber,recaptchaToken:ie}})).phoneSessionInfo.sessionInfo;{dt("signin"===at.type,v,"internal-error");const Zt=(null===(ee=Ze.multiFactorHint)||void 0===ee?void 0:ee.uid)||Ze.multiFactorUid;return dt(Zt,v,"missing-multi-factor-info"),(yield function V(C,h){return sr(C,"POST","/v2/accounts/mfaSignIn:start",Un(C,h))}(v,{mfaPendingCredential:at.credential,mfaEnrollmentId:Zt,phoneSignInInfo:{recaptchaToken:ie}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:at}=yield function Ht(C,h){return(In=In||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:sendVerificationCode",Un(f,v))})).apply(this,arguments)}(v,{phoneNumber:Ze.phoneNumber,recaptchaToken:ie});return at}}finally{j._reset()}})).apply(this,arguments)}let Wr=(()=>{class C{constructor(f){this.providerId=C.PROVIDER_ID,this.auth=ui(f)}verifyPhoneNumber(f,v){return mr(this.auth,f,(0,z.m9)(v))}static credential(f,v){return Sn._fromVerification(f,v)}static credentialFromResult(f){return C.credentialFromTaggedObject(f)}static credentialFromError(f){return C.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:N}=f;return v&&N?Sn._fromTokenResponse(v,N):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Pt(C,h){return h?fr(h):(dt(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class lc extends Ls{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ie(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ie(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ie(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function vh(C){return ns(C.auth,new lc(C),C.bypassAuthState)}function Va(C){const{auth:h,user:f}=C;return dt(f,h,"internal-error"),ka(f,new lc(C),C.bypassAuthState)}function cg(C){return(ki=ki||(0,y.Z)(function*(h){const{auth:f,user:v}=h;return dt(v,f,"internal-error"),Vo(v,new lc(h),h.bypassAuthState)})).apply(this,arguments)}class Lc{constructor(h,f,v,N,j=!1){this.auth=h,this.resolver=v,this.user=N,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var f,h=this;return new Promise(function(v,N){return(f=f||(0,y.Z)(function*(j,ee){h.pendingPromise={resolve:j,reject:ee};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ie){h.reject(ie)}})).apply(this,arguments)})}onAuthEvent(h){var f=this;return(0,y.Z)(function*(){const{urlResponse:v,sessionId:N,postBody:j,tenantId:ee,error:ie,type:Ze}=h;if(ie)return void f.reject(ie);const at={auth:f.auth,requestUri:v,sessionId:N,tenantId:ee||void 0,postBody:j||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ze)(at))}catch(Zt){f.reject(Zt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return vh;case"linkViaPopup":case"linkViaRedirect":return cg;case"reauthViaPopup":case"reauthViaRedirect":return Va;default:Dt(this.auth,"internal-error")}}resolve(h){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bf=new mi(2e3,1e4);let rs=(()=>{class C extends Lc{constructor(f,v,N,j,ee){super(f,v,j,ee),this.provider=N,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var f=this;return(0,y.Z)(function*(){const v=yield f.execute();return dt(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,y.Z)(function*(){Lr(1===f.filter.length,"Popup operations only handle one event");const v=$s();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(N=>{f.reject(N)}),f.resolver._isIframeWebStorageSupported(f.auth,N=>{N||f.reject(St(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,N;this.pollId=null!==(N=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,bf.get())};f()}}return C.currentPopupAction=null,C})();const Tl="pendingRedirect",fa=new Map;class Uc extends Lc{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,y.Z)(function*(){let v=fa.get(f.auth._key());if(!v){try{const j=(yield function ea(C,h){return(Zr=Zr||(0,y.Z)(function*(f,v){const N=no(v),j=md(f);if(!(yield j._isAvailable()))return!1;const ee="true"===(yield j._get(N));return yield j._remove(N),ee})).apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(j)}catch(N){v=()=>Promise.reject(N)}fa.set(f.auth._key(),v)}return f.bypassAuthState||fa.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,y.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const N=yield v.auth._redirectUserForId(h.eventId);if(N)return v.user=N,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Qe(C,h){return(oi=oi||(0,y.Z)(function*(f,v){return md(f)._set(no(v),"true")})).apply(this,arguments)}function Ro(C,h){fa.set(C._key(),h)}function md(C){return fr(C._redirectPersistence)}function no(C){return ln(Tl,C.config.apiKey,C.name)}function cs(C,h){return(G=G||(0,y.Z)(function*(f,v,N=!1){const j=ui(f),ee=Pt(j,v),Ze=yield new Uc(j,ee,N).execute();return Ze&&!N&&(delete Ze.user._redirectEventId,yield j._persistUserIfCurrent(Ze.user),yield j._setRedirectUser(null,v)),Ze})).apply(this,arguments)}function Aa(C){return($=$||(0,y.Z)(function*(h){const f=$s(`${h.uid}:::`);return h._redirectEventId=f,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),f})).apply(this,arguments)}class bl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ha(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vc(C);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!Vc(h)){const N=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(St(this.auth,N))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ws(h))}saveEventToCache(h){this.cachedEventUids.add(Ws(h)),this.lastProcessedEventTime=Date.now()}}function Ws(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(h=>h).join("-")}function Vc({type:C,error:h}){return"unknown"===C&&"auth/no-auth-event"===h?.code}function ta(C){return(oe=oe||(0,y.Z)(function*(h,f={}){return sr(h,"GET","/v1/projects",f)})).apply(this,arguments)}const za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nu=/^https?/;function _h(C){const h=dr(),{protocol:f,hostname:v}=new URL(h);if(C.startsWith("chrome-extension://")){const ee=new URL(C);return""===ee.hostname&&""===v?"chrome-extension:"===f&&C.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&ee.hostname===v}if(!Nu.test(f))return!1;if(za.test(C))return v===C;const N=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(v)}const qi=new mi(3e4,6e4);function yd(){const C=Di().___jsl;if(C?.H)for(const h of Object.keys(C.H))if(C.H[h].r=C.H[h].r||[],C.H[h].L=C.H[h].L||[],C.H[h].r=[...C.H[h].L],C.CP)for(let f=0;f<C.CP.length;f++)C.CP[f]=null}let Ou=null;const Sl=new mi(5e3,15e3),gc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x(C){const h=C.config;dt(h.authDomain,C,"auth-domain-config-required");const f=h.emulator?zi(h,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:C.name,v:ve.SDK_VERSION},N=R.get(C.config.apiHost);N&&(v.eid=N);const j=C._getFrameworks();return j.length&&(v.fw=j.join(",")),`${f}?${(0,z.xO)(v).slice(1)}`}const Y={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class At{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Wt="__/auth/handler",or="emulator/auth/handler",ri=encodeURIComponent("fac");function Ai(C,h,f,v,N,j){return(Ve=Ve||(0,y.Z)(function*(ee,ie,Ze,at,Zt,jt){dt(ee.config.authDomain,ee,"auth-domain-config-required"),dt(ee.config.apiKey,ee,"invalid-api-key");const on={apiKey:ee.config.apiKey,appName:ee.name,authType:Ze,redirectUrl:at,v:ve.SDK_VERSION,eventId:Zt};if(ie instanceof Tr){ie.setDefaultLanguage(ee.languageCode),on.providerId=ie.providerId||"",(0,z.xb)(ie.getCustomParameters())||(on.customParameters=JSON.stringify(ie.getCustomParameters()));for(const[qs,ma]of Object.entries(jt||{}))on[qs]=ma}if(ie instanceof Or){const qs=ie.getScopes().filter(ma=>""!==ma);qs.length>0&&(on.scopes=qs.join(","))}ee.tenantId&&(on.tid=ee.tenantId);const Yn=on;for(const qs of Object.keys(Yn))void 0===Yn[qs]&&delete Yn[qs];const Ti=yield ee._getAppCheckToken(),fs=Ti?`#${ri}=${encodeURIComponent(Ti)}`:"";return`${function fn({config:C}){return C.emulator?zi(C,or):`https://${C.authDomain}/${Wt}`}(ee)}?${(0,z.xO)(Yn).slice(1)}${fs}`})).apply(this,arguments)}const ls="webStorageSupport",Cr=class tn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hi,this._completeRedirectFn=cs,this._overrideRedirectResult=Ro}_openPopup(h,f,v,N){var j=this;return(0,y.Z)(function*(){var ee;Lr(null===(ee=j.eventManagers[h._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ie=yield Ai(h,f,v,dr(),N);return function Kt(C,h,f,v=500,N=600){const j=Math.max((window.screen.availHeight-N)/2,0).toString(),ee=Math.max((window.screen.availWidth-v)/2,0).toString();let ie="";const Ze=Object.assign(Object.assign({},Y),{width:v.toString(),height:N.toString(),top:j,left:ee}),at=(0,z.z$)().toLowerCase();f&&(ie=xs(at)?"_blank":f),Cs(at)&&(h=h||"http://localhost",Ze.scrollbars="yes");const Zt=Object.entries(Ze).reduce((on,[Yn,Ti])=>`${on}${Yn}=${Ti},`,"");if(function Gi(C=(0,z.z$)()){var h;return _i(C)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(at)&&"_self"!==ie)return function en(C,h){const f=document.createElement("a");f.href=C,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",ie),new At(null);const jt=window.open(h||"",ie,Zt);dt(jt,C,"popup-blocked");try{jt.focus()}catch{}return new At(jt)}(h,ie,$s())})()}_openRedirect(h,f,v,N){var j=this;return(0,y.Z)(function*(){return yield j._originValidation(h),function sc(C){Di().location.href=C}(yield Ai(h,f,v,dr(),N)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:N,promise:j}=this.eventManagers[f];return N?Promise.resolve(N):(Lr(j,"If manager is not set, promise should be"),j)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(h){var f=this;return(0,y.Z)(function*(){const v=yield function B(C){return(Ee=Ee||(0,y.Z)(function*(h){const f=yield function Af(C){return Ou=Ou||function Ga(C){return new Promise((h,f)=>{var v,N,j;function ee(){yd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{yd(),f(St(C,"network-request-failed"))},timeout:qi.get()})}if(null!==(N=null===(v=Di().gapi)||void 0===v?void 0:v.iframes)&&void 0!==N&&N.Iframe)h(gapi.iframes.getContext());else{if(null===(j=Di().gapi)||void 0===j||!j.load){const ie=ko("iframefcb");return Di()[ie]=()=>{gapi.load?ee():f(St(C,"network-request-failed"))},Hn(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Ze=>f(Ze))}ee()}}).catch(h=>{throw Ou=null,h})}(C),Ou}(h),v=Di().gapi;return dt(v,h,"internal-error"),f.open({where:document.body,url:x(h),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gc,dontclear:!0},N=>{var j;return new Promise(function(ee,ie){return(j=j||(0,y.Z)(function*(Ze,at){yield N.restyle({setHideOnLeave:!1});const Zt=St(h,"network-request-failed"),jt=Di().setTimeout(()=>{at(Zt)},Sl.get());function on(){Di().clearTimeout(jt),Ze(N)}N.ping(on).then(on,()=>{at(Zt)})})).apply(this,arguments)})})})).apply(this,arguments)}(h),N=new bl(h);return v.register("authEvent",j=>(dt(j?.authEvent,h,"invalid-auth-event"),{status:N.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:N},f.iframes[h._key()]=v,N})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(ls,{type:ls},N=>{var j;const ee=null===(j=N?.[0])||void 0===j?void 0:j[ls];void 0!==ee&&f(!!ee),Dt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Pu(C){return(K=K||(0,y.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:f}=yield ta(h);for(const v of f)try{if(_h(v))return}catch{}Dt(h,"unauthorized-domain")})).apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Dr()||vi()||_i()}};class ds{constructor(h){this.factorId=h}_process(h,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,v);case"signin":return this._finalizeSignIn(h,f.credential);default:return Ur("unexpected MultiFactorSessionType")}}}class is extends ds{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new is(h)}_finalizeEnroll(h,f,v){return function tc(C,h){return sr(C,"POST","/v2/accounts/mfaEnrollment:finalize",Un(C,h))}(h,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function X(C,h){return sr(C,"POST","/v2/accounts/mfaSignIn:finalize",Un(C,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mo=(()=>{class C{constructor(){}static assertion(f){return is._fromCredential(f)}}return C.FACTOR_ID="phone",C})();var lu,Ra,$c,Ma,Hc,au="@firebase/auth";class hs{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,y.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(v=>{h(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pa(){return window}(0,z.Pz)("authIdTokenMaxAge"),function uu(C){(0,ve._registerComponent)(new Se.wA("auth",(h,{options:f})=>{const v=h.getProvider("app").getImmediate(),N=h.getProvider("heartbeat"),j=h.getProvider("app-check-internal"),{apiKey:ee,authDomain:ie}=v.options;dt(ee&&!ee.includes(":"),"invalid-api-key",{appName:v.name});const Ze={apiKey:ee,authDomain:ie,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ei(C)},at=new xi(v,N,j,Ze);return function ts(C,h){const f=h?.persistence||[],v=(Array.isArray(f)?f:[f]).map(fr);h?.errorMap&&C._updateErrorMap(h.errorMap),C._initializeWithPersistence(v,h?.popupRedirectResolver)}(at,f),at},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,v)=>{h.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new Se.wA("auth-internal",h=>{const f=ui(h.getProvider("auth").getImmediate());return new hs(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(au,"0.23.2",function jc(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,ve.registerVersion)(au,"0.23.2","esm2017")}("Browser");class Mf extends bl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,y.Z)(function*(){yield h.initPromise})()}}function Dh(C){return(Hc=Hc||(0,y.Z)(function*(h){const f=yield wd()._get(Ri(h));return f&&(yield wd()._remove(Ri(h))),f})).apply(this,arguments)}function Ks(){const C=[];for(let f=0;f<20;f++){const v=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(v))}return C.join("")}function wd(){return fr(Ua)}function Ri(C){return ln("authEvent",C.config.apiKey,C.name)}function Pl(C){if(!C?.includes("?"))return{};const[h,...f]=C.split("?");return(0,z.zd)(f.join("?"))}const Pf=class Nf{constructor(){this._redirectPersistence=hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cs,this._overrideRedirectResult=Ro}_initialize(h){var f=this;return(0,y.Z)(function*(){const v=h._key();let N=f.eventManagers.get(v);return N||(N=new Mf(h),f.eventManagers.set(v,N),f.attachCallbackListeners(h,N)),N})()}_openPopup(h){Dt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,N){var j=this;return(0,y.Z)(function*(){!function Id(C){var h,f,v,N,j,ee,ie,Ze,at,Zt;const jt=pa();dt("function"==typeof(null===(h=jt?.universalLinks)||void 0===h?void 0:h.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),dt(typeof(null===(f=jt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),dt("function"==typeof(null===(j=null===(N=null===(v=jt?.cordova)||void 0===v?void 0:v.plugins)||void 0===N?void 0:N.browsertab)||void 0===j?void 0:j.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),dt("function"==typeof(null===(Ze=null===(ie=null===(ee=jt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ze?void 0:Ze.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),dt("function"==typeof(null===(Zt=null===(at=jt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Zt?void 0:Zt.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const ee=yield j._initialize(h);yield ee.initialized(),ee.resetRedirect(),function hc(){fa.clear()}(),yield j._originValidation(h);const ie=function Wc(C,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:Ks(),postBody:null,tenantId:C.tenantId,error:St(C,"no-auth-event")}}(h,v,N);yield function Nl(C,h){return wd()._set(Ri(C),h)}(h,ie);const Ze=yield function Ed(C,h,f){return(lu=lu||(0,y.Z)(function*(v,N,j){var ee;const{BuildInfo:ie}=pa();Lr(N.sessionId,"AuthEvent did not contain a session ID");const Ze=yield function Rl(C){return(Ma=Ma||(0,y.Z)(function*(h){const f=function Ml(C){if(Lr(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const h=new ArrayBuffer(C.length),f=new Uint8Array(h);for(let v=0;v<C.length;v++)f[v]=C.charCodeAt(v);return f}(h),v=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(v)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(N.sessionId),at={};return _i()?at.ibi=ie.packageName:Mi()?at.apn=ie.packageName:Dt(v,"operation-not-supported-in-this-environment"),ie.displayName&&(at.appDisplayName=ie.displayName),at.sessionId=Ze,Ai(v,j,N.type,void 0,null!==(ee=N.eventId)&&void 0!==ee?ee:void 0,at)})).apply(this,arguments)}(h,ie,f),at=yield function wh(C){const{cordova:h}=pa();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let N=null;v?h.plugins.browsertab.openUrl(C):N=h.InAppBrowser.open(C,function Js(C=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),f(N)})})}(Ze);return function Gc(C,h,f){return($c=$c||(0,y.Z)(function*(v,N,j){const{cordova:ee}=pa();let ie=()=>{};try{yield new Promise((Ze,at)=>{let Zt=null;function jt(){var Ti;Ze();const fs=null===(Ti=ee.plugins.browsertab)||void 0===Ti?void 0:Ti.close;"function"==typeof fs&&fs(),"function"==typeof j?.close&&j.close()}function on(){Zt||(Zt=window.setTimeout(()=>{at(St(v,"redirect-cancelled-by-user"))},2e3))}function Yn(){"visible"===document?.visibilityState&&on()}N.addPassiveListener(jt),document.addEventListener("resume",on,!1),Mi()&&document.addEventListener("visibilitychange",Yn,!1),ie=()=>{N.removePassiveListener(jt),document.removeEventListener("resume",on,!1),document.removeEventListener("visibilitychange",Yn,!1),Zt&&window.clearTimeout(Zt)}})}finally{ie()}})).apply(this,arguments)}(h,ee,at)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Wa(C){return(Ra=Ra||(0,y.Z)(function*(h){const{BuildInfo:f}=pa(),v={};_i()?v.iosBundleId=f.packageName:Mi()?v.androidPackageName=f.packageName:Dt(h,"operation-not-supported-in-this-environment"),yield ta(h,v)})).apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){var v,N;const{universalLinks:j,handleOpenURL:ee,BuildInfo:ie}=pa(),Ze=setTimeout((0,y.Z)(function*(){yield Dh(h),f.onEvent(br())}),500),at=function(Yn){return(v=v||(0,y.Z)(function*(Ti){clearTimeout(Ze);const fs=yield Dh(h);let qs=null;fs&&Ti?.url&&(qs=function lg(C,h){var f,v;const N=function xf(C){const h=Pl(C),f=h.link?decodeURIComponent(h.link):void 0,v=Pl(f).link,N=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Pl(N).link||N||v||f||C}(h);if(N.includes("/__/auth/callback")){const j=Pl(N),ee=j.firebaseError?function Fu(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(j.firebaseError)):null,ie=null===(v=null===(f=ee?.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Ze=ie?St(ie):null;return Ze?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:N,postBody:null}}return null}(fs,Ti.url)),f.onEvent(qs||br())})).apply(this,arguments)};typeof j<"u"&&"function"==typeof j.subscribe&&j.subscribe(null,at);const Zt=ee,jt=`${ie.packageName.toLowerCase()}://`;pa().handleOpenURL=function(on){return(N=N||(0,y.Z)(function*(Yn){if(Yn.toLowerCase().startsWith(jt)&&at({url:Yn}),"function"==typeof Zt)try{Zt(Yn)}catch(Ti){console.error(Ti)}})).apply(this,arguments)}}};function br(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}var Uu,Th,Dd;function kl(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function hg(C=(0,z.z$)()){return!("file:"!==kl()&&"ionic:"!==kl()&&"capacitor:"!==kl()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ch(){try{const C=self.localStorage,h=$s();if(C)return C.setItem(h,"1"),C.removeItem(h),!function ry(C=(0,z.z$)()){return function ny(){return(0,z.w1)()&&11===document?.documentMode}()||function fg(C=(0,z.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,z.hl)()}catch{return Kc()&&(0,z.hl)()}return!1}function Kc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qc(){return(function Td(){return"http:"===kl()||"https:"===kl()}()||(0,z.ru)()||hg())&&!function ty(){return(0,z.b$)()||(0,z.UG)()}()&&Ch()&&!Kc()}function bh(){return hg()&&typeof document<"u"}const os={LOCAL:"local",NONE:"none",SESSION:"session"},hu=dt,Zc="persistence";function yc(C){return(Th=Th||(0,y.Z)(function*(h){yield h._initializationPromise;const f=Sh(),v=ln(Zc,h.config.apiKey,h.name);f&&f.setItem(v,h._getPersistence())})).apply(this,arguments)}function Sh(){var C;try{return(null===(C=function Bu(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Yc=dt;class fu{constructor(){this.browserResolver=fr(Cr),this.cordovaResolver=fr(Pf),this.underlyingResolver=null,this._redirectPersistence=hi,this._completeRedirectFn=cs,this._overrideRedirectResult=Ro}_initialize(h){var f=this;return(0,y.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,N){var j=this;return(0,y.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openPopup(h,f,v,N)})()}_openRedirect(h,f,v,N){var j=this;return(0,y.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openRedirect(h,f,v,N)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return bh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,y.Z)(function*(){if(h.underlyingResolver)return;const f=yield function Cd(){return(Uu=Uu||(0,y.Z)(function*(){return!!bh()&&new Promise(C=>{const h=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),C(!0)})})})).apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Fl(C){return C.unwrap()}function Ah(C){return fo(C)}function fo(C){const{_tokenResponse:h}=C instanceof z.ZR?C.customData:C;if(!h)return null;if(!(C instanceof z.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Wr.credentialFromResult(C);const f=h.providerId;if(!f||f===Gt.PASSWORD)return null;let v;switch(f){case Gt.GOOGLE:v=bs;break;case Gt.FACEBOOK:v=Fs;break;case Gt.GITHUB:v=Us;break;case Gt.TWITTER:v=Oa;break;default:const{oauthIdToken:N,oauthAccessToken:j,oauthTokenSecret:ee,pendingToken:ie,nonce:Ze}=h;return j||ee||N||ie?ie?f.startsWith("saml.")?Ii._create(f,ie):ft._fromParams({providerId:f,signInMethod:f,pendingToken:ie,idToken:N,accessToken:j}):new Gr(f).credential({idToken:N,accessToken:j,rawNonce:Ze}):null}return C instanceof z.ZR?v.credentialFromError(C):v.credentialFromResult(C)}function ro(C,h){return h.catch(f=>{throw f instanceof z.ZR&&function vc(C,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Ul(C,function Dn(C,h){var f;const v=(0,z.m9)(C),N=h;return dt(h.customData.operationType,v,"argument-error"),dt(null===(f=N.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),wa._fromError(v,N)}(C,h));else if(v){const N=fo(h),j=h;N&&(j.credential=N,j.tenantId=v.tenantId||void 0,j.email=v.email||void 0,j.phoneNumber=v.phoneNumber||void 0)}}(C,f),f}).then(f=>{const N=f.user;return{operationType:f.operationType,credential:Ah(f),additionalUserInfo:Ia(f),user:Zi.getOrCreate(N)}})}function Xc(C,h){return(Dd=Dd||(0,y.Z)(function*(f,v){const N=yield v;return{verificationId:N.verificationId,confirm:j=>ro(f,N.confirm(j))}})).apply(this,arguments)}class Ul{constructor(h,f){this.resolver=f,this.auth=function Qc(C){return C.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ro(Fl(this.auth),this.resolver.resolveSignIn(h))}}class Zi{constructor(h){this._delegate=h,this.multiFactor=function Su(C){const h=(0,z.m9)(C);return Jo.has(h)||Jo.set(h,ru._fromUser(h)),Jo.get(h)}(h)}static getOrCreate(h){return Zi.USER_MAP.has(h)||Zi.USER_MAP.set(h,new Zi(h)),Zi.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,y.Z)(function*(){return ro(f.auth,La(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,y.Z)(function*(){return Xc(v.auth,function an(C,h,f){return(xn=xn||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v);yield bo(!1,ee,"phone");const ie=yield mr(ee.auth,N,(0,z.m9)(j));return new Gs(ie,Ze=>La(ee,Ze))})).apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,y.Z)(function*(){return ro(f.auth,function dc(C,h,f){return(Hr=Hr||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v);Pn(ee.auth,N,Tr);const ie=Pt(ee.auth,j);return new rs(ee.auth,"linkViaPopup",N,ie,ee).executeNotNull()})).apply(this,arguments)}(f._delegate,h,fu))})()}linkWithRedirect(h){var f=this;return(0,y.Z)(function*(){return yield yc(ui(f.auth)),function ja(C,h,f){return function pc(C,h,f){return(Li=Li||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v);Pn(ee.auth,N,Tr),yield ee.auth._initializationPromise;const ie=Pt(ee.auth,j);yield bo(!1,ee,N.providerId),yield Qe(ie,ee.auth);const Ze=yield Aa(ee);return ie._openRedirect(ee.auth,N,"linkViaRedirect",Ze)})).apply(this,arguments)}(C,h,f)}(f._delegate,h,fu)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,y.Z)(function*(){return ro(f.auth,jo(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Xc(this.auth,function xu(C,h,f){return(si=si||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v),ie=yield mr(ee.auth,N,(0,z.m9)(j));return new Gs(ie,Ze=>jo(ee,Ze))})).apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return ro(this.auth,function Sf(C,h,f){return(qr=qr||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v);Pn(ee.auth,N,Tr);const ie=Pt(ee.auth,j);return new rs(ee.auth,"reauthViaPopup",N,ie,ee).executeNotNull()})).apply(this,arguments)}(this._delegate,h,fu))}reauthenticateWithRedirect(h){var f=this;return(0,y.Z)(function*(){return yield yc(ui(f.auth)),function Sa(C,h,f){return function fc(C,h,f){return(gi=gi||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v);Pn(ee.auth,N,Tr),yield ee.auth._initializationPromise;const ie=Pt(ee.auth,j);yield Qe(ie,ee.auth);const Ze=yield Aa(ee);return ie._openRedirect(ee.auth,N,"reauthViaRedirect",Ze)})).apply(this,arguments)}(C,h,f)}(f._delegate,h,fu)})()}sendEmailVerification(h){return function ci(C,h){return(Qt=Qt||(0,y.Z)(function*(f,v){const N=(0,z.m9)(f),ee={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};v&&P(N.auth,ee,v);const{email:ie}=yield function tu(C,h){return(Vt=Vt||(0,y.Z)(function*(f,v){return ys(f,v)})).apply(this,arguments)}(N.auth,ee);ie!==f.email&&(yield f.reload())})).apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,y.Z)(function*(){return yield function Co(C,h){return(it=it||(0,y.Z)(function*(f,v){const N=(0,z.m9)(f);yield bo(!0,N,v);const{providerUserInfo:j}=yield function Oo(C,h){return(De=De||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:update",v)})).apply(this,arguments)}(N.auth,{idToken:yield N.getIdToken(),deleteProvider:[v]}),ee=Ea(j||[]);return N.providerData=N.providerData.filter(ie=>ee.has(ie.providerId)),ee.has("phone")||(N.phoneNumber=null),yield N.auth._persistUserIfCurrent(N),N})).apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function to(C,h){return Vs((0,z.m9)(C),h,null)}(this._delegate,h)}updatePassword(h){return function Pi(C,h){return Vs((0,z.m9)(C),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Cf(C,h){return(Ln=Ln||(0,y.Z)(function*(f,v){yield Vo((0,z.m9)(f),v)})).apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function lo(C,h){return(ii=ii||(0,y.Z)(function*(f,{displayName:v,photoURL:N}){if(void 0===v&&void 0===N)return;const j=(0,z.m9)(f),ie={idToken:yield j.getIdToken(),displayName:v,photoUrl:N,returnSecureToken:!0},Ze=yield be(j,function vs(C,h){return(Gn=Gn||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:update",v)})).apply(this,arguments)}(j.auth,ie));j.displayName=Ze.displayName||null,j.photoURL=Ze.photoUrl||null;const at=j.providerData.find(({providerId:Zt})=>"password"===Zt);at&&(at.displayName=j.displayName,at.photoURL=j.photoURL),yield j._updateTokensIfNecessary(Ze)})).apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function Bs(C,h,f){return(sn=sn||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v),Ze={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:N};j&&P(ee.auth,Ze,j);const{email:at}=yield function F(C,h){return(Nn=Nn||(0,y.Z)(function*(f,v){return ys(f,v)})).apply(this,arguments)}(ee.auth,Ze);at!==v.email&&(yield v.reload())})).apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zi.USER_MAP=new WeakMap;const pu=dt;let _c=(()=>{class C{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=f.options;pu(N,"invalid-api-key",{appName:f.name}),pu(N,"invalid-api-key",{appName:f.name});const j=typeof window<"u"?fu:void 0;this._delegate=v.initialize({options:{persistence:io(N,f.name),popupRedirectResolver:j}}),this._delegate._updateErrorMap(le),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function ks(C,h,f){const v=ui(C);dt(v._canInitEmulator,v,"emulator-config-failed"),dt(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const N=!!f?.disableWarnings,j=Si(h),{host:ee,port:ie}=function gs(C){const h=Si(C),f=/(\/\/)?([^?#/]+)/.exec(C.substr(h.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(v);if(N){const j=N[1];return{host:j,port:Fo(v.substr(j.length+1))}}{const[j,ee]=v.split(":");return{host:j,port:Fo(ee)}}}(h);v.config.emulator={url:`${j}//${ee}${null===ie?"":`:${ie}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:ee,port:ie,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function sa(){function C(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,f,v)}applyActionCode(f){return function Z(C,h){return(Ft=Ft||(0,y.Z)(function*(f,v){yield function Yo(C,h){return(Be=Be||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:update",Un(f,v))})).apply(this,arguments)}((0,z.m9)(f),{oobCode:v})})).apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return _e(this._delegate,f)}confirmPasswordReset(f,v){return function M(C,h,f){return(rn=rn||(0,y.Z)(function*(v,N,j){yield ya((0,z.m9)(v),{oobCode:N,newPassword:j})})).apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var N=this;return(0,y.Z)(function*(){return ro(N._delegate,function Rt(C,h,f){return(Qn=Qn||(0,y.Z)(function*(v,N,j){var ee;const ie=ui(v),Ze={returnSecureToken:!0,email:N,password:j,clientType:"CLIENT_TYPE_WEB"};let at;if(null!==(ee=ie._getRecaptchaConfig())&&void 0!==ee&&ee.emailPasswordEnabled){const Yn=yield Br(ie,Ze,"signUpPassword");at=Bo(ie,Yn)}else{var Zt;at=Bo(ie,Ze).catch(function(Yn){return(Zt=Zt||(0,y.Z)(function*(Ti){if("auth/missing-recaptcha-token"===Ti.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const fs=yield Br(ie,Ze,"signUpPassword");return Bo(ie,fs)}return Promise.reject(Ti)})).apply(this,arguments)})}const jt=yield at.catch(Yn=>Promise.reject(Yn)),on=yield Wi._fromIdTokenResponse(ie,"signIn",jt);return yield ie._updateCurrentUser(on.user),on})).apply(this,arguments)}(N._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function _r(C,h){return(Jt=Jt||(0,y.Z)(function*(f,v){const j={identifier:v,continueUri:ir()?dr():"http://localhost"},{signinMethods:ee}=yield function ei(C,h){return(zn=zn||(0,y.Z)(function*(f,v){return sr(f,"POST","/v1/accounts:createAuthUri",Un(f,v))})).apply(this,arguments)}((0,z.m9)(f),j);return ee||[]})).apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function vn(C,h){const f=Jr.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,y.Z)(function*(){pu(qc(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Cl(C,h){return(ye=ye||(0,y.Z)(function*(f,v){return yield ui(f)._initializationPromise,cs(f,v,!1)})).apply(this,arguments)}(f._delegate,fu);return v?ro(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function fi(C,h){ui(C)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,v,N){const{next:j,error:ee,complete:ie}=Bl(f,v,N);return this._delegate.onAuthStateChanged(j,ee,ie)}onIdTokenChanged(f,v,N){const{next:j,error:ee,complete:ie}=Bl(f,v,N);return this._delegate.onIdTokenChanged(j,ee,ie)}sendSignInLinkToEmail(f,v){return function Rn(C,h,f){return(xr=xr||(0,y.Z)(function*(v,N,j){var ee;const ie=ui(v),Ze={requestType:"EMAIL_SIGNIN",email:N,clientType:"CLIENT_TYPE_WEB"};function at(jt,on){dt(on.handleCodeInApp,ie,"argument-error"),on&&P(ie,jt,on)}if(null!==(ee=ie._getRecaptchaConfig())&&void 0!==ee&&ee.emailPasswordEnabled){const jt=yield Br(ie,Ze,"getOobCode",!0);at(jt,j),yield pr(ie,jt)}else{var Zt;at(Ze,j),yield pr(ie,Ze).catch(function(jt){return(Zt=Zt||(0,y.Z)(function*(on){if("auth/missing-recaptcha-token"!==on.code)return Promise.reject(on);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Yn=yield Br(ie,Ze,"getOobCode",!0);at(Yn,j),yield pr(ie,Yn)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function J(C,h,f){return(lr=lr||(0,y.Z)(function*(v,N,j){var ee;const ie=ui(v),Ze={requestType:"PASSWORD_RESET",email:N,clientType:"CLIENT_TYPE_WEB"};if(null!==(ee=ie._getRecaptchaConfig())&&void 0!==ee&&ee.emailPasswordEnabled){const Zt=yield Br(ie,Ze,"getOobCode",!0);j&&P(ie,Zt,j),yield _a(ie,Zt)}else{var at;j&&P(ie,Ze,j),yield _a(ie,Ze).catch(function(Zt){return(at=at||(0,y.Z)(function*(jt){if("auth/missing-recaptcha-token"!==jt.code)return Promise.reject(jt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const on=yield Br(ie,Ze,"getOobCode",!0);j&&P(ie,on,j),yield _a(ie,on)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,y.Z)(function*(){let N;switch(function Ll(C,h){hu(Object.values(os).includes(h),C,"invalid-persistence-type"),(0,z.b$)()?hu(h!==os.SESSION,C,"unsupported-persistence-type"):(0,z.UG)()?hu(h===os.NONE,C,"unsupported-persistence-type"):Kc()?hu(h===os.NONE||h===os.LOCAL&&(0,z.hl)(),C,"unsupported-persistence-type"):hu(h===os.NONE||Ch(),C,"unsupported-persistence-type")}(v._delegate,f),f){case os.SESSION:N=hi;break;case os.LOCAL:N=(yield fr(S)._isAvailable())?S:Ua;break;case os.NONE:N=Nt;break;default:return Dt("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ro(this._delegate,function To(C){return(xe=xe||(0,y.Z)(function*(h){var f;const v=ui(h);if(yield v._initializationPromise,null!==(f=v.currentUser)&&void 0!==f&&f.isAnonymous)return new Wi({user:v.currentUser,providerId:null,operationType:"signIn"});const N=yield Bo(v,{returnSecureToken:!0}),j=yield Wi._fromIdTokenResponse(v,"signIn",N,!0);return yield v._updateCurrentUser(j.user),j})).apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ro(this._delegate,aa(this._delegate,f))}signInWithCustomToken(f){return ro(this._delegate,function co(C,h){return(qn=qn||(0,y.Z)(function*(f,v){const N=ui(f),j=yield function us(C,h){return(wn=wn||(0,y.Z)(function*(f,v){return Zn(f,"POST","/v1/accounts:signInWithCustomToken",Un(f,v))})).apply(this,arguments)}(N,{token:v,returnSecureToken:!0}),ee=yield Wi._fromIdTokenResponse(N,"signIn",j);return yield N._updateCurrentUser(ee.user),ee})).apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return ro(this._delegate,function An(C,h,f){return aa((0,z.m9)(C),Ni.credential(h,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return ro(this._delegate,function Bn(C,h,f){return(pi=pi||(0,y.Z)(function*(v,N,j){const ee=(0,z.m9)(v),ie=Ni.credentialWithLink(N,j||dr());return dt(ie._tenantId===(ee.tenantId||null),ee,"tenant-id-mismatch"),aa(ee,ie)})).apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Xc(this._delegate,function ni(C,h,f){return(Xi=Xi||(0,y.Z)(function*(v,N,j){const ee=ui(v),ie=yield mr(ee,N,(0,z.m9)(j));return new Gs(ie,Ze=>aa(ee,Ze))})).apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,y.Z)(function*(){return pu(qc(),v._delegate,"operation-not-supported-in-this-environment"),ro(v._delegate,function Fc(C,h,f){return(Ar=Ar||(0,y.Z)(function*(v,N,j){const ee=ui(v);Pn(v,N,Tr);const ie=Pt(ee,j);return new rs(ee,"signInViaPopup",N,ie).executeNotNull()})).apply(this,arguments)}(v._delegate,f,fu))})()}signInWithRedirect(f){var v=this;return(0,y.Z)(function*(){return pu(qc(),v._delegate,"operation-not-supported-in-this-environment"),yield yc(v._delegate),function ba(C,h,f){return function Bc(C,h,f){return(di=di||(0,y.Z)(function*(v,N,j){const ee=ui(v);Pn(v,N,Tr),yield ee._initializationPromise;const ie=Pt(ee,j);return yield Qe(ie,ee),ie._openRedirect(ee,N,"signInViaRedirect")})).apply(this,arguments)}(C,h,f)}(v._delegate,f,fu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ot(C,h){return(Vn=Vn||(0,y.Z)(function*(f,v){const{data:N}=yield _e((0,z.m9)(f),v);return N.email})).apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=os,C})();function Bl(C,h,f){let v=C;"function"!=typeof C&&({next:v,error:h,complete:f}=C);const N=v;return{next:ee=>N(ee&&Zi.getOrCreate(ee)),error:h,complete:f}}function io(C,h){const f=function ga(C,h){const f=Sh();if(!f)return[];const v=ln(Zc,C,h);switch(f.getItem(v)){case os.NONE:return[Nt];case os.LOCAL:return[S,hi];case os.SESSION:return[hi];default:return[]}}(C,h);if(typeof self<"u"&&!f.includes(S)&&f.push(S),typeof window<"u")for(const v of[Ua,hi])f.includes(v)||f.push(v);return f.includes(Nt)||f.push(Nt),f}class Ec{constructor(){this.providerId="phone",this._delegate=new Wr(Fl(ue.Z.auth()))}static credential(h,f){return Wr.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Ec.PHONE_SIGN_IN_METHOD=Wr.PHONE_SIGN_IN_METHOD,Ec.PROVIDER_ID=Wr.PROVIDER_ID;const Ka=dt;class kf{constructor(h,f,v=ue.Z.app()){var N;Ka(null===(N=v.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Fn(h,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rh(C){C.INTERNAL.registerComponent(new Se.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new _c(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:Fs,GithubAuthProvider:Us,GoogleAuthProvider:bs,OAuthProvider:Gr,SAMLAuthProvider:Ss,PhoneAuthProvider:Ec,PhoneMultiFactorGenerator:Mo,RecaptchaVerifier:kf,TwitterAuthProvider:Oa,Auth:_c,AuthCredential:Ls,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.2")}(ue.Z)},5861:(Lt,We,O)=>{function y(z,ve,me,ge,Se,Ge,Me){try{var te=z[Ge](Me),Q=te.value}catch(De){return void me(De)}te.done?ve(Q):Promise.resolve(Q).then(ge,Se)}function ue(z){return function(){var ve=this,me=arguments;return new Promise(function(ge,Se){var Ge=z.apply(ve,me);function Me(Q){y(Ge,ge,Se,Me,te,"next",Q)}function te(Q){y(Ge,ge,Se,Me,te,"throw",Q)}Me(void 0)})}}O.d(We,{Z:()=>ue})},7582:(Lt,We,O)=>{function ve(we,Fe){var He={};for(var xe in we)Object.prototype.hasOwnProperty.call(we,xe)&&Fe.indexOf(xe)<0&&(He[xe]=we[xe]);if(null!=we&&"function"==typeof Object.getOwnPropertySymbols){var it=0;for(xe=Object.getOwnPropertySymbols(we);it<xe.length;it++)Fe.indexOf(xe[it])<0&&Object.prototype.propertyIsEnumerable.call(we,xe[it])&&(He[xe[it]]=we[xe[it]])}return He}function De(we,Fe,He,xe){return new(He||(He=Promise))(function(pt,bt){function Ct(yn){try{Xt(xe.next(yn))}catch($t){bt($t)}}function Cn(yn){try{Xt(xe.throw(yn))}catch($t){bt($t)}}function Xt(yn){yn.done?pt(yn.value):function it(pt){return pt instanceof He?pt:new He(function(bt){bt(pt)})}(yn.value).then(Ct,Cn)}Xt((xe=xe.apply(we,Fe||[])).next())})}function ke(we){return this instanceof ke?(this.v=we,this):new ke(we)}function Le(we,Fe,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,xe=He.apply(we,Fe||[]),pt=[];return it={},bt("next"),bt("throw"),bt("return"),it[Symbol.asyncIterator]=function(){return this},it;function bt(wn){xe[wn]&&(it[wn]=function(qn){return new Promise(function(lr,rn){pt.push([wn,qn,lr,rn])>1||Ct(wn,qn)})})}function Ct(wn,qn){try{!function Cn(wn){wn.value instanceof ke?Promise.resolve(wn.value.v).then(Xt,yn):$t(pt[0][2],wn)}(xe[wn](qn))}catch(lr){$t(pt[0][3],lr)}}function Xt(wn){Ct("next",wn)}function yn(wn){Ct("throw",wn)}function $t(wn,qn){wn(qn),pt.shift(),pt.length&&Ct(pt[0][0],pt[0][1])}}function Be(we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Fe=we[Symbol.asyncIterator];return Fe?Fe.call(we):(we=function st(we){var Fe="function"==typeof Symbol&&Symbol.iterator,He=Fe&&we[Fe],xe=0;if(He)return He.call(we);if(we&&"number"==typeof we.length)return{next:function(){return we&&xe>=we.length&&(we=void 0),{value:we&&we[xe++],done:!we}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(we),He={},xe("next"),xe("throw"),xe("return"),He[Symbol.asyncIterator]=function(){return this},He);function xe(pt){He[pt]=we[pt]&&function(bt){return new Promise(function(Ct,Cn){!function it(pt,bt,Ct,Cn){Promise.resolve(Cn).then(function(Xt){pt({value:Xt,done:Ct})},bt)}(Ct,Cn,(bt=we[pt](bt)).done,bt.value)})}}}O.d(We,{FC:()=>Le,KL:()=>Be,_T:()=>ve,mG:()=>De,qq:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},Lt=>{Lt(Lt.s=3100)}]);