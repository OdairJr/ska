"use strict";(self.webpackChunkska=self.webpackChunkska||[]).push([[77],{9077:(x,m,r)=>{r.r(m),r.d(m,{ListComponent:()=>f});var _=r(6814),c=r(95),d=r(3781),p=r(7921),u=r(7398),g=r(975),t=r(5879),v=r(304),C=r(9758);function h(a,l){if(1&a){const s=t.EpF();t.TgZ(0,"li")(1,"div",14)(2,"div",15)(3,"img",16),t.NdJ("click",function(){const n=t.CHM(s).$implicit,o=t.oxw();return t.KtG(o.goToDetails(n.id))}),t.qZA(),t.TgZ(4,"div",17)(5,"div",2),t.NdJ("click",function(){const n=t.CHM(s).$implicit,o=t.oxw();return t.KtG(o.goToDetails(n.id))}),t.TgZ(6,"h5",18),t._uU(7),t.qZA(),t.TgZ(8,"p",19)(9,"small"),t._uU(10),t.qZA()(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"div",20)(14,"a",21),t.NdJ("click",function(){const n=t.CHM(s).$implicit,o=t.oxw();return t.KtG(o.goToEdit(n.id))}),t._uU(15,"Editar"),t.qZA(),t.TgZ(16,"a",22),t.NdJ("click",function(){const n=t.CHM(s).$implicit,o=t.oxw();return t.KtG(o.onDeleteEstablishment(n.id))}),t._uU(17,"Excluir"),t.qZA()()()()()()}if(2&a){const s=l.$implicit,e=t.oxw();t.xp6(3),t.Q6J("src",s.image||"/ska/assets/images/logoCatavento.png",t.LSH),t.xp6(4),t.Oqu(s.name),t.xp6(3),t.Oqu(e.tipos[s.serviceType]),t.xp6(2),t.Oqu(s.description)}}let f=(()=>{var a;class l{constructor(e,i,n,o){this.establishmentService=e,this.router=i,this.authService=n,this.alertService=o,this.searchControl=new c.NI,this.tipos=["Mecanica","Oficina","Funilaria","Autope\xe7as"]}ngOnInit(){this.establishmentService.getAll().subscribe({next:e=>{this.establishments=e,this.initFilter()}})}initFilter(){this.establishmentsFiltered$=this.searchControl.valueChanges.pipe((0,p.O)(""),(0,u.U)(e=>this._filter(e)))}_filter(e){const i=e.toLowerCase();return this.establishments?.filter(n=>n.name.toLowerCase().includes(i)||n.description.toLowerCase().includes(i)||n.serviceType.toLowerCase().includes(i))}goToDetails(e){if(!e)return console.error("No id provided");this.router.navigate(["/establishment/details",e])}goToEdit(e){if(!e)return console.error("No id provided");this.router.navigate(["/establishment/edit",e])}applyFilterChange(){}onDeleteEstablishment(e){this.establishmentService.delete(e).subscribe({next:()=>{this.alertService.showAlert({message:"Estabelecimento exclu\xeddo com sucesso!",type:"success",isOpned:!0})},error:i=>{console.log("erro")}})}}return(a=l).\u0275fac=function(e){return new(e||a)(t.Y36(g.u),t.Y36(d.F0),t.Y36(v.e),t.Y36(C.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-list"]],standalone:!0,features:[t.jDz],decls:18,vars:5,consts:[[1,"navbar"],[1,"navbar-left"],[3,"click"],[1,"fas","fa-chevron-left","navbar-icon"],[1,"navbar-brand"],[1,"navbar-right"],[3,"routerLink"],[1,"fas","fa-plus","navbar-icon"],[1,"row","pt-3"],[1,"col"],["for","inputSearch",1,"sr-only"],["type","text","id","inputSearch","placeholder","Pesquisar estabelecimento","required","","autofocus","",1,"form-control",3,"formControl"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"card","my-3"],[1,"media"],["alt","Thumbnail",1,"card-img-top",2,"height","150px","width","150px","display","block",3,"src","click"],[1,"media-body","p-3"],[1,"mt-0","mb-1"],[1,"text-body-secondary",2,"margin-bottom","0"],[1,"justify-content-around","d-flex"],[1,"link-primary",3,"click"],[1,"link-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),t.NdJ("click",function(){return i.authService.SignOut()}),t._UZ(3,"i",3),t.qZA()(),t.TgZ(4,"label",4),t._uU(5,"Servi\xe7os Automotivos"),t.qZA(),t.TgZ(6,"div",5)(7,"a",6),t._UZ(8,"i",7),t.qZA()()(),t.TgZ(9,"section")(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13,"Pesquisar estabelecimento"),t.qZA(),t._UZ(14,"input",11),t.qZA()(),t.TgZ(15,"ul",12),t.YNc(16,h,18,4,"li",13),t.ALo(17,"async"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("routerLink","/establishment/create"),t.xp6(7),t.Q6J("formControl",i.searchControl),t.xp6(2),t.Q6J("ngForOf",t.lcZ(17,3,i.establishmentsFiltered$)))},dependencies:[_.ez,_.sg,_.Ov,d.Bz,d.rH,c.u5,c.Fj,c.JJ,c.Q7,c.UX,c.oH],styles:[".media[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.media-body[_ngcontent-%COMP%]{flex:1}.navbar[_ngcontent-%COMP%]{padding:8px 0}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{margin-left:10px}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]   .navbar-icon[_ngcontent-%COMP%]{font-size:25px;color:#000;padding:8px 0}"]}),l})()}}]);