"use strict";(self.webpackChunkska=self.webpackChunkska||[]).push([[735],{3930:(C,v,i)=>{i.d(v,{d:()=>b});var m=i(7398),h=i(2459),l=i(5879),f=i(8330);let e=(()=>{var r;class p{constructor(a,d){this._firestore=a,this._collectionName=d}getAll(){return this._firestore.collection(this._collectionName).snapshotChanges().pipe((0,m.U)(a=>a.reduce((d,o)=>(d.push({id:o.payload.doc.id,...o.payload.doc.data()}),d),[])))}create(a){const d=this._firestore.collection(this._collectionName).add(a);return(0,h.D)(d).pipe((0,m.U)(o=>o.id))}update(a){delete a.id,this._firestore.doc(`${this._collectionName}/${a.id}`).update(a)}delete(a){return(0,h.D)(this._firestore.doc(`${this._collectionName}/${a}`).delete())}}return(r=p).\u0275fac=function(a){return new(a||r)(l.LFG(f.ST),l.LFG(String))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),p})(),b=(()=>{var r;class p extends e{constructor(a){super(a,"establishments"),this.firestore=a}}return(r=p).\u0275fac=function(a){return new(a||r)(l.LFG(f.ST))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),p})()},735:(C,v,i)=>{i.r(v),i.d(v,{DetailsComponent:()=>d});var m=i(6814),h=i(3781),l=i(7398),f=i(9397),e=i(5879),b=i(3930);let r=(()=>{var o;class g{constructor(){}createMap(t){const n={center:new google.maps.LatLng(-23.6824262,-46.6910678),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};t&&(this.map=new google.maps.Map(t.nativeElement,n))}getLatLongFromAddress(t,n){(new google.maps.Geocoder).geocode({address:t},function(Z,M){if("OK"===M){const A=Z[0].geometry.location.lat(),x=Z[0].geometry.location.lng();n(A,x)}else console.error("Geocode was not successful for the following reason: "+M)})}addMarkerAndCenterMap(t,n){if(!this.map)return;const c=new google.maps.Marker;c.setPosition(new google.maps.LatLng(t,n)),c.setMap(this.map),this.map.setCenter(new google.maps.LatLng(t,n))}addMarkerToMap(t){this.map&&this.getLatLongFromAddress(t.address.street+", "+t.address.number+", "+t.address.neighborhood+", "+t.address.city+", "+t.address.state,(n,c)=>{this.addMarkerAndCenterMap(n,c)})}}return(o=g).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),g})();const p=["map"],u=["minhaDiv"];function a(o,g){if(1&o&&(e.ynx(0),e.TgZ(1,"div",7)(2,"div",11)(3,"div",12),e._UZ(4,"img",13),e.TgZ(5,"div",14)(6,"h2"),e._uU(7),e.qZA(),e.TgZ(8,"p",15)(9,"small"),e._uU(10),e.qZA()(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e._UZ(15,"hr"),e.TgZ(16,"h4"),e._uU(17,"Informa\xe7\xf5es de Endere\xe7o:"),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA(),e.TgZ(28,"p"),e._uU(29),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()()()(),e.BQk()),2&o){const s=g.$implicit,t=e.oxw();e.xp6(4),e.Q6J("src",s.image||"/assets/images/logoCatavento.png",e.LSH),e.xp6(3),e.Oqu(s.name),e.xp6(3),e.Oqu(t.tipos[s.serviceType]),e.xp6(2),e.hij(" ",s.description," "),e.xp6(2),e.Oqu(s.phone),e.xp6(5),e.hij("Rua: ",s.address.street,""),e.xp6(2),e.hij("N\xfamero: ",s.address.number,""),e.xp6(2),e.hij("Complemento: ",s.address.complement,""),e.xp6(2),e.hij("Bairro: ",s.address.neighborhood,""),e.xp6(2),e.hij("Cidade: ",s.address.city,""),e.xp6(2),e.hij("Estado: ",s.address.state,""),e.xp6(2),e.hij("CEP: ",s.address.zipCode,"")}}let d=(()=>{var o;class g{constructor(t,n,c){this.establishmentService=t,this.route=n,this.googleMapsService=c,this.headerConfiguration={title:"Detalhes do estabelecimento",hasAddButton:!1,hasBackButton:!0,backButtonRoute:"/establishment"},this.tipos=["Mecanica","Oficina","Funilaria","Autope\xe7as"],this.route.data.subscribe(Z=>{this.establishmentId=Z.establishmentId})}ngOnInit(){let t=this.route.snapshot.params.id;this.establishments$=this.establishmentService.getAll().pipe((0,l.U)(n=>n.filter(c=>c.id===t)[0]),(0,f.b)(n=>{n&&this.googleMapsService.addMarkerToMap(n)}))}ngAfterViewInit(){this.mapElement&&this.googleMapsService.createMap(this.mapElement)}}return(o=g).\u0275fac=function(t){return new(t||o)(e.Y36(b.d),e.Y36(h.gz),e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-details"]],viewQuery:function(t,n){if(1&t&&(e.Gf(p,5),e.Gf(u,5)),2&t){let c;e.iGM(c=e.CRH())&&(n.mapElement=c.first),e.iGM(c=e.CRH())&&(n.minhaDiv=c.first)}},standalone:!0,features:[e.jDz],decls:13,vars:3,consts:[[1,"navbar"],[1,"navbar-left"],["routerLink","/establishment"],[1,"fas","fa-chevron-left","navbar-icon"],[1,"navbar-brand"],[1,"navbar-right"],[4,"ngIf"],[1,"row"],[1,"col"],[1,"mb-4",2,"width","100%","height","400px"],["map",""],[1,"col-md-12"],[1,"card","mb-4","box-shadow"],["data-src","holder.js/100px225?theme=thumb&bg=55595c&fg=eceeef&text=Thumbnail","alt","Thumbnail [100%x225]","data-holder-rendered","true",1,"card-img-top",2,"height","225px","width","100%","display","block",3,"src"],[1,"card-body"],[1,"text-body-secondary"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"i",3),e.qZA()(),e.TgZ(4,"label",4),e._uU(5,"Detalhes do estabelecimento"),e.qZA(),e._UZ(6,"div",5),e.qZA(),e.YNc(7,a,32,12,"ng-container",6),e.ALo(8,"async"),e.TgZ(9,"div",7)(10,"div",8),e._UZ(11,"div",9,10),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,1,n.establishments$)))},dependencies:[m.ez,m.O5,m.Ov,h.Bz,h.rH],styles:["p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.navbar[_ngcontent-%COMP%]{padding:8px 0}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{margin-left:10px}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]   .navbar-icon[_ngcontent-%COMP%]{font-size:25px;color:#000;padding:8px 0}"]}),g})()}}]);